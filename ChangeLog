2003-02-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimpobject.c (gimp_object_set_name_safe): replaced with
	an UTF-8 safe rewrite.

	* app/widgets/gimpwidgets-utils.c (gimp_table_attach_stock): hacked
	to allow being used with non-existent stock_ids (for prototyping).

	* app/widgets/gimpenummenu.c: set the radio button mode correctly.

	* app/widgets/gimpfontselection.c: tweaked spacing.

	* app/tools/gimptextoptions.c: added controls for justification and
	indentation. Removed letter-spacing control for now.

	* app/text/gimptextlayer.[ch]: rerender the text layer from a low
	priority idle function.

2003-02-05  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c
	* app/tools/gimpblendoptions.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpinktool.c
	* app/tools/gimppainttool.c
	* app/tools/paint_options.c: use GIMP_CONTEXT(tool_options)
	instead of gimp_get_current_context(). Cleanup.

2003-02-05  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-dnd.c: should have gone with my
	previous checkin.

2003-02-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimpobject.[ch]
	* app/text/gimptextlayer.c: improved the code that trims the text
	before setting it as layer name and moved it to GimpObject as
	gimp_object_set_name_safe().

	* app/text/gimptext.[ch]: removed fixed_height and gravity again.

	* app/text/gimptextlayout.c: much simpler positioning that has the
	advantage that it actually works.

	* libgimpproxy/gimpobject.[ch]: this crap was regenerated.

2003-02-05  Michael Natterer  <mitch@gimp.org>

	Made GimpToolOptions a GimpContext subclass and objectified
	all tool options types.

	* app/core/core-types.h: replaced GimpToolOptionsNewFunc by
	GimpToolOptionsGUIFunc.

	* libgimpproxy/gimpproxytypes.h: regenerated.

	* app/core/gimppaintinfo.[ch]: added "GType paint_options_type".

	* app/core/gimptoolinfo.[ch]: added "GType tool_options_type",
	removed tool_info->context since GimpToolOptions are a GimpContext
	now. Added "gboolean use_context" as a temp_hack.

	* libgimptool/gimptooltypes.h: added the tool_options_type to
	the tool registering callback.

	* app/tools/tool_options.[ch]: is a real GimpContext subclass now.

	* app/paint/paint-types.h
	* app/paint/paint.c: added the paint_options_type to the paint
	registering stuff.

	* app/paint/gimppaintoptions.[ch]: is a real GimpToolOptions
	subclass now.

	* app/paint/Makefile.am
	* app/paint/gimpairbrushoptions.[ch]
	* app/paint/gimpcloneoptions.[ch]
	* app/paint/gimpconvolveoptions.[ch]
	* app/paint/gimpdodgeburnoptions.[ch]
	* app/paint/gimperaseroptions.[ch]
	* app/paint/gimpsmudgeoptions.[ch]: new files holding
	GimpPaintOptions subclasses.

	* app/paint/gimpairbrush.[ch]
	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.[ch]
	* app/paint/gimpdodgeburn.[ch]
	* app/paint/gimperaser.[ch]
	* app/paint/gimppaintbrush.c
	* app/paint/gimppaintcore.c
	* app/paint/gimppencil.[ch]
	* app/paint/gimpsmudge.[ch]: removed paint options stuff, lots
	of related changed & cleanups.

	* tools/pdbgen/pdb/paint_tools.pdb: changed accordingly.

	* app/pdb/paint_tools_cmds.c: regenerated.

	* app/tools/Makefile.am
	* app/tools/gimpblendoptions.[ch]
	* app/tools/gimpbucketfilloptions.[ch]
	* app/tools/gimpcolorpickeroptions.[ch]
	* app/tools/gimpcropoptions.[ch]
	* app/tools/gimpflipoptions.[ch]
	* app/tools/gimpinkoptions.[ch]
	* app/tools/gimpmagnifyoptions.[ch]
	* app/tools/gimpmeasureoptions.[ch]
	* app/tools/gimpmoveoptions.[ch]
	* app/tools/gimptextoptions.[ch]
	* app/tools/gimpvectoroptions.[ch]: new files holding the various
	tool options classes.

	* app/tools/selection_options.[ch]
	* app/tools/transform_options.[ch]: made them objects.

	* app/tools/paint_options.[ch]: contains only the paint_options
	GUI and reset stuff.

	* app/tools/tools-types.h: removed SelectionOptions typedef for
	now.

	* app/tools/[all tools]: removed the tool options stuff except
	some GUI constructors. Tons of related changes.

	* app/tools/tool_manager.[ch]: changed tool registration / restore /
	switching accordingly.

	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimpselectioneditor.c: changed accordingly.

2003-02-05  Sven Neumann  <sven@gimp.org>

	* app/text/gimptext.c: added some blurbs that will show up as
	tooltips in the text tool options. Tweaked default values.
	
	* app/text/gimptextlayout.c (gimp_text_layout_position): if
	gravity is none (the default), position the layout according to its
	justification.

	* app/widgets/gimpenummenu.[ch]: added new functions that create a
	hbox of radio buttons with icons from an enum type.

	* app/widgets/gimppropwidgets.[ch]: added a property widget
	constructor for the new enum_stock_box.

2003-02-05  Sven Neumann  <sven@gimp.org>

	* app/text/text-enums.[ch]
	* app/text/gimptext.[ch]: replaced GimpTextAlignment with
	GimpTextJustification. Added indentation property.

	* app/text/gimptextlayout.c: implemented text justification,
	indentation and line spacing as far as supported by Pango.

2003-02-05  Sven Neumann  <sven@gimp.org>

	* app/text/gimptextlayer.c
	* app/tools/gimptexttool.c: fixed includes.

2003-02-05  Sven Neumann  <sven@gimp.org>

	* app/paint/Makefile.am: fixed rules for generated sources.

	* app/text/Makefile.am
	* app/text/text-enums.[ch]: added new files with text-related enums.

	* app/text/gimptext.[ch]: added text alignment property.

	* app/text/gimptext-render.[ch]: removed

	* app/text/text-types.h
	* app/text/gimptextlayout.[ch]: added new files that define
	GimpTextLayout, a wrapper around PangoLayout. Moved render code to
	this file.

	* app/text/gimptextlayer.c: changed accordingly.

2003-02-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpitemfactory.c (gimp_item_factory_item_key_press):
	made the ugly hack that prevents users from reassigning the F1
	shortcut even more ugly but fixed bug #105068.

2003-02-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/gimpressionist.h
	* plug-ins/gimpressionist/*.c
	* plug-ins/imagemap/imap_rectangle.c: fixed includes to make it
	compile again.
	
2003-02-04  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/polar.c (dialog_update_preview): use 
	gimp_get_bg_guchar routine.

	* libgimp/gimpmiscui.[ch]: extracted a few reusable routines from
	plasma.c and put them in here.

	* plug-ins/common/plasma.c: fix for #105062 plus the usual code
	clean-up.

2003-02-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfontselection-dialog.c: use gtk_window_present()
	to raise the dialog; some code cleanup.

2003-02-04  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-selection.[ch]
	* app/tools/gimpblendtool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c: misc trivial changes and cleanup.

	* app/widgets/gimppropwidgets.[ch]: added gimp_prop_unit_menu_new()
	and removed the scale widget again.

	* app/tools/gimptexttool.c: replaced the size scale entry with a
	spinbutton and made the unit menu working.

	* app/text/gimptext.c: increased the upper boundary for the font
	size again now that we don't use a scale any longer.

2003-02-03  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfontselection-dialog.c: changed the text used in
	the preview.
	
	* app/widgets/gimpfontselection.[ch]: removed the yes/no image
	that used to signal a valid font but stopped working a long time
	ago.

	* app/widgets/gimppropwidgets.c: added a property widget for fonts.

	* app/tools/gimptexttool.c: use the new prop_widget.

2003-02-03  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: fixed the "TAB toggles
	dialogs" feature.

	(gimp_display_shell_get_event_coords,device_coords): CLAMP() all
	extended axes to be safe against crappy XInput drivers and provide
	default values for not existing axes.

2003-02-03  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpscanner.c (gimp_scanner_parse_int): handle
	negative integers.

	(gimp_scanner_parse_string[no_validate]): return NULL for empty
	strings (don't simply leave the return location untouched).

2003-02-03  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.c
	(gimp_config_deserialize_fundamental): handle negative integers.

	* app/core/gimp.c (gimp_edit_config_notify): commented out
	debugging output.

2003-02-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: applied another patch from
	David Necas <yeti@physics.muni.cz> that fixes #82470. Added some
	stock icons and mnemonics.

2003-02-03  Michael Natterer  <mitch@gimp.org>

	* app/undo.c: unified some comments, some cleanup.

	* app/pdb/procedural_db.c: some cleanup & comments to clarify
	what GIMP_PDB_PASS_THROUGH does.

2003-02-03  Michael Natterer  <mitch@gimp.org>

	* app/display/Makefile.am: removed the "truly ugly hack"...

	* app/Makefile.am: ...and changed the linking order instead.

	* app/base/Makefile.am
	* app/core/Makefile.am
	* app/paint/Makefile.am
	* app/widgets/Makefile.am: fixed typo.

2003-02-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.[ch]: removed gimp_main_loop() and
	gimp_main_loop_quit() because they were a temp_hack until plug-ins
	have their own main loops. Added gimp_threads_enter() and
	gimp_threads_leave() instead.

	* app/gui/gui.c: ditto: removed the main loop stuff and added
	functions which call GDK_THREADS_ENTER() and GDK_THREADS_LEAVE()
	instead.

	* app/app_procs.c: create the main GMainLoop here and use
	gimp_threads_enter,leave().

	* app/plug-in/plug-in.[ch]: added a ref_count per plug-in so the
	plug-in is not destroyed under our feet while running a recursive
	main loop. Added plug_in_ref(). Changed plug_in_destroy() to
	plug_in_unref(). Don't destroy the plug-in if plug_in_open()
	fails. Call gimp_threads_enter,leave() around g_main_loop_run().
	Changed the way plug_in_push,pop() are used: "current_plug_in" is
	no longer the plug-in which currently uses the wire, but the
	plug-in which currently preforms a PDB call (the former meaning
	was needed when wire callbacks had no plug-in context but needed
	to get the plug-in from the global "current_plug_in" variable).
	Removed all calls to plug_in_push,pop() from this file.

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_run): added
	plug_in_push,pop() around procedural_db_execute(). No need
	to construct an error return value if the procedure was not found
	because procedural_db_execute() already does this.

	Removed all other plug_in_push,pop(). Added more checks to plug-in
	message handlers and kill the plug-in if it misbehaves. Cleanup.

	* app/plug-in/plug-in-progress.c (plug_in_progress_cancel): if the
	plug-in runs synchronously, provide a GIMP_PDB_CANCEL return value
	so we don't see error messages about the "failed" procedure.

	* app/plug-in/plug-in-run.c: removed plug_in_push,pop() stuff.
	Set the new plug_in->starting_ext boolean while starting an
	extension so the extension_ack handler knows that it wasn't called
	from a buggy plug-in. Cleanup.

	* app/plug-in/plug-ins.c: Cleanup.

2003-02-03  Sven Neumann  <sven@gimp.org>

	Some code cleanup while trying to fix bug #105062:

	* libgimp/gimpmisc.[ch]: moved the declaration of the
	GimpPixelFetcher struct to the .c file since noone should ever
	access it directly.

	* libgimp/gimpmiscui.c: cosmetics.

	* plug-ins/common/plasma.c: code cleanup, doesn't fix #105062.

2003-02-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: fixed some issues (mainly
	coding style) with the new load and save routines.

2003-02-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: applied a large patch from
	David Necas <yeti@physics.muni.cz> that fixes a couple of bugs and
	adds some additional features. Fixes bugs #82466, #82472 and
	#82473 and addresses bug #82470.

2003-02-02  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorbutton.c (gimp_color_button_clicked):
	fixed usage of gtk_color_selection_set_has_opacity_control().

2003-02-01  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimp/gimpmiscui.[ch]: factored out more preview stuff from
	several plug-ins.

	* plug-ins/common/waves.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c 
	* plug-ins/common/noisify.c: more code clean-up

2003-02-01  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.[ch]
	* app/config/gimpconfig-utils.[ch]: added a reset method to
	GimpConfigInterface. Added the new function gimp_config_reset()

	* app/text/gimptext.c: added a GimpConfigInterface to GimpText.

	* app/widgets/Makefile.am
	* app/widgets/gimptexteditor.[ch]: new files that hold the simple
	text editor dialog used by the text tool.

	* app/widgets/gimppropwidgets.[ch]: added new widget constructor
	gimp_prop_scale_entry_new().

	* app/tools/gimptexttool.[ch]: replaced old-style ToolOptions with
	a GimpText object. Connect text layers to the text tool by means
	of their GimpText objects. Still work in progress ...

2003-02-01  Sven Neumann  <sven@gimp.org>

	* app/text/gimptextlayer.c (gimp_text_layer_position_layout):
	handle GIMP_GRAVITY_NONE.

2003-02-01  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.c: fixed a comment.

2003-01-31  Manish Singh  <yosh@gimp.org>

	* app/text/gimptextlayer.c: #include <string.h>

2003-01-31  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: added GIMP_GRAVITY_NONE.

2003-01-31  Sven Neumann  <sven@gimp.org>

	* app/text/gimptextlayer.c: don't use gimp_drawable_configure() to
	resize the text layer, it should only ever be called once. Take
	the logical rectangle into account when calculating the layer size
	and text position.

	* app/tools/gimptexttool.[ch]: added basic text editing
	functionality. Needs more work ...
	
	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-gravity-east-24.png
	* themes/Default/images/stock-gravity-north-24.png
	* themes/Default/images/stock-gravity-north-east-24.png
	* themes/Default/images/stock-gravity-north-west-24.png
	* themes/Default/images/stock-gravity-south-24.png
	* themes/Default/images/stock-gravity-south-east-24.png
	* themes/Default/images/stock-gravity-south-west-24.png

	* themes/Default/images/stock-gravity-west-24.png: added new icons
	for yet-to-written GimpGravityChooser(?) widget. Artwork
	shamelessly taken from Jimmac's XFree cursors.

	* libgimpwidgets/gimpstock.[ch]: added stock items for the new icons.

2003-01-31  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpitem.[ch]: added gimp_item_configure() and
	gimp_item_copy().

	* app/core/gimpdrawable.c (gimp_drawable_configure,copy): use them.

	* app/vectors/gimpvectors.[ch]: added gimp_vectors_new(),
	gimp_vectors_copy() and gimp_vectors_copy_points(). Use the new
	GimpItem functions just as GimpDrawable does. Added a
	get_memsize() implementation.

	* app/vectors/gimpstroke.[ch]: made it a GimpObject and added
	a get_memsize() implementation.

	* app/undo.c: implemented vectors undo as if the new GimpVectors
	functions above worked.

	* app/gui/dialogs-constructors.c
	* app/gui/vectors-commands.c
	* app/tools/gimpvectortool.c: use gimp_vectors_new,copy().

2003-01-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable.[ch]: added offset_x and offset_y to
	gimp_drawable_configure().

	* app/core/gimpchannel.c
	* app/core/gimplayer.c
	* app/core/gimplayermask.c: changed accordingly.

	* app/text/gimptextlayer.[ch]: update the layer when the associated
	GimpText object changes.

2003-01-31  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfontselection.c: allow NULL as context parameter
	in gimp_font_selection_new(). The widget then uses a default
	PangoFT2Context.

	* app/tools/gimptexttool.c (text_tool_options_new): call
	gimp_font_selection_new() with a NULL context. The text tool now
	doesn't know about Pango any longer.

	* app/paint/Makefile.am
	* app/tools/Makefile.am (INCLUDES): removed PANGOFT2_CFLAGS.

2003-01-31  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: added new enum GimpGravityType.

	* app/text/gimptext.[ch]
	* app/text/gimptextlayer.[ch]: added support for specifying a
	fixed layer size and how to position the text inside the layer.

	* app/text/gimptext-compat.c
	* app/tools/gimptexttool.c: changed accordingly.

2003-01-31  Michael Natterer  <mitch@gimp.org>

	* app/gui/file-dialog-utils.[ch] (file_dialog_update_menus): removed.

	* app/gui/file-save-menu.[ch] (file_save_menu_update): added here.

	* app/gui/menus.c: register it as non-automatic update_func.

	* app/gui/file-save-dialog.c: changed accordingly.

2003-01-31  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-params.h

	* app/config/gimpcoreconfig.c: added a pixels parameter to the
	GIMP_CONFIG_INSTALL_PROP_UNIT() macro.

	* app/core/Makefile.am
	* app/core/gimpimage-text.[ch]: removed these two files.

	* app/text/Makefile.am
	* app/text/gimptext-compat.[ch]: new files with compatibility
	routines that provide the old text API (solely for PDB calls).

	* app/text/gimptext-render.[ch]: new files with text rendering
	routines (not much yet).

	* app/text/text-types.h
	* app/text/gimptextlayer.[ch]: new object derived from GimpLayer.

	* app/text/gimptext.[ch]: prepared for future improvements.

	* app/pdb/text_tool_cmds.c
	* app/tools/gimptexttool.c
	* tools/pdbgen/pdb/text_tool.pdb: changed accordingly.

2003-01-30  Manish Singh  <yosh@gimp.org>

	* app/undo_history.c
	* libgimp/gimpmenu.c
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/jpeg.c
	* plug-ins/common/screenshot.c
	* plug-ins/gap/gap_navigator_dialog.c
	* plug-ins/gflare/gflare.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_polygon.c: changed gtk_{timeout,idle} stuff
	to their glib equivalents. Minor cleanups also with support code.

	* plug-ins/dbbrowser/dbbrowser_utils.c (gimp_db_browser): use
	gtk_entry_set_activates_default()

2003-01-30  Seth Burgess <sjburges@gimp.org>
	
	* plug-ins/common/laplace.c: fixed off-by-1 error that caused 
	gimp_pixel_rgn_get_row() critical warnings (but managed to work).

2003-01-30  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Vietnamese (vi) to ALL_LINGUAS

2003-01-30  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/ps.c (save_dialog): corrected small error with
	mnemonic.

2003-01-30  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/c_astretch.c
	* plug-ins/common/edge.c
	* plug-ins/common/cubism.c: code clean-up, plugged a few memory leaks

2003-01-30  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcompat.h: removed GIMP_ENABLE_COMPAT_CRUFT guards.
	The file needs to be included explicitely anyway.

2003-01-30  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in.[ch]: renamed plug_in->busy to
	plug_in->in_temp_proc. Added a stack of GMainLoops to each
	plug-in. Added the "current_return_vals" to the PlugIn
	struct. Renamed plug_in_kill() to plug_in_exit(). Removed
	the stuff added below. Cleanup.

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-message.[ch]
	* app/plug-in/plug-in-run.[ch]
	* app/plug-in/plug-in-shm.[ch]: new files taking out functionality
	from the overloaded plug-in.c. Added the code back in that implements
	temp proc return messages (inside an #ifdef) because i don't
	really get why it was removed on Sep 19 1998.

	* app/plug-in/plug-ins.c: changed accordingly.

	* app/plug-in/plug-in-def.c
	* app/plug-in/plug-in-params.c: removed inclusion of <gtk/gtk.h>.

	* app/gui/file-save-dialog.c
	* app/gui/paths-dialog.c
	* app/gui/plug-in-commands.c
	* app/gui/plug-in-menus.c
	* app/pdb/procedural_db.c
	* app/widgets/gimphelp.c: changed plug-in includes accordingly.

	* app/gui/plug-in-commands.c: don't use "the_gimp" from
	"app_procs.h" but get it from the GimpItemFactory that invoked the
	plug-in callback.

2003-01-30  Nathan Summers  <rock@gimp.org>

	* app/tools/gimptoolgui.[ch]: GimpToolGui, a new class descended 
	from GimpObject to be used to separate GUI from logic.  Heavily
	inspired by GimpDrawTool.  Not actually used by anything yet.

2003-01-29  Manish Singh  <yosh@gimp.org>
                                                                                
	* plug-ins/common/jpeg.c (load_image): don't divide by zero if
	we get all zero resolution info when we load the jpeg.

2003-01-29  Sven Neumann  <sven@gimp.org>
	
	* configure.in
	* app/Makefile.am
	* app/text/Makefile.am: added new directory text.

	* app/text/text-types.h
	* app/text/gimptext.[ch]: moved GimpText object here.
	
	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpimage-text.c
	* app/tools/gimptexttool.c: changed accordingly.

2003-01-29  Michael Natterer  <mitch@gimp.org>

	Fixed bug #97449:

	* app/core/gimpchannel.c (gimp_channel_scale,resize)
	* app/core/gimplayer.c (gimp_layer_scale,resize)
	* app/undo.c (undo_pop_layer_mod,channel_mod): emit "size_changed"
	whenever the size has changed. Cleaned up the two undo_pop
	functions.

	* app/core/gimpimage.c (gimp_image_size_changed): emit
	"size_changed" on all layers/channels so their previews are
	updated correctly on image resize and image resize undo. Don't
	invalidate layers/channels previews here because it's the
	layers'/channels' job to invalidate themselves if needed.

2003-01-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppropwidgets.[ch]: removed unused function
	gimp_prop_enum_option_menu_new_with_values() which caused problems
	on some platforms (fixes bug #102514).

	* app/gui/preferences_dialog.c: removed some unused code.

2003-01-29  Michael Natterer  <mitch@gimp.org>

	* app/gui/module-browser.c: pack the button box non-expanding,
	removed cruft from the ModuleBrowser struct.

2003-01-28  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/color_enhance.c: 
	* plug-ins/common/gradmap.c: minor code clean-up

2003-01-28  Tor Lillqvist  <tml@iki.fi>

	* libgimp/gimpui.def: Add missing entry points.

	* plug-ins/common/plugin-defs.pl: Mark bz2, mail, screenshot and
	url as optional (not built on Win32). Ditto for winclipboard and
	winprint (Win32 only).

	* plug-ins/common/mkgen.pl: Use -mwindows on Win32.

	* plug-ins/common/Makefile.am
	* plug-ins/common/.cvsignore: Regenerated.

	* configure.in: Correspondingly conditionally define BZ2, MAIL,
	SCREENSHOT, URL, WINCLIPBOARD and WINPRINT, and AC_SUBST them.
	Set XJT to empty always on Win32 (uses tar, mv and bzip2, which
	aren't usually available).
	
2003-01-27  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/sample_colorize.c: code clean-up, added a few more
	mnemonics to dialogs.

	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/FractalExplorer/FractalExplorer.c: use new
	gimp_plug_in_parse_path routine.

	* libgimp/gimpmiscui.[ch] (gimp_plug_in_parse_path): new routine used
	in several plug-ins.

2003-01-27  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c: commented out debugging output.

2003-01-27  Sven Neumann  <sven@gimp.org>

	* configure.in
	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl
	* plug-ins/common/mpeg.c: removed the MPEG plug-in. It has been
	broken, unmaintained and caused nothing but trouble (#51400,
	#104522).

2003-01-26  Tor Lillqvist  <tml@iki.fi>

	* libgimptool/gimptool.def
	* libgimpwidgets/gimpwidgets.def: Add some missing entry points.

2003-01-26  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushpipe.c
	* app/gui/about-dialog.c: plugged some obvious memleaks related to
	the use of GRand.

2003-01-26  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-ins.c
	* libgimp/libgimp-intl.h
	* libgimpwidgets/gimpstock.c
	* plug-ins/perl/Gimp.xs
	* plug-ins/script-fu/script-fu.c
	* plug-ins/script-fu/script-fu-intl.h: replaced all remaining
	"gimp14" by GETTEXT_PACKAGE.

2003-01-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/png.c: added a tooltip describing the
	compression level scale as suggested in #68485.

2003-01-26  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h: removed the description of the image
	title format string from the blurb ...
	
	* app/config/gimpconfig-dump.c: ... and added it here.  Slightly
	improved manpage formatting.

	* app/config/gimpconfig-deserialize.c: fixed a typo.

	* docs/gimprc-1.3.5.in
	* etc/gimprc: regenerated.

2003-01-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppropwidgets.c: add a tooltip if a param_spec has
	a non-NULL blurb. Addresses bug #68485.

	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimprc-blurbs.h: marked some blurbs as translatable.

	* Makefile.am
	* app/config/Makefile.am: added dist-hooks so the system gimprc
	and gimprc manpage get generated when doing a release.
	
	* libgimpwidgets/gimpmemsizeentry.[ch]: added the spinbutton to
	the GimpMemsizeEntry struct so we can access it in order to add
	a tooltip.

2003-01-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/widgets-enums.h: added a new enum to specify how to
	display histograms.

	* app/widgets/widgets-enums.c: regenerated.

	* app/widgets/gimphistogramview.[ch]: added a scale property and
	made channel a property. Added support for linear histograms based
	on a patch from Akkana (see bug #72951).

	* app/widgets/gimphistogrambox.c: redraw the gradient when the
	histogram view notifies it that the displayed channel has changed.

	* app/tools/gimphistogramtool.c: added a menu to configure the
	histogram scale.

2003-01-24  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdocumentlist.[ch]
	* app/core/gimpimagefile.[ch]: added "Gimp" pointers so we don't
	need to use "the_gimp" from "app_procs.h".

	* app/core/core-types.h
	* app/core/gimp.c
	* app/gui/file-open-dialog.c
	* tools/pdbgen/pdb/fileops.pdb: changed accordingly.

	* app/pdb/fileops_cmds.c: regenerated.

2003-01-23  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c: use bpl (line pitch) when
	iterating over the buffer. Added a simple color cache that speeds
	up the filter for images that only use a few colors.

2003-01-23  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c: moved some intialisation code out
	of the convert method. Added NONE as possible choice of deficiency
	so you can switch the filter on and off more easily.	

2003-01-23  Sven Neumann  <sven@gimp.org>

	* docs/gimp-1.3.1.in
	* docs/gimp-remote-1.3.1.in
	* docs/gimptool-1.3.1.in: applied a patch from Carol that unifies
	the spelling of GIMP in the man-pages.

2003-01-23  Michael Natterer  <mitch@gimp.org>

	* modules/cdisplay_colorblind.c: Bob Dougherty <bobd@stanford.edu>
	and Alex Wade <wade@ski.org> added the code needed to make this
	filter actually do something useful. Thanks for this contribution.
	Addresses bug #101256.

2003-01-23  Sven Neumann  <sven@gimp.org>

	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c: added default values for brush,
	pattern, palette, gradient and theme.

	* app/config/gimpconfig-dump.c: set a value for module-load-inhibit
	so it gets documented as well.

	* docs/gimprc-1.3.5.in
	* etc/gimprc: regenerated using gimpconfig-dump.

2003-01-22  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-dump.c
	* app/config/gimprc-blurbs.h: applied a patch from Carol that adds
	missing help blurbs and fixes spelling.

	* docs/gimprc-1.3.5.in
	* etc/gimprc: regenerated using gimpconfig-dump.

2003-01-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimphelp.c (gimp_help_internal): "no display ID"
	is "-1", not "0".

2003-01-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/AlienMap2.c: applied patch from Martin Weber
	that removes an outdated link (#103976).

2003-01-20  Sven Neumann  <sven@gimp.org>

	* app/gui/info-dialog.c (info_dialog_add_label): made labels in
	the info dialog selectable as suggested in #103991.

2003-01-20  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-progress.[ch]: renamed plug_in_progress_init()
	to plug_in_progress_start() so it matches plug_in_progress_end().
	Added g_return_if_fail() to all functions.

	* app/plug-in/plug-in.[ch]: plug_in_new(): require the passed
	path to be absolute. Removed plug_in_search_in_path(). Replaced
	some if(plug_in){...} by g_return_if_fail(plug_in!=NULL). Cleanup.

	* app/plug-in/plug-ins.c: plug_ins_def_add_from_rc(): refuse to
	add plug_in_defs with non-absolute paths (should never happen).
	Misc cleanup all over the place like s/GSList *tmp/GSList *list/.

	* app/plug-in/plug-in-params.c: cleanup.

	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly.

	* app/pdb/plug_in_cmds.c: regenerated.

	* app/gui/brush-select.c
	* app/gui/gradient-select.c
	* app/gui/palette-select.c
	* app/gui/pattern-select.c: some code review & cleanup.

2003-01-19  Tor Lillqvist  <tml@iki.fi>

	* libgimp/gimp.def: Add gimp_show_tool_tips.

2003-01-19  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/screenshot.c
	* plug-ins/common/ps.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/xbm.c
	* plug-ins/common/engrave.c
	* plug-ins/common/gtm.c
	* plug-ins/common/csource.c: added mnemonics to dialogs.

2003-01-19  Sven Neumann  <sven@gimp.org>

	* app/main.c: just a minor string change.

	* modules/Makefile.am: minor cleanup

	* plug-ins/libgck/gck/gck.h
	* plug-ins/libgck/gck/gckcolor.c: removed unused functions.

2003-01-18  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/CML_explorer.c (CML_next_value): g_rand_new is a
	terribly expensive function, not something you want to execute
	several million times! Fixes #103025

2003-01-17  Michael Natterer  <mitch@gimp.org>

	One more Plug-In cleanup, it's still a mess...

	* app/plug-in/plug-in-def.[ch]: renamed "gboolean query" field
	to "needs_query". Added setters for all values. Added
	g_return_if_fail() stuff to all functions.

	* app/plug-in/plug-in-proc.[ch]: added plug_in_proc_def_new().
	Removed the "gboolean data_only" parameter from
	plug_in_proc_def_destroy() and renamed it to
	plug_in_proc_def_free().  Added plug_in_proc_def_get_progname()
	which handles GIMP_TEMPORARY procedures correctly.

	* app/plug-in/plug-in-rc.c: use the new stuff above.

	* app/plug-in/plug-in.[ch]: renamed field "user_data" to
	"plug_in_def" and added a comment that it is valid only during
	query() and init().  Use the new APIs above. Pass meaningful
	locale_domains and help_paths when adding temporary procedures
	(fixes Scrip-Fu menu translation the right way (TM)). Cleanup.

	* app/plug-in/plug-ins.[ch]: renamed plug_ins_def_add() to
	plug_ins_def_add_from_rc(). Renamed plug_ins_proc_def_[add|remove]()
	to plug_ins_temp_proc_def_[add|remove](). Added "Gimp" parameters
	to plug_ins_help_path() and plug_ins_locale_domain(). Removed
	unused pre-1.2 cruft "gimprc_prof_defs" and plug_ins_image_types().
	Reverse gimp->load_procs and gimp->save_procs after all procedures
	are registered. Removed Script-Fu translation hack. Reordered stuff.

	* app/gui/plug-in-menus.[ch]: changed accordingly. Named all
	public functions plug_in_menus_*(). Fixed Script-Fu menu translation
	by using plug_in_proc_def_get_progname(). Cleanup.

	* app/gui/file-open-menu.c
	* app/gui/file-save-menu.c: don't g_slist_reverse() gimp->load_procs
	and gimp->save_procs here.

	* app/gui/toolbox-menu.c
	* app/gui/image-menu.c
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly.

	* app/pdb/help_cmds.c
	* app/pdb/plug_in_cmds.c: regenerated.

	Unrelated:

	* app/gui/image-menu.c
	* app/widgets/gimpitemfactory.c: s/"tearoff1"/"tearoff"/g. I don't
	get why the "1" was there. Minor cleanup.

2003-01-17  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/sinus.c: fixes #81966 plus some code clean-up.

2003-01-17  Sven Neumann  <sven@gimp.org>

	* app/tools/gimplevelstool.c
	* app/tools/gimpthresholdtool.c: moved the creation of the
	histogram object to the initialize method because we can't access
	tool_info->gimp in tool_init().

2003-01-15  Sven Neumann  <sven@gimp.org>

	Fixed bug #103561:

	* app/base/gimphistogram.[ch]: cleaned up multi-processor code,
	added a GimpBaseConfig parameter to gimp_histogram_new().

	* app/core/gimpdrawable-equalize.c
	* app/pdb/color_cmds.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpthresholdtool.c
	* tools/pdbgen/pdb/color.pdb: changed accordingly.

	* app/base/pixel-processor.c: some cleanup to the multi-processor
	code; use the global base_config variable :(

2003-01-14  Manish Singh  <yosh@gimp.org>

	* app/core/gimpchannel.h
	* app/core/gimpitem.c
	* app/display/gimpnavigationview.c
	* app/gui/paths-dialog.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimpscaletool.c
	* app/widgets/gimplistitem.c
	* libgimp/gimppixelrgn.c
	* libgimpwidgets/gimpunitmenu.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/common/aa.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/psd.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/snoise.c
	* plug-ins/common/spread.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/xjt/xjt.c: some minor code cleanup

	* plug-ins/common/csource.c: 64-bit cleanliness

2003-01-14  Manish Singh  <yosh@gimp.org>

	* configure.in: Oops, the configure.in change below didn't actually
	work. Refactored so it does.

2003-01-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (gimp_toolbox_set_geometry): added
	GDK_HINT_USER_POS again since it's set by gtk_window_parse_geometry()
	in gimpdialogfactory.c and we don't want to reset it.

2003-01-14  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimprectselecttool.c: must use N_() instead of _()
	when registering tool menu entries.

2003-01-14  Sven Neumann  <sven@gimp.org>

	* app/gui/image-menu.c
	* plug-ins/common/threshold_alpha.c: applied a patch from Henrik
	Brix Andersen that changes the Alpha menu to Transparency (#89275).

2003-01-13  Manish Singh  <yosh@gimp.org>

	* configure.in: Partially address #102058 with a --with-shm configure
	option. Defaults to sysv except on OS X, where it is none.

2003-01-13  Michael Natterer  <mitch@gimp.org>

	* app/gui/brushes-menu.[ch]
	* app/gui/buffers-menu.[ch]
	* app/gui/channels-menu.[ch]
	* app/gui/colormap-editor-menu.[ch]
	* app/gui/dialogs-menu.[ch]
	* app/gui/documents-menu.[ch]
	* app/gui/file-open-menu.[ch]
	* app/gui/file-save-menu.[ch]
	* app/gui/gradient-editor-menu.[ch]
	* app/gui/gradients-menu.[ch]
	* app/gui/image-menu.[ch]
	* app/gui/images-menu.[ch]
	* app/gui/layers-menu.[ch]
	* app/gui/palette-editor-menu.[ch]
	* app/gui/palettes-menu.[ch]
	* app/gui/patterns-menu.[ch]
	* app/gui/qmask-menu.[ch]
	* app/gui/toolbox-menu.[ch]
	* app/gui/vectors-menu.[ch]: new files, one per GimpItemFactory,
	containing the menu entries and their setup and update funcs.

	* app/gui/brushes-commands.[ch]
	* app/gui/patterns-commands.[ch]: removed because they contained
	only update funcs.

	* app/gui/Makefile.am: changed accordingly. Split the huge
	SOURCES list in smaller ones for menus and dialogs.

	* app/gui/menus.[ch]: removed the menu entries and setup funcs.
	Added MENU_SEPARATOR() and MENU_BRANCH() macros to the header.
	Made some utility functions public.

	* app/display/gimpdisplayshell.[ch]
	* app/gui/buffers-commands.[ch]
	* app/gui/channels-commands.[ch]
	* app/gui/colormap-editor-commands.[ch]
	* app/gui/dialogs-commands.[ch]
	* app/gui/documents-commands.[ch]
	* app/gui/gradient-editor-commands.[ch]
	* app/gui/gradients-commands.[ch]
	* app/gui/images-commands.[ch]
	* app/gui/layers-commands.[ch]
	* app/gui/palette-editor-commands.[ch]
	* app/gui/palettes-commands.[ch]
	* app/gui/qmask-commands.[ch]
	* app/gui/vectors-commands.[ch]: removed the update funcs.

	* app/gui/plug-in-menus.[ch]: renamed plug_in_set_menu_sensitivity()
	to plug_in_menus_update(). Cleanup.

	* app/gui/paths-dialog.[ch]: added the <Paths> entries here
	so they will go away together with these files.

	* app/gui/dialogs-constructors.c
	* app/gui/drawable-commands.c: removed useless #includes.

2003-01-13  Sven Neumann  <sven@gimp.org>

	Changed my mind again and decided that gimpconfig-dump should
	create gimprc-1.3.5.in and have configure process it.
	
	* app/config/Makefile.am
	* app/config/gimpconfig-dump.c: create gimprc-1.3.5.in to be
	processed by configure.

	* configure.in
	* docs/Makefile.am
	* docs/gimprc-1.3.5: removed again ...
	* docs/gimprc-1.3.5.in: ... and replaced with a new version
	generated by gimpconfig-dump.

2003-01-13  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-dump.c
	* app/config/gimpconfig-serialize.c: more work on gimpconfig-dump.

	* configure.in
	* docs/Makefile.am
	* docs/gimprc-1.3.5.in: removed ...
	* docs/gimprc-1.3.5: ... and replaced with a new version generated
	using gimpconfig-dump (although it's not perfect yet).

2003-01-12  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/plugin-def.pl
	* plug-ins/common/psd_save.c
	* plug-ins/common/Makefile.am
	* plug-ins/common/.cvsignore: Finally added PSD save support 

2003-01-12  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/plugin-def.pl
	* plug-ins/common/Makefile.am
	* plug-ins/common/.cvsignore: Commented out the psd_save.c bit for
	now, looks like bolsh forgot to cvs add the file.

2003-01-12  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpitemlistview.c: pass the GimpItemListView as
	"data" to the item_factory callbacks, not just a "Gimp" pointer.

	* app/display/gimpdisplayshell.c: use
	gtk_window_add_accel_group(), not gimp_window_add_accel_group()
	because we now attach the menubar's accel group, which has the
	GimpDisplay as callback data.

	* app/display/gimpdisplayshell-callbacks.c: pass the GimpDisplay
	as "popup_data" to *_item_factory_popup_with_data().

	* app/gui/channels-commands.c
	* app/gui/drawable-commands.c
	* app/gui/layers-commands.c
	* app/gui/vectors-commands.c: changed accordingly.

	* app/widgets/gimpwidgets-utils.[ch]: removed
	gimp_window_[add|remove]_accel_group() and
	gimp_widget_get_callback_context() because they were evil hacks
	which are no longer needed now that all item_factories have proper
	callback data (no just Gimp pointers).

2003-01-12  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/plugin-def.pl
	* plug-ins/common/psd_save.c
	* plug-ins/common/Makefile.am
	* plug-ins/common/.cvsignore: Added PSD save support (alpha) to
	devel branch, from a plug-in written by Monignotes (?). This 
	should be integrated into the main PSD plug-in before 1.4 - or 
	should at least use the same PsdImage structure.

2003-01-11  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am: reverted my latest change since it broke
	the build in a fresh CVS checkout. Instead added make targets to
	create a man-page and a default gimprc that take care of building
	gimpconfig-dump.

	* app/config/gimpconfig-dump.c: started to work on the man-page
	dump functionality.

2003-01-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimptoolbox.c: removed GDK_HINT_USER_POS and
	GDK_HINT_USER_SIZE again because they caused problems with some
	window managers. Instead, set the window's position with
	gtk_window_parse_geometry().

2003-01-11  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am: always build gimpconfig-dump.

	* app/config/gimpconfig-params.[ch]: added an enum to specify the
	type of path with GIMP_PARAM_SPEC_PATH.

	* app/config/gimpconfig-dump.c: document the different types of
	paths differently.

	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c: register the path types.

	* etc/gimprc: generated a new system gimprc.

	* plug-ins/common/tiff.c: added missing spaces in warning and
	removed trailing newlines in strings passed to g_message().

2003-01-10  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tiff.c (load_image): fix compilation error and
	split warning string over multiple lines.

2003-01-10  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c (app_init)
	* app/core/gimp.c (gimp_set_config): delayed the activation of
	gimprc-autosave so we don't write the monitor resolution obtained
	from GDK back to the gimprc on each startup.

	* app/gui/gui.c (gui_get_screen_resolution): round values to get
	rid of rounding errors introduced earlier. Looks better in the
	prefs dialog.

	* app/display/gimpdisplayshell-scale.c (gimp_display_shell_scale):
	merged fix for bug #94979 from stable branch. Go even further and
	don't limit the zoom ratio between 1:16 and 16:1.

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): merged
	fix for bug #103030 from stable branch.

2003-01-10  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tiff.c: trivial fix for #95737. Plug-in now displays
	a message when 16 bits per channel images are converted to 8 bits.

2003-01-10  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tiff.c (load_image): improved fix for #96611

2003-01-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolormapeditor.c
	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpdataeditor.c: pass the editor widget as
	callback_data to GtkItemFactory callbacks, not a "Gimp" pointer.

	* app/gui/buffers-commands.c
	* app/gui/colormap-editor-commands.c
	* app/gui/data-commands.c
	* app/gui/documents-commands.c
	* app/gui/gradient-editor-commands.c
	* app/gui/gradients-commands.c
	* app/gui/images-commands.c
	* app/gui/palette-editor-commands.c
	* app/gui/palettes-commands.c
	* app/gui/patterns-commands.c: simply cast the passed "data"
	pointer instead of calling gimp_widget_get_callback_context().
	Don't #include "widgets/gimpwidgets-utils.h".

2003-01-10  Michael Natterer  <mitch@gimp.org>

	Move away from creating all item_factories statically in
	menus_init() but create a new one for each place where one is
	needed:

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpmenufactory.[ch]: new factory which creates and
	configures the GimpItemFactories it knows about on-the-fly.

	* app/widgets/gimpitemfactory.[ch]: added
	gimp_item_factory_update() which calls the "update_func". Added
	"gboolean update_on_popup" so item_factories can be configured to
	require manual updates (used for the <Image> factory).

	* app/gui/menus.[ch]: create a "global_menu_factory" and register
	all menus we have with it. Added various setup functions which
	do stuff like adding the "Open Recent" menu or reorder plug-in
	menu entries. Removed the debugging stuff...

	* app/gui/Makefile.am
	* app/gui/debug-commands.[ch]: ...and added it here.

	* app/gui/gui.c: create the <Toolbox>, the popup-<Image> and the
	<Paths> factories here because they are still global.

	* app/gui/plug-in-menus.[ch]: changed the "image_factory"
	parameters to "item_factory" and create/update the entries for the
	passed item_factory only. Makes the whole stuff much more
	straightforward.

	* app/plug-in/plug-ins.c: don't call plug_in_make_menu().

	* app/display/gimpdisplay.[ch]
	* app/display/gimpdisplayshell.[ch]: added "menu_factory" and
	"popup_factory" parameters to gimp_display_new() and
	gimp_display_shell_new(). Create the menubar_factory and the
	qmask_factory dynamically. Pass the shell, not a Gimp to the QMask
	callbacks. Changed gimp_display_shell_set_menu_sensitivity() to
	gimp_display_shell_menu_update() and don't call it directly (it's
	a GimpItemFactory update_func now). Call gimp_item_factory_update()
	on the resp. factories instead.

	* app/gui/qmask-commands.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/tools/gimpimagemaptool.c: changed accordingly.

	* app/widgets/gimpbrusheditor.c
	* app/widgets/gimpbrushfactoryview.[ch]
	* app/widgets/gimpbufferview.[ch]
	* app/widgets/gimpcolormapeditor.[ch]
	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpdataeditor.[ch]
	* app/widgets/gimpdatafactoryview.[ch]
	* app/widgets/gimpdialogfactory.[ch]
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.[ch]
	* app/widgets/gimpdocumentview.[ch]
	* app/widgets/gimpgradienteditor.[ch]
	* app/widgets/gimpimageview.[ch]
	* app/widgets/gimpitemlistview.[ch]
	* app/widgets/gimppaletteeditor.[ch]: pass around lots of
	GimpMenuFactory pointers and menu_identifiers so all views can
	create their item_factories themselves. Unref the factories when
	they are no longer needed because they belong to the views now.

	* app/gui/dialogs-commands.c
	* app/gui/dialogs-constructors.c
	* app/gui/dialogs.c
	* app/gui/brush-select.c
	* app/gui/gradient-select.c
	* app/gui/palette-select.c
	* app/gui/pattern-select.c: changed accordingly.

	* app/gui/file-dialog-utils.[ch] (file_dialog_new): require
	menu_factory and menu_identifier parameters.

	* app/gui/file-open-dialog.[ch]
	* app/gui/file-save-dialog.[ch]: removed file_*_dialog_menu_init()
	(they went to menus.c as setup_funcs). Added file_*_dialog_set_type()
	and moved the <Load> and <Save> factory callbacks to file-commands.c

	* app/gui/file-commands.[ch]: changed accordingly.

	* app/gui/view-commands.c: changed the statusbar, menubar, rulers
	and guides callbacks to do their job only if the setting has
	actually changed. Don't update whole item factories afterwards.
	Instead, just change the state of the items that actually need
	update.

	Unrelated:

	* app/core/gimpchannel.c (gimp_channel_init): set "bounds_known"
	and friends to FALSE since we don't know that the new channel will
	be empty (fixes QMask and probably other stuff).

	* app/gui/image-commands.c
	* app/gui/vectors-commands.c: cleanup.

2003-01-10  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpstock.c (gimp_stock_init): fixed my last commit.

2003-01-10  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tiff.c (load_image): added handling of 
	TIFFTAG_ORIENTATION tag (fixes #96611).

2003-01-10  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpvectortool.c (gimp_vector_tool_button_press):
	create a new GimpVectors object if the tool has none. Cleanup.

2003-01-10  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpstock.[ch]: prefixed ALL, NONE, GROW and
	SHRINK with SELECTION_ since they should only be used for in a
	selection context. Register a few icons in dialog size as well.

	* app/gui/menus.c
	* app/widgets/gimpselectioneditor.c: changed accordingly.

	* themes/Default/images: renamed icons accordingly.

	* plug-ins/common/uniteditor.c: use stock items.

2003-01-10  Sven Neumann  <sven@gimp.org>

	* app/display/gimpstatusbar.c: fixed a compiler warning.

	* plug-ins/gfig/gfig.c: fixed preview code so that the plug-in is
	at least a bit useful again. Misc minor cleanups, still a mess.

2003-01-09  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c: fixed typos.

	* app/tools/xinput_airbrush.[ch]: removed from CVS; can always be
	resurrected from the Attic. The files kept getting in the way when
	grepping the source.
	
2003-01-09  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/mblur.c: fixes #83968 (Motion Blur filter: disable 
	parameters that have no effect)

2003-01-09  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h: fixed typo.

	* app/pdb/procedural_db.c (procedural_db_run_proc): always set the
	number of returned values, even in case of an error.

	* app/widgets/gimphelp.c: fix #65789 similar to how Tor did it in
	the stable branch.

2003-01-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/images/Makefile.am
	* plug-ins/gfig/images/stock-logo.png: new Gfig logo courtesy of
	Owen <oc@webone.com.au>.

	* plug-ins/gfig/gfig-stock.[ch]
	* plug-ins/gfig/gfig.c: use the new logo icon.

	* plug-ins/gfig/pix_data.h: removed the old one.

2003-01-09  Jakub Steiner <jimmac@ximian.com>

	* data/images/gimp_splash.png: new splash

2003-01-09  Sven Neumann  <sven@gimp.org>

	* app/main.c (main)
	* app/app_procs.c (app_init): combined console output into single
	messages to allow for better translation.

2003-01-09  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable.c (gimp_drawable_configure): use _("Unnamed")
	if no name was given. Fixes bug #89328 in a more general way.

	* plug-ins/common/psd.c: simply pass NULL as layer and channel
	name if the PSD file provides none.

2003-01-08  Manish Singh  <yosh@gimp.org>

	* app/gui.[ch]: make gui_libs_init() use gtk_init_check() and return
	a gboolean on success or failure.

	* app/main.c: reorganized so that --help and --version never need
	the gui to be initialized. Print a proper message when the gui cannot
	be initialized (perhaps recommend --no-interface?). Return nonzero
	exit status on failures.

2003-01-08  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/psd.c (do_layer_record): setting the layer name to
	"unnamed" when it's NULL. Fixes #89328.

2003-01-08  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/psd.c: removed MAX_LAYERS and MAX_GUIDES. Memory
	is now allocated dynamically. Fixes #91282. MAX_CHANNELS is still set
	to 30.

2003-01-08  Simon Budig  <simon@gimp.or>

	* tools/gimp-remote.c: Implemented a heuristics that tries to
	start the gimp in the same directory as gimp-remote-1.3.
	If this fails it falls back to the regular PATH search.

	For sanity checks this feature requires that the command name
	starts with "gimp-remote". If you do weird symlinks the heuristics
	will fall back to the PATH search silently.

2003-01-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/images/stock-*.png: a new set of icons drawn by
	Jimmac; fixes bug #92473.

2003-01-08  Sven Neumann  <sven@gimp.org>

	* app/display/gimpstatusbar.c (gimp_statusbar_init): work around a
	canvas size bug by setting an empty text to the progressbar.

2003-01-07  Manish Singh  <yosh@gimp.org>

	* libgimpwidgets/Makefile.am: add gimpmemsizeentry.h to HEADERS
	(Fixes #102789)

2003-01-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig.c: don't try to initialize the showtooltips
	member in the selvals struct; it's gone.

2003-01-07  Michael Natterer  <mitch@gimp.org>

	Fixed bug #13296:

	* app/display/gimpdisplayshell.c (gimp_display_shell_shrink_wrap):
	don't do evil stuff but simply call gtk_window_resize(). Gtk+ will
	automatically place the window onscreen if it would be invisible
	after resizing.

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_configure): don't call
	gimp_dislpay_shell_scale_resize() to avoid recursion but do the
	two needed calls manually.

2003-01-07  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimphelpui.[ch]: removed gimp_help_init() and
	gimp_help_free(). Added _gimp_help_init() instead.

	* libgimpwidgets/gimpwidgets.def: changed accordingly.

	* libgimpwidgets/gimpwidgets.c (gimp_widgets_init): call
	_gimp_help_init() so it doesn't need to be done in all plug-ins
	manually.

	* libgimp/gimpcompat.h: added gimp_help_init() and gimp_help_free()
	here as COMPAT_CRUFT.

	* app/gui/gui.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/blur.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/gtm.c
	* plug-ins/common/illusion.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/plasma.c
	* plug-ins/common/polar.c
	* plug-ins/common/ps.c
	* plug-ins/common/randomize.c
	* plug-ins/common/sinus.c
	* plug-ins/common/snoise.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/warp.c
	* plug-ins/common/wind.c
	* plug-ins/gap/gap_arr_dialog.c
	* plug-ins/gap/gap_mov_dialog.c
	* plug-ins/gap/gap_navigator_dialog.c
	* plug-ins/gdyntext/gdyntext_ui.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/maze/maze_face.c
	* plug-ins/print/gimp_main_window.c
	* plug-ins/sel2path/sel2path.c: removed the calls to
	gimp_help_init() and gimp_help_free().

	Fixed bug #81017:

	* libgimpbase/gimpprotocol.[ch]: added "guint8 show_tool_tips"
	to the GPConfig message. Increased the protocol version number.

	* app/plug-in/plug-in.c: pass the value of gui_config->show_tool_tips.

	* libgimp/gimp.[ch]: added gimp_show_tool_tips() to get the value
	which was passed in the GPConfig message.

	* libgimp/gimpui.c (gimp_ui_init): disable the tooltips
	if show_tool_tips is FALSE.

	* plug-ins/MapObject/mapobject_main.[ch]
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/common/jigsaw.c
	* plug-ins/gap/gap_navigator_dialog.c
	* plug-ins/gfig/gfig.c: removed all plug-in specific GUI for
	enabling/disabling tooltips.

2003-01-07  Sven Neumann  <sven@gimp.org>

	* plug_ins/common/Makefile.am
	* plug_ins/common/plugin_defs.pl: added back spheredesigner so it
	gets some testing again. Needs a good bunch of UI cleanup.

	* plug-ins/common/spheredesigner.c (loadit): use
	locale-independent functions to parse doubles.

2003-01-06  Manish Singh  <yosh@gimp.org>

	* lots of files in plug-ins: cleanup, removed unecessary
	G_OBJECT() casts.

2003-01-07  Sven Neumann  <sven@gimp.org>

	* common/hrz.c
	* common/plugindetails.c
	* common/spheredesigner.c
	* gimpressionist/orientmap.c
	* gimpressionist/sizemap.c
	* plugin-helper/color_picker.c
	* plugin-helper/iwarp.c
	* winsnap/winsnap.c: ported to GObject signal API.

2003-01-07  Sven Neumann  <sven@gimp.org>

	* configure.in
	* plug-ins/gfig/Makefile.am
	* plug-ins/gfig/images/Makefile.am: added a new directory with PNG
	images for the GFig plug-in.

	* plug-ins/gfig/images/*.png: placeholder images that need to be
	replaced (see bug #92473).

	* plug-ins/gfig/gfig-stock.[ch]: new files that register the
	images as stock icons.

	* plug-ins/gfig/gfig.c: use stock icons for the buttons on the
	left side of the dialog.

	* plug-ins/gfig/pix_data.h: removed obsoleted images. The
	remaining ones should get converted as well.

2003-01-06  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_preview.c
	* plug-ins/imagemap/imap_selection.c: replaced all gtk_signal_connect
	by g_signal_connect.

2003-01-06  Tor Lillqvist  <tml@iki.fi>

	* plug-ins/script-fu/script-fu-server.c: Bypass whole file on
	Win32.

2003-01-06  Michael Natterer  <mitch@gimp.org>

	* plug-ins/gfig/gfig.c: even more undeprecated, some cleanup.

2003-01-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig.c: made it a lot less deprecated. Removed
	gazillions of unneeded casts and changed others to the more
	portable GINT_TO_POINTER() / GPOINTER_TO_INT() macros. Still more
	work to be done ...

2003-01-06  Michael Natterer  <mitch@gimp.org>

	* libgimptool/gimptoolenums.[ch]: added enum GimpRectSelectMode
	which can be one of "free", "fixed-size" and "fixed-ratio".

	* app/tools/selection_options.[ch]: replaced the "Fixed Size /
	Aspect Ratio" toggle by a menu offering the choices above.

	* app/tools/gimprectselecttool.[ch]: changed accordingly. Removed
	the possibility to <shift>-switch from "fixed-size" to
	"fixed-ratio" mode. Fixes bug #100320.

2003-01-06  Michael Natterer  <mitch@gimp.org>

	* etc/gtkrc_user: give an example (commented out) how to change
	the F1 help binding. Fixes bug #6920.

2003-01-06  Sven Neumann  <sven@gimp.org>
	    Michael Natterer  <mitch@gimp.org>

	* tools/gimp-remote.c (gimp_remote_find_window): re-wrote this
	function without looking at the original source, so it is finally
	free from non-GPL copyright issues.

2003-01-06  Sven Neumann  <sven@gimp.org>

	* docs/gimp-1.3.1.in
	* docs/gimptool-1.3.1.in: removed incorrect copyright clauses and
	updated information about bug reporting.

2003-01-06  Sven Neumann  <sven@gimp.org>

	* app/gui/gradient-editor-commands.c
	* libgimp/gimpexport.c: don't split translatable sentences into
	multiple messages (bug #85828).

2003-01-05  Manish Singh  <yosh@gimp.org>

	* app/core/gimpobject.c: cast memsize to a guint instead of format
	change. Problem perhaps if get_size really is > 4 GB?

2003-01-05  Manish Singh  <yosh@gimp.org>

	* many files in app, modules and libgimp*: cleanup, removed unecessary
	G_OBJECT() casts. Should do the same for plug-ins, when more of them
	get undeprecated.

2003-01-05  Manish Singh  <yosh@gimp.org>

	* plug-ins/script-fu/interp_regex.c: same as below for here.

2003-01-05  Manish Singh  <yosh@gimp.org>

	* app/core/gimpimage-new.c: oops, cast here instead of changing the
	format string so we're ok on 32-bit too.

2003-01-05  Manish Singh  <yosh@gimp.org>

	* app/undo_history.c
	* app/core/gimpbrush.c
	* app/core/gimpimage-new.c
	* app/core/gimpobject.c
	* app/core/gimppalette-import.c
	* app/core/gimppattern.c
	* app/plug-in/plug-in.c
	* app/tools/gimpbezierselecttool.c
	* libgimpwidgets/gimpunitmenu.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/tiff.c
	* plug-ins/flame/flame.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/general.c
	* plug-ins/gimpressionist/orientation.c
	* plug-ins/gimpressionist/preview.c
	* plug-ins/gimpressionist/size.c
	* plug-ins/imagemap/imap_grid.c
	* plug-ins/imagemap/imap_menu.c
	* plug-ins/maze/algorithms.c
	* plug-ins/script-fu/interp_regex.c
	* plug-ins/script-fu/interp_sliba.c
	* plug-ins/script-fu/script-fu-console.c
	* plug-ins/script-fu/script-fu-server.c
	* plug-ins/webbrowser/webbrowser.c: added GINT_TO_POINTER and friends,
	fixed format strings, for 64-bitness.

	* modules/colorsel_triangle.c
	* plug-ins/tools/tool-safe-mode-plug-in.c: #include missing header
	files

2003-01-05  Michael Natterer  <mitch@gimp.org>

	* configure.in: changed --with-gnome-desktop to --with-gnome-datadir

	* data/misc/gimp.applications
	* data/misc/gimp.keys: added mime info files from Hadess
	<hadess@hadess.net> so gnome-vfs can associate various mime types
	with GIMP.

	* data/misc/Makefile.am: install everything into the right
	subdirectories of GNOME_DATADIR.

2003-01-05  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/script-fu/scripts/starscape-logo.scm
	(apply-starscape-logo-effect): fixes #73894. A channel was removed
	but never added to the image.

2003-01-05  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimp/gimpmisc.c (gimp_pixel_fetcher_get_pixel2): x and y
	coordinates have to be clamped on image width/height - 1. Fixes
	#102562

2003-01-05  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpchainbutton.[ch]
	* libgimpwidgets/gimpcolorarea.[ch]
	* libgimpwidgets/gimpcolorbutton.[ch]
	* libgimpwidgets/gimpdialog.c
	* libgimpwidgets/gimpfileselection.[ch]
	* libgimpwidgets/gimpoffsetarea.c
	* libgimpwidgets/gimppickbutton.c
	* libgimpwidgets/gimpquerybox.c
	* libgimpwidgets/gimpwidgets.c: added more API documentation.
	Declared gimp_scale_entry_new_internal() as static.

	* libgimpwidgets/gimpwidgets.def: changed accordingly.

2003-01-05  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpmemsizeentry.[ch]: made GimpMemsizeEntry a
	widget which doesn't use a GtkAdjustment to store the value.  The
	latter caused problems on 64bit machines since a gdouble doesn't
	provide enough precision for G_MAXULONG.

	* libgimpwidgets/gimpwidgets.[ch]
	* libgimpwidgets/gimpwidgetstypes.h
	* app/widgets/gimppropwidgets.c: changed accordingly.

2003-01-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-merge.c (gimp_image_merge_layers): redid the
	fix for bug #101036. Instead of temporarily changing the layer
	mode, just use a different mode for combine_regions().

2003-01-05  Sven Neumann  <sven@gimp.org>

	* app/gui/qmask-commands.c (qmask_channel_query): don't free the
	options structure twice (fixes bug #102515).

2003-01-05  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppropwidgets.c: (gimp_prop_enum_option_menu_new):
	pass NULL, not 0 to fix compilation on Alpha (bug #102514).

2003-01-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpbrushfactoryview.c
	* app/widgets/gimpcontainereditor.c
	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainerlistview.c
	* app/widgets/gimpcontainermenuimpl.c
	* app/widgets/gimpcontainerview.c
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimpitemlistview.c: check preview sizes to be
	smaller than GIMP_PREVIEW_MAX_SIZE instead of using a hardcoded
	and much too small value of 64.

	* app/widgets/gimpdialogfactory.c: check that the preview size is
	in range of the GimpPreviewSize enum when parsing the sessionrc.

2003-01-04  Sven Neumann  <sven@gimp.org>

	* app/base/tile-swap.c (tile_swap_find_offset): use off_t to
	return the offset. Finally allows to handle swap files larger than
	2 GB (fixes bug #74478).

2003-01-03  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/bmp/bmpread.c
	* plug-ins/bmp/bmpwrite.c 
	* plug-ins/bmp/bmp.[ch]: added mnemonics to save dialog. Minor code
	clean-up.

2003-01-03  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped the version number to 1.3.12.

	* app/display/Makefile.am
	* app/display/gimpdisplayshell-cursor.[ch]
	* app/display/gimpdisplayshell-title.[ch]
	* app/display/gimpdisplayshell-transform.[ch]: new files with code
	that used to live in gimpdisplayshell.c.

	* app/display/gimpdisplay-foreach.c
	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell-selection.c
	* app/display/gimpdisplayshell.[ch]
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimptool.c: changed accordingly.

2003-01-03  Michael Natterer  <mitch@gimp.org>

	* app/tools/tool_manager.c (tool_manager_image_undo_start): don't
	HALT the active tool if it is in "preserve" mode. Fixes crashes
	when e.g. the transform tool was pushing an undo group and
	implicitly HALTing itself in the middle of the transform
	operation.

2003-01-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimptoolbox.c: convince more window managers to
	actually use the specified window positions/sizes by adding
	GDK_HINT_USER_POS and GDK_HINT_USER_SIZE to the windows'
	geometry hints.

2003-01-03  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptoolcontrol.c (gimp_tool_control_halt): don't
	set paused_count to 0.

	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c
	* app/tools/tool_manager.c: removed comments about doing so.

2003-01-02  Manish Singh  <yosh@gimp.org>

	* app/base/base.c (base_init): terminate g_object_set args with NULL.

2003-01-02  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.[ch]
	* libgimpmodule/gimpmoduledb.[ch]: added API docs, removed cruft.
	Fixes bug #5746.

2003-01-02  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_preview.[ch]: fix for #102303

	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_object.c
	* plug-ins/imagemap/imap_object_popup.c
	* plug-ins/imagemap/imap_polygon.c
	* plug-ins/imagemap/imap_edit_area_info.c
	* plug-ins/imagemap/imap_cmd_*.c: code clean-up

	* plug-ins/imagemap/imap_cmd_*.h: removed. All prototypes are now
	in imap_commands.h

	* plug-ins/imagemap/imap_commands.h: new file with command prototypes

	* plug-ins/imagemap/Makefile.am: updated accordingly

2003-01-02  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.[ch]: added GIMP_MODULE_ABI_VERSION
	define and a "guint32 abi_version" field to GimpModuleInfo.  When
	querying a module, check if it was compiled against the same ABI
	version as the code loading it. Fixes bug #5744.

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: changed accordingly.

2003-01-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewabledialog.c (gimp_viewable_dialog_close):
	just a small cleanup.

2003-01-02  Michael Natterer  <mitch@gimp.org>

	Replaced Garry's fix for bug #98843 by a more general solution
	which stops the active tool when an undo group start is pushed:

	* app/core/gimpimage.[ch]: removed the "layer_merge" signal
	and added "undo_start" instead.

	* app/undo.c: emit "undo_start" in undo_push_group_start()
	_before_ checking if gimage->undo_on is TRUE.

	* app/tools/tool_manager.c: connect to "undo_start" and HALT the
	active tool if neccessary.

	* app/core/core-types.h: added EDIT_COPY_UNDO_GROUP.

	* app/core/gimpedit.c: push an undo group around the copy
	operation. Will probably have to add more undo group types to wrap
	other critical image modifications with.

	* app/core/gimpimage-merge.c
	* app/gui/convert-dialog.c
	* app/gui/edit-commands.c
	* app/gui/test-commands.c
	* app/tools/gimpimagemaptool.c: removed all special code to
	stop the active tool.

2003-01-02  Michael Natterer  <mitch@gimp.org>

	* app/gui/user-install-dialog.c: replaced the 0755 by properly
	or'ed symbolic values (undid this change from Sven accidentially).

2003-01-01 Garry R. Osgood <grosgood@rcn.com>
	
	* MAINTAINERS: Updated my CVS.
	* app/undo.c: Check if LayerUndo object provides a previous 
	layer before setting such active; in some cases the result of a
	redo is an empty image, and prev_layer is not populated. Part of
	bug # 98843.
	* app/undo_history.c: undo_history_new () Increments reference 
	count on GimpImage in undo_history_st; 
	undo_history_shell_destroy_callback () dereferences. Before,
	with undo history dialog active on application exit, the GimpImage
	ref count would already be zero, with memory reclaimed, when
	gimp_dialog_factory_dispose () invoked 
	undo_history_shell_destroy_callback (). See stack dumps in 
	bug # 98843; in part closes same.
	* app/core/gimpimage-merge.c : gimp_image_merge_layers ()
	Regardless of merge type, temporarily set composition mode
	of bottom layer to NORMAL, then merge. Closes bug #101036.
	Issues LAYER_MERGE signal (see bug #98843); listeners thaw
	undo stack (image map tools, usually) in part closes this bug.
	* app/core/gimpimage.[ch] Define and implement a LAYER_MERGE
	signal. 
	* app/tools/gimpimagemaptool.c: gimp_image_map_tool_initialize ()
	connects its associated GimpImage with dialog's cancel callback
	via the GimpImage's LAYER_MERGE signal. gimp_image_map_tool_finalize ()
	disconnects. Dismisses dialog in layer merges. In part closes
	bug # 98843.
	* app/widgets/gimpviewabledialog.c: gimp_viewable_dialog_close () 
	Check if the widget has a non-null reference to a window before
	using it to synthesize a cancel event.

2003-01-01  Sven Neumann  <sven@gimp.org>

	* app/gui/menus.c (image_entries): changed some menu entries as
	suggested in bug #101974.

	* app/display/gimpdisplayshell.c: changed accordingly. 

2003-01-01  Hans Breuer  <hans@breuer.org>

	* libgimpbase/gimpdatafiles.c : when checking for
	'excecutable' make sure it is a regular file too
	(on win32 even directories carry the IXUSR flag)

	* app/app_procs.h : there is still no #warning with
	msvc, special case to make it build with non GCC

	* makefile.msc */makefile.msc */*/makefile.msc : updated

	* app/gui/user-install-dialog.c : get prototype for mkdir

	* libgimpwidgets/libgimp-glue.c : make it compile without
	LT_RELEASE being defined

	* modules/module.def : removed
	  modules/Makefile.am : no export file needed when 
	functions get exported by G_MODULE_EXPORT

2003-01-01  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_about.c
	* plug-ins/imagemap/imap_file.c
	* plug-ins/imagemap/imap_grid.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_menu.[ch]
	* plug-ins/imagemap/imap_polygon.[ch]
	* plug-ins/imagemap/imap_preview.c
	* plug-ins/imagemap/imap_stock.[ch]
	* plug-ins/imagemap/imap_edit_area_info.[ch] 
	* plug-ins/imagemap/imap_statusbar.[ch]
	* plug-ins/imagemap/imap_cmd_copy.[ch]: removed use of deprecated GTK 
	widgets and routines plus some code clean-up.

2003-01-01  Tor Lillqvist  <tml@iki.fi>

	* modules/Makefile.am: On Win32, use -no-undefined, and add
	dependent libraries to the LIBADDs.

2002-12-31  Simon Budig  <simon@gimp.org>

	* app/vectors/vectors-types.h: New Type: GimpVectorExtendMode

	* app/tools/gimpvectortool.c
	* app/vectors/gimpstroke.[ch]
	* app/vectors/gimpbezierstroke.[ch]: More stuff on the path
	(pun intended) to a better path tool...

	Thanks to Sven for being my host in Berlin!

2002-12-31  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/fileops.pdb (gimp_temp_name): need to expand the
	temp_path before using it.

	* app/pdb/fileops_cmds.c: regenerated.

2002-12-30  Sven Neumann  <sven@gimp.org>

	* Made 1.3.11 release.

2002-12-30  Michael Natterer  <mitch@gimp.org>

	* app/gui/user-install-dialog.c: some more cleanup: check the
	return value of fclose() in copy_file(), added an enum for the
	notebook pages, added '' around displayed filenames, update the
	GUI while creating the user directory, misc stuff.

2002-12-30  Sven Neumann  <sven@gimp.org>

	* data/environ/Makefile.am
	* etc/Makefile.am: fixed EXTRA_DIST rules.

2002-12-30  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_png_thumb_path): use
	proper defines to specify the permissions when calling mkdir().

	* app/file/file-utils.c: removed redeclaration of mkdir() for
	Win32 since we don't call mkdir() here.

	* app/gui/user-install-dialog.c (user_install_run): rewrote
	copy_file() to use GError for error reporting. Use the same code
	for the user installation on all platforms. Also fixes bug #102015.

	* data/misc/Makefile.am
	* data/misc/user_install
	* data/misc/user_install.bat: removed obsoleted scripts.

2002-12-30  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpanchor.h
	* app/vectors/vectors-types.h: anchors now have an enum as type and
	have the "selected" property.

	* app/vectors/gimpstroke.[ch]
	* app/vectors/gimpbezierstroke.c	
	* app/vectors/gimpvectors-preview.c: additional functions to get
	information about the graphical representation of the stroke and
	to be able to select anchors.

	* app/tools/gimpvectortool.c: semi-usable interface, better
	graphical representation of what is going on. Make use of the
	"selected" property of the anchors to just display a subset of the
	control handles.

2002-12-30  Sven Neumann  <sven@gimp.org>

	* app/config/gimppluginconfig.[ch]
	* app/config/gimprc-blurbs.h: added "script-fu-path" back to gimprc.

2002-12-30  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c
	* app/core/gimp.c
	* app/gui/gui.c
	* app/widgets/gimpitemfactory.c: removed debugging output.

	* app/plug-in/plug-ins.c: need to expand the plug_in_path before
	using it.

	* app/gui/plug-in-menus.c (plug_in_menus_init): removed an
	unneeded assertion.

	* plug-ins/imagemap/Makefile.am (EXTRA_DIST): removed references
	to files that were removed some time ago.

2002-12-30  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimppluginconfig.[ch]: new files that define plug-in
	specific configuration.

	* app/config/config-types.h
	* app/config/gimprc-blurbs.h
	* app/gimprc.[ch]: derive GimpRc from GimpPluginConfig.

	* etc/gimprc: regenerated (gimp-config-dump --system-gimprc).

2002-12-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c: another fix for #102016.

2002-12-29  Sven Neumann  <sven@gimp.org>

	* configure.in: check for app/core/gimp.c instead of etc/gimprc.in
	which no longer exists.

	* app/gui/user-install-dialog.c: use the term Folder instead of
	Directory (fixes bug #102016).

2002-12-29  Sven Neumann  <sven@gimp.org>

	* configure.in
	* etc/Makefile.am
	* etc/gimprc.in
	* etc/gimprc_user.in: removed templates for gimprc files.

	* etc/gimprc: added this file as generated by gimp-config-dump.

	* app/gui/user-install-dialog.c
	* data/misc/user_install: don't install an empty user gimprc.

	* app/config/Makefile.am
	* app/config/gimpconfig-substitute.[ch]: removed these files.
	* app/config/gimpconfig-path.[ch]: and added them again with
	reduced functionality. Paths found in config files are now
	basically handled like standard strings by the config system.
	Users of the GimpConfig path variables need to expand the path
	themselves.

	* app/config/gimpbaseconfig.c
	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-dump.c
	* app/config/gimpconfig-utils.c
	* app/config/gimpconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimprc.c:
	* app/base/base.c
	* app/base/temp-buf.c
	* app/core/gimp.c
	* app/core/gimpdatafactory.c
	* app/core/gimpmodules.c
	* app/gui/user-install-dialog.c
	* app/plug-in/plug-in.c
	* app/tools/tools.c
	* app/widgets/gimppropwidgets.c: changed accordingly.
	
2002-12-29  Simon Budig  <simon@gimp.org>

	* app/core/gimpimage-mask-select.c
	* app/paint/gimppaintcore-stroke.c
	* app/tools/gimpvectortool.c
	* app/vectors/gimpbezierstroke.[ch]
	* app/vectors/gimpstroke.[ch]
	* app/vectors/gimpvectors-preview.c: some more stuff for the
	vectors tool: bezier interpolation is available, we have preview
	generation. Usage is still weird.

2002-12-28  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: untested and unused stuff
	for the interpolation of bezier curves. More to come soon.

2002-12-27  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/smooth_palette.c (dialog): fix for #82490 (Smooth 
	Palette: use standard GIMP size entry) and #101902 (Smooth Palette 
	crashes on 1x1 image). Minimum width for Smooth Palette is set to
	2, since in the code g_rand_int_range (gr, 0, width - 2) is used.
	Allowing a width of 1 results in an assertion in g_rand_int_range.
	
2002-12-26  Tor Lillqvist  <tml@iki.fi>

	* app/Makefile.am: On Win32, create export file gimp.exp.
	(EXTRA_DIST): Drop makefile.mingw{,.in}.
	(LDFLAGS): Add -mwindows.
	(LDADD): Link with gimp.exp.

	* app/gimp.sym: Remove all old entries (seemed to be obsolete).
	Instead, add the ones linked to from libgimptool and
	libgimpwidgets.

	* app/gui/user-install-dialog.c (user_install_run): On Win32, use
	similar code as in GIMP 1.2, i.e. don't run a script to do the
	mkdirs and copying, but do it ourselves. Markup the tree_items
	elements accordingly to direct the action.

	* libgimp/gimp.c: Define LIBGIMP_COMPILATION.
	(gimp_main) [Win32] Use g_ascii_strcasecmp().

	* libgimp/gimp.def: Add _readchannel (used by libgimpui).

	* libgimp/gimp.h: Fix minor typo in comment

	* libgimpproxy/Makefile.am
	* libgimptool/Makefile.am
	* libgimp/Makefile.am: Similar additions for Win32 as in the other
	libgimp*/Makefile.am files: Use -no-undefined. Conditionally link
	to ../lib*/*.la as needed. Use the .def file. Produce MS style
	import library if possible. Install and uninstall import
	libraries.

	* libgimp/Makefile.am
	* modules/Makefile.am
	* plug-ins/Makefile.am: Don't distribute makefile.mingw{,.in}.

	* libgimpproxy/gimpproxy.def
	* libgimptool/gimptool.def: New files.

	* libgimptool/glue.c: New file. Used on Win32 to be able to link
	at run-time against entries in the main executable that has loaded
	the libgimptool DLL. (If I understand correctly how things are
	supposed to work, this will be either gimp.exe or
	tool-safe-mode.exe, but that doesn't matter.)

2002-12-23  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimp/gimpmiscui.c (gimp_fixme_preview_new): make sure preview
	structure is correctly initialized.

	* libgimp/gimpmisc.[ch] (gimp_pixel_fetcher_put_pixel): added new
	routine to gimpmisc.

2002-12-23  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/plasma.c: better use of libgimp routines, code
	clean-up

	* plug-ins/common/grid.c (doit): fixed small problem in preview when
	displaying images with an alpha channel.

	* plug-ins/Lighting/lighting_main.c (run): fixed #81479 ("Repeat Last" 
	incorrectly enabled if Lighting Effects plug-in is cancelled)

2002-12-23  Tor Lillqvist  <tml@iki.fi>

	* configure.in: When bulding with GCC for Win32, use either
	-fnative-struct or -mms-bitfields depending on GCC version. Don't
	output the build/.../Makefiles, the build subdir isn't needed here
	any longer (see 2001-02-17 entry by Hans Breuer). Don't output the
	*/makefile.mingw as they are seriously obsolete anyway.

	* Makefile.am (SUBDIRS): Remove build subdir here, too.

	* libgimpcolor/Makefile.am (EXTRA_DIST)
	* libgimpmath/Makefile.am (EXTRA_DIST)
	* libgimpbase/Makefile.am (EXTRA_DIST): Drop makefile.mingw{,.in}.

	* libgimpmodule/Makefile.am (INCLUDES): Add GMODULE_CFLAGS.
	(LIBADD): Add GMODULE_LIBS.

	* libgimpwidgets/Makefile.am: Similar additions for Win32 as in
	the other libgimp*/Makefile.am files: Use -no-undefined. Use the
	.def file. Produce MS style import library if possible. Install
	and uninstall import libraries.
	(AM_CPPFLAGS) Define LT_RELEASE and LT_CURRENT_MINUS_AGE.
	(libgimpwidgets_1_3_la_sources) Include libgimp-glue.c

	* libgimpwidgets/libgimp-glue.c: Bypass whole file unless Win32.
	(dynamic_resolve): Try both the libtool style DLL name and Hans
	Breuer's naming scheme.
	(gimp_*) Replace duplicated code snippets with calls of a
	preprocessor macro.

2002-12-21  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_csim.l: add "<string.h> to remove warning.

	* plug-ins/imagemap/imap_csim_parse.[ch]: regenerated 

	* plug-ins/imagemap/imap_csim.y: fix for #97776 (Imagemap can't read 
	CSIM files after itself)

2002-12-20  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-blurbs.h: removed ...
	
	* app/config/gimprc-blurbs.h: ... and readded under this
	name. Should have never been named with a gimpconfig prefix since
	it's not part of the generic GimpConfig system.

	* app/config/config-types.h
	* app/config/gimpbaseconfig.c
	* app/config/gimpconfig-dump.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c: changed accordingly.

2002-12-20  Michael Natterer  <mitch@gimp.org>

	* app/xcf/xcf.c: use G_N_ELEMENTS().

2002-12-20  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c (gimp_config_serialize): check the return
	value of close().

2002-12-20  Nathan Summers  <rock@gimp.org>

	* app/xcf/xcf-write.[ch]
	* app/xcf/xcf-save.c
	* app/xcf/xcf.c: ported the fix for bug #101340 over from the
	stable branch.  Uses GError to report errors, unlike the stable
	version, which uses a pointer to gboolean.

	* app/xcf/xcf-seek.[ch]: check the return value of fseek and ftell
	for errors.  Return FALSE and set GError if an error is detected.

	* app/xcf/xcf-load.c: since the xcf-seek functions use GError now,
	added a NULL for the error parameter.  Added basic error checking
	on the return value of the xcf-seek functions.  In the future,
	changing xcf-load.c to use GError more completely should be
	considered.

2002-12-19  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/grid.c: replaced preview code by calls to libgimp

	* plug-ins/imagemap/imap_file.c
	* plug-ins/imagemap/imap_menu.c: use g_file_test funcs to test if
	a file already exists instead of a call to fstat().

2002-12-19  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/wind.c (dialog_box)
	* plug-ins/common/nova.c (nova_center_create)
	* plug-ins/common/max_rgb.c (dialog)
	* plug-ins/common/jigsaw.c (dialog_box)
	* plug-ins/common/flarefx.c (flare_center_create)
	* plug-ins/common/illusion.c
	* plug-ins/common/glasstile.c: add parameter to call to 
	gimp_fixme_preview_new

	* libgimp/gimpmiscui.[ch] (gimp_fixme_preview_new): Added boolean
	parameter has_frame to put the preview into a frame. Preview now
	also handles indexed images correctly.

2002-12-19  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscales.c: mark "Scales" for translation.

2002-12-19  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.[ch]: added utility functions
	gimp_get_mod_name_[shift|control|alt]() and gimp_get_mod_separator()
	which get the translated strings for "Shift", "Ctrl", "Alt" and "+"
	from GtkAccelLabelClass to force consistency between menu
	accelerators and other modifiers displayed in the GUI.
	Made the format string to display the modifier ("<%s>")
	translatable separately.

	* app/gui/file-open-dialog.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmovetool.c
	* app/tools/transform_options.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpgradienteditor.c
	* app/widgets/gimpitemlistview.c
	* app/widgets/gimpvectorslistview.c: use the new functions instead
	of hardcoding the modifier names over and over again.

	* app/tools/transform_options.c: made a scale_entry out of the
	grid density spinbutton.

2002-12-19  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolordisplay.c (gimp_color_display_class_init):
	initialize all class members with default values.

2002-12-19  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.c: use g_message/g_print consistently.

2002-12-19  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpdrawable.c (gimp_drawable_attch_new_parasite):
	s/drawable/drawable_ID/ to match the header.

2002-12-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c: replaced lots of "gpointer data"
	parameters of local callbacks by GimpCurvesTool* and
	GimpLevelsTool* pointers. Makes the code shorter and more
	readable. Some random cleanup.

	* app/tools/gimphistogramtool.c: fixed type of "parent_class"
	pointer.

2002-12-18  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): fixed
	ascii-art to match current widget hierarchy.

	* app/display/gimpdisplayshell-handlers.c: fixed typos so we
	actually connect to notify::monitor-[xy]resolution. Expose and
	flush the display in the handler so the resolution change becomes
	visible.

2002-12-18  Michael Natterer  <mitch@gimp.org>

	* modules/cdisplay_colorblind.c (cdisplay_colorblind_get_type)
	* modules/cdisplay_gamma.c (cdisplay_gamma_get_type)
	* modules/cdisplay_highcontrast.c (cdisplay_contrast_get_type):
	s/select_info/display_info/

2002-12-18  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpgradientmenu.c (gimp_gradient_select_widget): match
	the parameter name in the header to please gtk-doc.

2002-12-17  Manish Singh  <yosh@gimp.org>

	* app/core/gimpenvirontable.[ch]: added some rudimentary support
	to prepend values to existing environment variables. You can do
	"separator name=value" now. API change to gimp_environ_table_add
	for it too. Also added some error checking.

	* app/gui/gui.c: change to new above API

	* plug-ins/pygimp/Makefile.am: write ": PYTHONPATH=" out to env
	file

	* po/POTFILES.in: add gimpenvirontable.c

2002-12-17  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/gimpressionist/Presets/*: changed all \010 in strings by
	\012 so that the g_strcompress/g_strescape pair now works correctly.
	
	* plug-ins/gimpressionist/sizemap.c
	* plug-ins/gimpressionist/orientmap.c: reordered Apply/Cancel/Ok
	buttons in dialogs.

	* plug-ins/gimpressionist/presets.c 
	* plug-ins/gimpressionist/paper.c 
	* plug-ins/gimpressionist/brush.c
	* plug-ins/gimpressionist/gimpressionist.[ch]: replace deprecated
	GtkList by GtkTreeView widgets.

2002-12-17  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/Lighting/lighting_ui.[ch] 
	* plug-ins/Lighting/lighting_preview.c: applied patch from Jeroen
	Lamain. Dragging of lightsource is more smoothly now plus you can 
	now also drag directional lights.

2002-12-17  Nathan Summers  <rock@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimppatternmenu.c: documented all publically visible
	functions

	* libgimp/gimpmenu.h: fixed a typo

2002-12-17  Nathan Summers  <rock@gimp.org>

	* libgimp/gimp.[ch]
	* libgimp/gimpdrawable.c
	* libgimp/gimpimage.c: added some documentation

2002-12-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/perl/Gimp.pm: merged fix for #84884 from stable branch.

2002-12-17  Sven Neumann  <sven@gimp.org>

	* app/main.c: merged fix for #71409 from stable branch.

	* plug-ins/common/jpeg.c: merged fix for #75398 from stable branch.

2002-12-17  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptransformtool.c
	* app/tools/transform_options.[ch]: replaced the totally unclear
	(to the user) way we used to calculate the number of grid lines
	from the value entered in the "Density" spinbutton by a system
	where the user has the choice between the number of grid lines to
	display and the spacing between the displayed grid lines. Replaced
	the "Show Grid" toggle by an option menu to choose the grid type
	from. (idea from drc on #gimp).

2002-12-16  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/CML_explorer.c
	* plug-ins/common/spheredesigner.c: use g_ascii_dtostr() to
	serialize floats.

2002-12-16  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/ps.c (save_ps_setup): applied a patch from
	Henrik Brix Andersen <brix@gimp.org> which fixes bug #101263.

2002-12-16  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c: use scientific terms and added an
	approximation formula for tritanopia.

2002-12-16  Michael Natterer  <mitch@gimp.org>

	* modules/Makefile.am
	* modules/cdisplay_colorblind.c: added a display filter which will
	simulate the vision of people with color-deficiency to address
	bug #101256. Didn't know any scientific name or any correct formula,
	so I just added the framework plus the approximation formula from
	the bug report. Will need some more work to become useable.

2002-12-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/noisify.c (noisify_func): sorry, you can only
	declare a variable at the beginning of a block.

2002-12-16  Sven Neumann  <sven@gimp.org>

	* docs/Wilber_Construction_Kit.xcf.gz: more Wilber gadgets added by
	Guillermo S. Romero.

2002-12-15  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/displace.c
	* plug-ins/common/ripple.c
	* plug-ins/common/shift.c
	* plug-ins/common/spread.c
	* plug-ins/common/tileit.c
	* plug-ins/common/noisify.c: code clean-up, fixed memory leak,
	better use of libgimp routines.

2002-12-15  Sven Neumann  <sven@gimp.org>

	* app/gui/user-install-dialog.c: set text and base colors as well
	to make the user installation dialog work on dark themes. Fixes
	bug #86187.

2002-12-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sel_gauss.c: applied a patch from Toby Smith
	that fixes bug #90968.

2002-12-14  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-ins.c (plug_ins_proc_def_add): fixed a comment.

2002-12-14  Manish Singh  <yosh@gimp.org>

	* app/config/gimpconfig-params.c (gimp_param_memsize_get_type):
	size should be from GParamSpecULong, not GParamSpecUInt.

2002-12-14  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]
	(gimp_display_shell_set_menu_sensitivity): renamed paramater
	"update_popup" to "popup_only" because it's less confusing. Fixed
	the function to update the popup correctly for shell = NULL.

2002-12-14  Michael Natterer  <mitch@gimp.org>

	* app/gui/plug-in-commands.c (plug_in_repeat_cmd_callback):
	use gdisp->gimage->gimp instead of the_gimp.

	* app/tools/gimpimagemaptool.c: pass update_popup == FALSE to
	gimp_display_shell_set_menu_sensitivity().

2002-12-14  Sven Neumann  <sven@gimp.org>

	* app/gui/plug-in-commands.c (plug_in_repeat_cmd_callback): data
	is not a Gimp pointer if this function is called from an image
	menubar. Use the_gimp instead of crashing.

2002-12-14  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpimagemaptool.c: made it compile after Mitch's
	changes.

2002-12-14  Michael Natterer  <mitch@gimp.org>

	Changed menubar showing/hiding to work like rulers and statusbar:

	* app/config/gimpconfig-blurbs.h
	* app/config/gimpdisplayconfig.[ch]: renamed "menu_bar_per_display"
	to "show_menubar". Removed GIMP_PARAM_RESTART flag.

	* app/display/gimpdisplayshell.[ch]: changed shell->item_factory to
	shell->menubar_factory plus shell->popup_factory and always create
	both of them. Added "gboolean update_popup" to
	gimp_display_shell_set_menu_sensitivity() and call it recursively
	with update_popup == TRUE if the display it is called for is the
	active one.

	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c: changed accordinly.

	* app/gui/gui.c: ditto. Set the menu sensitivity of new displays.

	* app/gui/menus.c: added "<Image>/View/Toggle Menubar" menu item.
	Moved some factory initialization code from gimpdisplayshell.c
	here.

	* app/gui/view-commands.[ch]: added
	view_toggle_menubar_cmd_callback(). Update the menu sensitivity
	manually in all callbacks which don't call gimp_image_flush().

	* app/gui/preferences-dialog.c (prefs_dialog_new): moved the "Show
	Menubar" toggle to the "Appearance" frame of the "Image Windows"
	page. Added an own frame for the display zoom/scaling settings.

	(preferences_dialog_create): Attach config_copy and config_orig
	using g_object_set_data_full() instead of just g_object_set_data()
	plus a g_object_weak_ref().

	(prefs_default_resolution_callback): set the resolution for both
	fields of the "size_sizeentry" instead of setting it for "x"
	twice.

2002-12-14  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_preferences.c: make sure that undo level
	is at least 1. Fixes #97771

	* plug-ins/imagemap/imap_file.c: fixes #92750

2002-12-13  Maurits Rijk  <lpeek.mrijk@consunet.nl>
	
	* plug-ins/imagemap/imap_settings.c
	* plug-ins/imagemap/imap_source.[ch]: remove usage of deprecated
	GtkText widget

	* plug-ins/imagemap/arrow_up.xpm
	* plug-ins/imagemap/arrow_down.xpm: removed.

	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_misc.[ch]: clean-up some code since we now
	only use stock icons.

	* plug-ins/imagemap/imap_selection.c: use GTK stock icons for arrow up
	and arrow down.

	* plug-ins/imagemap/imap_default_dialog.c: code clean-up

2002-12-13 Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/selection.pdb: merged fix for bug #96284 from
	stable branch.

	* app/pdb/drawable_cmds.c
	* app/pdb/selection_cmds.c
	* libgimp/gimpdrawable_pdb.c
	* libgimp/gimpselection_pdb.c: regenerated.

2002-12-13  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/tiff.c: merged fix for #97352 from stable branch.

	* app/display/gimpdisplayshell.c (gimp_display_shell_shrink_wrap):
	merged fix for #79486 from stable branch.

2002-12-13  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpintl.h
	* libgimp/libgimp-intl.h
	* plug-ins/script-fu/script-fu-scripts.c: removed remaining usage
	of ENABLE_NLS.

2002-12-13  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/image.pdb: added new PDB function
	gimp_image_is_dirty() on request of Wolfgang Hofer (#77508).

	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpimage_pdb.h: regenerated.

2002-12-12  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/gimpressionist/color.c
	* plug-ins/gimpressionist/general.c
	* plug-ins/gimpressionist/gimpressionist.[ch]
	* plug-ins/gimpressionist/placement.c
	* plug-ins/gimpressionist/presets.c: last bunch of changes to solve
	#81963.

2002-12-12  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c (prefs_color_button_add): create the
	color button for the canvas padding color using GIMP_COLOR_AREA_FLAT.

2002-12-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/ripply-anim.scm: applied a patch from
	Chris Purnell <cjp@lost.org.uk> that adds the possibility to
	specify the edge behaviour (#83767).

2002-12-10  Michael Natterer  <mitch@gimp.org>

	The unbelievable happened: a menu bar per display (optionally)

	* app/widgets/gimpitemfactory.[ch]: Added the possibility to have
	more than one item factory per <Prefix>. Added
	gimp_item_factories_set_foobar() variants of all functions which
	set menu item properties (label, sensitive, ...). Removed
	the #ifndef ENABLE_NLS code since that's no longer possible.

	* app/widgets/gimptoolbox.c: made it robust againt the <Image>
	factory not existing at the time of toolbox creation.

	* app/config/gimpconfig-blurbs.h
	* app/config/gimpdisplayconfig.[ch]: added boolean
	"menu_bar_per_display" property.

	* app/gui/preferences-dialog.c: added a toggle for the new option.

	* app/gui/menus.[ch]: added menus_get_new_image_factory() as
	temporary solution. Will add a GimpMenuFactory which creates the
	item factories soon.

	* app/display/gimpdisplayshell.c: add the menu bar if requested.
	Changed widget packing slightly for the menu bar case.

	* app/display/gimpdisplayshell-callbacks.c: changed accordingly.
	Currently there is no right-click popup menu when we have a menu
	bar. This will change soon.

	* app/gui/file-dialog-utils.c
	* app/gui/gui.c: use gimp_item_factories_set_foo().

	* app/gui/channels-commands.c
	* app/gui/dialogs-commands.c
	* app/gui/dialogs-constructors.c
	* app/gui/drawable-commands.c
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/gui/plug-in-commands.c
	* app/gui/select-commands.c
	* app/gui/tools-commands.c
	* app/gui/vectors-commands.c
	* app/gui/view-commands.c: per-display item factories pass the
	GimpDisplay as user_data to callbacks, not a Gimp. Changed all
	return_if_no_foo() macros to handle both cases.

	Cleaned up the plug-in menu stuff:

	* app/plug-in/plug-in-types.h: removed PlugInMenuEntry type.

	* app/plug-in/plug-ins.[ch]: added plug_ins_proc_def_add() as
	counterpart to plug_ins_proc_def_remove(). Added
	plug_ins_locale_domain() as counterpart to plug_ins_help_path().
	Remember the locale domains just as the help paths. Changed
	plug-in initialization so that their menus can be created multiple
	times.

	* app/plug-in/plug-in.[ch]: use plug_ins_proc_def_add() instead of
	doing it manually.

	* app/gui/plug-in-menus.[ch]: added plug_in_menus_init() which
	just registers the locale domains. Changed plug_in_make_menu() to
	take a list of proc_defs, not plug_ins_defs so it can be used
	after plug-in query.

2002-12-10  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c: fixed typo, use "gimp->no_interface" instead of
	simply "no_interface" in the "exit" handler.

2002-12-10  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/gimpressionist/brush.c
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/gimpressionist/paper.c
	* plug-ins/gimpressionist/presets.c
	* plug-ins/gimpressionist/sizemap.c
	* plug-ins/gimpressionist/orientmap.c: more changes to make 
	gimpressionist look like a standard GIMP plug-in (#81963) plus lots
	of code clean-up.

2002-12-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/siod-wrapper.c (marshall_proc_db_call): fixed
	color_list iteration for GIMP_PDB_COLOR args. Closes bug #100696.

2002-12-06  Hans Breuer  <hans@breuer.org>

	* plug-ins/common/winclipboard.c : need to adjust the data 
	pointer for BI_BITFIELDS bitmaps, fixes #99246

2002-12-06  Sven Neumann  <sven@gimp.org>

	* app/paint/gimppaintcore.c: no need to include app_procs.h here.

	* app/display/gimpdisplay-foreach.c (gimp_displays_dirty)
	(gdisplays_check_valid): don't use the global the_gimp. Removed
	inclusion of app_procs.h.

2002-12-05  Michael Natterer  <mitch@gimp.org>

	Cleaned up the exit process:

	* app/core/gimp.[ch]: added an "exit" signal which carries a
	"gboolean kill_it" parameter and has a boolean return value.
	Added gimp_boolean_handled_accumulator() so the emission of "exit"
	can be stopped by returning TRUE from a callback.  Removed
	gimp_shutdown() from the public API and made it "exit"'s default
	implementation. Added gimp_exit() to emit the signal.

	* app/core/gimpmarshal.list: added BOOLEAN__BOOLEAN marshaller.

	* app/gui/gui.[ch]: Replaced public functions gui_shutdown() and
	gui_exit() by "exit" callbacks. g_signal_connect_after() the
	latter so the shutdown order is correct.

	* app/app_procs.[ch]: removed app_exit() and connect to "exit".
	Split the exit stuff into normal and connect_after callbacks as
	above.

	* app/batch.c
	* app/gui/file-commands.c
	* tools/pdbgen/pdb/misc.pdb
	* app/widgets/gimptoolbox.c: call gimp_exit() instead of
	app_exit(). Don't #include "app_procs.h".

	* app/pdb/misc_cmds.c: regenerated.

2002-12-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushpipe.c: use the same string as in
	gimpbrushpipe.c to reduce the number of translatable strings.

2002-12-04  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c (render_image_tile_fault):
	removed useless assignments.

	* plug-ins/common/aa.c: removed wrong assertions that caused the
	plug-in to crash on images with odd width or height (#100344).
	Added support for RGB images as well as alpha channel while I was
	on it.

2002-12-04  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: added -DGIMP_APP_GLUE_COMPILATION to
	AM_CPPFLAGS.

	* app/appenv.h
	* app/batch.h
	* app/errors.h: #error if it is not defined to keep these files
	from being included from anywhere else.

	* app/app_procs.h: added just a #warning because some places still
	need "the_gimp" and app_exit().

	* app/libgimp_glue.h: #ifdef the #error the same way as the other
	headers do.

2002-12-03  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay-foreach.[ch]: renamed
	gdisplays_reconnect() to gimp_displays_reconnect() and added a
	"Gimp" parameter.

	* app/gui/file-commands.c
	* tools/pdbgen/pdb/display.pdb: changed accordingly.

	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/palette_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb: some irrelevant
	code cleanups to make them look the same.

	* tools/pdbgen/pdb/message.pdb: changed $desc from "Interface"
	to "Message procedures".

	* tools/pdbgen/pdb/transform_tools.pdb: changed $desc from
	"Tool procedures" to "Transform Tool procedures".

	* app/pdb/brush_select_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/palette_select_cmds.c
	* app/pdb/pattern_select_cmds.c: regenerated.

2002-12-03  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorbutton.c: named the menu separator
	"/fg-bg-separator", not just "/---".

	* app/widgets/gimpcolorpanel.[ch]: added a GimpContext pointer to
	get FG/BG from. Don't use "the_gimp" and don't include
	"app_procs.h".  Added gimp_color_panel_set_context(). Hide the
	FG/BG menu entries if we have no context.

	* app/gui/channels-commands.c
	* app/gui/preferences-dialog.c
	* app/gui/qmask-commands.c
	* app/display/gimpdisplayshell.c: set the color_panel's context.

2002-12-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: made it a lot less deprecated.

2002-12-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: removed broken code that used
	to update the preview when the user releases the button after
	moving a slider. Instead set the range to UPDATE_DELAYED and
	update the preview on "value_changed". Fixes bug #97350.

2002-12-03  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/layer.pdb: applied a modified version of a
	patch from Wolfgang Hofer <hof@gimp.org> that adds two new PDB
	functions needed for GAP: gimp_displays_reconnect() and
	gimp_layer_new_from_drawable() (bug #77508).

	* app/pdb/display_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/layer_cmds.c
	* libgimp/gimpdisplay_pdb.[ch]
	* libgimp/gimplayer_pdb.[ch]: regenerated.

2002-12-03  Sven Neumann  <sven@gimp.org>

	* app/tools/tool_manager.c (tool_manager_control_active): check
	for gdisp != NULL to avoid to crash when being called from
	indexed_ok_callback().

2002-12-03  Sven Neumann  <sven@gimp.org>

	* configure.in: do as the gtk+ folks did and replace the gtk-doc
	version check with an all-sh version (#99216).

2002-12-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c (gimp_data_save): don't check filename for
	internal GimpData objects because they are never saved.

	* app/config/gimprc.c: made verbose an object property so that its
	value is copied by gimp_config_duplicate().

2002-12-02  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-blurbs.h
	* app/config/gimpconfig-dump.c: minor changes.

2002-12-02  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-serialize.c: fixed serialization of empty
	string properties that I broke yesterday.

2002-12-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdata.[ch]: use GError for reporting load/save
	errors. Added gimp_data_error_quark() and a GimpDataError enum.
	Made simple virtual functions out of save(), get_extension()
	and duplicate() because they don't need to be signals.

	* app/core/gimpbrush.[ch]
	* app/core/gimpbrushgenerated.[ch]
	* app/core/gimpbrushpipe.[ch]
	* app/core/gimpgradient.[ch]
	* app/core/gimppalette.[ch]
	* app/core/gimppattern.[ch]: changed accordingly. Set data->dirty
	to FALSE in each _load() function.

	* app/core/gimpdatafactory.[ch]: report GError messages here.
	Changed the ugly factory->path pointer location hack to
	factory->path_property_name and get the path from
	factory->gimp->config. Added gimp_data_factory_data_duplicate()
	implementation which was already declared in the header.

	* app/core/gimp.c: pass the path property name to
	gimp_data_factory_new().

	* app/widgets/gimpdatafactoryview.c: removed the duplicate
	implementation and call gimp_data_factory_data_duplicate().

	* app/core/gimpgradient.[ch]: added gimp_gradient_save_as_pov().

	* app/gui/gradients-commands.c: removed save_as_pov implementation
	and call gimp_gradient_save_as_pov().

2002-12-01  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-blurbs.h: small cleanup.

	* app/config/gimpconfig-serialize.[ch]: export more functionality.

	* app/config/gimpconfig-dump.c: added some code to dump a
	commented version of the system-wide gimprc with default values.

2002-12-01  Sven Neumann  <sven@gimp.org>

	* app/core/core-types.h: prefix PIXELS and POINTS with GIMP
	instead of SIZE so we don't break the libgimp API without a good
	reason.

	* app/pdb/text_tool_cmds.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimp/gimpmisc.[ch]: removed gimp_timer functions since the
	GTimer API is simple enough and doesn't need to be wrapped.

	* plug-ins/common/newsprint.c
	* plug-ins/common/unsharp.c: use GTimer.

2002-12-01  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdatafiles.c: s/S_ISLINK/S_ISNLK/ (was never
	compiled before Hans fixed the #ifdef).

2002-11-30  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/flarefx.c: 
	* plug-ins/common/jigsaw.c: 
	* plug-ins/common/nova.c
	* plug-ins/common/wind.c
	* plug-ins/common/illusion.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/max_rgb.c: replace preview code by calls to libgimp

	* libgimp/Makefile.am: added gimpmiscui.[ch]
	* libgimp/gimpmiscui.[ch]: new files. For now contain effect preview
	stuff collected from several plug-ins. Warning: this is NOT the new
	effect preview widget I'm writing, just a first step to cleaning up a
	lot of plug-ins.

2002-11-30  Hans Breuer  <hans@breuer.org>

	* */makefile.msc */*/makefile.msc : updated

	* themes/Default/images/makefile.msc : new file
	* themes/Default/makefile.msc : removed

	* libgimpwidgets/gimpwidgets.def : updated

	* app/core/core-types.h : renamed PIXELS and POINTS
	to SIZE_* to avoid clashes with system headers
	* app/pdb/text_tool_cmds.c : updated ...
	* tools/pdbgen/enums.pl : ... by renaming here too.

	* app/widgets/gimphistogrambox.c : <string.h> for memcpy()
	* app/widgets/gimppropwidgets.c : <string.h> for strlen()

	* app/config/gimpconfig.c : on win32 rename always fails
	if the destination file exists. Delete it first.

	* libgimp/gimp.def : removed all '_'-prefixed exports
	* plug-ins/common/iwarp.c : replace _gimp_layer_copy()
	with gimp_layer_copy(), gimp_layer_add_alpha()

	* libgimp/gimpmisc.c : ported gimp_timer funcs to use
	g_timer to be more portable

	* libgimpbase/gimpdatafiles.c : there are no symlinks on 
	win32, inverted to #ifndef G_OS_WIN32 as it was meant.

	* libgimpbase/gimpbase.def libgimpmodule/gimpmodule.def 
	  libgimpwidgets/gimpwidgets.def : updated externals

	* plug-ins/common/randomize.c plug-ins/common/sinus.c :
	don't initialize more than the defined struct size

	* plug-ins/common/warp.c : removed unneeded unistd.h and
	signal.h include

	* regexrepl/regexrepl.def : (new file) needed to build 
	as DLL

2002-12-01  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.[ch]: added "gboolean use_shm" to the Gimp struct
	and to gimp_new().

	* app/app_procs.c: pass "use_shm" to gimp_new().

	* app/plug-in/plug-in.c (plug_in_init): get "use_shm" from the
	passed "gimp".  Don't include "appenv.h" and "app_procs.h".

2002-11-30  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpnavigationview.c: no need to include "appenv.h"

	* app/tools/gimpinktool.c: pass InkOptions as user_data to the
	ink_type_update() callback so we don't need to get them from
	"the_gimp". Removed inclusion of "app_procs.h".

2002-11-30  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: added "gboolean use_mmx"
	parameter to paint_funcs_setup(). Don't #include "appenv.h".

	* app/base/base.c: pass "use_mmx" to paint_funcs_setup().

2002-11-30  Michael Natterer  <mitch@gimp.org>

	* app/base/base-types.h: removed the global "base_config" variable.

	* app/base/base.[ch]: added "gboolean use_mmx" to base_init().
	Don't #include "appenv.h". Pass around more parameters to reduce
	the usage of the global "paint_options" pointer.

	* app/app_procs.c: pass "use_mmx" to base_init().

	* app/base/temp-buf.c: pass "temp_path" around internally. Declare
	"base_config" extern and added a #warning.

	* app/core/gimpdata.[ch]
	* app/core/gimpbrush.[ch]
	* app/core/gimpbrushgenerated.[ch]
	* app/core/gimpbrushpipe.[ch]
	* app/core/gimpgradient.[ch]
	* app/core/gimppalette.[ch]
	* app/core/gimppattern.[ch]: added "gboolean stingy_memory_use"
	parameters to all _new(), _load() and _duplicate() functions.

	* app/core/gimpmarshal.list: GimpData::duplicate needs an
	OBJECT__BOOLEAN marshaller now.

	* app/core/gimpdatafactory.[ch]: added a "Gimp" pointer so the
	factory can find the config. Pass base_config->stingy_memory_use
	to the GimpData functions changed above.

	* app/core/gimp-gradients.c
	* app/core/gimp.c
	* app/core/gimppalette-import.c
	* app/gui/palettes-commands.c
	* app/widgets/gimpdatafactoryview.c: changed accordingly.

	* app/core/gimpcontext.c: get "stingy_memory_use" from
	context->gimp->config.

2002-11-30  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.[ch]: added gimp->edit_config which is a copy of
	gimp->config except for GIMP_PARAM_RESTRT options. Create it in
	gimp_set_config() which must be called before anything else after
	gimp_new(). Install "notify" handlers between the both to keep
	them up-to-date. Enable auto saving for the edit_config.

	* app/app_procs.c: call gimp_set_config().

	* tools/pdbgen/pdb/gimprc.pdb: use gimp->edit_config here so we
	don't accidentially change GIMP_PARAM_RESTART values from the PDB.

	* app/pdb/gimprc_cmds.c: regenerated.

	* app/gui/preferences-dialog.c: use gimp->edit_config as the base
	for all prefs operations. Disable auto saving while the prefs
	dialog is open. No need any more to parse the saved gimprc to get
	GIMP_PARAM_RESTART values. Removed GIMP_PARAM_RESTART special
	hacks because edit_config handles them transparently for us.

	Unrelated:

	* app/core/gimpimage.c (gimp_image_init): initialize active_vectors.

	* app/gui/gui.c (gui_image_disconect): when the last image
	disappears, show the toolbox only if the image had a display.

2002-11-29  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdnd.c: more useful debugging output.

2002-11-29  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.c (gimp_pixmap_button_new):
	use gtk_label_new_with_mnemonic().

	* plug-ins/common/uniteditor.c: Treeviewized and undeprecated.
	Removed all static variables. Cleanup.

2002-11-28  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-params-blurbs.h: removed ...
	* app/config/gimpconfig-blurbs.h: ... and readded under this name.
	Defined all missing blurb definitions to NULL.

	* app/config/gimpconfig-params.h: added a blurb parameter to all
	GIMP_CONFIG_INSTALL_PROP_* macros.
	
	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c: register blurbs with the GimpRc
	properties.

	* app/config/gimpconfig-serialize.c: do proper line-breaking for
	comments.

	* app/core/gimpcontext.c
	* app/widgets/gimpdeviceinfo.c: register NULL blurbs here.

2002-11-28  Michael Natterer  <mitch@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-params-blurbs.h: new file defining
	blurbs for config param specs. Not used yet.

2002-11-28  Sven Neumann  <sven@gimp.org>
	
	* app/config/Makefile.am
	* app/config/gimpconfig-dump.c: added the basic infrastructure for
	a utitily that dumps the GimpRc object.

	* app/config/gimpconfig-serialize.c: dump object blurbs as comments.

2002-11-27  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpairbrush.[ch]
	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.[ch]
	* app/paint/gimpdodgeburn.[ch]
	* app/paint/gimperaser.[ch]
	* app/paint/gimppaintoptions.[ch]
	* app/paint/gimpsmudge.[ch]: it's hard to paint without a context
	to get color, brush etc. from. Added "context" parameters to
	all paint options constructors.

	* tools/pdbgen/pdb/paint_tools.pdb: pass gimp_get_current_context()
	to the constructors. Fixes bug #99557.

	* app/pdb/paint_tools_cmds.c: regenerated.

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpsmudgetool.c: changed accordingly.

	* app/tools/paint_options.c: ditto. Don't set
	paint_options->context here because we also need it in the
	no-interface case above.

2002-11-27  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/threshold_alpha.c: use gimpmisc region iterator 
	funcs.

2002-11-27  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.[ch]: added (yet unused) autosave feature.

	* app/core/gimpbrush.c
	* app/core/gimpbrushpipe.c: simplified user-visible messages.

2002-11-27  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c (preferences_dialog_create):
	added a missing cast to please the compiler.

2002-11-26  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/colorify.c: use gimpmisc region iterator funcs.

2002-11-26  Michael Natterer  <mitch@gimp.org>

	* app/config/gimprc.[ch]: added "gboolean verbose" to GimpRc and
	its constructor. Print messages only if verbose == TRUE.

	* app/gui/user-install-dialog.[ch]: changed accordingly.

	* app/app_procs.c: ditto. No need any more to parse unitrc before
	calling user_install_dialog_create().

	* app/gui/preferences-dialog.c: ditto. Added the static
	prefs_dialog pointer again so our local help func finds the
	current notebook page.

2002-11-26  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/preferences/image-title.png:
	unique icon. Nothing too fancy though.
	* themes/Default/images/preferences/input-devices.png:
	fix the border a little

2002-11-25  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/newsprint.c: timer funcs are now in gimpmisc.

	* plug-ins/common/unsharp.c: timer funcs are now in gimpmisc. Removed
	unused/non-working preview stuff. Will be restored once I finished
	a general preview widget for plug-ins.

	* plug-ins/common/colortoalpha.c
	* plug-ins/common/vinvert.c: use gimpmisc region iterator funcs.

2002-11-25  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimp/gimpmisc.[ch]: added 2 new functions (gimp_timer_start and
	gimp_timer_stop) for timing purposes. Also added 2 general region
	iterator functions, used in numerous plug-ins.

2002-11-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdnd.c (gimp_dnd_file_dest_add): changed order of
	calls to gimp_dnd_data_dest_add() so that "text/uri-list" is
	preferred over "text/plain" and "_NETSCAPE_URL". Fixes dropping
	multiple files from nautilus.

2002-11-25  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-utils.[ch]: added gimp_config_diff()
	which returns the difference beween two GimpConfig objects
	as a GList of GParamSpecs.

	* app/config/gimpconfig-params.c (gimp_param_color_cmp): compare
	the colors as integers to get rid of rounding foobar.

	* app/config/gimpconfig-serialize.c: use gimp_config_diff().

	* app/display/gimpdisplayshell-handlers.c: only need to call
	gimp_display_shell_scale_setup() on resolution change if the
	display is not in dot-for-dot mode.

	* app/display/gimpdisplayshell.c: changed a separator in the
	padding color menu.

	* app/gui/dialogs.c: made the prefs dialog a singleton again.

	* app/gui/preferences-dialog.c: Should be fully functional again:
	Apply GIMP_PARAM_CONFIRM properties on "OK". Save gimprc on "OK".
	Parse a temporaty GimpRc on dialog creation to get the current
	GIMP_PARAM_RESTART values. Use gimp_config_diff() for all config
	comparisons.

2002-11-25  Manish Singh  <yosh@gimp.org>

	* libgimpbase/gimpwire.c: using a union like that may not be
	completely portable. Use a guint8 array instead. One wonders
	if we really need to support the off-chance someone will make
	a distributed gimp framework with this current incarnation
	of the wire protocol.

2002-11-25  Manish Singh  <yosh@gimp.org>

	* libgimpbase/gimpwire.c: use a union instead of separate types to 
	read/write doubles so we don't violate C's aliasing rules. Fixes
	bug #85249.

2002-11-24  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdb/image.pdb: moved FINITE definition to $extra
	code. Changed to use #elif, much cleaner.

	* app/pdb/image_cmds.c: regenerated

	* app/core/gimpenvirontable.[ch]: added support for app internal
	environment variable settings. These override any *.env files if
	there are collisions. Not sure on that policy. Also, envp is now
	generated on the first get_envp call.

	* app/gui/gui.[ch]: added gui_environ_init, which uses
	gimp_environ_table_add. Moved the setting of DISPLAY to here.
	Added setting of GDK_DISPLAY instead for the fb backends. Hm,
	perhaps GDK should do this itself...

	* app_procs.c: call gui_environ_init.

	* libgimpwidgets/gimpcolorscale.c
	* libgimpwidgets/gimpcolorscales.c: #include <string.h> for
	strlen and memcpy.

2002-11-24  Dave Neary  <bolsh@gimp.org>

	* libgimpwidgets/gimpwidgets.c
	* libgimpwidgets/gimpwidgets.h
	* plug-ins/common/blur.c
	* plug-ins/common/plasma.c
	* plug-ins/common/randomize.c
	* plug-ins/common/sinus.c
	* plug-ins/common/snoise.c
	* plug-ins/gflare/gflare.c
	* plug-ins/maze/algorithms.c
	* plug-ins/maze/maze.c
	* plug-ins/maze/maze.h
	* plug-ins/maze/maze_face.c: Changed the gimp random seed
	widget's behaviour and made associated changes in
	plug-ins that use it.

2002-11-24  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_color_button_press): fixed menu path.

2002-11-24  Sven Neumann  <sven@gimp.org>

	* libgimp/gserialize.[ch]: removed from CVS, may always be pulled
	out of the Attic if needed again.

2002-11-24  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpdisplayconfig.c: removed GIMP_PARAM_RESTART from
	"marching-ants-speed".

	* app/display/gimpdisplayshell-selection.[ch]: removed the "speed"
	parameter from the constructor and get the speed from
	GimpDisplayConfig when starting the ants.

	* app/display/gimpdisplayshell-callbacks.c: changed accordingly.

	* app/display/gimpdisplayshell-handlers.c: connect to
	notify::marching-ants-speed and restart the ants in the handler.

	* app/gui/preferences-dialog.c: Added an own frame for the
	canvas padding color. Even more cleanup.

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/image-title.png: new image
	for the new page, copied image-windows.png

2002-11-23  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-utils.[ch]: removed
	gimp_config_values_equal().

	* app/config/gimpconfig-serialize.c
	* app/config/gimpconfig.c: use g_param_values_cmp() instead so
	our registered compare methods are used.

	* app/config/gimpdisplayconfig.[ch]: added "canvas_padding_mode"
	and "canvas_padding_color" properties.

	* app/display/display-enums.[ch]: added enum GimpDisplayPaddingMode
	which can be one of { theme, light check, dark check, custom }.

	* app/display/gimpdisplay.h
	* app/display/gimpdisplay-handlers.c: removed cached monitor
	resolution values...

	* app/display/gimpdisplayshell.[ch]: ...and added them here. Added
	padding state as in GimpDisplayConfig. Added utility function
	gimp_display_shell_set_padding() which hides all the details.
	Added the new padding modes to the padding color button's context
	menu.

	* app/display/gimpdisplayshell-callbacks.[ch]: don't fiddle
	with colors manually but use gimp_display_shell_set_padding()
	in realize() and in the color button callbacks.

	* app/display/gimpdisplayshell-handlers.c: connect to
	notify::monitor-[xy]resolution and
	notify::canvas-padding-[mode|color] and update accordingly.

	* app/widgets/gimppropwidgets.[ch]: added
	gimp_prop_color_button_new().

	* app/widgets/gimpdialogfactory.[ch]: added
	gimp_dialog_factories_session_clear() (unimplemented).

	* app/gui/preferences-dialog.c: added widgets for padding mode and
	color. Removed some callbacks by connecting the functions they
	called directly. Cleanup.

2002-11-23  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/preferences/folders-environ.png:
	replace the generic folder

2002-11-22  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]: keep a pointer to the
	nav_ebox in the GimpDisplayShell struct.

	* app/display/gimpdisplayshell-handlers.c: connect to
	notify::navigation-preview-size and set the button insensitive for
	GIMP_PREVIEW_SIZE_NONE. Also destroy an existing nav_popup so it
	will be automatically re-created on the next click.  Connect to
	notify::image-title-format and notify::image-status-format and
	update them accordingly.

	* app/display/gimpnavigationview.c: don't try any voodoo in
	gimp_navigation_view_init(). Removed the notify handler.
	Set the popup's size in gimp_navigation_view_new_private().

	* app/gui/preferences-dialog.c: removed the #if 0'ed combo boxes
	and added an own sub-page for the image title and status format.
	Select the possible values using a GtkTreeView.  Some more
	cleanup.

2002-11-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppropwidgets.c: added gimp_prop_entry_new(),
	factored lots of stuff out to local utility functions, added some
	comments to the header, cleanup.

2002-11-22  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c: allow to configure whether tips
	are shown on startup.

	* app/gui/tips-dialog.c: threw out lots of code and use
	gimp_prop_check_button_new() instead.

2002-11-21  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/blinds.c: use gimp_get_bg_guchar

	* libgimp/gimpmisc.[ch]: added gimp_pixel_fetcher routine with 
	wrapmode and generic get background color routine (gimp_get_bg_guchar)

	* plug-ins/common/edge.c: : use gimp_pixel_fetcher routines

2002-11-21  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c: use gimp_pixel_fetcher routines

2002-11-21  Sven Neumann  <sven@gimp.org>

	* app/config/gimpdisplayconfig.[ch]
	* app/config/gimpguiconfig.[ch]: moved navigation_preview_size to
	GimpDisplayConfig.

	* app/gui/preferences-dialog.c: offer the full choice of
	GimpPreviewSizes for the navigation preview size.

	* app/display/gimpnavigationview.c: multiply the preview size by 3
	to get reasonable values. Added some broken code that connects to
	notify::navigation-preview-size.

	* etc/gimprc.in: updated accordingly.

2002-11-21  Michael Natterer  <mitch@gimp.org>

	* app/base/tile-cache.[ch]: added tile_cache_init() and
	tile_cache_exit() as public functions.

	* app/base/base.c: call them. Connect to GimpBaseConfig's
	notify::tile-cache-size.

	* app/core/gimpimage.c: connect to notify::transparency-type and
	notify::transparency-size and call
	gimp_image_invalidate_layer_previews() in the callback.

	* app/display/gimpdisplay-foreach.[ch]: removed
	gdisplays_expose_full().

	* app/display/gimpdisplayshell-handlers.c: connect to
	notify::transparency-type and notify::transparency-size and expose
	the shell in the callback.

	* app/display/gimpdisplayshell-render.[ch]: added render_init()
	and render_exit() functions and connect to
	notify::transparency-type and notify::transparency-size for
	setting up the render buffers.

	* app/gui/gui.c: call the new functions instead of render_setup().
	Connect to notify::show-tool-tips.

	* app/gui/preferences-dialog.c: copy values between the global
	config object and it's local copy only when they have changed.
	Wrap setting of lots of values in g_object_[freeze|thaw]_notify().
	Added lots of mnemonics.

	* app/gui/resolution-calibrate-dialog.c: added mnemonics.

	* app/widgets/gimppropwidgets.c: g_object_set() the values edited
	by the gimp_prop_coordinates() much less often by remembering the
	old values and setting them only when they have changed.

2002-11-21  Sven Neumann  <neo@wintermute>

	* app/gui/preferences-dialog.c (prefs_dialog_new): don't set the
	default resolution unit from the monitor resolution entry.

	* app/gui/user-install-dialog.c: use the new GimpPropWidgets. The
	monitor resolution setup may need some more tweaking ...

2002-11-20  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/whirlpinch.c
	* plug-ins/common/polar.c
	* plug-ins/common/mblur.c: use pixel_fetcher routines that are now in
	libgimp.

2002-11-20  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimp/Makefile.am: added gimpmisc.[ch]

	* libgimp/gimp.h: include gimpmisc.h

	* libgimp/gimpmisc.[ch]: new files, containing all kinds of 
	miscellaneous routines factored out from different plug-ins. They stay
	here until their API has crystalized a bit and we can put them into 
	the file where they belong.

2002-11-20  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/whirlpinch.c
	* plug-ins/common/waves.c
	* plug-ins/common/polar.c
	* plug-ins/common/warp.c
	* plug-ins/common/displace.c: replaced all implementations of bilinear 
	func by call to gimp_bilinear_8/16

2002-11-20  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.c: made object properties from the gimprc
	filenames. Use NULL to set to the default values.

	* app/app_procs.c
	* app/gui/user-install-dialog.[ch]: don't pass a gimp pointer to
	the user installation dialog. All it needs to know are the
	alternative gimprc names if such are given on the command-line.

2002-11-20  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/gimppropwidgets.[ch]: new files containing
	constructors for views on GObject properties.

	* app/gui/Makefile.am: build the preferences dialog again.

	* app/gui/dialogs-constructors.c
	* app/gui/dialogs.c
	* app/gui/menus.c: added it back to the dialog system (as a non
	singleton to give the new model <-> view stuff some testing).

	* app/gui/preferences-dialog.c: here it is again, using property
	view widgets. Lots of stuff removed & simplified. Some things
	still #if 0'ed and/or non-working. No saving yet ...

2002-11-20  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.[ch]: store the gimprc filenames in the
	GimpRc object; will become properties later.

	* app/app_procs.c: use the new GimpRc API and added the
	functionality back that allows to specify different gimprc
	files on the command-line.

	* app/gui/user-install-dialog.c: don't work on the real gimprc
	object but create one for the install procedure and save it.

2002-11-20  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpenummenu.[ch]: added *_new_with_values() and
	*_new_with_values_valist() variants to make enum menu creation
	even more customizable.

2002-11-20  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-params.h: added GIMP_PARAM_RESTART and
	GIMP_PARAM_CONFIRM flags and changed all param spec macros
	to have a "flags" parameter.

	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c: tag the values which need restart or
	confirmation with the resp. flags. Changed all macro calls
	accordingly.

	* app/core/gimpcontext.c
	* app/widgets/gimpdeviceinfo.c: changed macro calls accordingly.

2002-11-20  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig.h:
	s/gimp_config_equal/gimp_config_is_equal_to/ to match the
	implementation.

2002-11-20  Sven Neumann  <sven@gimp.org>

	* app/gui/user-install-dialog.c: don't access the global base_config
	which is not initialized at this point.

2002-11-20  Dave Neary  <bolsh@gimp.org>

	* plug-ins/maze/maze.[ch]
	* plug-ins/maze/algorithms.c
	* plug-ins/maze/maze_face.c: Changed occurreces of
	timeseed to defaultseed to more accurately reflect what
	happens with the g_rand* functions. Sorry for missing one
	earlier & temporarily breaking the build :~}

2002-11-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/maze/maze.[ch]
	* plug-ins/algorithms.c: make it compile. I'm not sure if this is the
	correct fix though...

2002-11-20  Dave Neary  <bolsh@gimp.org>

	* configure.in
	* app/core/gimpbrushpipe.c
	* app/gui/about-dialog.c
	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c
	* libgimpmath/gimpmath.h
	* libgimpwidgets/gimpwidgets.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/blur.c
	* plug-ins/common/cubism.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/lic.c
	* plug-ins/common/noisify.c
	* plug-ins/common/nova.c
	* plug-ins/common/papertile.c
	* plug-ins/common/plasma.c
	* plug-ins/common/randomize.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/shift.c
	* plug-ins/common/sinus.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/snoise.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/spread.c
	* plug-ins/common/warp.c
	* plug-ins/common/wind.c
	* plug-ins/flame/cmap.c
	* plug-ins/flame/flame.c
	* plug-ins/flame/libifs.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/gimpressionist.[ch]
	* plug-ins/gimpressionist/plasma.c
	* plug-ins/gimpressionist/repaint.c
	* plug-ins/ifscompose/ifscompose_utils.c
	* plug-ins/maze/algorithms.c
	* plug-ins/maze/maze.[ch]
	* plug-ins/mosaic/mosaic.c: Change all occurrences of RAND_MAX,
	G_MAXRAND, rand(), srand(), lrand48(), srand48(), random(),
	srandom(), RAND_FUNC and SRAND_FUNC to the appropriate g_rand*
	equivalent. Programs which require seed setting for reproducible
	results, and anything in the core, gets a dedicated GRand * for
	the lifetime required. Programs which only ever used random
	numbers for tossing a coin, rolling a dice, etc use g_random
	functions. For the rest, judgement was used. Where it was easy, a
	GRand * object was used and g_rand_* functions were
	preferred. This fixes bug #67386 in HEAD.

2002-11-19  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimpcolor/gimpbilinear.c (gimp_bilinear): fixed bug that could
	happen with negative values of parameter x or y. Same bug in
	gimp_bilinear_8, gimp_bilinear_16 and gimp_bilinear_32.

2002-11-19  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/gimpressionist/brush.c
	* plug-ins/gimpressionist/color.c
	* plug-ins/gimpressionist/general.c
	* plug-ins/gimpressionist/gimp.c
	* plug-ins/gimpressionist/gimpressionist.[ch]
	* plug-ins/gimpressionist/orientation.c
	* plug-ins/gimpressionist/orientmap.c
	* plug-ins/gimpressionist/paper.c
	* plug-ins/gimpressionist/placement.c
	* plug-ins/gimpressionist/plasma.c
	* plug-ins/gimpressionist/ppmtool.[ch]
	* plug-ins/gimpressionist/presets.c
	* plug-ins/gimpressionist/preview.c
	* plug-ins/gimpressionist/repaint.c
	* plug-ins/gimpressionist/size.c
	* plug-ins/gimpressionist/sizemap.c: lots and lots of changes. 
	gimpressionist now looks more or less like other plug-ins, using
	gimp_scale widgets for data entry, the gimp_color_button for color
	selection, the OK and Cancel button at the bottom, etc. There are still
	a few things left to do, mostly more code clean-up.

2002-11-19  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppatheditor.[ch]: added new function
	gimp_path_editor_set_path().

2002-11-19  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-params.[ch]: derive GimpParamSpecMemsize
	from GParamSpecULong.

2002-11-19  Manish Singh  <yosh@gimp.org>

	* data/environ/Makefile.am: really fix a comment

2002-11-18  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c: added a missing include.

2002-11-18  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am
	* app/general.[ch]: we don't need these any longer.

2002-11-18  Sven Neumann  <sven@gimp.org>

	Finally landed the new GimpConfig based gimprc parser. It's not
	finished yet but we need to start somewhere. This release removes
	the old gimprc.[ch] files. The gimprc format changes slightly, but
	the changes are minimal. The Preferences dialog is temporarily
	disabled since it still needs to be ported. If you are are afraid,
	stay away from CVS for a few days ;-)

	* app/Makefile.am
	* app/gimprc.[ch]: removed the old gimprc system.

	* app/base/Makefile.am
	* app/base/base-config.[ch]: removed these files in favor of
	config/gimpbaseconfig.[ch].

	* app/core/Makefile.am
	* app/core/gimpcoreconfig.[ch]: removed these files in favor of
	config/gimpcoreconfig.[ch].

	* app/config/Makefile.am
	* app/config/config-types.h: moved typedefs into this new file.

	* app/config/gimpbaseconfig.[ch]
	* app/config/gimpcoreconfig.[ch]
	* app/config/gimpdisplayconfig.[ch]
	* app/config/gimpguiconfig.[ch]
	* app/config/gimprc.[ch]
	* app/config/test-config.c: brought into shape for real use.

	* app/base/base-types.h: include config/config-types.h here. Added
	a global GimpBaseConfig *base_config variable to ease migration.

	* app/gui/Makefile.am: temporarily disabled the preferences dialog.

	* app/app_procs.c
	* app/undo.c
	* app/undo_history.c
	* app/base/base.[ch]
	* app/base/gimphistogram.c
	* app/base/pixel-processor.c
	* app/base/temp-buf.c
	* app/base/tile-cache.c
	* app/core/core-types.h
	* app/core/gimp-documents.c
	* app/core/gimp.c
	* app/core/gimpbrush.c
	* app/core/gimpbrushgenerated.c
	* app/core/gimpcontext.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage.c
	* app/core/gimpimagefile.c
	* app/core/gimpmodules.c
	* app/core/gimppattern.c
	* app/display/Makefile.am
	* app/display/gimpdisplay-handlers.c
	* app/display/gimpdisplay.[ch]
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell-layer-select.c
	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-scroll.c
	* app/display/gimpdisplayshell-selection.c
	* app/display/gimpdisplayshell.[ch]
	* app/display/gimpnavigationview.c
	* app/file/file-save.c
	* app/gui/device-status-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/file-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/paths-dialog.c
	* app/gui/resize-dialog.c
	* app/gui/session.c
	* app/gui/test-commands.c
	* app/gui/tips-dialog.c
	* app/gui/tips-dialog.h
	* app/gui/user-install-dialog.c
	* app/gui/view-commands.c
	* app/paint/gimppaintcore.c
	* app/plug-in/plug-in.c
	* app/plug-in/plug-ins.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimptexttool.[ch]
	* app/tools/selection_options.c
	* app/tools/tools.c
	* app/tools/transform_options.c
	* app/widgets/gimphelp.c
	* app/widgets/gimpitemfactory.c
	* app/widgets/gimpselectioneditor.c
	* app/xcf/xcf-load.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gimprc.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: use the new config system
	instead of the old gimprc stuff.

	* etc/gimprc.in
	* etc/gimprc_user.in: adapted to the new gimprc format. Will update
	the man-page later...

	* app/pdb/fileops_cmds.c
	* app/pdb/gimprc_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/transform_tools_cmds.c
	* libgimp/gimpgimprc_pdb.c: regenerated.
	
2002-11-18  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.c
	(gimp_config_deserialize_properties): improved error message for
	the special case of store_unknown_tokens == TRUE.

	* app/config/gimpconfig.c (gimp_config_add_unknown_token): try to
	substitute paths of the form ${foo} in the unknown token value.

	* app/config/gimpconfig-deserialize.c (gimp_config_deserialize_enum):
	allow numbers when deserializing enum values.

	* data/environ/Makefile.am: fixed a comment.

2002-11-18  Sven Neumann  <sven@gimp.org>

	* data/images/Makefile.am
	* data/images/gimp_splash.gif: removed old animated splash.

	* data/images/gimp_splash.png: a new splash screen for 1.3.11
	created by Jakub Steiner <jimmac@ximian.com>.

2002-11-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptransformtool.[ch]: removed public function
	gimp_transform_tool_transform_tiles() and made it the default
	implementation of the transform() virtual function. Added
	"const gchar *progress_text" to GimpTransformTool so it is
	available for the new default implementation. Cleanup.

	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: removed transform() implementations
	and set transform_tool->progress_text accordingly. Even more
	cleanup.

2002-11-18  Sven Neumann  <sven@gimp.org>

	* autogen.sh: try automake-1.7 if automake-1.6 is not available.

2002-11-18  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.c: forgot to remove the
	"_delete_event_" stuff's documentation.

2002-11-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/tool_manager.c: removed unneeded #includes.

2002-11-18  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.c: removed the "feature" of creating
	dialogs without action area by passing "_delete_event_" as button
	text. Also changed the delete_event() implementation: don't
	remember a callback and call it manually but gtk_widget_activate()
	the button for which "connect_delete" was passed as TRUE.

	* app/gui/test-commands.c: added a "Close" button to the multi view.

	* app/gui/brush-select.[ch]
	* app/gui/gradient-select.[ch]
	* app/gui/palette-select.[ch]
	* app/gui/pattern-select.[ch]: ditto. Removed the "context"
	parameter of the *_select_new() functions. All sorts of cleanups
	in all dialogs.

	* app/gui/convert-dialog.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/palette_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb: changed accordingly.

	* app/pdb/brush_select_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/palette_select_cmds.c
	* app/pdb/pattern_select_cmds.c: regenerated.

2002-11-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimprotatetool.c (roatate_angle_changed): compare the
	old and new angle using an epsilon of 0.0001 degrees so we don't
	get double "angle changed" because of rounding foobar.

	* app/tools/gimptransformtool.c: made GimpTransformTool subclasses
	which don't use the grid (namely the flip tool) work correctly
	again by looking at transform_tool->use_grid more often.

2002-11-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpcontainer.c (gimp_container_get_child_by_name):
	accept a NULL name and return NULL. Fixes warnings when starting
	gimp w/o a gimprc.

2002-11-18  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcursor.c: removed commented out and unused
	cruft, cleanup.

2002-11-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (gimp_toolbox_new): add a file dnd
	dest for the toplevel toolbox widget too. Makes gimp-remote work
	again.

2002-11-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdrawablelistview.c: removed #undef
	GTK_DISABLE_DEPRECATED and #warning because we don't use
	deprecated stuff here.

2002-11-17  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontext.c (gimp_context_set_default_colors,
	gimp_context_swap_colors): g_return_if_fail() earlier to clarify
	things (There was a bug in 1.2 which was fixed only accidentially
	in HEAD).

2002-11-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdnd.h: added GTK_TARGET_SAME_APP flag
	to GIMP_TARGET_BUFFER.

2002-11-17  Michael Natterer  <mitch@gimp.org>

	* app/gui/color-notebook.c (color_notebook_new_internal): removed
	the non-dialog variant (all color notebooks have "Cancel" and "OK"
	buttons again). We have the color dockable which can be always
	open now and don't need this hack any more.

2002-11-16  Manish Singh  <yosh@gimp.org>

	* app/plug-in/plug-in.c: use g_spawn_async now. If the OS/2 port
	is still being maintained, there needs to be work done Glib side.
	If not, we should probably drop the other support code.

	* app/plug-in/plug-in.h: remove unused Win32 only structure members

2002-11-14  Michael Natterer  <mitch@gimp.org>

	Transform tool cleanup:

	* libgimptool/gimptoolenums.[ch]: removed the TransformState enum.

	* app/tools/gimptransformtool.[ch]: don't dispatch everything
	through the transform() virtual function. Added new vitrual
	functions dialog(), prepare(), motion() and recalc(). Do only the
	actual transform in transform(). Moved lots of logic which was
	duplicated in each subclass' transform() here. Cleanup.

	* app/tools/gimpfliptool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: changed accordingly: moved code from
	transform() to the other method imlementations. Removed duplicated
	logic which is now done by our parent class. Makes everything
	smaller and more readable.

	InfoDialog cleanup:

	* app/gui/info-dialog.c: removed the "delete_event" callback so
	InfoDialog users can decide themselves what to do.

	* app/gui/info-window.c
	* app/tools/gimpmeasuretool.c: changed accordingly.

	* app/tools/gimpcolorpickertool.c: ditto. Moved info_dialog
	creation to a utility function to improve code readbility.

	* app/tools/gimpcroptool.c: ditto. Added a "Cancel" button which
	really cancels the tool instead of just hiding the dialog.

	* app/tools/gimptransformtool.c: added a "Cancel" button here too.

2002-11-14  Michael Natterer  <mitch@gimp.org>

	* app/gui/tools-commands.c (tools_select_cmd_callback): removed
	the old hack which sets tool->gdisp. Fixes bug #98056.

	* app/tools/gimpimagemaptool.c (gimp_image_map_tool_initialize):
	set tool->gdisp here because the hack was there for tools which
	implement initialize() and show dialogs when selected from the
	menu. Also fixed wrong paramater to gimp_viewable_dialog_new().

2002-11-12  Sven Neumann  <sven@gimp.org>

	* app/paint/gimppaintcore.c: check for NULL masks returned from
	the brush scaler. Should fix crashes with buggy input devices.
	Fix suggested by Jim Meyer <jim@dsdd.org> (#91067).

2002-11-12  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: use GTK_STOCK_REMOVE for "<Dialogs>/Remove Tab".

2002-11-11  Manish Singh  <yosh@gimp.org>

	* autogen.sh: don't say "Now type 'make'" if configure failed.

	* app/core/Makefile.am
	* app/core/core-types.h 
	* app/core/gimpenvirontable.[ch]: Implemented GimpEnvironTable,
	keeps an envp array built from system environment and *.env files.

	* app/core/gimp.[ch]: keep a GimpEnvironTable around.

	* app/gimprc.c
	* app/config/gimpcoreconfig.[ch]
	* app/core/gimpcoreconfig.h
	* app/gui/preferences-dialog.c
	* app/gui/user-install-dialog.c: environ-path config stuff

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/folder-environ.png: just copied
	folder.png here, need a better one.

	* app/plug-in/plug-in.c: quick hack to use the envp in the
	GimpEnvironTable. Only on unix now, should really port the
	code to use g_spawn_*.

	* data/misc/user_install
	* etc/gimprc.in: add environ-path stuff

	* data/environ/Makefile: creates system environ directory.
 
	* data/environ/default.env: sample env file info.

	* data/Makefile.am
	* configure.in: added data/environ dir

	* plug-ins/pygimp/Makefile.am: python module files get put in
	$(gimpplugindir)/python now, install pygimp.env to point to it.

	* plug-ins/pygimp/doc/Makefile.am: minor clean up.

2002-11-09  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/png.c: allow setting compression level 0 from
	the UI.

2002-11-10  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdrawable-transform.c (gimp_drawable_transform_paste):
	the transformed tile_manager has always an alpha channel, so use
	gimp_drawable_type_with_alpha() when creating a layer from it
	using gimp_layer_new_from_tiles(). Fixes bug #98053.

2002-11-09  Manish Singh  <yosh@gimp.org>

	* app/widgets/gimppreview.[ch]: use a low priority idle handler to
	queue redraws, since we really want updates when nothing else is
	going on.

2002-11-09  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpselectioneditor.c
	* app/widgets/gimpvectorslistview.c: don't undefine
	GTK_DISABLE_DEPRECATED here, since these files don't use any
	deprecated functions.

2002-11-09  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/sinus.c (sinus_dialog): applied a patch from Yeti to
	fix #81965 (Sinus filter doesn't use the 'standard' gimp_random_seed 
	widget.) + some minor changes to make it work.

2002-11-08  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_object.c (object_get_icon): first go at fixing
	#97771. Not finished yet.

2002-11-07  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/rcm/rcm_callback.c (rcm_units_string): replaced "???" by
	"unknown" to avoid compiler complaining about trigraphs.
	* plug-ins/rcm/rcm_callback.[ch]: have callback functions return the
	right type (gboolean iso gint).

	* plug-ins/rcm/rcm_misc.c (rcm_render_circle): fixed potential memory
	leak

2002-11-07  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/maze/handy.c: removed superfluous function declarations 
	plus some minor clean-up.

	* plug-ins/common/smooth_palette.c (dialog): replaced "Search Time" by
	"Search Depth" (#82492)

	* plug-ins/gfig/gfig.c (gfig_op_menu_create): replaced "Save as..." by
	"Save As..." (solves #92469)

	* plug-ins/MapObject/arcball.c: remove external function declarations 
	already defined in arcball.h

2002-11-08  Sven Neumann  <sven@gimp.org>

        * plug-ins/script-fu/script-fu-scripts.c
        * plug-ins/script-fu/interp_slib.c
        * plug-ins/script-fu/interp_sliba.c: use locale-independant
        functions to convert between strings and numbers so that Script-Fu
        doesn't get confused in locales that don't use a dot as the
        decimal point (#98014).

        * plug-ins/common/papertile.c: applied a patch from David Necas
        that makes the color button work again (#97976).

2002-11-07  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/xbm.c: Applied patch from Raphael
	Quinet to suppress printing of comments in XBM files.
	Closes bug #82763.

2002-11-07  Sven Neumann  <sven@gimp.org>

	* Made 1.3.10 release.

2002-11-07  Sven Neumann  <sven@gimp.org>

	* Makefile.am: removed mydistcheck hook.

	* app/base/Makefile.am
	* app/paint-funcs/Makefile.am: removed automake-1.4 and 1.5 specific
	stuff; made it work correctly for srcdir != builddir.

	* tools/pdbgen/Makefile.am: do not to write into the source tree.

2002-11-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpbrushpreview.c
	(gimp_brush_preview_render_timeout_func): fixed a bug spotted
	by Jim Meyer (#97911) and added a missing call to
	gtk_widget_queue_draw().

2002-11-07  Sven Neumann  <sven@gimp.org>

	* HACKING: mention the automake-1.6 requirement.

2002-11-06  Manish Singh  <yosh@gimp.org>

	* acinclude.m4: third times the charm. Python support macros
	moved here.

2002-11-06  Manish Singh  <yosh@gimp.org>

	* configure.in: remove automake 1.4 special casing here too

2002-11-06  Manish Singh  <yosh@gimp.org>

	* autogen.sh: require automake 1.6

	* m4compat: removed, unneeded now

2002-11-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/papertile.c: applied a patch from Toby Smith
	that moves the call to gimp_drawable_mask_bounds() to the filter()
	function so that the filter is applied to the correct selection
	even if it changed after the plug-in dialog was opened (#83971).

	* plug-ins/common/unsharp.c (unsharp_mask_dialog): allow larger
	values for the radius (as suggested in #92250).

	* plug-ins/common/png.c: applied patch from Raphael Quinet that
	untoggles the "Save background color" option for images w/o an
	alpha channel (#92395).

2002-11-06  Sven Neumann  <sven@gimp.org>

	* app/base/base.c (base_init): don't say we'd use MMX if it is
	disabled.

	* libgimpmodule/gimpmodule.[ch]
	* app/gui/module-browser.c: changed enum values and user-visible
	strings to saner values.

	* libgimpmodule/gimpmoduledb.c
	* plug-ins/tools/tool-safe-mode.c: made them less verbose.

2002-11-06  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/png.c: Removed cruft from file,
	 including unclear comments and redundant code.

2002-11-06  Sven Neumann  <sven@gimp.org>

	* app/xcf/xcf-save.c
	* app/xcf/xcf.c: save as XCF version 2 if one of the new layer
	modes is used.

	* plug-ins/gflare/gflare.c: fixed #97766 along with a couple of
	other GUI issues.

2002-11-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mapcolor.c: fixed stupid bug that caused this
	plug-in to map to undefined values. Spotted by David Necas (#97780).

	* tools/authorsgen/contributors: added some names.

	* AUTHORS
	* app/gui/authors.h: regenerated.

2002-11-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/gflare/gflare.c: applied a couple of patches from
	David Necas <yeti@physics.muni.cz> that fix various issues with
	the GFlare plug-in. Most of these were introduced when doing the
	(still unfinished) port to GTK+-2.0 (#97761, #97764, #97765).

	Did some more changes while I was on it...

	* plug-ins/gflare/gflares/Bright_Star
	* plug-ins/gflare/gflares/Classic
	* plug-ins/gflare/gflares/Default
	* plug-ins/gflare/gflares/Distant_Sun
	* plug-ins/gflare/gflares/GFlare_101
	* plug-ins/gflare/gflares/GFlare_102
	* plug-ins/gflare/gflares/Hidden_Planet: applied a patch from
	yeti@physics.muni.cz that changes the names to use spaces instead
	of underscores (#97763).

2002-11-05  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.h
	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c
	* app/widgets/gimpwidgets-constructors.c: applied a patch from
	Guillermo S. Romero that adds three new layer modes (Softlight,
	Grain Extract and Grain Merge, #97686).

	* app/base/base-enums.c
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/misc_tools_cmds.c
	* app/widgets/gimpwidgets-constructors.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.
	
2002-11-05  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorselector.[ch]: added virtual functions
	set_toggles_visible() and set_toggles_sensitive(). Added a
	stock_id. Emit "color_changed" and "channel_changed" on
	set_color() and set_channel() resp.

	* libgimpwidgets/gimpcolornotebook.[ch]: implement the new
	methods.  Added gimp_color_notebook_set_has_page() to control
	which selectors a notebook contains.

	* libgimpwidgets/gimpcolorscales.[ch]: removed the toggle
	API and implement the new methods.

	* libgimpwidgets/gimpcolorselect.c: added toggle buttons for the
	channels so the widget doesn't need external ones.

	* app/gui/color-notebook.c: changed accordingly.

	* libgimpwidgets/gimpstock.[ch]
	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-color-triangle-16.png: added a
	(bad) icon for the triangle color selector.

	* modules/colorsel_triangle.c: use the new icon.
	* modules/colorsel_water.c: use the "Paintbrush" icon for now.

	* app/widgets/gimpcoloreditor.[ch]: new widget for editing the
	FG/BG color featuring a color notebook, stock buttons for
	selecting the pages and a GimpPickButton.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h: changed accordingly.

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c: added a dockable wrapper for GimpColorEditor.

	* app/gui/menus.c: added it to the menus. Also added separate
	Layers, Channels and Paths entries. Bind <ctrl>L to the new
	callback so it doesn't always create a new layers dialog.

2002-11-05  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.c: on error, always close the module
	using gimp_module_close(), not g_module_close() so all stuff gets
	reset. Set module->state *after* calling gimp_module_close().
	Added more error checking & messages.

2002-11-04  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppickbutton.[ch]: new GtkButton subclass
	implementing the pick-from-everywhere eyedropper known from
	GtkColorSel. Code shamelessly stolen from there.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h: changed accordingly.

2002-11-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdock.c (gimp_dock_class_init): connect
	book_removed()'s default implementation correctly so dock auto
	destruction on last dockbook removal works again.

2002-11-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/gimp_color_window.c: use stock buttons.

2002-11-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppreview.[ch]: removed idle rendering and render
	the preview on "expose" if needed. Renamed gimp_preview_render()
	to gimp_preview_update(). Cleanup.

	* app/widgets/gimpimagefilepreview.c
	* app/widgets/gimpselectioneditor.[ch]
	* app/widgets/gimptoolinfopreview.c: changed accordingly.

2002-11-03  Garry R. Osgood <grosgood@rcn.com>
	
	* configure.in defined GIMP_ENABLE_MMX. Current value 0; to disable
	related MMX code in app/paint-funcs/paint-funcs.c and 
	app/paint-funcs/paint-funcs-mmx.h
	* app/paint-funcs/paint-funcs.c
	* app/paint-funcs/paint-funcs-mmx.h MMX code bracketed by above
	define Closes #86290 and #90969 by expediency: bugs were not in
	MMX assembly, but in the revised wrapper introduced on 2001-11-19,
	which does not accommodate correctly macros designed to run the
	MMX code selectively. Rather than revert, discussion on bug report
        thread opted to disable such 'MMX microoptimizations' for now, and 
	get the design correct first in pure C. See bug report and caveats
	in paint-funcs-mmx.h
	
2002-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.[ch]: simplified the code and
	improved the performance by getting rid of the idle function.
	Simply rerender the buffer on expose if necessary.

2002-11-02  Sven Neumann  <sven@gimp.org>

	* app/display/gimpprogress.c (gimp_progress_update): force an update
	of the progress bar (#97459, reported by Akkana).

2002-11-01  Michael Natterer  <mitch@gimp.org>

	* app/gui/file-open-dialog.[ch]: added "gimage" and "uri"
	parameters to file_open_dialog_show(). If an image is passed, go
	to that image's directory, for an uri, preselect the file.
	Fixes bug #96779.

	* app/gui/menus.c: pass "action" to file_open_cmd_callback() so we
	can distinguish if it was invoked from the toolbox or an image.

	* app/gui/file-commands.[ch]: if invoked from an image, pass it to
	file_open_dialog_show().

	* app/widgets/gimpdocumentview.c: pass the selected document's uri
	to file_open_dialog_show().

	* app/gui/file-save-dialog.c: use gimp_image_get_filename()
	instead of fiddling with the image's uri manually.

2002-11-01  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdataeditor.c
	* app/widgets/gimpimageview.c: changed some debugging output to
	say "TODO: ...".

2002-11-01  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscale.[ch]: improved preformance by
	rendering the buffer only when needed for an expose instead of
	after each color/channel change.

2002-11-01  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscale.c (gimp_color_scale_render): no
	need to assign "d = buf" twice.

2002-11-01  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/stock-reset-16.png: finally a Reset icon
	from Jakub Steiner <jimmac@ximian.com>.

2002-11-01  Michael Natterer  <mitch@gimp.org>

	* libgimpcolor/gimpcolorspace.h (gimp_rgb_to_hsv4): "rgb" and
	"hsv" parameters were swapped in the header. All users however
	used the function as implemented, not as documented.

2002-11-01  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version number to 1.3.10.

	* app/tools/gimpfliptool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppathtool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpvectortool.c: use shorter strings for the dockable
	tabs.

2002-10-31  Sven Neumann  <sven@gimp.org>

	* app/gui/color-notebook.c: make the dialog a "normal" window if
	it is created w/o an action area (#97364).

	* plug-ins/Lighting/lighting_preview.c: removed use of deprecated
	GDK functions.

2002-10-31  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gauss_iir.c
	* plug-ins/common/gauss_rle.c
	* plug-ins/common/sel_gauss.c:
	applied a patch from Guillermo S. Romero that extends the range of
	valid radii to > 0.0 for these blur plug-ins (#97166).
	
2002-10-31  Sven Neumann  <sven@gimp.org>

	* app/gui/dialogs-constructors.c: don't add "Options" to the
	tools name when setting the dockbook tab label.

	* app/gui/color-notebook.c: removed the white and black color
	buttons since white and black are trivial to select anyway.

2002-10-31  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.[ch]: removed rgb and hsv parameters
	from gimp_color_scale_new().

	* libgimpwidgets/gimpwidgets.c: changed accordingly.

2002-10-31  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.c: made inverted and flippable work
	correctly.

2002-10-31  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.c: added the missing bits for
	channel == GIMP_COLOR_SELECTOR_ALPHA and for vertical orientation.

2002-10-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am: install gimpcolorscale.h.

	* libgimpwidgets/gimpcolorscale.c: changed the sliders to black
	and white arrows.

2002-10-30  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdata.[ch] (gimp_data_delete_from_disk): don't
	g_message() on error but return a GError.

	* app/widgets/gimpdatafactoryview.c: show the message here.

2002-10-30  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdevices.c: don't #include "core/gimpbrush.h"

2002-10-30  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbrush.[ch]: cosmetic cleanup.

2002-10-30  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscale.c: fixed rendering for partial
	expose events.

	* libgimpwidgets/gimpwidgets.[ch]: added gimp_color_scale_entry_new().

	* libgimpwidgets/gimpcolorscales.c: use the color scales.

2002-10-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorselect.c: use a mnemonic that doesn't
	collide with the rest of the dialog.

	* modules/Makefile.am
	* modules/colorsel_gtk.c: removed the GTK color selector module.

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: translate in the gimp14-libgimp domain.

2002-10-30  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolornotebook.c: create the notebook labels
	with mnemonics.

	* libgimpwidgets/gimpcolorselect.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: added mnemonics to the tab strings.

	* libgimpwidgets/gimpcolorscale.c: looks finished now.

	* libgimpwidgets/gimpcolorscales.c: tie the test color scale to
	the right channel adjustment and update its color and channel
	accordingly. Added mnemonics for the channels.

2002-10-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.[ch]: derive it from GtkScale, 
	override the expose method and draw something there. Work in
	progress...

	* libgimpwidgets/gimpcolorscales.c: added a GimpColorScale widget
	for testing.

2002-10-30  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscale.[ch]: added some API and
	stuff. Still does nothing.

2002-10-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.[ch]: cosmetics.

2002-10-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.[ch]: new files, basic framework
	for a new widget, does nothing yet.

	* Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h: changed accordingly.

2002-10-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscales.c: removed the hashmark from the
	hex entry.

2002-10-29  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolornotebook.[ch]: made the color notebook
	a GimpColorSelector subclass so they have the same API.

	* app/gui/color-notebook.c: changed accordingly.

2002-10-29  Sven Neumann  <sven@gimp.org>

	* libgimpmodule/gimpmodule.c
	* libgimpwidgets/gimpcolorscales.c
	* libgimpwidgets/gimpcolorselect.c: include libgimp-intl.h, not
	gimpintl.h since this is in the gimp14-libgimp translation domain.

	* libgimpmodule/gimpmoduledb.c
	* libgimptool/gimptool.c: no need to include intl.h from here, there
	are no translatable message.

2002-10-29  Manish Singh  <yosh@gimp.org>

	* gimptool-1.3.in: strip paths from the plug-in filename for
	installation (fixes #97111).

2002-10-29  Sven Neumann  <sven@gimp.org>

	* app/tools/Makefile.am
	* app/tools/tools-enums.c: removed this file which was moved to
	libgimptool in March.

2002-10-28  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscales.[ch]: the color scales from
	the main color selection as GimpColorSelector subclass.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetsmarshal.list
	* libgimpwidgets/gimpwidgetstypes.h: changed accordingly.

	* libgimpwidgets/gimpcolornotebook.c: skip it when iterating the
	GimpColorSelector subclasses.

	* libgimpwidgets/gimpcolorselector.[ch]: added virtual function
	set_has_alpha() amd signal "channel_changed". Put RGB, HSV and
	channel values into to the GimpColorSelector struct where they are
	available for subclasses.

	* libgimpwidgets/gimpcolorselect.[ch]
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: changed accordingly, cleanup.

	* app/gui/color-notebook.[ch]: use the new GimpColorScales widget,
	lots of cleanup.

2002-10-28  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/unsharp.c: reordered action buttons.

2002-10-28  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolornotebook.[ch]: the notebook as known
	from the main color selection as new widget.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpcolorselector.h
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h: changed accordingly.

	* app/gui/color-notebook.c: use the new widget.

2002-10-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdock.[ch]: added "book_added" and "book_removed"
	signals. Removed the "destroy_if_empty" flag and destroy empty
	docks in book_removed's default implementation.

	* app/widgets/gimptoolbox.c: implement "book_added" and
	"book_removed" and set the window to freely resizable vertically
	if it contains dockbooks, and to the current behaviour of snapping
	to multiples of tool_button height otherwise. Fixes bug #93309.

	* app/widgets/gimpimagedock.c: changed accordingly.

2002-10-25  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.c
	* app/gui/about-dialog.c
	* app/gui/convert-dialog.c
	* app/gui/dialogs-commands.c
	* app/gui/file-commands.c
	* app/gui/palette-import-dialog.c
	* app/tools/gimptexttool.c
	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpwidgets-utils.c
	* libgimpwidgets/gimpfileselection.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gimpressionist/general.c
	* plug-ins/gimpressionist/gimpressionist.c: replaced all sorts of
	gtk_widget_show()/gdk_window_raise() combinations by
	gtk_window_present().

2002-10-25  Michael Natterer  <mitch@gimp.org>

	* app/gui/Makefile.am
	* app/gui/color-history.[ch]: new files implementing the color
	history which used to live in color-notebook.*

	* app/gui/color-notebook.[ch]
	* app/gui/session.c: changed accordingly.

2002-10-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpimagedock.c: removed #warning and inclusion of
	"display/*" stuff because we use GimpDisplays as GimpObjects in
	this file.

2002-10-24  Sven Neumann  <sven@gimp.org>

	* app/pdb/display_cmds.c
	* tools/pdbgen/pdb/display.pdb (display_new_invoker): the first
	display takes ownership of the image. Fixes bug #94371.

2002-10-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c: applied a patch from
	Michael Niedermayer <michaelni@gmx.at> that adds support for
	YCbCr (de)composition (#96448).

2002-10-23  Michael Natterer  <mitch@gimp.org>

	Moved generic datafile loading to LibGimpBase:

	* app/core/gimpdatafiles.[ch]: removed...

	* libgimpbase/gimpdatafiles.[ch]: ...and add here with a changed
	API which requires no more global variables.

	* libgimpbase/Makefile.am
	* libgimpbase/gimpbase.h
	* libgimpbase/gimpbasetypes.h
	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpdatafactory.c
	* app/gui/gui.c
	* app/plug-in/plug-in.c
	* app/plug-in/plug-ins.c
	* app/tools/tools.c: changed accordingly.

	Moved module loading to LibGimpModule:

	* app/core/gimpmodules.c: removed lots of code...

	* libgimpmodule/gimpmoduledb.[ch]: ...and added it here as
	GimpModuleDB object.

	* libgimpmodule/Makefile.am
	* libgimpmodule/gimpmoduletypes.h: changed accordingly.

	* app/core/gimp.[ch]: replaced gimp->modules by gimp->module_db.

	* libgimpmodule/gimpmodule.[ch]: added
	gimp_module_query(). Internal cleanup. Stuff...

	* app/gui/module-browser.c: changed accordingly. Unfinished...

	* app/core/gimpcontainer.c
	* app/core/gimplist.c: reverted the HACKS introduced recently.

	* app/core/gimpobject.[ch]: added gimp_g_object_get_memsize()
	utility function.

	* libgimpproxy/gimpobject.[ch]: regenerated.

	Changed display filter configuration stuff:

	* libgimpwidgets/gimpcolordisplay.[ch]: made the virtual
	configure() function return a GtkWidget instead of opening a
	dialog. Changed configure_cancel() to configure_reset(). Added
	"changed" signal.

	* app/display/gimpdisplayshell-filter-dialog.c: embed the filters'
	config GUI in the dialog. Connect to "changed" and added a "Reset"
	button which resets the filter.

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c: changed accordingly.

	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: minor fixes.

2002-10-22  Sven Neumann  <sven@gimp.org>

	* app/gui/offset-dialog.c (offset_ok_callback): don't free the
	OffsetDialog structure twice. Fixes bug #96520.

2002-10-21  Sven Neumann  <sven@gimp.org>

	* libgimpmodule/gimpmodule.c: fixed some i18n glitches.

2002-10-21  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* libgimpmodule/.cvsignore
	* libgimpmodule/Makefile.am
	* libgimpmodule/gimpmodule.[ch]
	* libgimpmodule/gimpmodule.def
	* libgimpmodule/gimpmoduletypes.h
	* libgimpmodule/makefile.msc: new library for module loading.

	* configure.in: generate Makefiles for libgimpmodule and its
	devel-docs. Added GMODULE_CFLAGS and GMODULE_LIBS.

	* app/Makefile.am: link the app against it.

	* libgimp/gimpmodule.h
	* app/core/gimpmoduleinfo.[ch]: removed.

	* libgimp/Makefile.am
	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpmodules.c
	* app/gui/module-browser.c: changed accordingly.

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: #include "libgimpmodule/gimpmodule.h"

2002-10-20  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpmoduleinfo.[ch]
	* libgimp/gimpmodule.h: separated module query from type
	registration by adding a separate "gimp_module_query" function
	which must be implemented by modules. Make local copies of the
	strings returned by the query function.

	* app/core/gimpmodules.c
	* app/gui/module-browser.c: changed accordingly.

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: added the gimp_module_query() functions.

2002-10-20  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-filter.[ch]: removed the
	ColorDisplayNode struct entirely. GimpDisplayShell->filters is now
	just a GList of GimpColorDisplay objects.

	* app/display/gimpdisplayshell-filter-dialog.c
	* app/display/gimpdisplayshell-render.c: changed accordingly.

2002-10-20  Michael Natterer  <mitch@gimp.org>

	Ported module loading to GTypeModule, getting rid of all own
	module registering/bookkeeping stuff for color selectors and
	display filters. The modules now simply register GimpColorSelector
	and GimpColorDisplay subclasses, the list of registered subclasses
	can then be obtained calling g_type_children() on the abstract
	base classes.

	This is work in progress and just the first working state after I
	started breaking everything...

	* app/gui/color-select.[ch]
	* libgimp/gimpcolordisplay.h
	* libgimp/gimpcolorselector.h: removed.

	* app/gui/Makefile.am
	* libgimp/Makefile.am: changed accordingly.

	* libgimp/gimpmodule.h: massively simplified. All voodoo is gone.

	* libgimpwidgets/gimpcolordisplay.[ch]
	* libgimpwidgets/gimpcolorselector.[ch]: new abstract base classes
	which need to be subclassed by modules.

	* libgimpwidgets/gimpcolorselect.[ch]: the built-in color selector
	from app/gui/color-select.* ported to be a GimpColorSelector
	subclass.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetsmarshal.list
	* libgimpwidgets/gimpwidgetstypes.h: changed accordingly.

	* app/core/gimpmoduleinfo.[ch]: made it a GTypeModule subclass

	* app/core/gimpmodules.c: changed accordingly.

	* app/core/gimpcontainer.c
	* app/core/gimplist.c: HACKED around to allow GimpLists of
	GObjects (not GimpObjects). This is EEKy, so I will either make
	gimp->modules a simple GList and revert this bit of change, or
	allow GObjects all over the place in GimpContainer land...

	* app/display/gimpdisplayshell-filter.[ch]
	* app/gui/color-notebook.c: removed all module stuff and use
	g_type_children() to get the list of available color_selectors
	and display_filters.

	* app/display/gimpdisplayshell-filter-dialog.c
	* app/display/gimpdisplayshell-render.c
	* app/gui/module-browser.c: changed accordingly.

	* app/gui/gui.c: ref the built-in color selector's class before
	the modules are queried so it appears first in the list of
	GimpColorSelector's children.

	* modules/Makefile.am: build the water color selector again.

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: ported them all to the new API.

	* modules/gimpmodregister.[ch]: removed the old EMX module hack.

2002-10-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-mask.c (gimp_image_mask_extract): changed an
	error message.

	* app/widgets/gimpwidgets-utils.c: tweaked so it looks more like
	the query box.
	
2002-10-17  Michael Natterer  <mitch@gimp.org>

	* app/gui/dialogs-constructors.c
	* app/widgets/gimptoolbox.c: fixed warnings by casting/bracketting
	properly.

2002-10-16  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_default_dialog.c (dialog_destroy): function 
	now correctly returns a value.

2002-10-16  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/Lighting/lighting_image.c
	* plug-ins/Lighting/lighting_main.[ch]
	* plug-ins/Lighting/lighting_preview.[ch]
	* plug-ins/Lighting/lighting_shade.c
	* plug-ins/Lighting/lighting_ui.c: applied patch from Jeroen Lamain
	<roccodevinger@yahoo.com> to fix #52896 (Lighting Effects plugin needs 
	interactive light placement)

2002-10-15  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpeditor.c: changed the default button_icon_size to
	GTK_ICON_SIZE_MENU.

	* themes/Default/gtkrc
	* themes/Default/images/Makefile.am: don't override GTK+ button
	icons.  This renders some of the compiled-in icons unused; we
	should remove them later.

2002-10-15  Sven Neumann  <sven@gimp.org>

	* app/gui/dialogs-constructors.c: draw the tool icons in dockbook
	tabs using GtkImages, not using GimpPreviews.

	* app/widgets/gimptoolbox.c: added a "button_relief" style property
	to GimpToolbox and changed the default style to GTK_RELIEF_NONE.

	* themes/Default/gtkrc: document how to set the style here.

2002-10-15  Sven Neumann  <sven@gimp.org>

	* app/base/levels.[ch]: added the API for level correction using
	black, gray and white point.

	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimplevelstool.[ch]: misc smaller changes.

	* app/widgets/gimphistogrambox.[ch]: allocate the buffer for the
	gradient preview on size_allocate, not for every expose event.

	* app/widgets/gimphistogramview.c: fixed drawing for width > 256.

	* themes/Default/images/stock-color-picker-white-18.png: tweaked.

2002-10-15  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpinktool.c: using gtk_image_new_from_pixmap() feels
	kinda lame. Draw the ink blob directly in an expose handler instead.

2002-10-15  Sven Neumann  <sven@gimp.org>

	* app/tools/gimphistogramtool.c
	* app/tools/gimplevelstool.[ch]
	* app/tools/gimpthresholdtool.c
	* app/widgets/gimphistogrambox.[ch]
	* app/widgets/gimphistogramview.[ch]: started to clean up histogram
	code. Moved the gradient into the GimpHistogramBox. Draw only in the
	expose event handler.

2002-10-15  Dave Neary  <bolsh@gimp.org>
	
	* app/tools/gimpinktool.c
	* app/tools/gimptexttool.c: Removed warnings by including
	string.h, and changing gtk_pixmap_new() to gtk_image_new_from_pixmap().

2002-10-14  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/png.c: Corrected coding standard issues
	(indentation & bracketting).

2002-10-14  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/png.c: Fix bug #55700 properly. Handles
	INDEXEDA images better.

2002-10-14  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplay.[ch]: added convenience function
	gimp_display_coords_in_active_drawable().

	* app/tools/gimpcurvestool.c: indicate the possibility to pick color
	values from the image by showing a color picker cursor. Made the
	file selection dialog transient for the tool shell.

	* app/tools/gimplevelstool.c: made the file selection dialog
	transient for the tool shell.

2002-10-13  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/stock-color-picker-black-18.png
	* themes/Default/images/stock-color-picker-gray-18.png
	* themes/Default/images/stock-color-picker-white-18.png: new icons.

	* libgimpwidgets/gimpstock.[ch]
	* themes/Default/images/Makefile.am: added the new color picker icons.

	* app/tools/gimplevelstool.c: added the GUI that will allow to pick
	the white, gray and black point from the image.

2002-10-13  Manish Singh  <yosh@gimp.org>

	* app/tools/gimptexttool.c: #include <stdio.h>

2002-10-11  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.[ch]: allow to load text from a file.

2002-10-11  Sven Neumann  <sven@gimp.org>

	* Made 1.3.9 release.

2002-10-11  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am (INCLUDES): added PANGO_FT2_CFLAGS.

2002-10-10  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.[ch]: added a very simple text editor.

2002-10-10  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-params.[ch]: optionally allow GIMP_UNIT_PIXEL
	as value for GimpUnit params.

	* app/core/gimpimage-text.[ch]
	* app/core/gimptext.[ch]
	* app/tools/gimptexttool.c: moved some code around.

2002-10-10  Michael Natterer  <mitch@gimp.org>

	* app/gui/palette-import-dialog.c: s/"new_import"/"New Import"/.

2002-10-10  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimptext.[ch]: added first draft of a GimpText object.

2002-10-09  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c
	* app/widgets/gimpfontselection.[ch]
	* app/widgets/gimpwidgets-utils.[ch]: started to implement the
	text tool GUI as suggested in #84151.

2002-10-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppalette.c (gimp_palette_get_new_preview): adjust
	the cell_size of the preview dynamically (makes them look nicer).

	* app/core/gimppalette-import.c: require n_colors to be at least
	2, not 1. Cleanup.

	* app/gui/palette-import-dialog.c: completely chopped and
	re-assembled source and GUI. Please have a look and comment...

2002-10-09  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-text.[ch]: new files that implement the text
	rendering that used to live in gimptexttool.[ch].

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/tools/gimptexttool.[ch]
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/pdb/text_tool.pdb: changed accordingly.

	* tools/pdbgen/enums.pl
	* app/pdb/text_tool_cmds.c: regenerated.

2002-10-09  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: some shortcut changes: Ctrl+Shift+S is now
	"File/Save as...", not "View/Toggle Statusbar" (HIG compliance).
	Removed Ctrl+Shift+B from "Select/Border..." because it is already
	taken by "Dialogs/Brushes...". Set the shortcut to "" instead of
	NULL whenever we abuse GTK_STOCK_NEW, so the menu item doesn't get
	the Ctrl+N shortcut (will need separate stock icons for these menu
	items).

2002-10-09  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpgradientpreview.c
	* app/widgets/gimppalettepreview.c: set "height" to size/2 instead
	of "width" to size*3 in get_size() so the preview size is
	contollable in smaller steps using the container views' "Preview
	Size" context menu.

2002-10-09  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-char-picker-22.png
	* themes/Default/images/stock-letter-spacing-22.png
	* themes/Default/images/stock-line-spacing-22.png: new icons taken
	from #84151.

	* libgimpwidgets/gimpstock.[ch]: added the new icons.

2002-10-09  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainermenu.c
	* app/widgets/gimpcontainerview.c: ref/unref menu->context and
	view->context in gimp_container_[menu|view]_real_set_context() so
	it can't be finalized under our feet.

2002-10-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.[ch]: added utility function
	gimp_scale_entry_set_sensitive().

2002-10-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/animationplay.c: put the preview in a sunken
	frame like most other previews.

2002-10-08  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-duplicate.c: an attempt to fix bug #94749
	(gimp_image_duplicate crashes if floating selection exists).

	* data/images/gimp_splash.png: a new blinkensplash from Paris.

2002-10-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/ps.c: applied a patch from Peter Kirchgessner
	that fixes bug #78310 (wrong bounding box when exporting to EPS).

2002-10-01  Manish Singh  <yosh@gimp.org>

	* autogen.sh: call libtoolize explictly, since newer automakes
	don't run it for us anymore

2002-09-30  Simon Budig  <simon@gimp.org>

	* data/brushes/1circle.gbr: fixed the default spacing, so that
	lines actually look like 1 pixel lines...

	* themes/Default/images/tools/.cvsignore: Added some files.

	* app/vectors/gimpanchor.h
	* app/vectors/gimpbezierstroke.[ch]
	* app/vectors/gimpstroke.h
	* app/vectors/gimpvectors.h: Added some stuff, mostly unused
	code that otherwise would just rot on my harddisk. Mitch: I
	need to discuss the data structures with you...

2002-09-27  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]: added new signal "reconnect"
	which is emitted when the underlying image changes (happens on
	"Revert"). Set the sensitivity of the new "Toggle QuickMask" menu
	item. Don't configure the QMask button in gimp_display_shell_new().

	* app/display/gimpdisplayshell-handlers.c (gimp_display_shell_connect):
	configure the QMask button here so it's consistent after "Revert".

	* app/display/gimpnavigationview.c: connect to the shell's
	"reconnect" signal and update accordingly.

2002-09-27  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpmagnifytool.c (gimp_magnify_tool_init): set the
	toggle_cursor to GIMP_ZOOM_CURSOR, not the tool_cursor.

2002-09-26  Michael Natterer  <mitch@gimp.org>

	Made F1 help work again:

	* libgimpwidgets/gimphelpui.c: add the "F1" binding entries to the
	correct class, use GtkWidget's "show_help" signal correctly,
	cleanup, replaced deprecated stuff (obviously this file was
	make-it-compile ported in the first place :)

	* plug-ins/helpbrowser/helpbrowser.c: close the HtmlStream when
	there is no more data to read (avoids implicit calling of the
	stream's cancel function which fails because we didn't set it).
	Minor cleanup.

2002-09-25  Mel Boyce  <syngin@gimp.org>

	* autogen.sh: Changed intltool URL so it's more correct.

2002-09-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpitemfactory.[ch] (gimp_item_factory_create_item):
	added a "const gchar *textdomain" parameter so
	g_object_[set|get]_data() hacks needed for translation are private
	stuff of GimpItemFactory. Use more qdata instead of just data,
	minor cleanup.

	* app/gui/plug-in-menus.c: pass the textdomain as paramater
	instead of g_object_setting it on the item_factory.

	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/menus.c: pass NULL as textdomain.

2002-09-25  Michael Natterer  <mitch@gimp.org>

	* libgimp/Makefile.am: install gimpcompat.h

2002-09-24  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.c (gimp_channel_sharpen): set
	channel->bounds_known to FALSE (fixes #93853).

2002-09-23  Michael Natterer  <mitch@gimp.org>

	* app/gui/plug-in-menus.c: escape underscores in plug-in menu
	entries so they don't end up as mnemonics.

2002-09-21  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-params.h: fixed some macros that were
	never used.

	* data/images/gimp_splash.png: flattened the splash image. The
	alpha channel crashed servers with buggy XRender extension
	(#93841) (and should have never been there anyway).

2002-09-18  Manish Singh  <yosh@gimp.org>

	* plug-ins/dbbrowser/dbbrowser_utils.c: Allow activation of the
	search from the entry field.

2002-09-18  Manish Singh  <yosh@gimp.org>

	* configure.in: use X_CFLAGS when checking for Xmu headers too

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/layer.pdb: slight tweak to mitch's change
	to have default parameters for the common case

2002-09-18  Sven Neumann  <sven@gimp.org>

	* configure.in: use X_CFLAGS when checking for xpm.h.

	* plug-ins/common/Makefile.am
	* plug-ins/common/mkgen.pl: added X_CFLAGS here as well so that
	xpm compiles even if GTK_CFLAGS doesn't pull in the X11 include
	path for us. Should fix #93518 and hopefully won't break it for
	other people.

2002-09-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/convmatrix.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/print/gimp_main_window.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/sel2path/sel2path.c: reordered action buttons.

2002-09-17  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewabledialog.c: use PangoAttributes instead of
	PangoMarkup.

	* app/gui/preferences-dialog.c: adapt to the look of the
	GimpViewableDialog.

2002-09-17  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpexport.c: reordered buttons and polished the dialog.

2002-09-17  Sven Neumann  <sven@gimp.org>

	* app/gui/file-new-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/tools/gimpimagemaptool.c
	* app/widgets/gimpfontselection-dialog.c: place the Cancel button
	next to the confirmative button as suggested by the HIG.

2002-09-12  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdocumentview.[ch]
	* app/gui/documents-commands.[ch]
	* app/gui/menus.c: changed icon/variables/functions to say
	"Remove" instead of "Delete" because "Delete" is misleading (we
	don't delete the file but just remove the entry from the document
	history).

2002-09-12  Sven Neumann  <sven@gimp.org>

	* autogen.sh: fixed output in case automake-1.6 is not available.

2002-09-11  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/curve_bend.c: applied a patch from Guillermo
	S. Romero which cleans up the GUI even more. Changed it a bit to
	behave nicely on window resizing.

2002-09-11  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c: fixed typo (bug #93031).

2002-09-10  Michael Natterer  <mitch@gimp.org>

	Some PDB cleanup:

	* tools/pdbgen/pdb/procedural_db.pdb: removed the get_data() and
	set_data() implementations and the global "data_list" variable.
	Cleaned up the dump() stuff (pass the FILE pointer around instead
	of having a global variable for it). Fixed output_string() so it
	does not crash on NULL strings.

	* app/core/gimp.[ch]: added gimp->procedural_db_data_list.

	* app/pdb/procedural_db.[ch]: added procedural_db_[set|get]_data().
	Don't leak data identifiers when overwriting an already existing
	entry. Added g_return_if_fail() stuff to all public functions.

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/parasite.pdb: tweaked some helper functions to
	take parameters which make them aware of the real type of the
	objects they handle (e.g. the PDB function gimp_layer_set_name()
	matches the core function gimp_object_set_name()).

	* app/pdb/pdb_glue.h: removed ugly CPP-level workarounds for the
	issue mentioned above.

	* app/pdb/channel_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/procedural_db_cmds.c: regenerated.

2002-09-10  Dave Neary  <bolsh@gimp.org>

        * plug-ins/common/png.c: Handle INDEXA images if the
        indexed palette is full by looking for an unused colour.
        Fixes bug #55700.

2002-09-09  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/stock-grow-16.png:
	* themes/Default/images/stock-shrink-16.png: make the icons less
	  crowded

2002-09-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimplayerlistview.c
	* app/gui/channels-commands.c: some more auto-sizing spinbuttons.

	* app/gui/offset-dialog.c: added mnemonics for "X" and "Y".

	Dialog auto-hide cleanup:

	* app/widgets/gimpviewabledialog.c: close the dialog when the
	GimpViewable goes away (special cased GimpItems which become
	invisible on "removed"). Close the dialog by syntesizing a
	"delete_event" instead of simply hiding or destroying it so the
	closing method of the dialog's user gets invoked.

	* app/gui/resize-dialog.[ch]: don't do the same here. Simplifies
	the API even more as we don't have to pass the object to watch any
	more.

	* app/gui/image-commands.c
	* app/gui/layers-commands.c: changed accordingly.

	* app/undo_history.c
	* app/gui/convert-dialog.c
	* app/gui/qmask-commands.c
	* app/gui/vectors-commands.c: removed all dialog auto-hiding which
	is now done by GimpViewableDialog. Also connect more close
	callbacks to gtk_widget_destroy() and handle shell destruction
	accordingly, so these pseudo widgets behave more like real ones.

	Tool-dialog auto-hide fix:

	* app/tools/tool_manager.c: never call a tool's initialize()
	method with a NULL gdisp (I can't follow why we did this before
	because it's conceptually broken and makes the semantics of
	initialize() more than unclear).
	To be sure, added g_return_if_fail(GIMP_IS_DISPLAY(gdisp)) to
	tool_manager_initialize_active().

	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c: removed the recently added code
	for handling NULL displays in initialize().

2002-09-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/curve_bend.c: forgot a mnemonic.

2002-09-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/iwarp.c: moved toggles into frame titles.

2002-09-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c: removed explicit
	spinbutton pixel size.

	* plug-ins/script-fu/scripts/blended-logo.scm
	* plug-ins/script-fu/scripts/coffee.scm
	* plug-ins/script-fu/scripts/comic-logo.scm
	* plug-ins/script-fu/scripts/coolmetal-logo.scm
	* plug-ins/script-fu/scripts/glossy.scm
	* plug-ins/script-fu/scripts/land.scm
	* plug-ins/script-fu/scripts/lava.scm
	* plug-ins/script-fu/scripts/rendermap.scm
	* plug-ins/script-fu/scripts/test-sphere.scm: follow PDB change:
	gimp-gradients-[set|get]-active have been renamed to *-gradient
	to match the brush, pattern and palette APIs.

2002-09-08  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.c (gimp_image_get_colormap): return
	gimage->cmap directly instead of calling
	gimp_drawable_cmap(active_drawable) without checking if there
	actually is an active_drawable.

	* tools/pdbgen/pdb/image.pdb (image_get_cmap): use g_memdup()
	instead of g_new() followed by memcpy().

	* app/pdb/image_cmds.c: regenerated.

2002-09-08  Michael Natterer  <mitch@gimp.org>

	* app/gui/color-notebook.[ch]: set the hex entry to 7 chars instead
	the whole width of the vbox. Added color_notebook_set_title().

	* app/widgets/gimptoolbox-color-area.c: use the new function to
	set the color selection's title to either "Change Foreground
	Color" or "Change Background Color" instead of just "Color
	Selection".

2002-09-07  Michael Natterer  <mitch@gimp.org>

	Histogram cleanup:

	* app/base/gimphistogram.c: Added g_return_if_fail() to all public
	functions, reordered stuff, cleanup (no logic changed).

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimphistogrambox.[ch]: new widget containing a
	GimpHistogramView and two range spinbuttons (as known from the
	threshold tool). Users only need to connect to the histogram
	view's "range_changed" signal. The spinbuttons are handled
	internally.

	* app/widgets/gimphistogramview.[ch]: define it's default size in
	the header. Make sure "start" is always smaller than "end". Emit
	"range_changed" in gimp_histogram_view_set_range().

	* app/tools/gimplevelstool.c: changed accordingly.

	* app/tools/gimpthresholdtool.[ch]: removed the code which
	did the same and use the new widget.

	* app/tools/gimphistogramtool.[ch]: ditto. Removed the "intensity"
	info label. Cleanup.

2002-09-07  Michael Natterer  <mitch@gimp.org>

	* app/gui/file-new-dialog.c
	* app/gui/offset-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/resolution-calibrate-dialog.c
	* app/gui/user-install-dialog.c: replaced some more pixel sizes by
	char sizes. Tweaked table spacings. Mnemonics.

	* app/gui/info-dialog.[ch]: internal cleanup.

	* app/gui/resize-dialog.[ch]: same here. Removed the "cancel_cb"
	from the API and simply destroy the dialog on "Cancel". Makes the
	dialog construction less weird.

	* app/gui/image-commands.c
	* app/gui/layers-commands.c: changed accordingly. Same cleanups
	as above.

2002-09-07  Michael Natterer  <mitch@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.c: some stock items.

	* plug-ins/MapObject/mapobject_ui.c: moved toggle button into
	frame title, added mnemonics.

	* plug-ins/common/curve_bend.c: reorganized the GUI completely
	to be more usable. Added mnemonics and stock items.

	* plug-ins/common/checkerboard.c
	* plug-ins/common/film.c
	* plug-ins/common/illusion.c
	* plug-ins/common/plasma.c
	* plug-ins/flame/flame.c: minor cleanups (spacing, stock items).

2002-09-07  Dave Neary  <bolsh@gimp.org>

        * app/xcf/xcf-load.c: Unref layer mask rather than layer
        when adding the mask. Fixes bug #92693.

2002-09-06  Hans Breuer  <hans@breuer.org>

	* */*/makefile.msc : updated

	* libgimptool/makefile.msc : new file, libgimptool
	is currently build as static lib due to references
	into app/core

	* themes/Default/makefile.msc : removed
	* themes/Default/images/makefile.msc : new file

	* libgimpwidgets/makefile.msc libgimpwidgets/gimpwidgets.c
	updated (externals)

	* app/paint-funcs.c : replaced gccism varibale size array on
	stack with portable alloca, removed sizeof(buf) check which 
	must fail now.
	
	* app/config/gimpconfig.c : get write/close protos
	on win32 from io.h
	* app/config/gimprc.c : dito and <string.h>
	* app/config/gimpscanner.c : <string.h> only

	* app/core/gimpcontainer.c : workaround for clumsy 
	compilers not supporting vararg macros

	* app/core/gimpdocumentlist.c app/core/gimpparasitelist.c
	include <io.h> on win32

	* app/widgets/gimpdocumentview.c 
	  app/widgets/gimpimagedock.c
	  app/widgets/gimppreview.c : add #ifdef __GNUC__
	to avoid breaking on non standard pragma #warning.

	* app/gui/session.c : include <string.h>

	* regexrepl/makefile.msc : build as dll

	* plug-ins/makefile.msc : updated

	* plug-ins/common/pix.c : open file binary

	* plug-ins/common/spheredesigner.c : avoid error
	'incompatible types' while assigning, use memcpy()

2002-09-06  Michael Natterer  <mitch@gimp.org>

	* app/gui/convert-dialog.c: changed "Number of Colors" to
	"Max Number of Colors" to clarify what this parameter does.
	(fixes #92194).

	* app/gui/menus.c: use GIMP_STOCK_INFO for "View/Info Window".

	Specify spibutton sizes in chars, not pixels (eek) all over
	the place. Also removed explicit sizes where the GtkSpinButton
	default size does not disturbe tabular widget layouts.

	* libgimpwidgets/gimpwidgets.c: removed the hardcoded width of 75
	pixels in gimp_spin_button_new(). Changed gimp_scale_entry_new()
	and gimp_coordinates_new() to interpret their "spinbutton_width"
	parameters as chars if < 16, and as pixels otherwise. This gives
	reasonable results and doesn't cause unchanged plug-ins to
	suddenly have spinbuttons of dozens of chars width :)

	* libgimpwidgets/gimpsizeentry.c: added the same heuristic here.

	* libgimpwidgets/gimpquerybox.c
	* app/gui/color-notebook.c
	* app/gui/convert-dialog.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/widgets/gimpbrusheditor.c
	* app/widgets/gimpbrushfactoryview.c
	* app/widgets/gimppaletteeditor.c: changed accordingly.

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/checkerboard.c
	* plug-ins/common/cubism.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/depthmerge.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/diffraction.c
	* plug-ins/common/emboss.c
	* plug-ins/common/film.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/fractaltrace.c
	* plug-ins/common/gauss_iir.c
	* plug-ins/common/gauss_rle.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/grid.c
	* plug-ins/common/illusion.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/lic.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/mblur.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/nova.c
	* plug-ins/common/pixelize.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/shift.c
	* plug-ins/common/sinus.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/spread.c
	* plug-ins/common/tile.c
	* plug-ins/common/tileit.c
	* plug-ins/common/unsharp.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/gflare/gflare.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/rcm/rcm_dialog.c: changed accordingly, which involves
	removals of gtk_widget_set_size_request(spinbutton), removal of
	lots of explicit spinbutton sizes in gimp_scale_entry_new(), and
	adding of new ones because GtkSpinButton's auto-size trashed
	tabular layouts.

	Lots of cleanup & indentation while browsing the plug-ins'
	code. Changed spacings, moved toggle buttons into frame titles,
	use stock items, stuff...

2002-09-06  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/semiflatten.c: minor code cleanup (matching
	g_new/g_free pairs iso g_new/free, etc.)

2002-09-05  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_default_dialog.c (make_default_dialog): more 
	changes for GNOME HIG compliance

	* plug-ins/imagemap/imap_main.c (dialog)
	* plug-ins/imagemap/imap_menu.c: Moved a few menu items to make it
	compliant to the GNOME Human Interface Guidelines.

2002-09-05  Manish Singh  <yosh@gimp.org>

	* acinclude.m4: emptied

	* autogen.sh: support for automake version special casing, error
	out on aclocal failure.

	* m4compat/1.4/pysupport.m4
	* m4compat/1.6/pysupport.m4
	* configure.in
	* plug-ins/Makefile.am: pygimp autoconf support, just to get it
	some testing. We'll figure out policy later.

2002-09-05  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcroptool.c (crop_tool_crop_image): call
	gimp_image_flush() after cropping. Fixes #90977 (Thanks to
	Toby Smith).

2002-09-05  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdrawable-bucket-fill.c: put the call to
	gimp_drawable_mask_bounds() back because we always need the region
	to apply the fill (fixes non-seed-fill fills). Also take
	"sample_merged" into account when intersecting the resulting mask
	with the image's selection.

	Fixed unrelated bug:

	* app/core/gimpimage-contiguous-region.c: need to use
	gimp_image_projection_bytes(), not drawable->bytes if
	"sample_marged" is TRUE.

2002-09-04  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_cmd_guides.c (make_guides_dialog): fixed 
	minor typo.

	* plug-ins/common/CML_explorer.c: minor code clean-up, removed
	cluttering frames (#92476)

2002-09-04  Dave Neary  <bolsh@gimp.org>

	* app/core/gimpdrawable-bucket-fill.c: Small patch to
	modify the behaviour of the bucket fill tool if there
	is an active selection. Question: Should the bucket fill
	only work if clicked inside the selection? Currently a
	click anywhere works, and stuff gets drawn if the region
	intersects the selection. This patch closes bug #72896.

2002-09-04  Michael Natterer  <mitch@gimp.org>

	More color correction stuff cleanup:

	* app/base/Makefile.am
	* app/base/base-types.h
	* app/base/levels.[ch]: new files containing levels_lut_func(), a
	new "Levels" parameter struct and the "auto levels" stuff.

	* app/base/lut-funcs.[ch]: removed the levels stuff here, added
	lots of g_return_if_fail().

	* app/base/color-balance.[ch]
	* app/base/hue-saturation.[ch]: added init() and reset() functions
	so we don't need to duplicate this code in the tool and the pdb
	wrappers.

	* app/base/curves.[ch]: s/gint/GimpHistogramChannel/g, made
	curves_channel_reset() initialize the curves array.

	* app/tools/gimpcolorbalancetool.[ch]: use the new functions,
	moved the "Range" frame to the top, added a per-range "Reset"
	button, made the global "Reset" button reset all ranges and
	the "Preserve Luminosity" toggle.

	* app/tools/gimpcurvestool.[ch]: don't initialize the curves
	array manually, as curves_channel_reset() does that,
	s/gint/GimpHistogramChannel/g.

	* app/tools/gimphuesaturationtool.c: use the new functions, added
	a per-channel "Reset" button and made the global "Reset" button
	reset all channels, cleaned up the GUI update function.

	* app/tools/gimplevelstool.[ch]: changed to use the new Levels
	parameter struct and it's utility functions. Removed stuff
	which now lives in base/levels.c

	* app/tools/gimpimagemaptool.c: align the "Preview" button
	bottom-left, not bottom-right.

	* tools/pdbgen/pdb/color.pdb: use the new stuff and removed
	uglyness because using the "Levels" struct makes the code more
	straightforward.

	* app/pdb/color_cmds.c: regenerated.

2002-09-04  Michael Natterer  <mitch@gimp.org>

	* app/gui/color-select.c
	* app/widgets/gimpselectioneditor.c
	* app/widgets/gimptoolbox.c: removed some leftover GtkTargetEntry
	arrays.

2002-09-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/ppmtool.c (saveppm): merged fix for
	bug #92394 from stable branch.
	
2002-09-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpviewable.c: small speedup: use
	g_object_[get|set]_qdata() instead of g_object_[get|set]_data().

2002-09-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpviewable.c (gimp_viewable_real_invalidate_preview):
	remove the attached preview pixbuf just as the preview temp_buf.

2002-09-02  Michael Natterer  <mitch@gimp.org>

	DND cleanup part 1:

	* app/widgets/gimpdnd.[ch]: changed all gimp_dnd_*_dest_set() and
	_unset() functions to _dest_add() and _dest_remove(). Switch from
	using static arrays of GtkTargetEntries to dynamic GtkTargetLists.
	The _add() and _remove() functions configure the drag dest
	automatically if not already done, so there is no need to call
	gtk_drag_dest_set() on the widget any more. Drag source cleanup
	will follow...

	Renamed silly function names gimp_gtk_* to gimp_dnd_*

	* app/display/gimpdisplayshell.c
	* app/tools/gimpblendtool.c
	* app/widgets/gimpcolormapeditor.c
	* app/widgets/gimpcontainerview.c
	* app/widgets/gimpgradienteditor.c
	* app/widgets/gimplistitem.c
	* app/widgets/gimpmenuitem.c
	* app/widgets/gimppreview.c
	* app/widgets/gimppaletteeditor.c
	* app/widgets/gimpselectioneditor.c
	* app/widgets/gimptoolbox-color-area.c
	* app/widgets/gimptoolbox-indicator-area.c
	* app/widgets/gimptoolbox.c
	* app/gui/about-dialog.c
	* app/gui/color-select.c
	* app/gui/device-status-dialog.c
	* app/gui/tool-options-dialog.c: changed accordingly. Removed
	all calls to gtk_drag_dest_set() and their GtkTargetEntry tables.

	* app/widgets/gimpchannellistitem.c: enabled some commented out
	dnd code (which will not work since dnd needs more love...)

	* app/widgets/gimpitemlistview.[ch]: added a third
	"gboolean interactive" parameter to GimpItemNewFunc.

	* app/gui/channels-commands.[ch]
	* app/gui/layers-commands.[ch]
	* app/gui/vectors-commands.[ch]: if the new_item_func is called
	with "interactive == FALSE", don't pop up a dialog but silently
	create a new item of the image's size.

	* app/widgets/gimpdrawablelistview.c: use the new feature to allow
	color and pattern drops to the "New" button, which creates a new
	layer/channel filled with the color/pattern.
	(special feature for drc ;-)

	* app/widgets/gimppaletteeditor.c: fixed event handling so we see
	the context menu again. Also, don't redraw on "expose", since
	GtkPreview does that for us.

2002-09-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewabledialog.c: use GimpContainerView's
	get_name_func utility stuff instead of reinventing the wheel.
	(They should probably be renamed because they are not at all
	GimpContainerView related).

2002-09-02  Michael Natterer  <mitch@gimp.org>

	* app/gui/info-window.c: don't display Alpha twice, more cleanup.

2002-09-02  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c (gimp_clone_tool_draw): manually add
	the src_drawable's offsets instead of implicitly using the
	offsets of the active_drawable (fixes #92311).

2002-09-01  Michael Natterer  <mitch@gimp.org>

	GimpViewableDialogs everywhere, cleanup:

	* libgimpwidgets/gimpstock.c: added texts for the RESIZE, SCALE
	and CROP stock items.

	* app/widgets/gimpviewabledialog.c: update the title when the
	viewable's name changes.

	* app/gui/color-notebook.[ch]: added color_notebook_viewable_new()
	which creates a GimpViewableDialog.

	* app/widgets/gimpgradienteditor.[ch]
	* app/gui/colormap-editor-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/gradient-editor-commands.c
	* app/gui/palette-editor-commands.c
	* app/undo_history.c: use GimpViewableDialogs and the new
	color_notebook constructor.

	* app/gui/convert-dialog.c: #include "widgets/gimpviewabledialog.h"

	* app/gui/image-commands.c
	* app/gui/info-dialog.c
	* app/gui/resize-dialog.c: minor cleanups.

	* app/gui/info-window.c: cleaned up the whole thing, esp. the
	"Extended" page. Added HSV color display to the color picker
	frame.  Set the icons as frame titles, stuff...

	* app/tools/gimpimagemaptool.[ch]: removed "shell_title",
	"shell_name" and "stock_id" from the GimpImageMapTool struct
	because they can be obtained from the tool's GimpToolInfo object.

	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c: changed accordingly.

	* app/tools/gimphistogramtool.c: same here: take values from
	tool->tool_info instead of hardcoding them.

	* app/tools/gimpcroptool.[ch]: removed the static crop dialog
	variables and added them to the GimpCropTool struct. Feels safer
	and makes the callback code much simpler. Use stock items for the
	dialog's "Resize" and "Crop" buttons.

	* app/tools/gimpmeasuretool.c
	* app/tools/gimprotatetool.c: for consistency don't name the tools
	"Blah Tool", also the dialog titles need to match the menu
	entries.

	Unrelated:

	* libgimpwidgets/gimpwidgets.c: the recently changed, gtk-doc
	comment was correct, as gtk-doc takes the parameter names from
	the header, not the .c file.

	* app/tools/gimptransformtool.c: set the transform tool's state to
	TRANSFORM_CREATING after changing displays, so the initial matrix
	components are saved correctly for the "Reset" function.

2002-09-01  Manish Singh  <yosh@gimp.org>

	* modules/Makefile.am: use AM_CPPFLAGS instead of CPPFLAGS

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c: changed deprecated calls

	* modules/colorsel_triangle.c: #undef GTK_DISABLE_DEPRECATED,
	still needs to be fixed for use of GtkPreview

2002-09-01  Michael Natterer  <mitch@gimp.org>

	* app/gui/file-commands.[ch]: oops, the callback's name has
	changed too :)

2002-09-01  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: HIG compliance: changed "Save a Copy as..."
	to "Save a Copy...".

	* app/gui/file-dialog-utils.c
	* app/display/gimpdisplayshell.c: changed accordingly.

2002-09-01  Michael Natterer  <mitch@gimp.org>

	Refcount layer masks correctly. Fixes layer mask undo.

	* app/core/gimplayer.c (gimp_layer_add_mask): ref the mask.

	* app/xcf/xcf-load.c
	* app/gui/layers-commands.c
	* tools/pdbgen/pdb/image.pdb: unref layer masks after adding them.

	* app/pdb/image_cmds.c: regenerated.

2002-08-30  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpviewabledialog.[ch]: new dialog widget featuring
	a title bar containing a stock icon, a description, the viewable's
	name and a preview. Will be used for all viewable related dialogs
	and serves as a common place to control their look & feel.

	* app/tools/gimpimagemaptool.[ch]: removed the code which did
	almost the same and use GimpViewableDialog.

	* app/gui/info-dialog.[ch]: extended the API so it has enough
	information to create a GimpViewableDialog.

	* app/gui/channels-commands.c
	* app/gui/convert-dialog.c
	* app/gui/gradient-editor-commands.c
	* app/gui/image-commands.c
	* app/gui/info-window.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* app/gui/qmask-commands.c
	* app/gui/resize-dialog.c
	* app/gui/vectors-commands.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: use GimpViewableDialogs

	* themes/Default/gtkrc: apply the dialog style to "*Gimp*Dialog*",
	not only "*GimpDialog*" so it covers GimpViewableDialog.

2002-08-31  James Henstridge  <james@daa.com.au>

	* libgimp/gimp.c (gimp_run_procedure): handle GIMP_PDB_COLOR
	correctly.  This fixes gimp_palette_set_{back,fore}ground.

2002-08-29  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/lib.pl: fix minor buglet that earlier perls silently
	ate.

2002-08-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb.pl: added check_funcs (GIMP_IS_LAYER,
	GIMP_IS_IMAGE etc.) to all data types which are looked up by ID...

	* tools/pdbgen/app.pl: ...and call them here instead of just
	checking for (item != NULL). This way image item lookup becomes
	type safe.

	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/floating_sel_cmds.c
	* app/pdb/guides_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/misc_tools_cmds.c
	* app/pdb/paint_tools_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/selection_tools_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/transform_tools_cmds.c
	* app/pdb/undo_cmds.c: regenerated.

2002-08-29  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.c: fixed wrong g_return_if_fail() in
	gimp_channel_feather() so the function can be called again (fixes
	#91923). Also added more g_return_if_fail() where they were
	missing and cleaned up everything a bit.

2002-08-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimphistogramview.c: removed unused #define cruft.

2002-08-28  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpimagemaptool.[ch]: added a tool icon and
	descriptive string to the dialog's title box. Create the
	drawable preview with is_popup == TRUE so it doesn't show
	layers in the image context. Still not perfect...

	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c: Chain up early in initialize()
	and return if gdisp == NULL. Set stock_id and desc_text so
	GimpImageMapTool can display them. Added lots of mnemonics
	(#80804). Use gimp_size_entry_new() instead of manually creating
	the slider+spinbutton stuff.

	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimplevelstool.c: changed widgets packing to make them
	resizable without strange effects. Put the "Load", "Save" and
	"Auto" buttons into a frame.

	* app/tools/gimphuesaturationtool.c: use GimpColorAreas instead of
	deprecated GtkPreviews. Arranged the color previews and their
	radio buttons as a color wheel. Not the best solution maybe but
	IMHO better than the old GUI.

2002-08-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdrawablepreview.c (gimp_drawable_preview_render):
	look at drawable->offset_[xy] != 0 when deciding whether to offset
	the preview. Fixes bug where layers of the size of the image were
	previewed with offset (0,0), regardless of their real offset.

2002-08-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpchannellistview.c: removed all component item
	signal handling code, which is cool...

	* app/widgets/gimpcomponentlistitem.c: ...and added it here, which
	is not so cool because it adds Extra Ugliness (TM). At least it
	fixes part one of #90967.

2002-08-28  Michael Natterer  <mitch@gimp.org>

	* app/undo.c (undo_pop_layer)
	* app/core/gimpimage.c (gimp_image_[add|remove]_layer): emit
	"alpha_changed" from the image if we started (or ended up)
	with an image containing one layer without alpha.

	* app/core/gimplayer.c: use gimp_container_num_children() instead
	of accessing container->num_children manually.

2002-08-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/rotate.c (rotate): check if the active drawable
	is a layer before using gimp_layer functions on it.

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-mask.c (gimp_image_mask_float): fixed a bug
	introduced by myself on 2001-12-13: the floating selection layer
	needs to be of the type of it's associated drawable, which may be
	different from the image's type if it is a channel or layer mask
	(fixes #91814).

2002-08-27  Manish Singh  <yosh@gimp.org>

	* devel-docs/lib*/Makefile.am: add dummy all-local rules for the
	!gtk-doc case, to fix problems with some automake/make combos

	* modules/Makefile.am: use lib instead of libexec to appease automake
	1.6

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppreview.[ch]: added #define for
	GIMP_PREVIEW_MAX_BORDER_WIDTH instead of hardcoding it all over
	the place, cleanup.

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/plug-ins/plug-in.c (plug_in_close,
	plug_in_handle_proc_uninstall): don't forget to g_free() the
	proc_def struct after removing a temporary procedure.

	* app/plug-ins/plug-ins.c: iterate lists with for() loops,
	cleanup.

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.c: fixed wrong parameter name in
	gtk-doc comment.

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdialogfactory.c: if a dialog constructor fails
	to return a GimpDockable, destroy the dock we created for the
	dockable instead of leaking it. Cleanup.

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpitemfactory.c: g_strdup(entry->help_path) if
	static_entry == FALSE.

	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/plug-in-menus.c: free the help string after adding
	a menu item with static_entry == FALSE.

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptexttool.c: changed the default text to
	"No, you can't change this text. Please DON'T report this bug."

2002-08-27  Michael Natterer  <mitch@gimp.org>

	* app/base/curves.h: removed #defines and added enum CurvesType
	instead.

	* app/core/gimpchannel.c: use TRANSPARENT_OPACITY and
	OPAQUE_OPACITY instead of 0 and 255.

	* app/core/gimplayer.c (gimp_layer_create_mask): fixed inverse
	layer mask creation by setting GIMP_CHANNEL(mask)->bounds_known to
	FALSE correctly (fixes #90982). Also optimized mask creation
	by calling gimp_channel_all() and gimp_channel_clear() for
	white and black masks.

2002-08-27  Sven Neumann  <sven@gimp.org>

	* app/gui/menus.c
	* app/gui/select-commands.[ch]: added a menu entry that toggles
	the QuickMask state and bound Shift-Q to it (bug #86580).

2002-08-27  Sven Neumann  <sven@gimp.org>

	* autogen.sh: call 'libtoolize --version' instead of libtool.

2002-08-26  Sven Neumann  <sven@gimp.org>

        * plug-ins/sel2path/sel2path.c: changed dialog name as suggested
        in bug-report #88905 and did some code cleanup while I was at it.

2002-08-26  Michael Natterer  <mitch@gimp.org>

	Color correction tool chopping:

	* app/Makefile.am
	* app/image_map.[ch]: removed...

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpimagemap.[ch]: ...and added here as object.

	* app/base/Makefile.am
	* app/base/base-types.h
	* app/base/color-balance.[ch]
	* app/base/curves.[ch]
	* app/base/hue-saturation.[ch]
	* app/base/threshold.[ch]: the lowlevel color correction functions
	plus their parameter structs cut out of the resp. tools.

	* app/core/core-enums.[ch]: removed GimpTransferMode enum...

	* app/base/base-enums.[ch]: ...added it here. Also added
	GimpHueRange for the new hue-saturation files.

	* tools/pdbgen/enums.pl
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c: regenerated.

	* app/tools/Makefile.am
	* app/tools/gimpcolorbalancetool-transfer.c: removed (code went
	to base/color-balance.c).

	* app/tools/gimpimagemaptool.[ch]: added most code which was
	duplicated in subclasses. Create the dialog here with a nice title
	bar including image preview and name (fixes #66033). Added virtual
	functions map(), dialog() and reset() which need to be implemented
	by subclasses.

	* app/tools/gimpbrightnesscontrasttool.[ch]
	* app/tools/gimpcolorbalancetool.[ch]
	* app/tools/gimpcurvestool.[ch]
	* app/tools/gimphuesaturationtool.[ch]
	* app/tools/gimplevelstool.[ch]
	* app/tools/gimpposterizetool.[ch]
	* app/tools/gimpthresholdtool.[ch]: removed tons of duplicated
	code and simply implement GimpImageMapTool's virtual functions.
	Removed all dialog structs and keep the variables in the tool
	structs. The dialogs are now created on-the-fly and destroyed when
	the tool goes away, which makes all callbacks much simpler and
	safer. Lots of GUI & code cleanup in all dialogs.

	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c: added separate "Reset Channel"
	buttons and let the global "Reset" buttons reset all color
	channels.

	* app/tools/tools.c: the various antique foo_free() functions
	don't exist any more.

	* app/tools/gimphistogramtool.c: removed ImageMap field from
	dialog struct (it was unused). Cleaned up dialog a bit.

	* tools/pdbgen/Makefile.am: don't scan tools/gimphuesaturationtool.h
	for enums.

	* tools/pdbgen/pdb/color.pdb: use the new stuff from base/ and
	don't include stuff from tools/ any more.

	* app/pdb/color_cmds.c
	* app/pdb/paint_tools_cmds.c: regenerated.

2002-08-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sel_gauss.c: allow radius < 1.0 (bug #90957).

2002-08-22  Michael Natterer  <mitch@gimp.org>

	* app/gui/dialogs-constructors.c: a nicer tab for the selection
	dialog.

2002-08-22  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/stock-all-16.png
	* themes/Default/images/stock-none-16.png
	* themes/Default/images/stock-grow-16.png
	* themes/Default/images/stock-shrink-16.png: new icons from Jimmac.

	* themes/Default/images/Makefile.am
	* themes/Default/imagerc
	* libgimpwidgets/gimpstock.[ch]: added them to the stock system.

	* app/gui/menus.c: use them.

	* app/widgets/gimpselectioneditor.[ch]: use the icons and added
	a "Save to Channel" button.

2002-08-22  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/gimprc.pdb
	* app/pdb/gimprc_cmds.c (gimprc_query_invoker): don't leak the
	result of gimprc_value_to_str().

	* app/core/gimpdrawable-preview.c (gimp_drawable_preview_scale):
	use g_new0() instead of g_new() followed by memset().

	* plug-ins/script-fu/script-fu-server.c (server_log): free the
	string after logging it.

2002-08-22  Michael Natterer  <mitch@gimp.org>

	* app/paint/paint.c: unref the paint info objects after adding
	them to their container.

	* app/widgets/toolbox.c: free the tooltip string after setting it.

	* app/gui/session.c: spit out the correct warning if (position x y)
	could not be parsed.

2002-08-22  Michael Natterer  <mitch@gimp.org>

	* configure.in: bumped version number to 1.3.9

	* app/tools/gimpbycolorselecttool.[ch]: removed the ByColorDialog
	and cleaned up the code.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpselectioneditor.[ch]: added new widget
	GimpSelectionEditor with same same functionality as the old
	ByColorDialog which can be open all the time (independent of the
	active tool).

	* app/widgets/gimppreview.[ch]: added gimp_preview_new_by_type()
	so previews can be created without a viewable.

	* app/widgets/gimppreview-utils.[ch]: changed
	gimp_preview_type_from_viewable() to
	gimp_preview_type_from_viewable_type().

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/menus.c: register the new dialog type.

2002-08-22  Michael Natterer  <mitch@gimp.org>

	* app/undo.c: compress emissions of "mask_changed" and
	"qmask_changed" across undo groups.

	* app/core/gimpimage-mask.c: set GIMP_DRAWABLE(mask)->preview_valid
	to FALSE in gimp_image_mask_invalidate(), not in
	gimp_image_mask_push_undo(). Fixes selection preview rendering
	after a mask undo.

2002-08-22  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-render.c: allocate all temporary
	render bufs and check bufs large enough for GIMP_PREVIEW_MAX_SIZE
	(which is 1024). Fixes crashes with too large navigation previews.

2002-08-22  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_main.c (save_as_csim)
	* plug-ins/imagemap/imap_object.c: applied patch for #87687 from
	shaneyfelt@juno.com

2002-08-22  Michael Natterer  <mitch@gimp.org>

	Fixed usage of uninitialized memory found by valgrind,
	plus some cleanup:

	* app/base/pixel-region.[ch]: allocate PixelRegionIterators and
	PixelRegionHolders with g_new0(). Changed return values of
	pixel_regions_register() and pixel_regions_process() from gpointer
	to PixelRegionIterator*

	* app/base/pixel-processor.c: no need to cast the above return values.

	* app/base/temp-buf.[ch]: initialize PixelRegions with { 0 }
	before using them for TempBufs.

	* app/gui/device-status-dialog.c: initialize colors before
	passing them to gimp_color_area_new().

2002-08-21  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_cmd_guides.c (make_guides_dialog)
	* plug-ins/imagemap/imap_settings.c (create_settings_dialog)
	* plug-ins/imagemap/imap_grid.c (create_grid_settings_dialog): replaced
	some code by default_dialog_add_table convenience func.

	* plug-ins/imagemap/imap_default_dialog.h
	* plug-ins/imagemap/imap_default_dialog.c: added convenience func 
	default_dialog_add_table.

	* plug-ins/imagemap/imap_grid.c: fixed warning for missing prototype
	of abs.

	* plug-ins/imagemap/imap_about.c: updated copyright date
	
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_menu.h 
	* plug-ins/imagemap/imap_menu.c 
	* plug-ins/imagemap/Makefile.am
	* plug-ins/imagemap/imap_cmd_gimp_guides.h
	* plug-ins/imagemap/imap_cmd_gimp_guides.c: new functionality to allow
	creation of imagemap's using GIMP guides.
	
2002-08-21  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c (menus_last_opened_add): don't g_free() static
	strings (happened if gimprc.last_opened_size > 9, fixes #85795).

2002-08-21  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-mask-select.c: call gimp_image_mask_changed()
	after performing the selection op.

2002-08-20  Sven Neumann  <sven@gimp.org>

	* Made 1.3.8 release.

2002-08-20  Sven Neumann  <sven@gimp.org>

	* data/misc/Makefile.am: don't use the automatic variable $<
	(seems to work with GNU make only).

	* NEWS: updated.

2002-08-20  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpfuzzyselecttool.c: namespace cleanup.

2002-08-20  Michael Natterer  <mitch@gimp.org>

	Make sure the selection (gimpimage-mask.c) functionality is really
	built *on top* of the GimpChannel functionality:

	* app/undo.[ch]: renamed undo_push_image_mask() to
	undo_push_mask() and generalized it's API to take a GimpChannel
	param so undos can be pushed for channels which are not the
	image's selection. Simplified the API and added code which copies
	the region of interest instead of leaving this to callers.

	* app/undo_types.h: s/IMAGE_MASK_UNDO/MASK_UNDO/

	* app/undo_history.c: changed accordingly.

	* app/core/gimpchannel.[ch]: don't #include "gimpimage-mask.h".
	Changed gimp_channel_push_undo() to really push a channel undo,
	not a selection undo. Added "gboolean push_undo" params to all
	functions which are called from gimpimage-mask.c. Various cleanups
	and optimizations. Added /*< proxy-foo >*/ stuff to the header so
	we export just the struct itself to libgimpproxy. Added accessors
	gimp_channel_[get|set]_show_masked().

	* app/core/gimpimage-mask.[ch]: renamed gimp_image_mask_undo() to
	gimp_image_mask_push_undo(). Call it before calling GimpChannel
	functions which modify the mask, also call all GimpChannel
	functions with push_undo = FALSE. Emit gimp_image_mask_changed()
	after each operation instead of calling it in
	gimp_image_mask_invalidate(). Removed gimp_image_mask_none()
	because it is the same as gimp_image_mask_clear().
	General cleanup.

	* app/core/gimpimage-mask-select.c
	* app/core/gimpimage-qmask.c: changed accordingly.

	* app/core/gimpedit.c: call gimp_image_mask_clear(), not
	gimp_channel_clear (gimp_image_get_mask()).

	* app/core/gimpimage-crop.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-scale.c: call gimp_image_mask_changed()

	* app/gui/channels-commands.c
	* app/gui/select-commands.c
	* app/tools/gimptexttool.c
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/selection.pdb: follow GimpChannel and
	gimp_image_mask* API changes.

	* app/pdb/channel_cmds.c
	* app/pdb/selection_cmds.c
	* libgimpproxy/gimpchannel.h: regenerated.

	Unrelated:

	* app/core/gimpimage.c: call gimp_drawable_push_undo() instead of
	undo_push_image() directly.

2002-08-18  Manish Singh  <yosh@gimp.org>

	* autogen.sh: remove bashism (function keyword)

2002-08-18  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/gif.c: removed GTK_ENABLE_BROKEN and _DEPRECATED
	#defines and #includes because this plug-in has already been
	ported.

2002-08-11  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontainer.c: fixed warning, coding style.

2002-08-09  Kelly Martin  <kmartin@pyrzqxgl.org>

	* app/tools/gimpposterizetool.c (gimp_posterize_tool_register):
	fixed typo.

2002-08-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpmagnifytool.[ch]: reverted Dave's change
	since this feature has already been implemented properly
	(and configurable) last December.

2002-08-05  Dave Neary  <bolsh@gimp.org>

	* app/tools/gimpmagnifytool.[ch]: Require a minimum
        movement in the X and Y direction before we zoom in
        on/out to the dragged square. Limit rather arbitrarily
        set to 5. This fixes bug #86939, reported by
        philipj@telia.com.

2002-08-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gauss_iir.c
	* plug-ins/common/gauss_rle.c: merged fix for bug #89825 from
	stable branch.

2002-08-04  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/decompose.c: Add RGBA as a decompose target.

2002-08-03  Manish Singh  <yosh@gimp.org>

	* configure.in: make sure -lm is in $LIBS for the finite/isfinite
	test, fixes issues on newer FreeBSD

	* plug-ins/common/jpeg.c: cast statbuf.st_size to glong for
	g_snprintf

2002-08-03  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/Makefile.am (EXTRA_DIST): removed *.xpm files for
	which we now use GTK stock icons
	* plug-ins/imagemap/edit.xpm
	* plug-ins/imagemap/preferences.xpm: removed these pixmaps since we now
	use stock icons for those.

	* plug-ins/imagemap/imap_preferences.c
	* plug-ins/imagemap/imap_browse.c: replaced a few deprecated GTK 
	function calls.

2002-08-02  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_preferences.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_main.h
	* plug-ins/imagemap/imap_menu.c 
	* plug-ins/imagemap/imap_menu.h 
	* plug-ins/imagemap/imap_tools.c
	* plug-ins/imagemap/imap_tools.h: started implementation of fuzzy 
	select:  you can now click on a more or less contiguous region and the 
	plug-in will automatically create an object (circle, rectangle or 
	polygon)

2002-08-01  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_object.c (object_list_write_csim)
	* plug-ins/imagemap/imap_main.c (save_as_csim)
	* plug-ins/imagemap/imap_polygon.c (polygon_write_csim)
	* plug-ins/imagemap/imap_rectangle.c (rectangle_write_csim) 
	* plug-ins/imagemap/imap_circle.c (circle_write_csim): lowercased tags 
	as described in #87687. Still a few more changes to be made.

2002-07-22  Sven Neumann  <sven@gimp.org>

	* themes/Default/imagerc: applied a patch from Guillermo S. Romero
	that updates the example imagerc.

2002-07-11  Sven Neumann  <sven@gimp.org>

	* configure.in: bumbed version number to 1.3.8.

	* app/core/gimpcontainer.c: use gulong for signal handler IDs.

2002-07-09  Sven Neumann  <sven@gimp.org>

	Merged bug-fixes from the stable branch:
	
	* plug-ins/common/papertile.c: bug #86868.

	* plug-ins/common/tileit.c: bug #86637.

	* plug-ins/common/xpm.c: bug #87588.

	* plug-ins/print/print.c: bug #87428.

2002-07-08  Zbigniew Chyla  <cyba@gnome.pl>

	i18n fixes

	* plug-ins/script-fu/script-fu.c (script_fu_query): Pass
	"gimp14-script-fu" to gimp_plugin_domain_register
	(not "gimp-script-fu").

	* libgimp/libgimp-intl.h: s/gimp-libgimp/gimp14-libgimp/

	* libgimpwidgets/gimpstock.c (gimp_stock_items[]): ditto

2002-06-29  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/papertile.c (open_dialog): Added mnemonics (#80804)
	(filter): replaced gimp_pixel_rgn_get/set_row's to get/set complete 
	image in/from buffer with one gimp_pixel_rgn_get/set_rect.

	* plug-ins/common/xpm.c (save_dialog): Added mnemonics (#80804) plus
	some minor code cleanup.

2002-06-27  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tiler.c: converted Make Seamless plug-in so it now 
	uses a tile iterator. It's now about 10 times faster than the original
	implementation. Also includes fix for #67686 which was caused by
	rounding error in integer calculations.

2002-06-27  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay.[ch]: removed gdisp->scale,
	gdisp->dot_for_dot, the scaling marcos and the
	gdisplay_[un]transform[_f]() functions.

	* app/display/gimpdisplayshell.[ch]: added them here. Named the
	transform functions gimp_display_shell_[un]transform_xy[_f]().

	Made the gimp_display_shell_[un]transform_coords() functions copy
	all values of the GimpCoords struct, not just x and y.

	* app/display/gimpstatusbar.[ch]: keep a pointer to
	GimpDisplayShell, not GimpDisplay.

	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-scroll.c
	* app/display/gimpdisplayshell-selection.c
	* app/display/gimpnavigationview.c
	* app/gui/image-commands.c
	* app/gui/info-window.c
	* app/gui/select-commands.c
	* app/gui/view-commands.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpvectortool.c: changed accordingly.

	* app/gui/layers-commands.c: if(gimage->selection_mask) is always
	TRUE, use if(!gimp_image_mask_is_empty(gimage)) instead.

	* app/tools/gimpfuzzyselecttool.[ch]: moved global variables
	to the object struct.

2002-06-25  Simon Budig  <simon@gimp.org>

	* docs/Wilber.svg: Fixed the SVG so that the Adobe Plugin
	displays it correctly (the "fill" property defaults to black)

2002-06-25  Mel Boyce  <syngin@gimp.org>

	* plug-ins/helpbrowser/helpbrowser.c: Changed HTML for the
	"Document not found" error to come in to line with GIMP-Help-2 style.

2002-06-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/pix.c: changed a confusing comment, minor cleanup.

2002-06-24  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tiler.c (tile): minor optimizations and code
	cleanup.

	* plug-ins/common/AlienMap.c: added mnemonis (#80804) plus minor
	code cleanup.

	* plug-ins/common/pix.c: minor code cleanup: g_new should have a 
	matching g_free instead of free

2002-06-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/dbbrowser/dbbrowser_utils.c (dialog_search_callback):
	cleaned up after myself. There's no need to sort the store twice.

2002-06-23  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimpcolor/gimprgb.c (gimp_rgb_min)
	* libgimpcolor/gimprgb.c (gimp_rgb_max): don't use macro calls inside
	a macro call to avoid double evaluation.

2002-06-23  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/lic.c: started code clean-up. This plug-in is still
	painfully slow.

	* plug-ins/common/lic.c (create_main_dialog): Added mnemonics (#80804) 
	to dialog.

2002-06-23  Marco Wessel  <marco@phoenix.uzaynet.nl> 

	* plug-ins/script-fu/scripts/tileblur.scm: switch horizontal and
	vertical blurring. They were reversed. (Tuomas noticed this.)
	
2002-06-21  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/AlienMap2.c: replace plug-ins hsl_to_rgb and 
	rgb_to_hsl routines by libcompcolor routines (gimp_hsl_to_rgb and 
	gimp_rgb_to_hsl). Added mnemonics (#80804) to dialog.

	* libgimpcolor/gimpcolorspace.c (gimp_hsl_to_rgb): implemented correct
	algorithm for this conversion (taken from "Fundamentals of Interactive
	Computer Graphics by Foley and van Dam).

2002-06-21  Sven Neumann  <sven@gimp.org>

	* Makefile.am
	* data/misc/Makefile.am: added some files to DISTCLEANFILES
	(bug #86086).

2002-06-20  Michael Natterer  <mitch@gimp.org>

	Fixed color picking (reported by jimmac on #gimp):

	* app/core/gimpimage-pick-color.c: set the returned color's alpha
	value to opaque if the drawable we pick from has no aplha.

	* app/tools/gimpcolorpickertool.c: ignore all values returned by
	gimp_image_pick_color() if it returns FALSE (which happens if we
	want to pick outside the drawable).

2002-06-19  Michael Natterer  <mitch@gimp.org>

	Fix for #85202:

	Updating the active tool's modifier state on GDK_ENTER_NOTIFY and
	GDK_LEAVE_NOTIFY was a bad idea because this only works with
	focus-follows-mouse.  Instead, update it during the whole time the
	canvas can receive key events, namely from FOCUS_IN until
	FOCUS_OUT. As an ugly side condition, click-to-focus leads to
	GDK_BUTTON_PRESS arriving before GDK_FOCUS_CHANGE(in).

	* app/display/gimpdisplayshell-callbacks.[ch]: removed the
	separate focus_in and focus_out callbacks and handle them in
	gimp_display_shell_canvas_tool_events(). Moved tool state updating
	from the ENTER/LEAVE code to FOCUS_CHANGE. Added an ugly static
	variable "button_press_before_focus" and take care of the side
	condition mentioned above.

	* app/display/gimpdisplayshell.c: changed accordingly.

2002-06-19  Maurits Rijk  <maurits@linux.local>

	* plug-ins/imagemap/imap_preview.c (arrow_cb): minor layout changes.
	
	* plug-ins/imagemap/imap_object.c (object_get_icon): 
	* plug-ins/imagemap/imap_selection.c (selection_update): quick and
	dirty fix for now. Should be replaced as soon as GtkCList is replaced
	by GtkTreeView.

	* plug-ins/imagemap/imap_cmd_move_sash.c (move_sash_command_new): fixes
	#84726 (Imagemap plugin crashes regularly).

2002-06-19  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/fractaltrace.c (dialog_show): enable mnemonics

	* plug-ins/common/blur.c (blur_prepare_row): function caused a 
	"assertion `y >= 0 && y < pr->drawable->height' failed" in 
	gimp_pixel_rgn_get_row.
	
2002-06-18  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/Makefile.am (EXTRA_DIST): removed *.xpm files for
	which we now use GTK stock icons
	* plug-ins/imagemap/open.xpm
	* plug-ins/imagemap/save.xpm
	* plug-ins/imagemap/zoom_in.xpm
	* plug-ins/imagemap/zoom_out.xpm: removed these pixmaps since we now
	use stock icons for those.

2002-06-18  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/align_layers.c (align_layers_dialog): enable 
	mnemonics, minor code cleanup.

	* plug-ins/imagemap/imap_file.c (create_file_error_dialog): added stock
	warning icon to error dialog.

	* plug-ins/imagemap/ChangeLog: removed since it wasn't up-to-date and
	changes to the plug-in are logged in _this_ ChangeLog.
	
2002-06-17  Sven Neumann  <sven@gimp.org>

	Obviously I disagree with Tim about the symbol_name parameter in
	g_scanner_unexp_token(). As it seems it's not supposed to be used
	to tell the user about the expected symbol (see bug #81850):

	* gimpconfig.[ch] (gimp_config_deserialize_return): removed the
	symbol_name parameter.

	* app/config/gimpconfig-deserialize.c
	* app/core/gimpcontainer.c
	* app/core/gimpdocumentlist.c
	* app/core/gimpparasitelist.c: changed the callers accordingly.

	* app/core/gimpunits.c (gimp_unitrc_load): pass NULL as symbol_name
	to g_scanner_unexp_token().
	
2002-06-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-server.c (read_from_client): merged
	fix for bug #85573 from stable branch. We should port this stuff
	to use GIOChannels.

2002-06-17  Michael Natterer  <mitch@gimp.org>

	Separated tool_options creation from tool registration so we
	don't implicitly create widgets before gui_init():

	* libgimptool/gimptooltypes.h: removed GimpToolOptionsNewFunc
	typedef here...

	* app/core/core-types.h: ...and added it here.

	* libgimpproxy/gimpproxytypes.h: regenerated.

	* app/core/gimptoolinfo.[ch]: added a GimpToolOptionsNewFunc
	pointer to remember the constructor. Fixed the finalize() method
	(bug was never noticed because we leaked all tool infos)

	* app/tools/tool_manager.[ch]: moved tool_options creation to the
	new function tool_manager_restore(). Unref the tool infos after
	adding them to their container. Added "brush" and "gradient" to
	the context properties which are defined for tool contexts.

	* app/app_procs.c: call tool_manager_restore() after gui_init().

	* app/gui/gui.c: removed the hack introduced recently and call
	render_setup() in gui_init() again, not in gui_themes_init().

	Use the correct contexts now that they are properly initialized
	at the time of tool_options creation:

	* app/tools/gimpblendtool.c: use tool_info->context, not
	gimp_get_user_context() to get/set the tool's gradient.

	* app/paint/gimppaintcore.[ch] (gimp_paint_core_start): added a
	GimpPaintOptions paramater and get the brush to use from
	paint_options->context (instead of gimp_get_current_context()).

	* app/paint/gimppaintcore-stroke.c
	* app/tools/gimppainttool.c: changed accordingly.

	* app/tools/paint_options.c: added a brush preview to the paint
	options.

2002-06-16  Michael Natterer  <mitch@gimp.org>

	Fix for #85201:

	* app/tools/gimpfliptool.c: set the toggle_cursor correctly.

	* app/tools/gimptransformtool.c: if "use_grid" is FALSE, skip the
	cursor update stuff and chain up directly.

	Misc tool->control options fixes:

	* app/tools/gimppainttool.c: set "motion_mode" to
	GIMP_MOTION_MODE_EXACT.

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimpsmudgetool.c: don't touch "motion_mode" here.

	* app/tools/gimpimagemaptool.c
	* app/tools/gimptransformtool.c: set "scroll_lock" to TRUE and
	"preserve" to FALSE.

	* app/tools/gimpcurvestool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: don't touch them here.

	* app/tools/gimphistogramtool.[ch]: derive it from GimpImageMapTool
	so it inherits it's control settings.

	* app/tools/gimpellipseselecttool.c: don't set "preserve" to TRUE.

	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmovetool.c: code formating paranoia.

	* app/tools/gimptoolcontrol.c: fixed indentation.

2002-06-16  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpblendtool.c: set the witdh of the gradient preview
	to 96 instead of 128 pixels so it is not the widest tool options
	item with the "small" theme.

2002-06-16  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpstock.[ch]: register the new "invert" and
	"layer to imagesize" PNGs as stock icons.

	* app/gui/menus.c: use them here.

	* themes/Default/images/Makefile.am: fixed indentation.

2002-06-16  Sven Neumann  <sven@gimp.org>

	* app/gui/menus.c: use the new paste icons in the menu.

2002-06-15  Jakub Steiner <jimmac@ximian.com>

	replaced
	* themes/Default/images/stock-swap-colors-16.png:
	with
	* themes/Default/images/stock-swap-colors-12.png:

	eek, now I know why the wicked 12x12 size ;)

	* libgimpwidgets/gimpstock.c: 
	* themes/Default/images/Makefile.am: 
	* themes/Default/images/stock-icons.list: updated
	
2002-06-15  Jakub Steiner <jimmac@ximian.com>
	
	added:

	* themes/Default/images/stock-invert-16.png: color invert
	* themes/Default/images/stock-layer-to-imagesize-16.png: 
	* themes/Default/images/stock-swap-colors-16.png:

	replaced:

	* themes/Default/images/stock-convert-rgb-16.png:
	* themes/Default/images/stock-paste-16.png:
	* themes/Default/images/stock-paste-as-new-16.png:
	* themes/Default/images/stock-paste-into-16.png:

	  removed themes/Default/images/stock-swap-colors-12.png: replaced
	  by *-16.png

	* themes/Default/images/Makefile.am: updated icons
	* themes/Default/images/stock-icons.list: updated
	* libgimpwidgets/gimpstock.c: replaced stock_swap_colors
	
2002-06-14  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/shift.c: #84588 (use standard size entry widget
	for 'Shift Amount').

2002-06-14  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_cmd_unselect.c
	* plug-ins/imagemap/imap_cmd_select.c
	* plug-ins/imagemap/imap_rectangle.c: Fix for #71478 (Imagemap 
	plug-in does not draw some rectangles correctly)

2002-06-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/dbbrowser/dbbrowser_utils.c: made the DBBrowser dialog
	at least a little bit useable.

2002-06-13  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/wind.c (dialog_box): enable mnemonics, minor code
	cleanup.

	* plug-ins/common/tga.c (save_dialog): 
	* plug-ins/common/ripple.c (ripple_dialog)
	* plug-ins/common/whirlpinch.c (whirl_pinch_dialog)
	* plug-ins/common/png.c (save_dialog): enable mnemonics

2002-06-13  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* app/core/gimpimage-new.c :replaced memcpy by structure assignment.

	* plug-ins/common/gqbist.c (dialog_create): enable mnemonics, 
	replaced several memcpy's by structure assignment, pass structure 
	variable by reference iso value.

	* plug-ins/common/curve_bend.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/spheredesigner.c replaced memcpy by 
	structure assignment

2002-06-13  Sven Neumann  <sven@gimp.org>

        * plug-ins/common/unsharp.c: merged fix for bug #83420 from stable
	branch.

2002-06-13  Sven Neumann  <sven@gimp.org>

	* configure.in
	* app/plug-in/plug-in.c (plug_in_init_shm): allocate shared memory
	segments with permissions 0600 instead of making them accessible
	by everyone.

2002-06-12  Sven Neumann  <sven@gimp.org>

	* app/paint/gimppaintcore.[ch]: applied a patch from Henning
	Makholm <henning@makholm.net> that vastly improves drawing of thin
	lines. See bug #69773 for a detailed description.

2002-06-12  Sven Neumann  <sven@gimp.org>

	* app/base/tile-swap.c: use off_t to handle file offsets (#74478).

2002-06-12  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppreview.c (gimp_preview_size_allocate): center
	the preview's allocation.

	* app/tools/gimpblendtool.c (blend_options_new): use a button for
	the gradient so it's more obvious that it can be pressed.

2002-06-12  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdata.[ch]: added a boolean "internal" which
	indicates that the data object is an automatically created
	internal object. Changed the code to refuse saving or deleting
	internal objects.

	* app/core/Makefile.am
	* app/core/gimp-gradients.[ch]: new files implementing internal
	gradients (FG -> BG in RGB and HSV and FG -> transparent).

	* app/core/gimp.c: call gimp_gradients_init().

	* app/core/gimpdatafactory.c (gimp_data_factory_data_free): don't
	free internal objects so they stay there on "Refresh".

	* app/core/gimpdatalist.c: sort internal objects to the beginning
	of the list.

	* app/widgets/gimpdataeditor.c: refuse to change the name of
	internal objects.

	* app/widgets/gimpdatafactoryview.c: set the "Delete" button
	insensitive for internal objects.

	* app/widgets/gimpgradienteditor.c: refuse to edit internal
	gradients, just display them so color picking works.

	* app/gui/brushes-commands.c
	* app/gui/gradients-commands.c
	* app/gui/palettes-commands.c
	* app/gui/patterns-commands.c: set the "Delete" menu item
	insensitive for internal objects.

	* app/gui/gui.c: need to call render_setup() earlier because of
	you-dont-want-to-know-why. Will change it back once the previews
	have their own render buffers.

	* app/tools/gimpblendtool.c: Replaced the "Type" menu by a preview
	showing the active gradient. Clicking the preview pops up the
	gradient selection. Renamed the "Gradient" menu to "Shape". Removed
	"blend_mode" from the BlendOptions struct because we always use
	"custom" mode now.

2002-06-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/helpbrowser.c: implemented anchor handling.
	Load remote URLs by calling the webbrowser plug-in.

2002-06-11  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/paint-funcs/Makefile.am: fixed my fix for automake-1.6 (#84514).

2002-06-10  Sven Neumann  <sven@gimp.org>

	* HACKING: suggest to use the stable branches of gtk+ and friends.

2002-06-10  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/helpbrowser/uri.[ch]: added new files that implement
	conversion of a relative URI and an absolute base URI to a new
	absolute URI according to RFC 2396. This code has been kindly
	provided by Jacob Schroeder <jacob@convergence.de>.

	* plug-ins/helpbrowser/helpbrowser.c: more work on the help
	browser using the new URI functions. Still work in progress.
 
2002-06-09  Michael Natterer  <mitch@gimp.org>

	* themes/Default/imagerc
	* themes/Default/images/Makefile.am
	* libgimpwidgets/gimpstock.[ch]: register the new "Swap" and
	"Default" icons in "menu" size.

	* app/gui/menus.c: use them here.

	* app/widgets/gimptoolbox-color-area.c: changed accordingly.

2002-06-09  Michael Natterer  <mitch@gimp.org>

	Paint cleanup:

	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c
	* app/tools/gimpblendtool.c: made all *_motion() functions take
	only (paint_core, drawable, paint_options) and get all parametrs
	from looking at paint_options. Reordered functions to be
	consistent. Indentation. Stuff...

	* app/paint/gimpdodgeburn.[ch]: moved the GimpLut from
	GimpDodgeBurnOptions to the GimpDodgeBurn object struct.

	* app/paint/gimpsmudge.[ch]: moved all global variables to the
	GimpSmudge object struct.

2002-06-09  Sven Neumann  <sven@gimp.org>

	* app/undo.c
	* app/config/gimpconfig-deserialize.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpcontainer.c
	* app/core/gimpimagefile.c
	* app/gui/paths-dialog.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpgradienteditor.c: unified translatable strings
	and unmarked a few for translation since they should never be seen.

2002-06-08  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/shift.c (shift_dialog)
	* plug-ins/common/newsprint.c (newsprint_dialog)
	* plug-ins/common/bumpmap.c (bumpmap_dialog)
	* plug-ins/common/polar.c (polarize_dialog)
	* plug-ins/common/cubism.c (cubism_dialog): enable mnemonics

2002-06-08  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox-color-area.[ch]: use stock pixbufs to
	draw the "Default Colors" and "Swap Colors" buttons.

	* app/widgets/gimptoolbox.c: changed accordingly.

	* pixmaps/Makefile.am
	* pixmaps/default.xpm
	* pixmaps/swap.xpm: removed these pixmaps.

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-default-colors-12.png
	* themes/Default/images/stock-swap-colors-12.png: added them as stock
	icons.

	* libgimpwidgets/gimpstock.[ch]: register the new stock icons.

2002-06-08  Sven Neumann  <sven@gimp.org>

	* app/paint/gimppaintcore.c (gimp_paint_core_get_brush_mask): applied
	patch from Henning Makholm <henning@makholm.net> that fixes wrong
	brush opacity (bug #84538).

2002-06-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: ported to the GTK+-2.0 API.

2002-06-08  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/paint-funcs/Makefile.am: automake-1.6 seems to use yet another
	variable to pass flags to the assembler (bug #84514). Define
	AM_CCASFLAGS like AM_ASFLAGS to satisfy all versions of automake.

	* configure.in
	* all Makefiles: removed STRIP_BEGIN and STRIP_END since it's a
	GNU make extension that we don't really need and newer versions of
	automake don't seem to like it.

2002-06-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplist.[ch]: added gimp_list_reverse().

	* app/core/gimpdocumentlist.c: call it after deserializing so we
	don't reverse the history each time.

	* app/widgets/gimpdevices.c: use it instead of manually fiddling
	with list->list.

2002-06-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdrawable.[ch]: renamed gimp_drawable_apply_image()
	to gimp_drawable_push_undo() because that's what it actually does.

	* app/image_map.c
	* app/core/gimpdrawable-offset.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage.c
	* app/core/gimplayer.c
	* app/paint/gimppaintcore.c
	* app/tools/gimpinktool.c: changed accordingly. Removed redundant
	comments because it's now obvious what the function does from
	looking at its name.

	* app/core/gimpdrawable.[ch]
	* app/core/gimpimage.h: renamed "gboolean undo" parameters to
	"gboolean push_undo".

2002-06-06  Michael Natterer  <mitch@gimp.org>

	* libgimpproxy/gimpchannel.h: forgot to commit this one.

2002-06-06  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-deserialize.c: #include "gimpscanner.h"

2002-06-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.[ch] (gimp_channel_invert): added a boolean
	"push_undo" parameter.

	* app/core/gimpimage-mask.c
	* app/core/gimpimage-qmask.c: pass push_undo == TRUE.

	* app/core/gimplayer.c (gimp_layer_create_mask): call
	gimp_channel_invert(), not gimp_drawable_invert() because the
	latter takes the current selection into accout (reported by Jimmac
	on #gimp). Added g_return_if_fail() stuff to all public functions.
	Cleanup.

2002-06-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontainer.c (gimp_container_get_child_by_index):
	don't warn if an out-of-bounds index is passed in but simply
	return NULL (removes the need to check if the container has 0
	children before asking the container for it's first child).

2002-06-06  Sven Neumann  <sven@gimp.org>

	* INSTALL: added FreeType2 URL and suggest to use GNU make.

	* configure.in: improved output in case of missing PangoFT2.

2002-06-05  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimprectselecttool.c: fixed #84157: allow the tool to
	scroll the display. Also preserve it on drawable changes.

2002-06-04  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-blend-22.png: was too
	  big
	* themes/Default/images/stock-linked-20.png: 
	* themes/Default/images/stock-eye-20.png: prettier IMHO

2002-06-04  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintoptions.[ch]: i don't know what i was
	thinking, but GimpPaintOptions.context *is* used, sorry...

2002-06-04  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintoptions.[ch]: removed
	GimpPaintOptions.context because it was unused.

2002-06-02  Michael Natterer  <mitch@gimp.org>

	* app/gui/session.c: parse sessionrc using GScanner.

	* app/config/gimpscanner.[ch]: added utility function
	gimp_scanner_parse_string_list(). Fixed the color parser's parse
	error detection.

	* app/gimprc.c: removed the sessionrc parsing stuff.

	* app/config/gimpconfig-params.c (gimp_param_spec_color): no need
	to set the param_spec's value_type, it already gets set by it's
	base class' instance_init() function.

2002-06-02  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tile.c (tile_dialog)
	* plug-ins/common/jigsaw.c (dialog_box)
	* plug-ins/common/diffraction.c (diffraction_dialog): enable mnemonics

	* plug-ins/flame/flame.c (dialog): add mnemonics and slight 
	reorganization of dialog (now uses a notebook with 2 pages instead of
	one clunky dialog).

2002-06-02  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_about.c: bumped version number to 2.0

	* plug-ins/imagemap/imap_browse.[ch]: use GTK_STOCK_OPEN stock icon

	* plug-ins/imagemap/imap_default_dialog.c: added apply stock icon

	* plug-ins/imagemap/imap_popup.c
	* plug-ins/imagemap/imap_selection.c
	* plug-ins/imagemap/imap_menu.c
	* plug-ins/imagemap/imap_menu_funcs.c: enable mnemonics in menus and
	use stock icons whenever possible.

	* plug-ins/imagemap/Makefile.am
	* plug-ins/imagemap/copy.xpm
	* plug-ins/imagemap/cut.xpm
	* plug-ins/imagemap/paste.xpm
	* plug-ins/imagemap/delete.xpm
	* plug-ins/imagemap/undo.xpm
	* plug-ins/imagemap/redo.xpm: removed since we now use stock icons.
	
2002-06-02  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/Makefile.am: added imap_stock.[ch]

	* plug-ins/imagemap/imap_circle.[ch]
	* plug-ins/imagemap/imap_cmd_guides.[ch]
	* plug-ins/imagemap/imap_edit_area_info.[ch]
	* plug-ins/imagemap/imap_grid.c
	* plug-ins/imagemap/imap_menu_funcs.[ch]
	* plug-ins/imagemap/imap_misc.[ch]
	* plug-ins/imagemap/imap_object.[ch]
	* plug-ins/imagemap/imap_polygon.c
	* plug-ins/imagemap/imap_preferences.c
	* plug-ins/imagemap/imap_rectangle.[ch]
	* plug-ins/imagemap/imap_settings.[ch]
	* plug-ins/imagemap/imap_table.[ch]
	* plug-ins/imagemap/imap_toolbar.c
	* plug-ins/imagemap/imap_tools.[ch]: lots of changes to update plug-in 
	for GTK-2.0 such as removal of deprecated widgets and function calls 
	and use of stock icons.

	* plug-ins/imagemap/imap_stock.[ch]: new files

	* plug-ins/imagemap/imap_main.c: initialize stock icons

2002-06-01  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/imagemap/imap_preferences.[ch]
	* plug-ins/imagemap/imap_table.c: enable mnemonics

	* plug-ins/imagemap/imap_grid.[ch]: Add mnemonics to dialog and added 
	option to couple Width/Height and Left/Top offset in grid with 
	GimpChainButton.

	* plug-ins/imagemap/imap_tools.c (make_tools)
	* plug-ins/imagemap/imap_selection.c (make_selection_toolbar)
	* plug-ins/imagemap/imap_toolbar.c (make_toolbar): set style to only 
	show icons (GTK_TOOLBAR_ICONS).

	* plug-ins/imagemap/imap_object.[ch] (object_on_button_press): event 
	function now returns boolean value.

	* plug-ins/imagemap/imap_main.c (dialog): removed some obsolete code 
	that caused strange startup size of plug-in.

2002-06-01  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/convmatrix.c: enable mnemonics and removed some
	global variables.

	* plug-ins/mosaic/mosaic.c (mosaic_dialog): 
	* plug-ins/common/nova.c (nova_center_create)
	* plug-ins/common/nlfilt.c (mw_preview_new)
	* plug-ins/common/noisify.c (noisify_dialog)
	* plug-ins/common/borderaverage.c (borderaverage_dialog): enable 
	mnemonics

2002-05-31  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/borderaverage.c (borderaverage_dialog)
	* plug-ins/common/blur.c (blur_dialog): enable mnemonics

2002-05-31  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-blend-22.png: make it
	  more distiguishable from the transform tools
	* themes/Default/images/stock-plugin-16.png: Xtns>plugin-details
	  icon

2002-06-01  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpclone.[ch]: removed all global variables, factored
	out duplicated code, cleanup.

2002-05-31  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolormapeditor.c
	* app/widgets/gimppaletteeditor.c: return FALSE from button press
	event callbacks so the color drag handlers work again. Cleaned up
	the palette editor a bit.

2002-05-31  Michael Natterer  <mitch@gimp.org>

	* app/paint-core/paint-core.c (combine_sub_region): this is
	getting silly: this time (maybe) really fix #83418 and #26072: of
	course the local buffer needs to take the sizes of all three
	passed in regions into account, not only two of them *sigh*

2002-05-31  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpscanner.[ch]: configure the scanner the same
	way GimpConfig did (scanner->user_data is, if set, a GError).
	Added gimp_scanner_parse_color(). Added "GError **error" to
	gimp_scanner_new().

	* app/config/gimpconfig.c: use gimp_scanner_new().

	* app/config/gimpconfig-deserialize.c: use gimp_scanner_parse_color().

	* app/core/gimpunits.c
	* app/plug-in/plug-in-rc.c: changed accordingly.

	* app/plug-in/plug-in-rc.c: made the main parse loops consistent
	with the other places using GScanner.

2002-05-31  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/checkerboard.c: applied patch from Jeroen Lamain
	<roccodevinger@yahoo.com> to fix #81014 (Use size entry widget in
	Checkerboard plugin).

2002-05-30  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/displace.c (displace_dialog)
	* plug-ins/common/illusion.c (dialog): enable mnemonics

2002-05-30  Sven Neumann  <sven@gimp.org>

	* Made 1.3.7 release.
	
2002-05-30  Michael Natterer  <mitch@gimp.org>

	* app/xcf/xcf-read.c (xcf_read_string): UTF-8 validate all strings
	and try g_locale_to_utf8() as fallback if it fails.

2002-05-30  Sven Neumann  <sven@gimp.org>

	* configure.in: check for extra libraries needed for inet_ntoa() and
	socket() and define them as SOCKET_LIBS.

	* plug-ins/script-fu/Makefile.am (LDADD): added SOCKET_LIBS.

2002-05-30  Sven Neumann  <sven@gimp.org>

	* configure.in: added -lX11 to LIBXMU since GTK_LIBS doesn't provide
	it for us anymore (reported by Tomas Ogren).

	* libgimpbase/gimpenv.[ch]: declare gimp_path_runtime_fix() static.

	* app/base/Makefile.am: conditionally build detect-mmx.S to avoid
	warnings about empty object files (reported by Tomas Ogren).

	* plug-ins/Makefile.am: commented out plugin-helper since it's just
	too broken to be distributed.
	
	* themes/Default/images/Makefile.am: echo -n is not portable and not
	needed, so removed it (reported by Tomas Ogren).

2002-05-30  Sven Neumann  <sven@gimp.org>

	* app/gui/gui.c (gui_get_screen_resolution): do some sanity checks
	on the values returned by GDK.

2002-05-30  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped the version to 1.3.7.

	* tools/Makefile.am (EXTRA_DIST): include gimp-mkproxy. Should fix
	bug #83455.

2002-05-29  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs.c: fixed #83418, which was caused by
	my bogus "fix" for #26072 (initial_sub_region:: error :: src->w *
	(src->bytes + 1) > 512).
	The assertions were there because there were local temporary
	buffers of 512 bytes size. Now the buffers' size is
	MAX (src->width * src->bytes, dest->width * dest->bytes) which
	should be enough this time :) Re-enabled the assertions because
	of paranoia...

2002-05-29  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppencil.c: don't pass bogus [0..255] opacities to
	gimp_paint_core_paste_canvas() but use gdouble values in a
	[0.0..1.0] range. Spotted by Jakub Steiner.

2002-05-29  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/Makefile.am: set include paths in AM_ASFLAGS for
	automake-1.5.

2002-05-29  Sven Neumann  <sven@gimp.org>

	* Made 1.3.6 release.

2002-05-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.[ch]: renamed gimp_mem_size_entry_new()
	to gimp_memsize_entry_new() for consistency. Rewrote using bitshifts.
	Should work correctly for sizeof (gulong) > 32 now. Added new unit
	GigaBytes.

	* app/gui/preferences-dialog.c
	* app/gui/user-install-dialog.c: changed accordingly.

	* app/config/gimpconfig-types.[ch]: added new function
	gimp_memsize_set_from_string() that allows to check if the
	conversion succeeded.

	* app/config/gimpconfig-deserialize.c
	(gimp_config_deserialize_memsize): use gimp_memsize_set_from_string().

2002-05-28  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/gflare/gflare.c: enable mnemonics.

	* plug-ins/common/plasma.c (plasma_dialog)
	* plug-ins/common/snoise.c (solid_noise_dialog): enable mnemonics on 
	Random Seed widget.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* app/core/gimplayer.c (gimp_layer_new_from_drawable): determine
	the src_base_type from the passed drawable, not from the image it
	is attached to.

	* app/core/gimpimage-convert.c (gimp_drawable_convert_rgb)
	(gimp_drawable_convert_grayscale): added a check for the expected
	bpp of the passed tile_manager.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* app/base/base-config.[ch]
	* app/gui/user-install-dialog.c: use a gulong for the tile_cache_size.

	* app/base/tile-cache.c: cleanup, no changes.

	* app/config/gimpconfig-types.c (string_to_memsize): avoid overflows.

2002-05-28  Michael Natterer  <mitch@gimp.org>

	Yes, this is a bit hackish...

	* app/widgets/gimppreview.[ch]: added "gboolean eat_button_events"
	to enable previews which are clickable *and* let the click through
	to their parent widget.

	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimplayerlistitem.c: set "eat_button_events" to
	FALSE whenever we set "clickable" to TRUE so the GtkListItems get
	the click and can set the active drawable.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* app/config/test-config.c
	* app/gui/test-commands.c: use g_error_free() so we crash if our
	GimpConfig functions return FALSE and don't set an error.

	* app/widgets/gimpdevices.c: don't warn if devicerc was not found.

	* app/gui/preferences-dialog.c: use G_MAXULONG as upper limit for
	the mem_size entries.

	* libgimpwidgets/gimpwidgets.c (gimp_mem_size_entry): use gulong
	and set the range of the spinbutton's adjustment properly.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-types.c: derive GIMP_TYPE_MEMSIZE from
	G_TYPE_ULONG. Should probably be even G_TYPE_UINT64 but we use
	strtol which can only handle unsigned long int.

	* app/config/gimpbaseconfig.[ch]
	* app/config/gimpguiconfig.[ch]: changed accordingly.

	* app/config/test-config.c: use gimp_config_serialize_value() to
	dump changed values to stdout.

2002-05-28  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontext.c: override GObjectClass->constructor() and
	do the setup stuff there, not in gimp_context_new(). This way we
	can create properly initialized contexts with g_object_new().

	* app/widgets/gimpdeviceinfo.c: Removed the "gimp" property
	again. Added a constructor() implementation and moved stuff there
	from gimp_device_info_set_property(PROP_GIMP).

	* app/config/gimpconfig-deserialize.c: made deserialization of
	value arrays work by actually using the array and not just leaking
	it ;)

	* app/core/gimpcontainer.c: removed debugging output. Call
	config_iface->deserialize(child, ...) again instead of calling
	gimp_config_deserialize_properties() directly.

	* app/widgets/gimpdevices.c: switch to using the new stuff for
	devicerc.

	* app/widgets/gimpdeviceinfo.[ch]
	* app/widgets/gimpdevices.[ch]
	* app/gimprc.c: removed all old gimprc-style devicerc stuff.

	* app/gui/menus.c
	* app/gui/test-commands.[ch]: removed devicerc testing entries
	and callbacks.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* autogen.sh: simplified by using a function for version checks.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* NEWS: updated.

	* plug-ins/common/jpeg.c (background_jpeg_save): cast stat.st_size
	to gint to avoid compiler warning with large file support. This
	will fail for JPEG files > 2GB but I doubt this is a real problem.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* configure.in (AC_OUTPUT): fixed dist target by commenting out
	plug-ins/tools/common since it's also commented out in the Makefile
	in plug-ins/tools. Fixed broken check for sendmail.

	* plug-ins/common/mail.c: use the SENDMAIL define from config.h.

2002-05-28  Sven Neumann  <sven@gimp.org>

	* autogen.sh: cleaned up, nicer output.

2002-05-27  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c (gimp_config_serialize): fixed error code
	and improved error messages.

2002-05-27  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* libgimpwidgets/gimpwidgets.c (gimp_random_seed_new): 
	* plug-ins/common/randomize.c (randomize_dialog)
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/common/nova.c (nova_dialog)
	* plug-ins/common/sparkle.c (sparkle_dialog)
	* plug-ins/common/plasma.c (plasma_dialog)
	* plug-ins/common/waves.c (pluginCoreIA): enable_mnemonics.

2002-05-27  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/apply_lens.c (lens_dialog): call to
	gimp_drawable_has_alpha iso seperate check on GIMP_INDEXEDA_IMAGE |
	GIMP_GRAYA_IMAGE | GIMP_RGBA_IMAGE

2002-05-27  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpsizeentry.c (gimp_size_entry_attach_label):
	set the spinbutton which is attached right of the label as
	mnemonic_widget for the label.

2002-05-27  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig.[ch]: added "gint nest_level" to the
	deserialization functions, so nested calls to deserialize()
	don't error on the trailing ')'. Made the scanner config parse
	one-character identifiers and allow G_CSET_A_2_Z for all
	identifiers.
	Added gimp_config_deserialize_return() because returning the
	correct return value from a deserialize() function is not
	trivial any more with nested calls.

	* app/config/gimpconfig-deserialize.[ch]
	* app/config/gimprc.c
	* app/core/gimpdocumentlist.c
	* app/core/gimpparasitelist.c: use the new return value utility
	function and made the main parsing loops simpler.

	* app/core/gimpunits.c: made the main parsing loops consistent
	with the stuff that uses GimpConfig.

	* app/config/gimpconfig-deserialize.c 
	* app/config/gimpconfig-serialize.c: call the
	(de)serialize_property() functions only if the property's class
	implements the method itself (does *not* inherit it from one of
	it's parents).

	* app/core/gimpcontainer.c: implemented deserialization of
	containers. For each child entry encountered in the input, check
	if it's already contained in the container and create it if not.
	If a "gimp" pointer is passed as user_data pass it as construct
	property to g_object_new() when creating the object.

	* app/core/gimpcontext.c: changed deserialization of brush,
	pattern etc. to honor "no_data".

	* app/widgets/gimpdeviceinfo.c: added a "gimp" construct_only
	property which overrides GimpContext's "gimp" property. Moved all
	initialisation code from gimp_device_info_new() to
	gimp_device_info_set_property(PROP_GIMP) so it is properly
	performed if the object is created by GimpContainer's
	deserialize() implementation.

	* app/widgets/gimpdevices.c: made gimp_devices_restore_test() work.

2002-05-27  Sven Neumann  <sven@gimp.org>

	* configure.in: restructured, added lots of comments. Reenabled
	build of gimp-remote.

	* app/main.c: output name and version with usage information.
	
	* docs/Makefile.am: install the gimp-remote-1.3 man-page.
	
	* tools/Makefile.am: link gimp-remote-1.3 to gimp-remote if
	enable-default-binary was choosen at configure time.

	* tools/gimp-remote.c: make it start gimp-1.3 if called with the
	--new command-line option. Still the same bad hack as in 1.2 :-(

2002-05-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcomponentlistitem.c: kindof fixed the channel
	dialog's component items. Had to disable keyboard navigation
	because GtkList is horribly broken with GTK_SELECTION_MULTIPLE.
	Left in lots of #if 0'ed stuff because this is not the final
	solution...

2002-05-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c: "%lld" is not a portable format string,
	cast to gint64 and use G_GINT64_FORMAT instead.

2002-05-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimagefile.c: use "%lld" when printing or parsing
	file sizes because AC_SYS_LARGEFILE makes off_t a long long.

2002-05-27  Sven Neumann  <sven@gimp.org>

	* HACKING
	* autogen.sh
	* configure.in: added AC_SYS_LARGEFILE as a first prerequisite to
	handle bug #74478 (cannot handle swap size of 2GB). This requires
	autoconf-2.52. Unified and documented our use of AC_DEFINE() to 
	please autoheader.

	* acconfig.h: removed since it is now obsolete.

2002-05-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/helpbrowser.c: made Forward button work.

2002-05-25  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/scatter_hsv.c (scatter_hsv_dialog)
	* plug-ins/common/noisify.c (noisify_dialog)
	* plug-ins/common/spread.c (spread_dialog)
	* plug-ins/common/edge.c (edge_dialog)
	* plug-ins/common/sobel.c (sobel_dialog)
	* plug-ins/common/sharpen.c (sharpen_dialog)
	* plug-ins/common/unsharp.c (unsharp_mask_dialog)
	* plug-ins/common/max_rgb.c (dialog): enable mnemonics.

	* libgimpwidgets/gimpsizeentry.c (gimp_size_entry_attach_label): allow 
	underscore to be embedded in text parameter so labels can have 
	mnemonics. More work to do here.

2002-05-25  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/tileit.c: fix for #82498 (Opacity only seems to work 
	when tile is flipped). Also added mnemonics to dialog.

2002-05-25  Sven Neumann  <sven@gimp.org>

	* NEWS: updated.

	* plug-ins/helpbrowser/helpbrowser.c
	* plug-ins/helpbrowser/queue.[ch]: simplified user interface and
	code. Still work in progress...

2002-05-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c: a first start at
	cleaning up the Script-Fu user interface.

2002-05-24  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-deserialize.c: added deserialization of
	GValueArrays (untested). Added gimp_config_deserialize_value()
	which is factored out from gimp_config_deserialize_property().

2002-05-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/film.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/tileit.c
	* plug-ins/fp/fp_gtk.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gimpressionist/preview.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/sel2path/sel2path.c: make use of stock labels.

2002-05-24  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.c (gimp_rc_serialize): write newline after
	serializing the properties.

	* app/config/gimpconfig.c (gimp_config_string_indent): tiny
	optimization.

2002-05-24  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/smooth_palette.c (doit): fix for #82489 (selection 
	is ignored). Also adds mnemonics to dialog.

2002-05-24  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/iwarp.c (iwarp_dialog): fix for #82494 (strange 
	behaviour 'Number of Frames' entry). Also adds mnemonics to dialog.

2002-05-24  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig.c (gimp_config_string_indent): fixed assertion
	which did not check for indent_level >= 0 but > 0.

	* app/config/gimpconfig-serialize.c (gimp_config_serialize_value):
	serialize floats with g_ascii_formatd() to be locale independed,
	added serialization of GValueArrays.

	* app/widgets/gimpdeviceinfo.c: added properties for "mode",
	"axes" and "keys". Their set_property() implementations are
	untested.

2002-05-24  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/hot.c: let the hot filter also act on the current 
	selection (fixes #82480). Adds mnemonics to dialog.

2002-05-24  Maurits Rijk  <lpeek.mrijk@consunet.nl>

	* plug-ins/common/checkerboard.c: fix for #82499 (small typo) and also 
	adds mnemonics

2002-05-24  Sven Neumann  <sven@gimp.org>

	* app/core/cpercep.[ch]
	* app/core/gimpimage-convert.c
	* app/paint-funcs/paint-funcs.c: removed C++ style comments and
	compiler warnings.

2002-05-24  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig.[ch]
	* app/config/gimpconfig-serialize.[ch]: added "gint indent_level"
	to all serialization functions. Added gimp_config_string_indent()
	which indents a GString.

	* app/config/gimprc.c
	* app/core/gimpdocumentlist.c
	* app/core/gimpparasitelist.c: changed accordingly.

	* app/core/gimpcontext.c: don't crash when serializing NULL object
	properties.

	* app/config/gimpscanner.[ch]: added gimp_scanner_parse_identifier().

	* app/core/gimpcontainer.c: implement GimpConfigInterface.
	Container serialization works, deserialization is not implemented yet.

	* app/widgets/gimpdevices.[ch]: made
	GimpDeviceManager->device_info_list a GimpList, not GList, added
	testing functions for (de)serializing it.

	* app/gui/menus.c
	* app/gui/test-commands.[ch]: call the new test functions from
	the <Toolbox>/File/Debug menu.

2002-05-24  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: copied some code from
	gtk+/gtk/gtkmenubar.c:window_key_press_handler() which pops up the
	<Image> menu on F10 (or whatever is configured in GtkSettings).

2002-05-22  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.c (gimp_rc_query): check for GIMP_PARAM_SERIALIZE.

2002-05-22  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig.[ch]: added virtual interface methods
	serialize_property() and deserialize_property() which can be used
	to implement (de)serialization of special properties or to
	override the default implementation.

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-serialize.c: for each property, check if
	the class which added it implements the virtual functions and call
	them before trying the default implementations.

	* app/config/gimpconfig-params.h: added new macro
	GIMP_CONFIG_INSTALL_PROP_OBJECT().

	* app/core/gimpcontext.c: declare the "tool", "brush", "pattern",
	"gradient" and "palette" properties as serializable and added
	implementations of (de)serialize_property().

2002-05-21  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am: need to link test-config against
	libgimpcolor now.

	* app/config/gimpconfig.c (gimp_config_serialize): write newlines
	after header and before footer.

	* app/config/test-config.c
	* app/config/gimprc.c
	* app/core/gimp-documents.c
	* app/core/gimp-parasites.c
	* app/gui/test-commands.c: removed the newlines here.

	* app/config/gimpconfig-params.h: define GIMP_PARAM_SERIALZE flag
	which can be used to mark an object property as serializable.
	Make the GIMP_CONFIG_INSTALL_PROP_* macros set it.

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-serialize.c: check the GIMP_PARAM_SERIALIZE
	flag.

	* app/config/gimpconfig-params.c (gimp_param_color_set_default):
	fixed.

	* app/core/gimpcontext.c: install serializable properties using the
	GIMP_CONFIG_INSTALL_PROP_* macros.

2002-05-21  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-types.[ch]: added GIMP_TYPE_COLOR as boxed
	type encapsulating GimpRGB.

	* app/config/gimpconfig-params.[ch]: added GimpParamSpecColor
	which is derived from GParamSpecBoxed and adds a default value.

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-serialize.c: added generic
	(de)serialization of the new property type.

	* app/core/gimpcontext.c: implement the config interface, changed
	signal parameters and property types to use the new
	GIMP_TYPE_COLOR.

	* app/core/gimpmarshal.list: added a VOID__BOXED marshaller.

	* app/gui/menus.c
	* app/gui/test-commands.[ch]: some test code which (de)serializes
	the user context.

2002-05-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimplayer.[ch] (gimp_layer_new_from_tiles): added a
	GimpImageType parameter to specify the desired drawable type. This
	is needed when pasting into layer masks.

	* app/core/gimpdrawable-transform.c
	* app/core/gimpedit.c
	* app/core/gimpimage-mask.c: changed accordingly.

2002-05-21  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in.c: some more minor cleanup.

2002-05-21  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.c
	* app/widgets/gimpdeviceinfo.c: write/parse the "wheel" axis
	properly when writing/parsing devicerc.

	* app/widgets/gimpdevices.c: no need to #define something twice.

2002-05-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-text-console.c: somewhat cleaner
	implementation.

2002-05-17  Sven Neumann  <sven@gimp.org>

	* INSTALL: documented more configure options.

2002-05-16  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpprotocol.[ch]
	* libgimpbase/gimpwire.[ch]: pass "gpointer user_data" to all
	functions, which in turn gets passed to the registered reader,
	writer, and flusher funcs.

	* libgimp/gimp.c
	* libgimp/gimptile.c: pass NULL as user_data. We have only one
	pipe on the plug-in side.

	* app/plug-in/plug-in.c: pass the PlugIn as user_data. As a
	consequence, got rid of more global variables. The global
	"current_plug_in" and the plug_in_push()/pop() madness are still
	there. Will replace them by some less ugly hack later...

2002-05-16  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: don't allow to close the splash screen. Fixes
	bug #81962.

	* plug-ins/gimpressionist/gimpressionist.c: changed button order.
	As mentioned in bug #81963 the UI of this plug-in needs some more
	work.

	* plug-ins/gimpressionist/brush.c
	* plug-ins/gimpressionist/paper.c
	* plug-ins/gimpressionist/presets.c: fixed handling of scrolled
	windows.

2002-05-16  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in.c: Pass PlugIn, not Gimp pointers to all
	message handler functions so they have a proper context to operate
	on. Use the PlugIn pointer passed instead of "current_plug_in".
	Removed global variables "current_readchannel" and
	"current_writechannel" because it is now always possible to use
	plug_in->my_read and plug_in->my_write.

2002-05-15  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpmovetool.c: <shift>+click toggles the active
	layer's "linked" property now.

	* themes/Default/images/stock-tool-options-16.png: new icon.

	* themes/Default/images/Makefile.am
	* themes/Default/imagerc
	* libgimpwidgets/gimpstock.[ch]: added it to the stock system.

	* app/gui/menus.c: use it for the tool_options dialog's menu
	entries.

2002-05-15  Simon Budig  <simon@gimp.org>

	* plug-ins/pagecurl/pagecurl.c: tiny fix, there was an
	ancient non working call to gimp_layer_add_alpha still
	hanging around...

2002-05-15  Simon Budig  <simon@gimp.org>

	* plug-ins/pagecurl/pagecurl.c: Made the pagecurl plugin
	automatically add an alpha channel. Fixes #81611.

2002-05-15  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c: fixed documentation.

	* app/tools/gimppenciltool.c
	* app/tools/gimpsheartool.c: assign shortcuts that don't collide with
	other tools.

2002-05-15  Michael Natterer  <mitch@gimp.org>

	New feature: pressing <space> in the image window temporary
	switches to the move tool (so that releasing <space> switches back
	to the old tool).

	* app/display/gimpdisplayshell.[ch]: added booleans
	shell->space_pressed and shell->space_release_pending. Connect
	more events to gimp_display_shell_events() so they can be blocked
	there if needed.

	* app/display/gimpdisplayshell-callbacks.c: beautified and
	uglified at the same time:

	beauty:
	- moved the checks if gimp is busy or button1 is down to
	  gimp_display_shell_events() so they don't clutter
	  gimp_display_shell_canvas_tool_events().
	- factored tool modifer updating out to a separate function.
	- indentation/spacing cleanup.

	ugly:
	- added more static variables to track the state of <space>
	- added the actual move tool toggling code.

2002-05-15  Michael Natterer  <mitch@gimp.org>

	* app/gui/splash.c
	* libgimpproxy/gimpobject.h: reverted stuff someone
	accidentially checked in...

2002-05-15  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/preferences/tool-options.png:
	* themes/Default/images/preferences/image-windows.png:
	* themes/Default/images/preferences/display.png: 
	  unique GIMP icons

2002-05-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdocumentlist.c
	* app/core/gimpparasitelist.c
	* app/core/gimpunits.c: improved parser error messages. Relies on a
	fix in glib (see bug #81850). However it doesn't hurt if you don't
	have the fix.

2002-05-15  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.[ch]: added user_data pointer to serialize
	and deserialize methods.

	* app/config/gimprc.[ch]: implement gimp_rc_save() using
	gimp_config_serialize() so it can take advantage of the file
	handling magic implemented there.

	* app/config/test-config.c
	* app/core/gimp-documents.c
	* app/core/gimp-parasites.c
	* app/core/gimpdocumentlist.c
	* app/core/gimpparasitelist.c: changed accordingly.

2002-05-15  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.[ch]: added a return value to indicate
	success of GimpConfigInterface::serialize. Added a GimpConfigError
	value for write errors and check the return value of all write()
	calls. Allow to specify file header and footer when calling
	gimp_config_serialize().

	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimprc.c: changed accordingly.

	* app/core/gimp-documents.[ch]: new files with functions to handle
	gimp->documents.

	* app/core/gimpdocuments.[ch]: removed ...

	* app/core/gimpdocumentlist.[ch]: ... and added under this name.
	Implements a generic document list.
	
	* app/core/gimp-parasites.[ch]: new files with functions to handle
	gimp->parasites.

	* app/core/gimpparasite.[ch]: removed.

	* app/core/gimpparasitelist.[ch]: nothing more than a generic
	parasite list.

	* app/undo.c
	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimp.c
	* app/core/gimpdrawable.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage.c
	* app/core/gimpitem.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/gui/file-open-dialog.c
	* app/pdb/parasite_cmds.c
	* tools/pdbgen/pdb/parasite.pdb: changed accordingly.

2002-05-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdocuments.c: misc small changes.

	* app/core/gimpparasite.[ch]: reduced to a small set of wrappers
	around gimp->parasites.

	* app/core/gimpparasitelist.c: moved the code that reads and
	writes parasite lists ala parasiterc to this file. Added a
	GimpConfigInterface to GimpParasiteList.

	* app/core/gimp.c: changed accordingly.

2002-05-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/ps.c: reverted the last change and applied a patch
	from Peter Kirchgessner instead (closes reopened bug #81606).

2002-05-14  Sven Neumann  <sven@gimp.org>

	* app/core/core-types.h
	* app/core/gimpdocuments.[ch]: made the list of recently used
	images an object derived from GimpList that implements the
	GimpConfigInterface.

	* app/core/gimp.c
	* app/file/file-open.c
	* app/file/file-save.c: changed accordingly.

2002-05-14  Dave Neary  <bolsh@gimp.org>

	* plug-ins/common/plasma.c: Added fixes for bugs #81730 and 
	#81732 from the 1.2 branch.

2002-05-14  Sven Neumann  <sven@gimp.org>

	* libgimp/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimptool/Makefile.am
	* libgimpwidgets/Makefile.am: removed unneeded CPPFLAGS.

	* libgimpproxy/Makefile.am: ditto. Changed rules for generated files
	so that they work for parallel builds.

2002-05-14  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c: fixed error messages.

	* plug-ins/common/ps.c: applied a patch from Raphael Quinet that
	fixes bug #81606 (special-case recent Illustrator EPS brain damage).

2002-05-14  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/stock-wilber-eek-64.png: tweaked so the
	shadow isn't cut off at the image border. We could still need a
	better icon.

	* themes/Default/images/stock-wilber-eek.png: removed.

2002-05-13  Sven Neumann  <sven@gimp.org>

	* libgimpmath/gimpmath.h: removed FINITE() macro.

	* tools/pdbgen/pdb/image.pdb
	* app/pdb/image_cmds.c: define FINITE() here, where it is used.

	* tools/pdbgen/pdb/lib.pl: add "config.h" to all generated libgimp
	.c files.

	* libgimp/gimp*_pdb.c: regenerated.

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpchannel.c
	* libgimp/gimpdrawable.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimphelp.c
	* libgimp/gimpimage.c
	* libgimp/gimplayer.c
	* libgimp/gimppatternmenu.c
	* libgimp/gimppixelrgn.c
	* libgimp/gimpproceduraldb.c
	* libgimp/gimpselection.c
	* libgimp/gimptile.c
	* libgimp/gimpui.c
	* libgimpmath/gimpmatrix.c
	* libgimpmath/gimpvector.c
	* plug-ins/MapObject/arcball.c
	* plug-ins/fp/fp_gdk.c
	* plug-ins/fp/fp_misc.c
	* plug-ins/ifscompose/ifscompose_storage.c
	* plug-ins/ifscompose/ifscompose_utils.c
	* plug-ins/maze/handy.c
	* plug-ins/rcm/rcm_gdk.c
	* plug-ins/sel2path/edge.c
	* plug-ins/xjt/xjpeg.c
	* plug-ins/xjt/xpdb_calls.c: include "config.h".
	
2002-05-13  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c (gimp_config_serialize): serialize to a
	temporary file and rename it to the target filename when it is
	completely written.

2002-05-13  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparasite.c: parse parasiterc using GScanner instead
	of gimprc.

	* app/gimprc.c: removed the parasite parsing stuff.

2002-05-13  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpenummenu.[ch]: added _with_range variants for all
	enum menu widgets that limit the range of choices.

	* app/gui/file-new-dialog.c
	* app/gui/layers-commands.c
	* app/gui/preferences-dialog.c: use GimpEnumMenus with ranges.

2002-05-13  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: uhh, skipping values used in the PDB
	was a bad idea. Removed the skip trigraphs again. This breaks the
	GUI; will fix it later.

	* tools/pdbgen/enums.pl: regenerated.

2002-05-13  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: registered GimpFillType enum and added
	translatable names to GimpImageBaseType.

	* app/core/gimp.[ch]
	* app/core/gimpedit.c
	* app/core/gimpimage-new.[ch]: removed gimp_image_new_[init|exit]()
	where we used to create names for the enums mentioned above. Dropped
	gimp_image_new_set_have_current_cut_buffer() in favor of accessing
	the value directly.

	* app/gui/file-new-dialog.c (file_new_dialog_create)
	* app/gui/layers-commands.c (layers_new_layer_query): use
	GimpEnumMenus to choose the base_type and fill_type.

2002-05-13  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs.c commented out a warning in
	initial_sub_region and a g_error() in combine_sub_region which
	didn't expect to get chunks of pixels with a width of > 128
	passed. I guess it was an assertion to ensure the integrity of
	some higher level code (see gimpdisplay.c:
	gimp_display_idlerenderer_callback()).  The assertion went off
	whenever we wanted to render a preview with a width of > 128,
	which is however handled absolutely correctly by the two
	functions. (fixes #26072)

	* app/core/gimpcontext.c (gimp_context_get_by_type): unref objects
	before returning them. Fixes our biggest memleak (whole images).

	* app/display/gimpdisplay-handlers.c: commented out debugging
	g_print()s which track the image's refcount.

2002-05-13  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpmenu.c: use gimp_image_get_name().

	* plug-ins/common/deinterlace.c: don't use 'O' as mnemonic, it's
	already taken by the _OK button.

2002-05-13  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.c: documentation fix.

2002-05-13  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpnavigationview.c: set the view's display to NULL
	in "destroy". Fixes crash on closing the navigation dialog.

	* app/gui/dialogs-constructors.c
	* app/gui/menus.c: use GIMP_STOCK_NAVIGATION instead of
	GIMP_STOCK_TOOL_MOVE. Use the new GIMP_STOCK_WARNING (see below)
	for the error console.

	* themes/Default/images/*.png
	* themes/Default/images/tools/*.png: renamed all stock icons to
	have the pixel size instead of "button" or "menu" in the name.
	(e.g. stock-menu-scale.png -> stock-scale-16.png).

	* libgimpwidgets/gimpstock.[ch]
	* libgimpwidgets/gimpwidgets.c
	* themes/Default/gtkrc
	* themes/Default/imagerc
	* themes/Default/images/Makefile.am: changed accordingly.

2002-05-11  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpnavigationview.c: connect to size allocations of
	the navigation preview's parent container and resize it so it
	takes all available space.

	* app/widgets/gimppreview.[ch]: replaced magic values by public
	#defines of GIMP_PREVIEW_MAX_SIZE and GIMP_PREVIEW_MAX_POPUP_SIZE.
	Increased the maximum preview size to 1024. Don't call the virtual
	get_size() function if preview->viewable is NULL but call
	gimp_preview_real_get_size() directly.

	* app/widgets/gimpbufferpreview.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpcontainermenu.c
	* app/widgets/gimpdrawablepreview.c
	* app/widgets/gimpimagepreview.c
	* app/widgets/gimplistitem.c
	* app/widgets/gimpmenuitem.c
	* app/widgets/gimpnavigationpreview.c: replaced magic values by
	the new costants.

2002-05-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolormapeditor.c: Added a comment to explain why
	the "correct" size calculation is commented out and put back the
	old buffer size so we don't crash. Made the code robust against
	whether we render only the color cells or the whole widget's
	allocation->width.

	* app/widgets/gimpdialogfactory.c: Don't try to #define DEBUG(...)
	but wrap the whole g_print(...) statement in a debugging macro.

2002-05-11  Sven Neumann  <sven@gimp.org>

	* libgimp/stdplugins-intl.h
	* plug-ins/script-fu/script-fu-intl.h: use the new function
	gimp_locale_directory() instead of LOCALEDIR.

	* app/Makefile.am
	* plug-ins/*/Makefile.am: removed LOCALEDIR definition.

2002-05-11  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.c (gimp_radio_group_new2): applied a
	patch from Maurits Rijk that enables mnemonics (bug #80804).
	
	* plug-ins/common/blinds.c
	* plug-ins/common/deinterlace.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/destripe.c
	* plug-ins/common/emboss.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/mblur.c
	* plug-ins/common/oilify.c
	* plug-ins/common/pixelize.c
	* plug-ins/common/sel_gauss.c
	* plug-ins/common/struc.c: : applied patches from Maurits Rijk that
	add mnemonics (bug #80804).

	* plug-ins/common/convmatrix.c: merged fix for bug #81345 from stable
	branch.

2002-05-11  Sven Neumann  <sven@gimp.org>

	* app/gui/Makefile.am: removed LOCALEDIR definition ...

	* libgimpbase/Makefile.am: ... and added it here.

	* app/widgets/gimpdnd.c: corrected pointer arithmetic.
	
2002-05-11  Sven Neumann  <sven@gimp.org>

	* app/tools/Makefile.am (SOURCES): removed gimptool.h.

	* libgimptool/Makefile.am (SOURCES): added gimptoolcontrol.h.

2001-05-11  Hans Breuer  <hans@breuer.org>

	* app/makefile.msc : add appconfig.lib. Statically
	link libgimptool/gimptool.lib.

	* app/main.c : use gimp_locale_directory()

	* app/config/gimpconfig-utils.c : <string.h>

	* app/config/makefile.msc : add gimpscanner

	* app/core/gimpimagefile.c : some G_OS_WIN32 mess to get
	mkdir() and chmod()

	* app/display/gimpdisplayshell.c
	* app/plug-in/plug-in-progrss.c
	* app/tool/gimpcolorpickertool.c  
	* app/tool/gimpcroptool.c  
	* app/tool/gimpmeasuretool.c  
	* app/tool/gimpperspectivetool.c  
	* app/tool/gimprotatetool.c  
	* app/tool/gimpscaletool.c  
	* app/tool/gimpsheartool.c  
	* app/tool/gimptransformtool.c  
	* app/widgets/gimpcolormapeditor.c  
	* app/widgets/gimpcolorpanel.c  
	* app/widgets/gimptoolbox-color-area.c : add #ifdef __GNUC__ to
	avoid breaking on non standard pragma #warning.

	* app/tools/makefile.msc : add gimptoolcontrol remove tools-enum.

	* app/tools/tool_manager.c : need to include
	libgimptool/gimptoolcontrol.h after core includes
	otherwise we would compile without prototypes or
	break miserably

	* app/gui/plug-in-menus.c : replace LOCALEDIR with
	gimp_locale_directory ()

	* app/gui/preferences-dialog.c (prefs_notebook_append_page) : 
	only try to gdk_pixbuf_new_from_file() with a valid filename.
	It should simply return NULL otherwise, but fails if the
	filename is an empty string.

	* app/paint-funcs/makefile.msc : add -FImsvc_recommended_pragmas.h

	* app/widgets/gimpcolormapeditor.c : the 'row'
	allocated needs to be 'xn * cellsize * 2' (to avoid
	accessing unowned memory) not only width, which has 
	become allocation.width by someone commenting out 
	the correct size calculation

	* app/widgets/gimpdialogfactory.c : varargs to macros
	are GCCism or at least non standard. #define DEBUG
	to g_print or nothing - without arguments - does fix
	it somewhat dirty as the compiler needs to tolerate
	the '(blah, foo, bar);' statement than

	* app/widgets/makefile.msc : updated

	* app/xcf/makefile.msc : add -FImsvc_recommended_pragmas.h

	* etc/gimprc.win32 : use ';' to separate theme-path

	* libgimpbase/gimpenv.c : #include <stdio.h>
	for sprintf()

	* app/widgets/gimpdnd.c (gimp_dnd_set_file_data) : 
	the passed in vals chunk is not always null-terminated
	(at least not on win32). Use the length parameter too 
	to avoid reading junk filenames.

	* libgimp/gimp.def : export gimp_image_get_name()

	* libgimpbase/gimpbase.def : export gimp_locale_directory()
	* libgimpbase/gimpenv.[ch] : added gimp_locale_directory ()

	* libgimpbase/makefile.msc : define DATADIR and SYSCONFDIR
	to empty string to let gimp find its files in the common
	place (win32: relative to the top level gimp dir)

	* plug-ins/common/pixelize.c : <string.h>

	* plug-ins/flame/cmap.c : #include <glib.h> for g_random_int()

	* plug-ins/makefile.msc : -FImsvc_recommended_pragams.h
	and a little hack to give imagemap the prototypes it
	desires without changing the lexed source

	* themes/Default/images/makefile.msc : now added (see below)

	* themes/Default/images/stock-button-reset.png : made it binary

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay.c: EEK, actually increase
	gimp->next_display_ID after taking a value.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/file/file-open.c (file_open_image): invalidate all layer and
	channel previews after loading an image. Fixes previews containing
	garbage after image loading (also fixes thumbnail generation).

2002-05-10  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/image.pdb: initialize a variable to please the
	compiler.

	* app/pdb/image_cmds.c: regenerated.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	We can always create GimpPreviews for any GtkIconSize, but
	not vice versa. therefore:

	* app/widgets/gimpdockable.[ch]: changed the "gint size" parameter
	used for tab sizes to "GtkIconSize size" all over the place. Added
	"stock_id" in addition to "name" and "short_name".

	* app/widgets/gimpdockbook.c
	* app/widgets/gimpimagedock.c: use GtkIconSize instead of integer
	preview sizes for all widget style properties. Renamed them from
	"blah_height" to "blah_size" because "height" is an implementation
	detail.

	* app/gui/dialogs-constructors.c: changed calls to
	gimp_dockable_new() and all *_tab_func()s accordingly. Removed
	the hack for the navigation tab and added a general tab_func
	which returns a hbox with an icon & label.

	* app/gui/menus.c: made the dialog menus found under <Toolbox>,
	<Image> and <Dialogs> more consistent and added more stock icons.

	* etc/gtkrc_user
	* themes/Default/gtkrc: changed accordingly.

2002-05-10  Sven Neumann  <sven@gimp.org>

	* app/gui/user-install-dialog.c
	* plug-ins/common/gtm.c: use stock pixbufs instead of xpm pixmaps.

	* pixmaps/Makefile.am
	* pixmaps/eek.xpm
	* pixmaps/folder.xpm
	* pixmaps/wilber.xpm: removed now unused pixmaps.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay.c: added a read-only property for the
	display's image, so it can be retreived by the core, which
	treats displays as simple GimpObjects.

	* app/core/gimpcontext.c: made context->display an object
	property, not just gpointer. Connect to the "remove" signal of
	gimp->displays to get notified of disappearing displays. Removed
	the EEKWrapper and get the display's gimage with g_object_get().

	* app/widgets/gimpimagedock.[ch]: added image_dock->display_container
	and require it being passed in the constructor. Do voodoo things
	in the "image_changed" and "display_changed" callbacks to ensure
	that the dock doesn't end up with no display even if the active
	image has one. Added a style property for the image menu's preview
	size.

	* app/gui/dialogs-commands.c (dialogs_menu_update): set the
	"View as List" and "View as Grid" items insensitive if the
	other view type doesn't exist. Hide them if the view cannot
	be classified as "list" or "grid" at all. Also hide the
	"Preview Size" submenu if it's pointless for the view.

	* app/gui/dialogs-constructors.c: added a special tab for the
	navigation dialog. Will propbaby add dockable->stock_id to
	generalize this kind of tab. Pass gimp->displays to
	gimp_image_dock_new().

	* app/gui/menus.c: reordered the "<Dialogs>" factory entries,
	added more stock icons, cleanup.

	* etc/gtkrc_user
	* themes/Default/gtkrc: document usage of GimpImageDock's
	"menu_preview_height" property.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpnavigationview.c: pack the preview's alignment
	into the inner frame, not around it, so it looks like the other
	dockables. Fixed popup window positioning. Tried to get rid of
	insane scale_label allocation computation but failed. Left the
	EEKy code there for further investigation.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/undo_history.c: create the "Undo" and "Redo" buttons from
	stock items.

	* pixmaps/Makefile.am
	* pixmaps/lower.xpm
	* pixmaps/paste.xpm
	* pixmaps/raise.xpm: removed them because they are not used any more.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainermenuimpl.c: don't try to set the
	preview_size of plain GtkMenuItems.

	* app/widgets/gimpdocumentview.c: fixed the "update" and
	"delete dangling" functionals. They got passed wrong user_data.

	* app/widgets/gimpitemfactory.c (gtk_item_factory_set_visible): if
	the widget found is a menu, get it's parent item and show/hide
	that.

	* app/widgets/gimppreview.c (gimp_preview_set_viewable): always
	clear preview->buffer so we don't display previews of vanished
	viewables.

2002-05-10  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontainer.c: disabled debuggind output.

	* app/core/gimpdrawable.c (gimp_drawable_init): no need to
	initialize variables twice :)

	* app/widgets/gimpnavigationpreview.c: removed debugging output.

2002-05-08  Nathan Summers  <rock@gimp.org>

	* Changelog: (2002-05-06) somehow the Changelog entry for my dbbrower
	modification didn't get committed. Probably this was because I 
	committed at the same time that some guy with a backhoe committed some
	modifications to the network cable running under the parking lot behind
	my apartment, leaving me without internet connectivity for several 
	days. :)
	
2002-05-08  Manish Singh  <yosh@gimp.org>

        * configure.in: the correct switch is --disable-print, not 
        --without-gimpprint. Fix not found error message, and add a pointer
        to the gimp-print homepage.

2002-05-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c (run): call bind_textdomain_codeset() so
	that we get UTF-8 encoded translations from libgimpprint.

2002-05-08  Michael Natterer  <mitch@gimp.org>

	Started to get rid of the gdisplays_foo() functions in
	app/display/gimpdisplay-foreach.[ch]. Work in progress...

	* app/core/gimp.[ch]: added the display list to the Gimp object
	(as a GimpList of GimpObjects). This way we get more independent
	from whether there is GUI or not, as gimp->displays will simply
	be an empty list for the --no-interface case.

	* app/display/gimpdisplay.[ch]: Removed the global "display_list"
	and "display_num" variables. Use gimp->displays instead.

	* app/display/gimpdisplay-foreach.[ch]: renamed most functions
	from gdisplays_foo() to gimp_displays_foo() and pass them a Gimp
	pointer. 

	* app/core/gimpimage.[ch]: added a "flush" signal.

	* app/display/gimpdisplay-handlers.c: connect to "flush" and call
	gimp_display_flush() in the callback.

	* tools/pdbgen/pdb/display.pdb: use gimp_displays_flush(gimp)
	here and only here.

	* app/pdb/display_cmds.c: regenerated.

	* app/app_procs.c
	* app/gui/gui.c
	* app/gui/preferences-dialog.c:
	s/gdislays_foo()/gimp_displays_foo(gimp)/

	* app/image_map.c
	* app/undo_history.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell-layer-select.c
	* app/display/gimpdisplayshell-scale.c
	* app/gui/channels-commands.c
	* app/gui/colormap-editor-commands.c
	* app/gui/convert-dialog.c
	* app/gui/drawable-commands.c
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* app/gui/qmask-commands.c
	* app/gui/select-commands.c
	* app/gui/vectors-commands.c
	* app/paint/gimpairbrush.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimpimageview.c
	* app/widgets/gimpitemlistitem.c
	* app/widgets/gimpitemlistview.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplayerlistview.c
	* app/widgets/gimpvectorslistview.c: replaced gdisplays_flush()
	with calls to gimp_image_flush(gimage). Removed inclusion of
	"display/gimpdisplay-foreach.h" from most files.

2002-05-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/gimp_color_window.c
	* plug-ins/print/gimp_main_window.c: a couple of cleanups and fixes.
	This code relies heavily on GTK+ implementation details and thus
	tends to work differently or even crashes on GTK+-2.0 :-(

2002-05-08  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.h: removed unused commented out prototype.

	* app/core/gimpimage.c (gimp_image_set_tattoo_state): fixed it
	again after I have b0rked it when using vectors instead of paths.

	* app/display/gimpdisplay.c: some comments and one more
	g_return_val_if_fail().

	* app/widgets/gimpimagedock.c: more fixes for the subtle
	active_image <-> active_display difference.

	* tools/pdbgen/pdb/display.pdb (gimp_display_delete): call
	gimp_display_delete() instead of just destroying it's shell (eek).

	* app/pdb/display_cmds.c: regenerated.

	Added a special view type for the image list so we can implement
	stuff like deleting images which are left over from crashed
	plug-ins:

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpimageview.[ch]: new widget: a view on the image
	container.

	* app/gui/Makefile.am
	* app/gui/images-commands.[ch]: new callbacks for it's context menu.

	* app/gui/dialogs-constructors.c: use the new widget instead of
	plain GimpContainerViews.

	* app/gui/menus.c: added an item_factory for it.

2002-05-08  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.c (gimp_scale_entry_new)
	(gimp_table_attach_aligned): applied a patch from Maurits Rijk that
	enables mnemonics (bug #80804).

	* plug-ins/common/apply_lens.c
	* plug-ins/common/glasstile.c: applied a patch from Maurits Rijk that
	adds mnemonics (bug #80804).

	* plug-ins/common/animationplay.c
	* plug-ins/common/decompose.c
	* plug-ins/common/film.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/guillotine.c
	* plug-ins/common/winprint.c
	* plug-ins/gap/gap_lib.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_settings.c
	* plug-ins/print/gimp_main_window.c
	* plug-ins/print/print.c
	* plug-ins/print/print_gimp.h: use new function gimp_image_get_name()
	where applicable.

2002-05-07  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdb/image.pdb: added image_get_name. Also, no longer
	duplicate the string in image_get_filename, since
	gimp_image_get_filename() returns a caller freed string now.

	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpimage_pdb.[ch]: regenerated

2002-05-07  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/nav_window.[ch]: removed.

	* app/display/Makefile.am
	* app/display/display-types.h
	* app/display/gimpnavigationview.[ch]: new widget partially based
	on the removed nav_window.

	* libgimpproxy/gimpproxytypes.h: regnenerated.

	* app/display/gimpdisplay-foreach.[ch]: removed
	gdisplays_nav_preview_resized(). The new config system will allow
	us to get notified of changes.

	* app/display/gimpdisplayshell.[ch]: added "scaled" and "scrolled"
	signals.

	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-scroll.c: emit "scaled" and
	"scrolled" appropriately. Removed nav_window stuff.

	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c: changed accordingly.

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/menus.c: made the navigation dialog dockable.

	* app/gui/view-commands.c: changed the nav_dialog callback accordingly.

	* app/gui/preferences-dialog.c
	* app/gimprc.[ch]
	* app/config/gimpguiconfig.[ch]: removed "nav_window_per_display"
	as it's now a dockable and it's state is saved in sessionrc.

	* app/widgets/gimpnavigationpreview.[ch]: added context sensitive
	mouse cursors.

	* app/widgets/gimpimagedock.c: made it capable of holding
	display-related dialogs (like GimpNavigationView) by connecting
	to the context's "display_changed" signal.

	* app/widgets/widgets-types.h: removed inclusion of
	"display/display-types.h".

	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcolormapeditor.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimpitemlistitem.c
	* app/widgets/gimpitemlistview.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplayerlistview.c
	* app/widgets/gimppreview.c
	* app/widgets/gimpvectorslistview.c: warn about inclusion of
	"display/display-types.h".

2002-05-07  Sven Neumann  <sven@gimp.org>

	Moved slovenian translation to the stable branch where they should
	have been added in the first place.

	* configure.in: removed sl from LINGUAS.

	* gimp.spec.in: updated a bit, still broken.

2002-05-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.c: reverted my last change. I changed the
	function when porting everything to URIs because it was documented
	to return NULL but didn't behave so.

	We need to add a new PDB function which returns the image's
	*display* name ("Untitled" for a NULL filename).

2002-05-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.c (gimp_image_get_filename): get the image's
	uri with gimp_image_get_uri(), not gimp_object_get_name(), so it
	automatically becomes "Unnamed" if it's not set.

2002-05-07  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpintl.h: removed (wrong) definition of LOCALEDIR.

	* libgimp/stdplugins-intl.h: fixed typo in domainname that broke i18n
	of plug-ins.

	* app/gui/Makefile.am: define LOCALEDIR.

	* app/gui/plug-in-menus.c
	* app/plug-in/plug-in.h
	* app/plug-in/plug-ins.[ch]: declared translation domain and help path
	as const strings.

	* plug-ins/print/print.c
	* plug-ins/print/print_gimp.h: minor cleanups.

2002-05-07  David Monniaux  <david@picsou.chatons>

	* app/arch/i386/mmx/paint_funcs_mmx.S.m4: original source of
	paint_funcs_mmx.S, but the latter has been modified manually and
	is now out-of-sync. Deleted to reduce confusion.

	* app/arch/i386/mmx/paint_funcs_mmx.S: would not compile on my
	machine due to wrong .type directives. Fixed.
	
2002-05-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/gimp_main_window.c: use more stock labels.

2002-05-07  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: depend on libgimpprint >= 4.2.0 for the print plug-in.
	You need to --disable-print to build w/o print support.

	* plug-ins/Makefile.am: build print plug-in conditionally.
	
	* plug-ins/print/Makefile.am
	* plug-ins/print/gimp_color_window.c
	* plug-ins/print/gimp_main_window.c
	* plug-ins/print/print.c
	* plug-ins/print/print_gimp.h
	* plug-ins/print/print-image-gimp.c: the print plug-in from the
	gimpprint 4.2.1 release adapted to build inside the gimp tree and
	ported to gtk+-2.0. Not yet free of deprecated code.

	* plug-ins/print/README
	* plug-ins/print/RELNOTES
	* plug-ins/print/escputil-1.3.1.in
	* plug-ins/print/escputil.c
	* plug-ins/print/print-canon.c
	* plug-ins/print/print-dither.c
	* plug-ins/print/print-escp2.c
	* plug-ins/print/print-intl.h
	* plug-ins/print/print-pcl.c
	* plug-ins/print/print-printers.c
	* plug-ins/print/print-ps.c
	* plug-ins/print/print-util.c
	* plug-ins/print/print-weave.c
	* plug-ins/print/print.h
	* plug-ins/print/quickmatrix257.h
	* plug-ins/print/ran.367.179.h: removed.

2002-05-06  Nathan Summers  <rock@gimp.org>

	* libgimpproxy/Makefile.am: correct a cut'n'paste mistake. The build
	actual works correctly now! I should have committed this fix a long
	time ago.

2002-05-06  Sven Neumann  <sven@gimp.org>

	* autogen.sh: fixed typo.

	* app/config/gimpconfig-serialize.[ch] (gimp_config_serialize_value):
	allow to specify whether strings should be escaped.

	* app/config/gimprc.c (gimp_rc_query): don't escape string values.

	* app/config/test-config.c: changed accordingly.

2002-05-06  Nathan Summers  <rock@gimp.org>

        * plug-ins/dbbrowser/dbbrowser_utils.c: (gimp_db_browser) use a
        GtkHPaned instead of a GtkHBox to separate the list from the details.
        This little change makes the pdb browser much more usable.

2002-05-06  Nathan Summers  <rock@gimp.org>

	* tools/gimp-mkproxy: added proxy-subst command, which substitutes its
 	argument for the current line in the proxied version

2002-05-06  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.c (gimp_rc_query): free the list of properties.

2002-05-06  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-serialize.c
	* app/config/gimpconfig-utils.[ch]
	* app/config/gimpconfig.[ch]
	* app/config/gimprc.[ch]: added a GimpRc implementation of
	gimp_config_duplicate() that also copies unknown tokens. Added new
	function gimp_rc_query().

	* app/config/test-config.c: added tests for gimp_rc_query().

	* app/config/Makefile.am: need to link test app against libappwidgets.

2002-05-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimphelp.[ch]: removed...

	* app/widgets/Makefile.am
	* app/widgets/gimphelp.[ch]: ...and added here.

	* app/widgets/widgets-enums.[ch]: added GimpHelpBrowserType here
	as registered enum. Added an evil hack with GimpCursorType so
	app/config/gimpguiconfig.h can include this file.

	* app/widgets/gimpcursor.c: added an assertion because of the
	changed GimpCursorType.

	* app/config/gimpguiconfig.[ch]: added a property for the help
	browser type.

	* app/gimprc.c
	* app/libgimp_glue.c
	* app/gui/preferences-dialog.c
	* tools/pdbgen/pdb/help.pdb: changed accordingly.

	* app/pdb/help_cmds.c: regenerated.

	Some nav_window cleanup before chopping:

	* app/nav_window.[ch]: removed the old preview code and use
	GimpNavigationPreviews only. Namespaceified all functions. Speak
	in terms of GimpDisplayShell, not GimpDisplay. Lots of internal
	cleanup.

	* app/gui/gui-types.h: removed NaviagtionDialog here...

	* app/display/display-types.h: ...and added it here.

	* app/display/gimpdisplayshell-callbacks.[ch]: added a callback
	for the navigation button and call nav_window_show_popup() from there.

	* app/display/gimpdisplayshell.c: free shell->nav_dialog
	unconditionally, connect to the new callback.

	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-scroll.c
	* app/gui/view-commands.c: changed accordingly.

	* app/widgets/gimppreview.c (gimp_preview_set_viewable): the
	assertion introduced recently was too tight, breaking
	GimpNavigationPreview. Changed it to do an "is a" check, not exact
	preview type matching.

	* app/widgets/gimpimagepreview.c: added quick-hack support for
	xres != yres.

	* app/widgets/gimpnavigationpreview.[ch]: made
	gimp_navigation_preview_grab_pointer() public so the nav_window
	can call it.

	Unrelated:

	* app/display/gimpdisplay.c: removed the gui/ dependency from this
	file by removing info_window stuff.

	* app/display/gimpdisplayshell.c (gimp_display_shell_flush): update
	the info_window here.

	* app/gui/dialogs-constructors.c (dialogs_indexed_palette_new): call
	gimp_dockable_set_context() like all other constructors.

	* app/undo.c
	* app/paint/gimppaintcore.h: some more include cleanup.

2002-05-05  Sven Neumann  <sven@gimp.org>

	* NEWS: updated.
	* configure.in: fixed check for libgtkhtml-2.0.
	
2002-05-05  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped our version number to 1.3.6. Added check
	for libgtkhtml-2.0.

	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/helpbrowser/helpbrowser.c: started to port the help browser
	to GtkHtml2. Not all features are working yet.

	* plug-ins/helpbrowser/back.xpm
	* plug-ins/helpbrowser/forward.xpm: removed.

2002-05-04  Sven Neumann  <sven@gimp.org>

	* README: updated Bugs section. Mention gdkxft to avoid more
	reports about crashes caused by such lousy LD_PRELOAD hacks.
	
2002-05-04  Sven Neumann  <sven@gimp.org>

	* app/arch/i386/mmx/detect_mmx.S
	* app/arch/i386/mmx/paint_funcs_mmx.S: applied a patch from 
	iccii@hotmail.com that promises to fix build on mingw (bug #80681).

	* app/config/gimpconfig-serialize.c
	* app/config/gimpconfig-utils.[ch]: moved value compare function to
	gimpconfig-utils.

	* app/config/gimpconfig.[ch]: added duplicate and compare functions
	to GimpConfigInterface so derived interfaces can override them.

	* app/tools/gimptexttool.c: fixed tool cursor.

2002-05-03  Nick Lamb  <njl195@zepler.org.uk>

	* plug-ins/common/tiff.c: Overbright alpha bug #77283 fixed

2002-05-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/borderaverage.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/nlfilt.c
	* plug-ins/common/papertile.c
	* plug-ins/common/vpropagate.c: applied a patch from iccii@hotmail.com
        that adds missing calls to gimp_tile_cache_ntiles() to speed up the
        plug-ins considerably (bug #78358).

	* plug-ins/common/colorify.c: fix for drawables with alpha from
	iccii@hotmail.com.

2002-05-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/tools/tool-safe-mode.c: removed another warning.

2002-05-03  Michael Natterer  <mitch@gimp.org>

	* devel-docs/Makefile.am
	* devel-docs/includes.txt: new file documenting the core's
	include policy.

	* HACKING: mention it here.

	* libgimptool/gimptooltypes.h: removed GimpToolOptions here.

	* app/core/core-types.h: and added it here. This is a temp hack
	needed because GimpToolInfo needs to know the GimpToolOptions
	type.

	* libgimpproxy/gimpproxytypes.h: regenerated.

	* libgimptool/gimptoolmodule.h: don't include gimptooltypes.h here...
	* libgimptool/gimptoolmodule.c: ...but here.

	* app/config/gimpconfig-params.c: include "libgimpbase/gimpbase.h"
	entirely, not single files from it.

	* app/core/gimp.c
	* app/core/gimpcontext.c
	* app/core/gimpcoreconfig.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdocuments.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpdrawable-offset.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-guides.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-projection.c
	* app/core/gimpimage-qmask.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage.c
	* app/core/gimpitem.c
	* app/core/gimpmodules.c
	* app/core/gimppaintinfo.c
	* app/core/gimpparasite.c
	* app/core/gimppreviewcache.c
	* app/core/gimptoolinfo.c
	* app/core/gimpunit.c: include "core-types.h" and no other types file.

	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell.c: include "tools/tools-types.h"
	instead of "libgimptool/gimptooltypes.h", warn about inclusion
	on "gui/gui-types.h"

	* app/file/file-open.c
	* app/file/file-save.c: don't include "libgimptool/gimptooltypes.h".

	* app/gui/about-dialog.c
	* app/gui/brush-select.c
	* app/gui/brushes-commands.c
	* app/gui/color-select.c
	* app/gui/data-commands.c
	* app/gui/device-status-dialog.c
	* app/gui/dialogs.c
	* app/gui/gradients-commands.c
	* app/gui/help-commands.c
	* app/gui/info-window.c
	* app/gui/palettes-commands.c
	* app/gui/patterns-commands.c
	* app/gui/resize-dialog.c
	* app/gui/tips-dialog.c
	* app/gui/tool-options-dialog.c: include "gui-types.h" and no
	other types file.

	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppaintcore-stroke.c
	* app/paint/gimppaintcore.c
	* app/paint/gimppaintoptions.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c
	* app/paint/paint.c: include "paint-types.h" and no other types file.

	* app/pdb/pdb-types.h: don't include "libgimptool/gimptooltypes.h".

	* app/plug-in/plug-in-progress.c: warn about inclusion of
	"display/display-types.h"

	* app/tools/tools-types.h: include "libgimptool/gimptooltypes.h".

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptoolcontrol.c
	* app/tools/gimptoolcontrol.h
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c
	* app/tools/tools.c: include "tools-types.h" and no other types file,
	warn about inclusion of "gui/gui-types.h".

	* app/widgets/gimpcolorpanel.c
	* app/widgets/gimptoolbox-color-area.c: warn about inclusion of
	"gui/gui-types.h".

	* app/xcf/xcf-load.c
	* app/xcf/xcf.c: don't include "libgimptool/gimptooltypes.h".

	Split tool-safe-mode up in two files, one including libgimpproxy,
	one libgimp.
	
	* plug-ins/tools/Makefile.am
	* plug-ins/tools/tool-safe-mode-plug-in.[ch]: new files including
	libgimp/ stuff only.

	* plug-ins/tools/tool-safe-mode.[ch]: include libgimpproxy/ and
	libgimptool/ but don't include libgimp/ because of conflicting
	declarations.

	Unrelated:

	* app/tools/gimpclonetool.c: create the clone core so we don't crash.

	* app/gui/file-open-dialog.c: changed the way we create previews
	so that only out-of-date previews are created on a click in the
	preview area. Unconditional creation can still be forced by
	<Ctrl>+click. Changed the tooltip to document this.

2002-05-03  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpairbrushtool.[ch]
	* app/tools/gimpbezierselecttool.[ch]
	* app/tools/gimpblendtool.[ch]
	* app/tools/gimpbrightnesscontrasttool.[ch]
	* app/tools/gimpbucketfilltool[.ch]
	* app/tools/gimpbycolorselecttool[.ch]
	* app/tools/gimpclonetool[.ch]
	* app/tools/gimpcolorbalancetool[.ch]
	* app/tools/gimpcolorpickertool[.ch]
	* app/tools/gimpconvolvetool[.ch]
	* app/tools/gimpcroptool[.ch]
	* app/tools/gimpcurvestool[.ch]
	* app/tools/gimpdodgeburntool[.ch]
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool[.ch]
	* app/tools/gimperasertool[.ch]
	* app/tools/gimpfliptool[.ch]
	* app/tools/gimpfreeselecttool[.ch]
	* app/tools/gimpfuzzyselecttool[.ch]
	* app/tools/gimphistogramtool[.ch]
	* app/tools/gimphuesaturationtool[.ch]
	* app/tools/gimpinktool[.ch]
	* app/tools/gimpiscissorstool[.ch]
	* app/tools/gimplevelstool[.ch]
	* app/tools/gimpmagnifytool[.ch]
	* app/tools/gimpmeasuretool[.ch]
	* app/tools/gimpmovetool[.ch]
	* app/tools/gimppaintbrushtool[.ch]
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool[.ch]
	* app/tools/gimppenciltool[.ch]
	* app/tools/gimpperspectivetool[.ch]
	* app/tools/gimpposterizetool[.ch]
	* app/tools/gimprectselecttool[.ch]
	* app/tools/gimprotatetool[.ch]
	* app/tools/gimpscaletool[.ch]
	* app/tools/gimpselectiontool.c
	* app/tools/gimpsheartool[.ch]
	* app/tools/gimpsmudgetool[.ch]
	* app/tools/gimptexttool[.ch]
	* app/tools/gimpthresholdtool[.ch]
	* app/tools/gimptool.c
	* app/tools/gimptoolcontrol.h
	* app/tools/gimptoolmodule[.ch]
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool[.ch]
	* app/tools/path_tool.c
	* app/tools/tool_manager[.ch]
	* app/tools/tools.c
	* libgimptool/gimptool.c
	* libgimptool/gimptoolcontrol.h
	* libgimptool/gimptoolmodule.h: removed tons of warnings. Do we need
	to add -Werror to the CFLAGS to avoid such a mess in the future ?!
	Also had to enforce the GIMP coding style in lots of places :-(

	* libgimp/gimppixelrgn.c: got sick and tired of debugging plug-ins,
	so I've added checks for most parameters passed to the GimpPixelRgn
	functions. This will slow down plug-in execution a little bit but
	should help to find bugs early.

2002-05-02  Nathan Summers  <rock@gimp.org>
        
	* app/core/core-types.h
	* libgimptool/gimptooltypes.h: moved GimpToolInfo back into the core.

	* libgimptool/gimptoolcontrol.h
	* app/tools/gimptoolcontrol.c: got rid of gimp_tool_control_new

	* libgimptool/gimptool.c (gimp_tool_init): create the GimpToolControl
        here instead of in the descendant classes

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppathtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpvectortool.c
	* plug-ins/tools/tool-safe-mode.c: changed accordingly

	* libgimpproxy/gimpproxytypes.h: autogenerated

2002-05-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_save_thumbnail): fixed
	typo.

	* plug-ins/rcm/rcm_misc.c (rcm_reduce_image): merged fix for bug
	#80561 from stable branch.

2002-05-02  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-console.c: fixed communication
	with the SIOD interpreter:

	- set the GError variable to NULL before using it.
	- set the GIOChannel used to read SIOD's output to binary mode.

2002-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.[ch]: added some assertions, cleaned up
	internals.

	* app/widgets/gimpdocumentview.c: use the preview size instead of a
	hardcoded thumbnail size. Should we use the prefs value instead?

2002-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c: adapt the thumbnail size to the image size
	so that thumbs of small images don't end up in the "large" directory.

2002-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.[ch]: accept any size so we don't depend on
	the values of GimpThumbnailSize. We might want to allow other thumbnail
	sizes than only 0, 128 or 256.

2002-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: added new enum GimpThumbnailSize.

	* app/gimprc.c
	* app/config/gimpcoreconfig.[ch]
	* app/core/gimpcoreconfig.[ch]: replaced old gimprc value
	write_thumbnails with thumbnail_size.

	* app/core/gimpimagefile.[ch]: allow to specify a thumbnail size.

	* app/core/gimpdocuments.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/gui/preferences-dialog.c
	* app/widgets/gimpdocumentview.c: changed accordingly.

	* app/gui/file-open-dialog.c: create the preview according to the
	users choice of thumbnail size. Doesn't update on changes yet.

2002-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.[ch]: save empty thumbnails to
	~/.thumbnails/fail/gimp-1.3 if we cannot create a thumbnail. Added
	new state GIMP_IMAGEFILE_STATE_THUMBNAIL_EXISTS to indicate that a
	thumbnail was found but is not yet loaded. Removed unused thumb_mtime
	from GimpImagefile struct and simplified some parts of the code.

	* app/gui/file-open-dialog.c: cosmetic changes.

2002-04-29  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpviewable.[ch]: added "gchar *name_changed_signal"
	to GimpViewableClass which defaults to "name_changed".

	* app/widgets/gimplistitem.c
	* app/widgets/gimpmenuitem.c: connect to
	viewable_class->name_changed_signal instead of just
	"name_changed". Fixed possible UI inconsistency where the previous
	viewable's tooltip would have been displayed.

	* app/core/gimpimagefile.[ch]: set name_changed_signal to
	"info_changed" so views can update their tooltips correctly.
	Merged the separate image_state and thumb_state states into one
	state variable and extended the state enum. Added description
	strings for all states. Show the file size for all files, not only
	for those with a thumbnail. Enabled display of outdated
	thumbnails.

	* app/gui/file-open-dialog.c: some changes because
	gimp_imagefile_get_description() returns 3 instead of 2 lines of
	text now.

	* app/widgets/gimpcontainerview-utils.c: show the imagefile's
	description in the tooltip.

	* app/gui/menus.c
	* app/gui/documents-commands.[ch]
	* app/widgets/gimpdocumentview.c: added functions to remove
	"dangling" document history entries. Updated the context menu so
	all functions can be accessed through it.

2002-04-28  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/tools/transform_options.c: in preparation of a more generic tool
	options framework: use the options value, not the default value when
	setting up the tool options UI. Doesn't make any difference since both
	are initialized to the same value, but reduces usage of the ugly foo_d
	variables.

	* app/tools/gimpmagnifytool.c: don't change the resize_windows_on_zoom
	gimprc value in response to changes in the tool options. Only use it
	as default value when resetting the tool options.

2002-04-28  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c (gimp_image_convert): invalidate layer
	previews so we don't crash when an image preview is generated after
	converting the image from RGB to GRAY.

	* app/core/gimpimage.c (gimp_image_get_new_preview): added some
	assertions to make it easier to find similar problems in the future.

2002-04-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig.c 
	* plug-ins/imagemap/imap_preview.c: don't use GDK_MOTION_NOTIFY as an 
	event mask.

2002-04-23  Nathan Summers  <rock@gimp.org>

	* libgimptool/gimptoolmodule.[ch]: More error checking. Also introduced
	a versioning scheme. Increment GIMP_TOOL_MODULE_ABI_VERSION any time
	you break binary compatiblity.
        
	* plug-ins/tools/tool-safe-mode.c: call g_type_init().

2002-04-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c: display the tools' shortcuts in the
	tool buttons' tooltips (fixes #60273).

2002-04-21  Nathan Summers  <rock@gimp.org>

	* app/tools/gimptoolcontrol.[ch]
	* libgimptool/gimptool.c: resurrected the motion hints and cursor
 	changing code.

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c: set the motion mode; fix a few parameters

	* app/tools/gimpinktool.c (gimp_ink_tool_button_press): uncommented
 	some code I had temporarily commented out and didn't uncomment before
 	committing

	* libgimptool/gimptoolcontrol.h
	* app/tools/gimptoolcontrol-displayshell.[ch]: merged with
 	gimptoolcontrol.[ch].  The distinction was fairly arbitrary.

	* plug-ins/tools/gimptoolcontrol.c: added some stubs

	* app/tools/Makefile.am
	* app/tools/tool_manager.c
	* app/display/gimpdisplayshell-callbacks.c: changed accordingly

	* tools/pdbgen/pdb/image.pdb
	* libgimp/gimpimage_pdb.c: applied a patch from Pippen to correct
 	documentation on the undo operations
 	
2002-04-19  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimagefile.[ch]: made gimp_imagefile_save_thumbnail()
	return a gboolean indicating success.

	* app/file/file-save.c
	* tools/pdbgen/pdb/fileops.pdb: use gimp_imagefile_save_thumbnail()
	to save thumbnails.

	* app/file/file-utils.[ch]: removed the .xvpics thumbnail saving code.

	* app/pdb/fileops_cmds.c: regenerated.

2002-04-19  Michael Natterer  <mitch@gimp.org>

	* app/file/file-open.[ch]: all functions return the opened image
	and the pdb status plus a GError now. Removed all g_message()
	calls from file_open_image(). Instead, display all error messages
	in file_open_with_proc_and_display() if it got no error return
	location passed.

	* app/app_procs.c
	* app/core/gimpimagefile.c
	* app/gui/file-commands.c
	* app/gui/file-open-dialog.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdocumentview.c: changed accordingly.

	* app/gui/file-open-dialog.c: only treat the "entered_filename" as
	URI if it contains "://".

2002-04-19  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdocuments.[ch] (gimp_documents_add): speak in terms
	of "uri", not "filename". Return the created imagefile.

	* app/core/gimpimagefile.[ch]: factored out private function
	gimp_imagefile_save_png_thumb() and call it from
	gimp_imagefile_create_thumbnail().
	Added public function gimp_imagefile_save_thumbnail() which takes
	an imagefile and an image.

	* app/file/file-open.c: create thumbnails for all images opened
	interactively using gimp_imagefile_save_thumbnail().

	* app/xcf/xcf-load.c (xcf_load_image): set the filename with
	gimp_image_set_filename() so it gets converted to an URI as for
	external plug-ins.

2002-04-18  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimagefile.c: oops, thumbnails were created in the
	wrong directory since my last commit.

2002-04-18  Michael Natterer  <mitch@gimp.org>

	* app/gui/file-open-dialog.c: added a progress bar to the preview
	frame to show the progress when creating many previews. Also added
	some more ugly static variables...

2002-04-18  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimagefile.[ch]: create the thumbnail subdir strings
	only once in class_init, minor stuff.

	* app/widgets/gimppreview.c: set widget_class->activate_signal to
	the preview's "clicked" id so we can create mnemonics for it.

	* app/gui/file-open-dialog.c: make the whole preview area clickable,
	block some signals of the "Preview" button so it behaves like
	the tree view headers.

2002-04-18  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimagefile.[ch]: save the number of layers in the
	thumbnail and show it in the description.

	* app/gui/file-dialog-utils.[ch]: added file_dialog_new() which
	contains a lot of factored out code from file-open and file-save.

	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c: use file_dialog_new(), reduce use of
	global variables, added utility functions to reduce code
	duplication, cleanup.

	* app/gui/file-open-dialog.c: use a temporary imagefile to create
	previews so the dialog's preview can show the progress when
	creating many thumbnails.

2002-04-17  Michael Natterer  <mitch@gimp.org>

	* app/file/file-save.c: shouldn't free the filename before using it :)

	* app/core/gimpimagefile.c: emit the "info_changed" signal more
	often, assemble the description string differently.

	* app/gui/file-open-dialog.c: moved the preview into a frame right
	of the file selection box, lots of gui and other cleanup...

2002-04-17  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.[ch]
	* app/gui/file-open-dialog.c: moved code to generate a literate
	description of the image to the GimpImagefile object.

2002-04-17  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch]: register GimpImageType.

	* app/core/gimpimagefile.[ch]: read and write more image properties
	in thumbnails.

	* app/gui/file-open-dialog.c: changed accordingly.

	* app/widgets/gimpdialogfactory.c: disabled debugging output.

	* app/widgets/gimpdocumentview.c: changed the "Refresh" button to
	regenerate the preview on click and reload all previews on
	shift+click.

	* tools/pdbgen/enums.pl: regenerated.

2002-04-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_png_thumb_path): create
	the thumbnail directories if they don't exist.
	(gimp_imagefile_png_thumb_name): reimplemented w/o snprintf().

	* app/pdb/color_cmds.c
	* tools/pdbgen/pdb/color.pdb: merged fix for bug #78877 from stable
	branch.

2002-04-16  Michael Natterer  <mitch@gimp.org>

	* app/base/temp-buf.c: fixed temp_buf_copy() and
	temp_buf_to_[color|gray]() to (1) not crash and (2) to assume the
	correct pixelformat. Bugs were never noticed because the code was
	never used until today...

	* app/core/gimpviewable.c (gimp_viewable_get_new_preview_pixbuf):
	use temp_buf_copy() to convert GRAY* TempBufs to RGB* before
	creating the pixbuf.

	* app/app_procs.c: don't try to open command line images if the
	filename could not be converted to an URI.

	* app/file/file-open.c
	* app/file/file-save.c: use g_file_test() instead of stat().

	* app/file/file-utils.[ch]: cleanup, changed
	file_utils_filename_to_uri() to take a list of procs, not a Gimp
	pointer.

	* app/core/gimpimage.c: changed accordingly.

	* app/core/gimpimagefile.[ch]: implemented thumbnail saving
	following the thumbnail standard v0.5 (the implementation is not
	yet fully standard compliant).

	* app/gui/file-open-dialog.c: use the new thubmnail functions and
	removed all .xvpics code. Not finished yet...

	* app/core/gimpdocuments.c
	* app/widgets/gimpdocumentview.c: changed accordingly.

	* tools/pdbgen/pdb/fileops.pdb (file_save_thumbnail): set "success"
	correctly.

	* app/pdb/fileops_cmds.c: regenerated.

2002-04-16  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppreview.c (gimp_preview_expose_event): don't draw
	anything if an idle update is pending.

	* libgimpwidgets/gimpcolorarea.c (gimp_color_area_expose): reordered
	conditions so that the one that is most expensive to check comes last.

2002-04-15  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-serialize.c: serialize doubles and floats
	using the locale independent g_ascii_formatd().

2002-04-14  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpunits.c: serialize the unit factor with
	g_ascii_formatd() so it is locale independent.

2002-04-14  Michael Natterer  <mitch@gimp.org>

	* app/file/file-utils.[ch]: added utility functions
	file_utils_uri_to_utf8_basename() and
	file_utils_uri_to_utf8_filename().

	* app/nav_window.c
	* app/undo_history.c
	* app/display/gimpdisplayshell.c
	* app/gui/info-window.c
	* app/gui/menus.c
	* app/gui/palette-import-dialog.c
	* app/tools/gimpbycolorselecttool.c
	* app/widgets/gimpcontainerview-utils.c: use the new functions.

2002-04-14  Michael Natterer  <mitch@gimp.org>

	Use UTF-8 encoded escaped URIs for GimpImage and GimpImageFile.

	* app/file/file-open.[ch]
	* app/file/file-save.[ch]
	* app/file/file-utils.[ch]: port everything to using URIs, removed
	file_open_absolute_filename() and added file_utils_filename_to_uri()
	instead.

	* app/core/gimpimage.[ch]: added gimp_image_[get|set]_uri() which
	works like the old gimp_image_[get|set]_filename().
	Changed gimp_image_[get|set]_filename() to call uri conversion
	functions.

	* app/app_procs.c: removed lots of code and use the new uri
	functions to open images passed on the command line.

	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c: changed accordingly.

	* app/nav_window.c
	* app/undo_history.c
	* app/display/gimpdisplayshell.c
	* app/gui/info-window.c
	* app/gui/palette-import-dialog.c
	* app/tools/gimpbycolorselecttool.c
	* app/widgets/gimpcontainerview-utils.c: 
	s/gimp_image_get_filename()/gimp_image_get_uri()/g. Need to add
	a utility function which returns the basename in unescaped UTF-8.

	* app/gui/file-commands.c
	* app/widgets/gimpdocumentview.c: use "uri", not "filename" as
	variable name where appropriate.

	* app/gui/menus.c: some broken code for the "Open Recent" items,
	will be fixed soon...

	* app/widgets/gimpdnd.c: evil (!!!) hackery to convert dropped
	filenames to uris.

	* tools/pdbgen/pdb/fileops.pdb: changed accordingly. Clarified
	the meaning of the "raw_filename" parameter.

	* tools/pdbgen/pdb/message.pdb: use g_message("%s", message),
	*not* g_message(message).

	* app/pdb/fileops_cmds.c
	* app/pdb/message_cmds.c
	* libgimp/gimpfileops_pdb.c: regenerated.

2002-04-14  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.c: removed some #if 0'ed stuff.

	* app/gui/edit-commands.c (edit_copy_cmd_callback): call
	gdisplays_flush() so the menus are updated correctly.

	* app/widgets/gimpitemfactory.c (gimp_item_factory_set_color):
	pack the original menu item label with TRUE, TRUE into the created
	hbox so it's accel. label is visible.

2002-04-12  Michael Natterer  <mitch@gimp.org>

	Well, sometimes the most obvious solution is not the first one...

	* app/gimphelp.[ch]: removed _gimp_standard_help_func().

	* app/libgimp_glue.c (gimp_standard_help_func): call gimp_help()
	directly.

2002-04-12  Michael Natterer  <mitch@gimp.org>

	* app/gimphelp.[ch]: removed usage of "the_gimp" by passing around
	more "Gimp" pointers. Renamed gimp_standard_help_func() to
	_gimp_standard_help_func() and declare it in the header.  Don't
	include "app_procs.h".

	* app/libgimp_glue.[ch]: added gimp_standard_help_func() here.
	Call _gimp_standard_help_func (the_gimp, ...) like all other
	wrappers in this file do. I know this is ugly but better let's
	have all uglyness in one place (here) :-)

	* app/widgets/gimpitemfactory.[ch]: added a "Gimp" member to the
	GimpItemFactory struct. Pass it to gimp_help(),

	* app/gui/menus.c: pass a Gimp to gimp_item_factory_new(), removed
	useless inclusion of "gimphelp.h".

	* tools/pdbgen/pdb/help.pdb: pass a Gimp to gimp_help()

	* app/pdb/help_cmds.c: regenerated.

	* app/gui/tips-dialog.c: removed gtk_quit_add_destroy() here too
	because the tips dialog is created by a dialog factory which takes
	care of dialog destruction.

2002-04-12  Sven Neumann  <sven@gimp.org>

	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c: merged fix for bug #51781 from stable
	branch: don't gtk_quit_add_destroy() the fileload and filesave widgets.

2002-04-12  Sven Neumann  <sven@gimp.org>

	* data/misc/Makefile.am: fixed uninstall target (bug #78536).

2002-04-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gtm.c
	* plug-ins/common/illusion.c
	* plug-ins/common/ps.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/wind.c
	* plug-ins/maze/maze_face.c
	* plug-ins/sel2path/sel2path.c
	* plug-ins/sel2path/sel2path_adv_dialog.c: applied a patch from 
	<iccii@hotmail.com> that adds calls to gimp_help_free() even though I 
	think that omitting gimp_help_free() is tolerable lazyness (#76984).

2002-04-12  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-crop.c: reordered some lines, no logic
	changed.

	* app/core/gimplayer.[ch]: made gimp_layer_pick_correlate()
	return a gboolean, not gint.

	* app/display/gimpdisplayshell.c
	* app/gui/layers-commands.[ch]
	* app/gui/menus.c: added "<Image>/Layers/Crop Layer" which resizes
	the active layer to the current selection's bounds, just as
	"<Image>/Image/Crop Image"

2002-04-12  Zbigniew Chyla  <cyba@gnome.pl>

	* app/gui/dialogs-constructors.c: Marked some strings for translation.

2002-04-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/ps.c: merged fix for bug #75667 from stable branch.
	
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/rcm/rcm_misc.c: merged fix for bug #67018 from stable
	branch.
	
	* themes/Default/gtkrc: removed settings for tooltips color since
	GTK+-2.0 sets a reasonable default. Added a line to allow to change
	menu accelerators.

2002-04-10  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/url.c: merges from gimp-1-2 branch

2002-04-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.c: include libart.h instead of a selection
	of libart headers.

2002-04-03  Manish Singh  <yosh@gimp.org>

	* app/core/gimpobject.c: use gobject marshaller names directly so
	libgimpproxy doesn't need gimpmarshal.* around

2002-04-03  Manish Singh  <yosh@gimp.org>

	* plug-ins/tools/Makefile.am
	* plug-ins/tools/common/Makefile.am: make it work with automake 1.5

2002-04-01  Nathan Summers  <rock@gimp.org>

	* pretty much all files: One year of motif hacking has made me agree
	with Miguel that .NET is the way of the future.  Ported all code to C#.
	Works great on Mono!

	Still doesn't support CMYK.

2002-03-29  Nathan Summers  <rock@gimp.org>

	* plug-ins/tools/tool-safe-mode.c: fix a segfault

2002-03-30  Tor Lillqvist  <tml@iki.fi>

	* libgimpbase/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am: Additions for Win32: Use
	-no-undefined. Use the .def file. Produce MS style import
	library if possible. Install (and uninstall) import
	libraries.

	* libgimpbase/Makefile.am: Pass definition of PREFIX in CPPFLAGS.

	* libgimpbase/gimpbase.def: Do export gimp_signal_private.

	* libgimpbase/gimpenv.c: Similar Win32 working as in the gimp-1-2
	branch:
	(gimp_directory): Replace funny chars in user name (when used as
	part of last-resort personal gimp directory name) with
	underscores.
	(gimp_toplevel_directory): New (Win32-only) function. Deduces the
	installation prefix at run-time.
	(gimp_path_runtime_fix): New function. On Win32, replace the
	string with one where the compile-time prefix has been replaced
	with the run-time one.
	(gimp_path_parse, gimp_env_get_dir): Call it.
	
	* libgimpbase/gimpsignal.c: Trim (lots of) trailing spaces in
	copyright notice.
	(gimp_signal_private): Bypass on Win32, return NULL. Or should we
	call g_error(), thus requiring that calls of this are enclosed with
	#ifdef G_OS_UNIX?

	* libgimpbase/makefile.mingw.in
	* libgimpcolor/makefile.mingw.in
	* libgimpmath/makefile.mingw.in: Add comment that it is seriously
	out-of-date.

	* libgimpbase/makefile.msc: Do compile gimpsignal.c.

2002-03-29  Tor Lillqvist  <tml@iki.fi>

	* configure.in: Start of changes for autoconfiscated build on
	Win32. Mostly similar to how it is done in the gimp-1-2 branch:

	Set LT_CURRENT_MINUS_AGE to $LT_CURRENT - $LT_AGE, this is used by
	libtool in DLL names, we need it for the *.rc.in files in case we
	want to have version resources in DLLs (these include the original
	filename). AC_SUBST it.

	Call AC_LIBTOOL_WIN32_DLL.

	Test for Win32 platform and native Win32, set automake
	conditionals PLATFORM_WIN32 and OS_WIN32. Set PATHSEP to ';' or
	':', AC_SUBST it.

	If on Win32, test for lib.exe availability (to build MS import
	libraries), set automake conditional MS_LIB_AVAILABLE.

	Include GLIB_LIBS when checking for bind_textdomain_codeset, in
	case using a separate -lintl.

	Don't try to link with -lX11 when looking for libXpm unless the
	GDK backend is x11. On Win32 we use the "no-X" version of libXpm.

2002-03-28  Nathan Summers  <rock@gimp.org>

	* libgimptool
	* libgimptool/.cvsignore
	* libgimptool/Makefile.am: a library that contains tool code shared 
	between the core and plugins

	* app/tools/gimptool.h: Removed here ...
	
	* libgimptool/gimptool.h: ... and added here

	* libgimptool/gimptooltypes.h: various types used by the tools.
	GIMP_CHANNEL_OP_FOO must be declared before this file is included.
	
	* libgimptool/gimptool.c: parts of the implementation of the GimpTool
	class that are not specific to the core
	
	* libgimptool/gimptoolcontrol.h: new class that contains the state
	and control information of the tool. Only the .h file is here because
	the plug-in code is completely different from the core code.
	
	* libgimptool/gimptoolmodule.[ch]: the GTypePlugin that loads the tool
	plugin modules.  The registration code is not included here and must
	be supplied by the core or plug-in. Because registration in the core
	requires a Gimp object, but pluginspace has no Gimp (nor should it)
	the registration functions have been changed to take a void pointer.
	
	* app/tools/tools-enums.h: Removed here ...
	
	* libgimptool/gimptoolenums.h: ... and added here


	* tools/gimp-mkproxy: a perl script that aids in the creation and 
	maintainance of proxy objects by parsing c files and including relevant
	parts

	* libgimpproxy
	* libgimpproxy/.cvsignore
	* libgimpproxy/.Makefile.am: a library that contains proxy objects
	necessary for tool plug-ins.
	
	* libgimpproxy/gimpproxytypes.h: declarations of various types needed
	by tool plug-ins.
	
	
	* app/core/core-enums.h
	* app/core/core-types.h
	* app/display/display-types.h 
	* app/widgets/widgets-enums.h: export types to libgimpproxy 
	
	* app/tools/tools-types.h: now just contains core-specific types
	
	* app/tools/gimptool.c
	* app/tools/gimptoolmodule.c
	* app/tools/gimptoolcontrol.[ch]: parts that are core-specific
	
	* app/tools/gimptoolcontrol-displayshell.[ch]: a special interface
	just for displayshell
	
	
	* plug-ins/tools/gimptool.c
	* plug-ins/tools/gimptoolcontrol.[ch]: parts that are 
	pluginspace-specific


	* plug-ins/tools/tool-safe-mode.[ch]: pluginspace tool loader
	

	* Makefile.am
	* configure.in
	* app/Makefile.am
	* app/gimprc.c
	* app/undo.c
	* app/core/gimp.c
	* app/core/gimpcontext.c
	* app/core/gimpcoreconfig.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdocuments.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpdrawable-offset.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-guides.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-projection.c
	* app/core/gimpimage-qmask.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage.c
	* app/core/gimpitem.c
	* app/core/gimpmodules.c
	* app/core/gimppaintinfo.c
	* app/core/gimpparasite.c
	* app/core/gimptoolinfo.c
	* app/core/gimpunit.c
	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppaintcore-stroke.c
	* app/paint/gimppaintcore.c
	* app/paint/gimppaintoptions.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c
	* app/paint/paint.c
	* app/pdb/pdb-types.h
	* app/tools/Makefile.am
	* app/tools/gimpairbrushtool.[ch]
	* app/tools/gimpbezierselecttool.[ch]
	* app/tools/gimpblendtool.[ch]
	* app/tools/gimpbrightnesscontrasttool.[ch]
	* app/tools/gimpbucketfilltool.[ch]
	* app/tools/gimpbycolorselecttool.[ch]
	* app/tools/gimpclonetool.[ch]
	* app/tools/gimpcolorbalancetool.[ch]
	* app/tools/gimpcolorpickertool.[ch]
	* app/tools/gimpconvolvetool.[ch]
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpcurvestool.[ch]
	* app/tools/gimpdodgeburntool.[ch]
	* app/tools/gimpdrawtool.[ch]
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.[ch]
	* app/tools/gimpfliptool.[ch]
	* app/tools/gimpfreeselecttool.[ch]
	* app/tools/gimpfuzzyselecttool.[ch]
	* app/tools/gimphistogramtool.[ch]
	* app/tools/gimphuesaturationtool.[ch]
	* app/tools/gimpimagemaptool.[ch]
	* app/tools/gimpinktool.[ch]
	* app/tools/gimpiscissorstool.[ch]
	* app/tools/gimplevelstool.[ch]
	* app/tools/gimpmagnifytool.[ch]
	* app/tools/gimpmeasuretool.[ch]
	* app/tools/gimpmovetool.[ch]
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppainttool.[ch]
	* app/tools/gimppathtool.[ch]
	* app/tools/gimppenciltool.[ch]
	* app/tools/gimpperspectivetool.[ch]
	* app/tools/gimpposterizetool.[ch]
	* app/tools/gimprectselecttool.[ch]
	* app/tools/gimprotatetool.[ch]
	* app/tools/gimpscaletool.[ch]
	* app/tools/gimpselectiontool.c
	* app/tools/gimpsheartool.[ch]
	* app/tools/gimpsmudgetool.[ch]
	* app/tools/gimptexttool.[ch]
	* app/tools/gimpthresholdtool.[ch]
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.[ch]
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/tools/tool_manager.c
	* app/tools/tool_manager.h
	* app/tools/tools.c
	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/gui/convert-dialog.c
	* app/gui/info-window.c
	* app/gui/tools-commands.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf.c
	* plug-ins/tools/.cvsignore
	* plug-ins/tools/Makefile.am
	* plug-ins/tools/common/Makefile.am
	* tools/pdbgen/Makefile.am: changed accordingly


	* libgimptool/gimptoolenums.c
	* libgimpproxy/gimpchannel.h
	* libgimpproxy/gimpobject.[ch]: autogenerated

2002-03-28  Sven Neumann  <sven@gimp.org>

	* Made 1.3.5 release.

2002-03-28  Sven Neumann  <sven@gimp.org>

	* Makefile.am (EXTRA_DIST): removed po-script-fu/script-fu-xgettext.
	* NEWS: updated.

2001-03-28  Manish Singh  <yosh@gimp.org>

	* app/gui/user-install-dialog.c: Treeviewized

2001-03-28  Hans Breuer  <hans@breuer.org>

	* config.h.win32 : #define GETTEXT_PACKAGE

	* makefile.msc : add theme rule

	* app/makefile.msc : gimp.exe depends on all the libs
	and general update

	* app/base/makefile.msc : updated

	* app/config/gimpconfig-serialize.c : #include <io.h> for win32
	* app/config/gimpconfig-types.c : #include <string.h>

	* app/core/gimpcontext.c app/core/gimpcontainer.c
	  app/core/gimptoolinfo.c : #include <string.h>
 
	* app/core/gimpdocuments.c (gimp_documents_save_func) :
	need to g_strescape() the filename to not make 
	backslashes vanish during de-serialization

	* app/core/gimpimagefile.c : #define S_ISREG for G_OS_WIN32

	* app/core/makefile.msc : add -DGIMP_COMPILATION
	required for cpercep.c build

	* app/display/gimpdisplayshell.c : #include <string.h>

	* app/display/makefile.msc : -FImsvc_recommended_pragmas.h,
	G_LOG_DOMAIN definition and object file update

	* app/file/makefile.msc : -FImsvc_recommended_pragmas.h,
	G_LOG_DOMAIN definition

	* app/file/file-open.c (file_open_with_proc_and_display) :
	use absolute filename for gimp_documents_add()

	* app/gui/channel-commands.c app/gui/colormap-editor-commands.c
	  app/gui/edit-commands.c app/gui/vectors-commands.c : 
	#include <string.h>

	* app/gui/makefile.msc : updated

	* app/gui/menus.c : use g_file_test() instead of access()
	to avoid inclusion <unistd.h>

	* app/paint/makefile.msc : updated

	* app/plug-in/plug-in-params.c : #include <string.h>

	* app/plug-in/makefile.msc : updated

	* app/plug-in/plug-in-def.h : #include <time.h> for time_t

	* app/plug-in/plug-in.c : remove definition of S_IFREG

	* app/plug-in/gap/gap_arr_dialog.c : include <config.h>
	before including libgimp/libgimp-intl.h

	* app/tools/makefile.msc : updated

	* app/vectors/makefile.msc : new file

	* app/widgets/makefile.msc : updated

	* libgimp/gimp.def : updated externals

	* libgimpwidgets/gimpwidgets.def : updated externals

	* modules/makefile.msc : updated and disabled colorsel_gtk.

	* plug-in/makefile.msc : don't define GETTEXT_PACKAGE

	* themes/Default/images/makefile.msc : moved makefile.msc from ..
	and adapted pathes to images

2002-03-28  Michael Natterer  <mitch@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpscanner.[ch]: new files containing a convenience
	constructor for GScanner and some parse utility functions, mostly
	cut out of app/plug-in/plug-in-rc.c

	* app/plug-in/plug-in-rc.c: removed the stuff here, added scopes
	to the scanner symbols.

	* app/core/Makefile.am
	* app/core/gimpunits.[ch]: moved the user_unit list handling and
	unitrc stuff to this file. Parse unitrc here, using the new
	utility functions instead of using gimprc.

	* app/core/gimpunit.[ch]: removed here.

	* app/core/gimpdocuments.c: same here: added a scanner for the
	document history instead of using gimprc.

	* app/gimprc.c: removed unitrc and document history parsing stuff
	along with some old unused cruft.

	* app/app_procs.c
	* app/core/gimp.c
	* app/gui/user-install-dialog.c: #include "core/gimpunits.h".

	* app/core/gimpdrawable-bucket-fill.c: don't include "gimprc.h".

2002-03-27  Sven Neumann  <sven@gimp.org>

	* autogen.sh: bail out if one of the required tools is not found
	before proceeding to the version checks.

2002-03-26  Sven Neumann  <sven@gimp.org>

	* tools/gimp-mkenums: merged glib-mkenums changes (#74431).

2002-03-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox.c: use gtk_widget_add_events() instead
	of gtk_widget_set_events().

2002-03-23  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.[ch]
	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimpconfig.[ch]
	* app/config/gimprc.[ch]
	* app/config/test-config.c: added better error reporting using GError.

2002-03-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/gimppreview-utils.[ch]: new file containing
	gimp_preview_type_from_viewable() so we don't need to include
	*all* vieable and preview subclasses in gimppreview.c

	* app/widgets/gimppreview.c: gimp_preview_set_viewable: never
	unset the drag source if the viewable is set to NULL (fixes dock
	tabs, thanks to sjburges), also check the passed viewable's type.

	* themes/Default/gtkrc: set the paned handle_size to 6 pixels, so
	it has the same size as the dock_separator.

	* etc/gtkrc_user: set both to 5 here, also fiddle around with
	the global focus padding and the GtkOptionMenu indicator.

2002-03-22  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-ins.c
	* app/tools/tool_manager.c
	* app/widgets/gimppreview.c
	* app/widgets/gimptoolinfopreview.c: plugged a couple of mem leaks
	found using valgrind.

	* libgimpwidgets/gimpcolorarea.c (gimp_color_area_expose): don't draw
	anything if an idle update is pending.
	
2002-03-22  Sven Neumann  <sven@gimp.org>

	* app/appenv.h: moved use_shm declaration here, added use_mmx.
	
	* app/main.c: added --no-mmx commandline option, removed --no-xshm
	from help output.
	
	* app/base/base-config.[ch]: removed use-mmx declaration.
	
	* app/core/core-types.h
	* app/base/base-types.h: include libgimpbase/gimpbasetypes.h from base.

	* app/base/base.c: respect user settings for mmx.

	* app/paint-funcs/paint-funcs.c
	* app/plug-in/plug-in.c: changed accordingly.
	
	* docs/gimp-1.3.1.in: updated.

2002-03-22  Duarte Loreto <happyguy_pt@hotmail.com>

	* configure.in: Added Portuguese (pt) to ALL_LINGUAS

2002-03-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdock.c: gimp_dock_add_book() optimized to about
	two cases :) as gimp_dock_remove_book(), just a bit more ugly.

2002-03-21  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdock.c: reduced the gimp_dock_remove_book()
	if () {} else if () {} ... paned removal madness to two cases.

2002-03-21  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdock.c: pack the dock's GimpDockbooks in
	GtkVPaneds instead of a GtkVBoxed so they are resizable. It's
	hackish, uncommented and weird code that will change, but I wanted
	to have a working state in CVS before optimizing...

2002-03-20  Michael Natterer  <mitch@gimp.org>

	./mitch --sanitize-identifier-namespace

	* app/core/gimpcontext.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-dnd.c
	* app/gui/dialogs-commands.c
	* app/gui/dialogs-constructors.c
	* app/gui/dialogs.c
	* app/gui/edit-commands.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/vectors-commands.c
	* app/gui/view-commands.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppathtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimpvectortool.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimptoolbox-indicator-area.c
	* app/widgets/gimptoolbox.c: s/gimp:/gimp-/g and s/_/-/g for all
	identifier strings (e.g. gimp:eraser_tool -> gimp-eraser-tool,
	gimp:layer-list -> gimp-layer-list, ...)

	* plug-ins/tools/common/gimpbrushselecttool.c:
	s/gimp:brush_select_tool/gimp-brush-select-tool-module/

	Don't quite remember why I introduced the "gimp:" prefix in the
	first place, but we can always add it back if we need it (for
	whatever reason)

	You may want to edit your ~/.gimp-1.3/sessionrc and devicerc or
	all session settings will be lost due to parse errors.

2002-03-20  Michael Natterer  <mitch@gimp.org>

	* app/gui/Makefile.am
	* app/gui/commands.[ch]: removed...

	* app/gui/help-commands.[ch]: ...and added here.

	* app/gui/menus.c: changed accordingly and added the mem_profile
	debug callback so all debug stuff is in one place.

2002-03-20  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am: moved display after gui to make the build work
	with the latest "truly ugly hack" in app/display/Makefile.am.

	* app/tools/gimpcolorbalancetool.[ch]: dialog overhaul.

2002-03-20  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in.[ch]: badly chopped into the new files below.
	Pass around much more "PlugIn" and "Gimp" pointers instead of
	using "current_plug_in" and "the_gimp". Needs much more hacking
	though... :(

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-def.[ch]
	* app/plug-in/plug-in-params.[ch]
	* app/plug-in/plug-in-progress.[ch]
	* app/plug-in/plug-ins.[ch]: new files.

	* app/gui/Makefile.am
	* app/gui/plug-in-commands.[ch]
	* app/gui/plug-in-menus.[ch]: ditto.

	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-types.h: changed accordingly.

	* app/pdb/procedural_db.c: changed procedural_db_destroy_args()
	so it can be used from plug_in_args_destroy(). Fixed a parasite
	memory leak (or introduced a new SEGV, we'll see...).

	* app/display/Makefile.am: another "truly ugly hack" until the
	plug-in menu stuff is chopped even more...

	* app/gui/commands.[ch]: removed filters_repeat_cmd_callback() here,
	it is now in plug-in-commands.[ch].

	* app/widgets/gimpitemfactory.[ch]: removed all gimp_menu_item_*()
	hacks. We have a GimpItemFactory available in most cases we used
	to call this functions, and can use gimp_item_factors_from_path()
	in all other cases. The item factory stuff needs more work
	anyway...

	* app/app_procs.c
	* app/gimphelp.c
	* app/display/gimpdisplayshell.c
	* app/gui/file-dialog-utils.c
	* app/gui/file-open-dialog.[ch]
	* app/gui/file-save-dialog.[ch]
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/paths-dialog.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly (includes,
	renamed functions and gimp_menu_item_*() removal).

	* app/pdb/fileops_cmds.c
	* app/pdb/help_cmds.c
	* app/pdb/plug_in_cmds.c: regenerated.

2002-03-20  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]: pass an additional "Gimp"
	pointer to gimp_display_shell_set_menu_sensitivity() so we can
	correctly set the state of some items even without a display.
	Set the sensitivity of much more items. Never set submenus
	insensitive so the user can always browse the whole menu
	(according to the GNOME HIG).

	* app/image_map.c
	* app/display/gimpdisplay.c
	* app/gui/gui.c: changed accordingly.

	* app/gui/view-commands.[ch]: added a callback for the display
	filters dialog because display related dialogs are going to
	be handled different soon.

	* app/gui/menus.c: use the new callback.

2002-03-20  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: registered GimpConvertDitherType and
	skip GIMP_NODESTRUCT_DITHER since the comment said it should never
	be used.
	
	* app/gui/convert-dialog.c: simplified a lot by using enums.

	* app/tools/paint_options.c: include gimpenummenu.h.

	* app/pdb/convert_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2002-03-20  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-menu-selection-to-channel.png: one
	more icon from Jimmac.

	* libgimpwidgets/gimpstock.[ch]
	* themes/Default/imagerc: add it.

	* app/gui/menus.c: use it.

2002-03-20  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockbook.c: fixed a bug i introduced when making
	the tab_height configurable: need to connect the signals of the
	new tab_widget created in style_set(), otherwise we get the
	functionality of a plain GtkNotebook...

	* app/widgets/gimpfontselection.c: make the minimal width of the
	entry even smaller so users can choose to put it in a small dock.

	* app/widgets/gimppaletteeditor.c: fixed "Zoom All" zoom ratio
	calculation.

2002-03-19  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/base/base-enums.c
	* app/core/Makefile.am
	* app/core/core-enums.c
	* app/widgets/Makefile.am
	* app/widgets/widgets-enums.c: purely cosmetic change.
	
	* app/paint/Makefile.am
	* app/paint/paint-enums.[ch]: generate paint-enums.c with registered
	enums. Skip GIMP_BRUSH_PRESSURE and GIMP_CUSTOM_CONVOLVE so they
	don't get exported to libgimp and are not registered as enum values.

	* tools/pdbgen/pdb/paint_tools.pdb: removed special casing of
	GimpBrushApplicationMode and GimpConvolveType since the forbidden
	values are now skipped anyway.

	* libgimp/gimpcompat.h: removed compat defines for the forbidden
	enum values. They shouldn't have been used.

	* app/tools/Makefile.am
	* app/tools/tools-enums.[ch]: generate tools-enums.c with registered
	enums.
	
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.h
	* app/paint/gimpdodgeburn.h
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpdodgeburntool.c
	* app/tools/paint_options.c: changed accordingly. Added more enum
	radio frames and enum option menus.

2002-03-19  Sven Neumann  <sven@gimp.org>

	* ChangeLog.plug-ins
	* PLUGIN_CVS: removed these files, they have never been used.

2002-03-19  Sven Neumann  <sven@gimp.org>

	* app/paint/Makefile.am
	* app/paint/paint-enums.h
	* app/paint/paint-types.h: split enums into their own file and
	namespacified them.
	
	* app/tools/Makefile.am
	* app/tools/tools-enums.h
	* app/tools/tools-types.h: split enums into their own file.

	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.[ch]
	* app/paint/gimpdodgeburn.[ch]
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppaintcore.[ch]
	* app/paint/gimppaintoptions.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/paint_options.c
	* plug-ins/gfig/gfig.c: changed accordingly.

	* libgimp/gimpcompat.h
	* plug-ins/script-fu/siod-wrapper.c: added compatibility defines for
	changed enums.

	* tools/pdbgen/Makefile.am: updated list of headers to parse for enums.

	* app/pdb/paint_tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/paint_tools.pdb: regenerated.

2002-03-19  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: Oops, GimpContainer's "reorder" signal has more
	parameters than "add" and "remove", which is quite relevant now
	that we use the data pointer passed to the callback :)
	Pointed out by Dave Neary on #gimp.

2002-03-19  Michael Natterer  <mitch@gimp.org>

	* app/tools/tools-types.h: added enum GimpMotionMode which can be
	one of { EXACT, HINT, COMPRESS }.

	* app/tools/gimptool.[ch]: removed tool->perfectmouse and added
	tool->motion_mode. Default to GIMP_MOTION_MODE_HINT.

	* app/tools/gimpinktool.c
	* app/tools/gimppainttool.c: set GIMP_MOTION_MODE_EXACT.

	* app/tools/gimpfuzzyselecttool.c: set GIMP_MOTION_MODE_COMPRESS.

	* app/tools/gimpeditselectiontool.[ch]: ditto. Removed
	gtkutil_compress_motion().

	* app/display/gimpdisplayshell-callbacks.c: look at
	active_tool->motion_mode and perform pointer grabbing and motion
	compression accordingly. Also, don't request motion hints from
	XInput devices because the wacom driver sends crap (fixes #6901).
	This change also brings hints and ordinary motions back in sync
	albeit compression, so IMHO it also fixes #68542 and #22375, but
	this needs further investigation.

2002-03-18  Sven Neumann  <sven@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-enums.[ch]: use gimp_mkenums to create 
	widgets-enums.c, added it to CVS since it contains translatable
	messages now.

	* app/widgets/gimpenummenu.[ch]: added new functions 
	gimp_enum_radio_box_new() and gimp_enum_radio_frame_new() that create
	groups of radio buttons out of enum types.

	* app/core/core-enums.[ch]: registered more enums.
	
	* app/paint/gimpdodgeburn.h
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/transform_options.[ch]: use gimp_enum_radio_frame_new()
	for some tool options.

2002-03-18  Manish Singh  <yosh@gimp.org>

	* app/gui/preferences-dialog.c: slight cosmetic fix to make the
	treeview look nicer.

2002-03-18  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintoptions.h
	* app/tools/paint_options.c: put the "Fade Out" and "Gradient" stuff
	into separate frames with togglebutton titles.

	* app/widgets/gimpchannellistview.c: use
	gimp_image_mask_select_channel() instead of reinventing the wheel.

	* app/widgets/gimpvectorslistview.c: removed unneeded inclusion
	of "core/gimpimage-mask.h".

	* app/widgets/gimpcolormapeditor.c: set the hex entry to 7 digits,
	some cleanup.

	* app/widgets/gimppaletteeditor.c: set the vertical scrollbar
	to GTK_POLICY_AUTOMATIC.

	Added support for configuring some more GUI dimensions using
	widget class style properties:

	* app/widgets/gimpdock.c: made "separator_height" work correctly.
	* app/widgets/gimpdockbook.c: added "tab_height".
	* app/widgets/gimpeditor.c: added "button_icon_size".
	* app/widgets/gimpimagedock.c: added "minimal_width".
	* app/widgets/gimptoolbox.c: added "tool_icon_size".

	* themes/Default/gtkrc: set the properties to their default values
	for documentation.

	* etc/gtkrc_user: added a (commented out) example style which makes
	lots of things smaller.

2002-03-18  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h
	* app/core/core-types.h: more enum cleanup (GimpOffsetType, MergeType).

	* app/core/gimpdrawable-offset.c
	* app/core/gimpimage-merge.[ch]
	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* tools/pdbgen/pdb/image.pdb: changed accordingly.
	
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.
	
2002-03-18  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h
	* app/core/core-types.h: more enum cleanup (ChannelOps this time).

	* app/core/gimpchannel.[ch]
	* app/core/gimpimage-mask-select.[ch]
	* app/gui/channels-commands.c
	* app/gui/vectors-commands.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/tools-types.h
	* app/widgets/gimpchannellistview.[ch]
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/selection_tools.pdb: changed accordingly.

	* app/pdb/channel_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/selection_tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2002-03-18  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h
	* app/core/core-types.h: more enum cleanup (ConvertPaletteType and 
	ConvertDitherType this time).

	* app/core/gimpimage-convert.[ch]
	* app/gui/convert-dialog.c
	* tools/pdbgen/pdb/convert.pdb: changed accordingly.

	* app/pdb/convert_cmds.c
	* libgimp/gimpconvert_pdb.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2002-03-18  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h
	* app/core/core-types.h: moved some more enums into the right place
	and namespacified them.

	* app/undo.c
	* app/core/gimpdrawable-bucket-fill.[ch]
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-qmask.c
	* app/core/gimplayer.[ch]
	* app/display/gimpdisplayshell-dnd.c
	* app/gui/channels-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/layers-commands.c
	* app/gui/menus.c
	* app/tools/gimpbucketfilltool.c
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/misc_tools.pdb: changed accordingly.

	* libgimp/gimpcompat.h
	* plug-ins/script-fu/siod-wrapper.c: added compat defines for changed
	GimpMaskApplyMode enum.

	* tools/pdbgen/enums.pl
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/misc_tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c: regenerated.

	* app/paint-funcs/paint-funcs.c: ifdef'ed out some debug output and
	reindented.

2002-03-18  Tuomas Kuosmanen  <tigert@ximian.com>

	* themes/Default/images/stock-button-eye.png: Added some
	antialiasing to the "show layer" icon now that gtk2 supports
	it.. (whee! :-)

2002-03-17  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/app.pl
	* tools/pdbgen/enumcode-py.pl
	* tools/pdbgen/enumcode.pl
	* tools/pdbgen/enumgen.pl: removed enum nick support, best to keep
	internal and external names consistent

	* app/core/core-enums.h: remove chops from enums. Change TRANS to
	TRANSPARENT in GimpBlendMode

	* app/core/core-types.h: remove chops and nicks from enums. Change INV
	to INVERSE and SUB to SUBTRACT to make things more clear

	* app/core/gimpchannel.c
	* app/gui/channels-commands.c
	* app/gui/vectors-commands.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimpselectiontool.c
	* app/tools/selection_options.c
	* app/tools/tools-types.h
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpvectorslistview.c: reflect SUB -> SUBTRACT change

	* app/core/gimpdrawable-blend.c: reflect TRANS -> TRANSPARENT change

	* app/core/gimplayer.c
	* app/gui/layers-commands.c: reflect INV -> INVERSE change

	* app/paint/paint-types.h: remove nick from PaintApplicationMode

	* app/tools/gimperasertool.c: fix tooltip

	* app/widgets/gimpenummenu.c: #include "libgimp/gimpintl.h" for
	gettext

	* libgimp/gimpcompat.h: compatibility enums here, since we removed
	the nicks

	* tools/pdbgen/enums.pl
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* app/core/core-enums.c
	* app/pdb/channel_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/misc_tools_cmds.c
	* app/pdb/paint_tools_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/selection_tools_cmds.c: regenerated, enum changes

	* plug-ins/common/hot.c: GIMP_TRANS_IMAGE_FILL -> GIMP_TRANSPARENT_FILL

	* plug-ins/common/warp.c: GIMP_BG_IMAGE_FILL -> GIMP_BACKGROUND_FILL

	* plug-ins/script-fu/siod-wrapper.c: compat constant definitions

2002-03-17  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: registered more enums.

	* app/tools/gimpblendtool.c: use GimpEnumMenus.

2002-03-17  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c: open the file with O_TRUNC.

2002-03-17  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.[ch]: new function to set the sensitivity
	of an option_menu.

	* app/base/base-enums.[ch]: register and describe GimpHistogramChannel.

	* app/core/Makefile.am
	* app/core/core-enums.[ch]: build with gimp-mkenums, added core-enums.c
	to CVS, added descriptions for GimpPreviewSize.
	
	* app/display/Makefile.am
	* app/display/display-enums.[ch]: build with gimp-mkenums, added 
	display-enums.c to CVS, added descriptions for GimpCursorMode.

	* app/gui/preferences-dialog.c: more GimpEnumMenus.

	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimplevelstool.c: use a GimpEnumMenu for the Channel menu.
	Allow alpha channel in HistogramView. These tools needs more work...

2002-03-17  Sven Neumann  <sven@gimp.org>

	* tools/gimp-mkenums: allowing NULL for names was a bad idea...

	* app/base/base-enums.[ch]: added more descriptions.

2002-03-17  Sven Neumann  <sven@gimp.org>

	* configure.in: define GIMP_MKENUMS for use in Makefile.am.

	* tools/Makefile.am
	* tools/gimp-mkenums: a modified version of glib-mkenums that parses
	literal descriptions for enum values out of the header file.

	* app/base/Makefile.am
	* app/base/base-enums.h: added descriptions for the InterpolationType.
	
	* app/base/base-enums.c: added to CVS although it is generated since
	translatable messages are extracted from this file and translators
	shouldn't need to build stuff.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpenummenu.[ch]: new widget to create a GtkMenu or a
	GtkOptionMenu directly from a registered enum.

	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/tools/transform_options.c: use gimp_enum_option_menu_new() for
	the Interpolation menus.

2002-03-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolormapeditor.[ch]: namespaceified and cleaned
	up a lot. Removed the menu code.

	* app/gui/menus.c: added a "<ColormapEditor>" item factory...

	* app/gui/Makefile.am
	* app/gui/colormap-editor-commands.[ch]: ...and callbacks for the
	new factory.

	* app/gui/menus.c: Cleaned up a lot. Removed most static variables.
	Enabled the menu debugging code again. Moved all debug and test
	entries to <Toolbox>/File/Debug. Added an "Open Recent" submenu
	to <Image>/File because it was a one-liner after the cleanup...

	* app/widgets/gimpeditor.c: create the icons in GTK_ICON_SIZE_MENU.
	Need to make this configurable using a style property...

2002-03-16  Michael Natterer  <mitch@gimp.org>

	* app/gui/Makefile.am
	* app/gui/colormap-dialog.[ch]: removed...

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpcolormapeditor.[ch]: ...and added here.

	* app/gui/dialogs-constructors.c: changed accordingly.

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-menu-convert-grayscale.png
	* themes/Default/images/stock-menu-convert-indexed.png
	* themes/Default/images/stock-menu-convert-rgb.png
	* themes/Default/images/stock-menu-merge-down.png
	* themes/Default/images/stock-menu-reshow-filter.png
	* themes/Default/images/stock-menu-rotate-180.png
	* themes/Default/images/stock-menu-rotate-270.png
	* themes/Default/images/stock-menu-rotate-90.png
	* themes/Default/images/stock-menu-scale.png: new icons from Jimmac.

	* themes/Default/images/stock-menu-resize.png: my own doing. Someone
	needs to look at it :)

	* themes/Default/imagerc
	* libgimpwidgets/gimpstock.[ch]: added them.

	* app/gui/menus.c: use them.

2002-03-16  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-filter-dialog.c: treeviewized
	and undeprecated.

	* app/widgets/Makefile.am
	* app/widgets/gimpconstrainedhwrapbox.[ch]: removed this hack.

	* app/widgets/gimpcontainergridview.[ch]: added "rows" and
	"columns" fields, connect to the viewport's "size_allocate" signal
	and set the size_request of the wrap_box in the callback.

2002-03-15  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]: renamed shell->cd_list to
	shell->filters and shell->cd_ui to shell->filters_dialog.

	* app/display/gimpdisplayshell-filter-dialog.c
	* app/display/gimpdisplayshell-filter.c
	* app/display/gimpdisplayshell-render.c
	* app/gui/dialogs-constructors.c: changed accordingly.

	* app/display/gimpdisplayshell-filter-dialog.c: cleaned up the GUI.
	Still deprecated GtkCLists around...

	* app/widgets/gimpeditor.[ch]: added gimp_editor_new().

	* app/gui/image-commands.[ch]
	* app/gui/menus.c: added "<Image>/Image/Crop Image" because i was
	sick of clicking 20 times just to crop to the current selection.

	* themes/Default/gtkrc: removed "gimp-dock-style" and changed
	"gimp-gtk-icons" to "gimp-default-style". Set our widget class
	style property defaults there.

2002-03-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colorify.c: applied a patch from Maurits Rijk 
	<lpeek.mrijk@consunet.nl> that gives a nice speedup (#74563).

2002-03-14  Manish Singh  <yosh@gimp.org>

	* app/tools/gimpfuzzyselecttool.c: add missing support for
	anchoring a selection (bugfix ported from stable branch)

2002-03-14  Michael Natterer  <mitch@gimp.org>

	Re-enabled the display filters. They work exactly the same way
	as before except for the color_area pseudo-display. More stuff
	to come...

	* app/display/Makefile.am: build them again.

	* app/display/gimpdisplayshell-filter-dialog.[ch]
	* app/display/gimpdisplayshell-filter.[ch]: changed to the new
	namespace, work on GimpDisplayShell instead of GimpDisplay.

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: changed accordingly.

	* app/gui/dialogs-constructors.c: enabled the dialog constructor.

	* app/gui/gui.c: call the init() function.

	* app/gui/menus.c: enabled the menu entry, but moved it to
	<Image>/View. Moved "Undo History..." to <Image>/Image.

	* modules/Makefile.am: build and install the modules.

	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c: made them compile with minimal
	changes.

	Unrelated:

	* app/undo_history.c: connect to the image's "disconnect", not
	"destroy" signal.

	* app/tools/gimpselectiontool.c: mask out the irrelevant parts of
	the "state" passed to the modifier_key() func, so tool_options
	button toggling works with other modifiers (e.g. num_lock)
	pressed.

2002-03-14  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcolorpickertool.c: oops, including removed files
	is a bad idea...

2002-03-14  Michael Natterer  <mitch@gimp.org>

	* app/core/gimptoolinfo.c: g_strdup() the stock_id passed to
	gimp_tool_info_new() because the caller's memory may disappear
	after registering the tool (tool modules).

	Made a GimpDock out of the toolbox:

	* app/gui/Makefile.am
	* app/gui/color-area.[ch]
	* app/gui/indicator-area.[ch]
	* app/gui/toolbox.[ch]: removed...

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimptoolbox-color-area.[ch]
	* app/widgets/gimptoolbox-indicator-area.[ch]
	* app/widgets/gimptoolbox.[ch]: ...and added here.

	* app/widgets/gimpdock.[ch]: don't set a minimal width. Added a
	"destroy_if_empty" boolean so we can prevent destruction of the
	toolbox if it's last dockable is removed. Added gimp_dock_construct()
	which is called from GimpImageDock and GimpToolbox.

	* app/widgets/gimpimagedock.[ch]: Default to not showing the image
	menu, set a minimal width here, misc. minor cleanup.

	* app/widgets/gimpdockbook.c: some more GIMP_IS_IMAGE_DOCK()
	checks, fixed dnd widget creation.

	* app/widgets/gimpdialogfactory.[ch]: changed
	gimp_dialog_factories_toggle() to take just the toolbox_factory as
	parameter. When restoring the session use the created dock's
	dialog factory to create dockables, not the the factory we
	created the dock from (for the toolbox).

	* app/display/gimpdisplayshell-callbacks.c: changed accordingly.

	* app/gui/dialogs.[ch]: create an own dialog factory for the toolbox
	and set dialogs_toolbox_new() as it's new_dock_func.

	* app/gui/dialogs-constructors.[ch]: changed dialogs_toolbox_get()
	accordingly.

	* app/gui/dialogs-commands.[ch]: added dialogs_show_toolbox(), ckeck
	if a dock is really a GimpImageDock before casting.

	* app/gui/gui.c
	* app/gui/menus.c
	* app/widgets/gimppaletteeditor.c: changed accordingly.

	* app/gui/color-notebook.c
	* app/gui/color-select.c
	* app/gui/colormap-dialog.c
	* app/gui/palette-editor-commands.c: removed useless inclusion of
	"gui/color-area.h".

	* themes/Default/gtkrc: set "gimp-dock-style" for GimpToolbox widgets.

2002-03-13  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/lib.pl: autogenerated libgimp/gimp_pdb.h

	* tools/pdbgen/app.pl: fix a bug in the file open error message

	* libgimp/gimp_pdb.h: now generated

2002-03-13  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am (SUBDIRS): moved pdb directory to the end.
	
	* app/paint/Makefile.am: removed the ugly hack. Seems to work w/o it.

	* themes/Default/Makefile.am: don't build inline pixbuf headers here.

	* themes/Default/images/Makefile.am: build them here with a hack
	that extracts the icon names out of the filenames. Cleaner Makefile
	and correct dependencies.

	* themes/Default/imagerc
	* themes/Default/images/stock-button-reset.png: added a reset button
	(which looks just like refresh at the moment).
	
	* configure.in
	* themes/Default/images/tools/Makefile.am: removed.

	* libgimpwidgets/gimpstock.c
	* libgimpwidgets/gimpwidgets.c: include the pixbuf headers from their
	new places.

2002-03-13  Michael Natterer  <mitch@gimp.org>

	* app/gui/brush-select.[ch]: renamed parameters to be consistent
	with the other foo-select.* files.

	* app/gui/tool-options-dialog.c: removed unused function.

	* app/plug-in/plug-in-types.h: PlugInImageType was accidentially
	exported to the PDB.

	* tools/pdbgen/enums.pl
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c: regenerated.

	More brush, pattern, ... PDB wrapper cleanup:

	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/palette_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb: even more cleanup, guard
	all functions with if(!gimp->no_interface).

	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/patterns.pdb: reordered functions to be
	consistent across all files. Generate libgimp wrappers for *all*
	functions because of API symmetry.

	* tools/pdbgen/pdb/gradients.pdb: renamed gradients_[get|set]_active
	to gradients_[get|set]_gradient because of API symmetry.

	* libgimp/gimpcompat.h: added the old function names here, guard
	the whole file with GIMP_ENABLE_COMPAT_CRUFT (it's back, yeah).

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/gflare/gflare.c: use the new function names.

	* libgimp/gimpbrushes_pdb.[ch]
	* libgimp/gimpgradients_pdb.[ch]
	* libgimp/gimppalettes_pdb.[ch]
	* libgimp/gimppatterns_pdb.[ch]
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/palette_select_cmds.c
	* app/pdb/palettes_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c: regenerated.

2002-03-13  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h: register GimpChannelType and 
	GimpSelectionControl enums with the type system.

	* app/core/gimpimage.c: use them in signal declarations.

	* app/widgets/Makefile.am
	* app/widgets/widgets-enums.h
	* app/widgets/widgets-types.h: split enums into it's own file and
	generate widgets-enums.c. Register GimpZoomType enum.

	* app/widgets/gimpnavigationpreview.c: use GIMP_TYPE_ZOOM_TYPE.

2002-03-12  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpguiconfig.[ch]: removed "global_paint_options".

2002-03-12  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.[ch]
	* app/gui/preferences-dialog.c
	* app/paint/gimppaintoptions.[ch]
	* app/tools/paint_options.[ch]
	* app/tools/tool_manager.[ch]: removed the "global_paint_options"
	gimprc option because it doesn't quite fit the new dockable dialog
	architecture.

	* app/gui/brush-select.[ch]
	* app/gui/gradient-select.[ch]
	* app/gui/palette-select.[ch]
	* app/gui/pattern-select.[ch]: removed the "Global Brush/Pattern/...
	Selection" part of them. They are now only used for temp popup
	selections and the PDB. *Lots* of cleanup.

	* app/gui/convert-dialog.c
	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/palette-import-dialog.c
	* app/plug-in/plug-in.c: changed accordingly.

	Cleaned up the palette and other data PDB stuff:

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/groups.pl: added "palette_select" and "palettes".

	* tools/pdbgen/pdb/palette_select.pdb: new file. Makes the palette
	selection PDB controllable.

	* tools/pdbgen/pdb/palettes.pdb: new file cut out of palette.pdb
	because of API symmetry with brushes, patterns, ...

	* tools/pdbgen/pdb/palette.pdb: removed from here.

	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb: lots of cleanup.

	Autogenerated stuff:

	* app/pdb/Makefile.am
	* app/pdb/palette_select_cmds.c
	* app/pdb/palettes_cmds.c: new files.

	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c: regenerated.

	* libgimp/Makefile.am
	* libgimp/gimp_pdb.h
	* libgimp/gimppalettes_pdb.[ch]
	* libgimp/gimppaletteselect_pdb.[ch]: new files.

	* libgimp/gimpgradientselect_pdb.[ch]
	* libgimp/gimppalette_pdb.[ch]
	* libgimp/gimppatterns_pdb.c: regenerated.

2002-03-11  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c: use a PangoAttributeList instead of
	PangoMarkup for the frame header. Also removed bold attribute and 
	hardcoded size_request.

2002-03-11  Michael Natterer  <mitch@gimp.org>

	* app/gui/pattern-select.c
	* app/gui/preferences-dialog.c: proofreading by bex.

	* app/gui/brush-select.c
	* app/gui/gradient-select.c
	* app/gui/pattern-select.c: cleaned up the
	foo_select_change_callbacks() functions a bit.

2002-03-11  Sven Neumann  <sven@gimp.org>

	* app/gui/user-install-dialog.c: fixed typo (#74248).

2002-03-11  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version number to 1.3.5.

	* NEWS: updated.
	
	* themes/Default/imagerc: fixed typos.

2002-03-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimplayerlistview.[ch]: added a GimpAnchorItemFunc
	and use it if it's set.

	* app/widgets/gimpitemlistview.c: removed the floating selection
	special case hack from the remove_item callback.

	* app/gui/layers-commands.[ch]: added layers_remove_layer() and
	layers_anchor_layer(). Fixed sensitive setting of the "Anchor"
	menu item.

	* app/gui/dialogs-constructors.c: use the new functions when
	constructing the layers dialog. Makes deleting and anchoring
	floating selections from the layers dialog work without hacking
	or code duplication.

	* app/widgets/gimpdialogfactory.c: added comments about dialog
	destruction in dispose().

2002-03-10  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.h: removed type checking casts from
	macros which return parts of pseudo-widgets.

	* app/widgets/gimpbrushfactoryview.c: changed accordingly.

	* app/widgets/gimpdialogfactory.c: added a "dispose"
	implementation used to destroy all dialogs the factory has
	created.

	* app/gui/toolbox.[ch]: removed toolbox_free(), removed the static
	"toolbox_shell" variable, set the active tool correctly on
	creation, don't show the window here (fixes session menagement),
	take the vbox' spacing into account when calculating the window's
	resize hints.

	* app/gui/gui.c: don't include "toolbox.h", don't call
	toolbox_free().

	* app/widgets/gimpfontselection.c: set the width of the entry to
	16 chars on creation so it doesn't fall back to it's insanely
	large default width, minor stuff.

	* app/tools/gimptexttool.c
	* app/tools/selection_options.c: some more scale_entries.

2002-03-10  Michael Natterer  <mitch@gimp.org>

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/tool-options-dialog.[ch]: made the tool options dialog
	dockable. Create a fancy tab for it which looks like the old
	dialog header.

	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/toolbox.c: changed accordingly.

	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimperasertool.c: moved the tool toggling widgets to
	the top.

	* app/tools/paint_options.c: show the paint mode menu for all
	paint tools but set it insensitive where it makes no sense.
	Reduces flickering and makes the tools' similarity more obvious.

	* app/widgets/gimpdataeditor.c: fixed segfault in
	gimp_data_editor_set_data() (data may be NULL), don't pass NULL to
	gtk_entry_set_text(), make the name entry insensitive if data ==
	NULL.

	* app/widgets/gimpdialogfactory.c: fixed longstanding bug which
	made newly created docks steal the first session entry with a NULL
	widget instead of the first _dock_ session entry with a NULL
	widget. Added even more debugging output. Cleanup.

	* app/widgets/gimpdockbook.c: made the tab/menu widget code more
	general to cover the tool options tab.

2002-03-09  Sven Neumann  <sven@gimp.org>

	* Made 1.3.4 release.

2002-03-09  Sven Neumann  <sven@gimp.org>

	* configure.in: removed intltool version check, it is broken :-(
	Updated dependencies to glib-2.0.0, pango-1.0.0 and gtk+-2.0.0.

	* HACKING
	* INSTALL: updated.
	
2002-03-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpbrushfactoryview.c: forgot some casts.

2002-03-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.[ch]: return the created label from
	gimp_table_attach_aligned(), doc fixes.

	* app/gui/channels-commands.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/widgets/gimpbrushfactoryview.c
	* app/widgets/gimplayerlistview.c: use gimp_scale_entries instead
	of just hscales in lots of places, so the values are keyboard
	input-able.

2002-03-08  Sven Neumann  <sven@gimp.org>

	* configure.in: reorder AC_OUTPUT to make intltool happy, check
	intltool version.

	* Makefile.am: reordered SUBDIRS.
	
2002-03-08  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.[ch]: changed gimp_channel_get_color() to
	not return the color but take a second GimpRGB* parameter like all
	other _get_color() functions. Reordered some functions to make
	more sense, added some g_return_if_fail().

	* app/core/gimppalette.[ch]: added gimp_palette_[set|get]_n_columns()

	* app/gui/menus.c: added a "<PaletteEditor>" item factory.

	* app/gui/Makefile.am
	* app/gui/palette-editor-commands.[ch]: callbacks for the factory.

	* app/widgets/gimppaletteeditor.[ch]: removed the menu stuff here,
	added a spinbutton to adjust the number of columns.

	* app/gui/gradient-editor-commands.c: removed usage of "the_gimp".

	* app/widgets/gimpgradienteditor.c: minor cleanup.

	* app/widgets/gimpbrusheditor.h
	* app/widgets/gimpgradienteditor.h
	* app/widgets/gimppaletteeditor.h: forgot to declare the _get_type()
	functions publically.

2002-03-08  Sven Neumann  <sven@gimp.org>

	Handle gtk-doc just like GTK+ does it now:
	
	* configure.in: check for gtk-doc version 0.9. Do not build the API
	reference by default.

	* autogen.sh: pass --enable-gtk-doc to configure.

	* Makefile.am: Added a slightly modified distcheck rule that passes
	--enable-gtk-doc to the configure inside.

	* NEWS: updated.
	
2002-03-08  Michael Natterer  <mitch@gimp.org>

	* app/core/core-types.h: added GimpPaletteEntry typedef.

	* app/core/gimppalette.h: removed it here.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpeditor.[ch]: new widget which is the base class
	for everything which is a vbox and has a button area at the
	bottom.

	* app/widgets/gimpcontainerview.[ch]: derived from GimpEditor now.

	* app/widgets/gimpdataeditor.[ch]: a GimpEditor subclass which is
	the base class for the new data editors below.

	* app/widgets/gimpbrushfactoryview.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpitemlistview.c
	* app/widgets/gimplayerlistview.c
	* app/widgets/gimpvectorslistview.c
	* themes/Default/gtkrc: changed accordingly.

	* app/gui/Makefile.am
	* app/gui/brush-editor.[ch]
	* app/gui/gradient-editor.[ch]
	* app/gui/palette-editor.[ch]: removed...

	* app/widgets/gimpbrusheditor.[ch]
	* app/widgets/gimpgradienteditor.[ch]
	* app/widgets/gimppaletteeditor.[ch]: ...and added back as
	GimpDataEditor subclasses. Lots of cleanup and stuff...

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/gradient-editor-commands.c
	* app/gui/gui-types.h
	* app/gui/palette-select.c
	* app/tools/gimpcolorpickertool.c: changed accordingly.

2002-03-07  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: back to a still splash image.

	* data/images/gimp_splash.png: blinkenwilber as seen from the
	berlinerfernsehturm.de.

2002-03-07  Sven Neumann  <sven@gimp.org>

	* themes/Default/imagerc: applied patch from Guillermo S. Romero that
	adds missing icons.

2002-03-07  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-*.png: new icon set
	
2002-03-07  Simon Budig  <simon@gimp.org>

	* NEWS: updated.

2002-03-06  Sven Neumann  <sven@gimp.org>

	* INSTALL: mention libart2.

2002-03-06  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/preferences/interface.png: wilber gimp
	  session
	* themes/Default/images/preferences/help-system.png: the gnome2
	  help icon (by Tuomas Kuosmanen)
	
2002-03-06  Simon Budig  <simon@gimp.org>

	* configure.in
	* app/Makefile.am
	* app/core/Makefile.am: We depend on Libart-2.0 now.

	* app/core/gimpscanconvert.c: Converted the Scan-Conversion to
	use libart. *Way* better results.

2002-03-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushpipe.c
	* app/core/gimppalette.c: message fixes.

2002-03-06  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/preferences/input-devices.png:
	* themes/Default/images/preferences/environment.png:
	* themes/Default/images/preferences/default-comment.png:
	  start replacing generic icons with gimp-branded
	
2002-03-06  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/preferences/folders-modules.png
	* themes/Default/images/preferences/folders-themes.png
	* themes/Default/images/preferences/folders-tool-plug-ins.png:
	Some more folder icons for the prefs. dialog.

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/folders.xcf.gz: changed accordingly.

	* app/gui/preferences-dialog.c: use them.

	* themes/Default/Makefile.am
	* themes/Default/imagerc
	* libgimpwidgets/gimpstock.[ch]: removed GIMP_STOCK_PASTE.

	* themes/Default/gtkrc: override GTK_STOCK_PASTE with our icon
	instead.

	* app/gui/menus.c
	* app/widgets/gimpbufferview.c: s/GIMP_STOCK_PASTE/GTK_STOCK_PASTE/

	* themes/Default/images/Makefile.am: install all icons of the
	default theme so the installed directory can be used as template.

2002-03-05  Michael Natterer  <mitch@gimp.org>

	* configure.in: mention gimp-remote in the error message if
	Xmu was not found.

	* plug-ins/webbrowser/Makefile.am
	* tools/Makefile.am: removed X_LIBS again because configure adds
	them to LIBXMU now.

2002-03-05  Michael Natterer  <mitch@gimp.org>

	* configure.in: Add X_LIBS to LDFLAGS while checking for
	Xmu because GTK_LIBS no longer adds them.

2002-03-04  Michael Natterer  <mitch@gimp.org>

	Forgot some gint opacity values:

	* app/core/gimplayer.[ch]: layer->opacity, gimp_layer_new(),
	gimp_layer_new_from_tiles()

	* app/core/gimpimage-projection.[ch]: gimp_image_projection_opacity()

	* app/core/gimpdrawable-transform.c
	* app/core/gimpedit.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage.c
	* app/core/gimplayer-floating-sel.c
	* app/gui/layers-commands.c
	* app/tools/gimptexttool.c
	* app/widgets/gimplayerlistview.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/layer.pdb: changed accordingly.

	* app/pdb/layer_cmds.c
	* libgimp/gimplayer_pdb.c: regenerated.

2002-03-03  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-contiguous-region.c: some cleanup, removed 
	unused parameters and code.

	* app/widgets/gimptoolinfopreview.c: fixed stupid bug I introduced
	yesterday.

2002-03-03  Michael Natterer  <mitch@gimp.org>

	Use gdouble in a [0.0..1.0] range for opacity values in the whole
	core's API. Convert them using (opacity * 255.999) when passing
	them to base/ and paint-funcs/

	Affected functions:

	* app/core/gimpchannel.[ch]: gimp_channel_[set|get]_opacity()
	* app/core/gimpimage.[ch]: gimp_image_[apply|replace]_image()
	* app/paint/gimppaintcore.[ch]: gimp_paint_core_[paste|replace]_canvas()

	* app/core/core-types.h: added defines GIMP_OPACITY_TRANSPARENT
	and GIMP_OPACITY_OPAQUE, just like the ones from
	paint-funcs/paint-funcs-types.h

	* app/gimprc.c
	* app/image_map.c
	* app/core/gimpcontext.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimplayer.c
	* app/core/gimplayer-floating-sel.c
	* app/core/gimppalette.c
	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimpsmudge.c
	* app/tools/gimpinktool.c
	* app/widgets/gimpcolorpanel.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimppreview.c
	* app/xcf/xcf-load.c: changed accordingly, use the new constants.

2002-03-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/webbrowser/Makefile.am
	* tools/Makefile.am: GTK_LIBS no longer pulls in X_LIBS for us, so we 
	need to add X_LIBS here.

2002-03-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-mask-select.[ch]: changed
	gimp_image_mask_select_channel() to not take "drawable" and
	"sample_merged" parameters (which are silly in some contexts) but
	simply the offsets of the passed channel.

	* app/gui/channels-commands.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpiscissorstool.c: changed accordingly.

	* app/tools/gimpdrawtool.[ch]: changed gimp_draw_tool_draw_lines()
	and _draw_strokes() to take an additional "use_offsets" parameter
	like the other drawing functions.

	* app/path_curves.c
	* app/tools/gimpvectortool.c: changed accordingly.

	* app/paint/gimppaintcore.c: removed #if 0'ed code which was
	identical to other functions.

	* app/tools/gimpselectiontool.c: use the GimpEditSelectionTool's
	"arrow_key_func" so it's now possible to keyboad-move the current
	layer and selection with all selection tool. Needs some more
	tweaking...

	* app/tools/gimpiscissorstool.[ch]
	* app/tools/gimpvectortool.[ch]: derive them from GimpSelectionTool
	to make the modifier key <-> tool options interaction work. Ported
	IScissors to the new way the draw_tool works.

2002-03-02  Sven Neumann  <sven@gimp.org>

	* autogen.sh: require intltool-0.17.
	
	* configure.in: require latest glib, pango and gtk+. Bail out if
	libtiff, libjpeg or libpng is not found.  You now need to explicitly
	disable TIFF, JPEG and PNG support.

	* HACKING
	* INSTALL
	* NEWS
	* README: udpated.

	* data/misc/Makefile.am: fixed dependencies.

2002-03-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimptoolinfo.c
	* app/widgets/gimptoolinfopreview.c: allow RGB previews and do proper
	blending for RGBA. This is wasted effort since we will change the
	GimpPreview system anyway, but I couldn't stand the awful look any
	longer.
	
	* app/display/gimpdisplayshell.c
	* app/gui/file-save-dialog.c: added linebreaks to messages.

2002-03-01  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/folders-brushes.png
	* themes/Default/images/preferences/folders-gradients.png
	* themes/Default/images/preferences/folders-palettes.png
	* themes/Default/images/preferences/folders-patterns.png
	* themes/Default/images/preferences/folders-plug-ins.png: some new
	icons made from Jimmac's new tool icons and Tigert's abstract
	palette icon.

	* themes/Default/images/preferences/folders.xcf.gz: all folders
	icons as layered image.

	* app/gui/preferences-dialog.c: use them.

2002-02-28  Michael Natterer  <mitch@gimp.org>

	* app/gui/preferences-dialog.c: put the title label & icon outside
	the notebook and exchange them when flipping pages. Pass an icon
	to the resolution_calibrate_dialog.

2002-02-28  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.[ch]
	* app/config/gimpguiconfig.[ch]
	* app/gui/toolbox.c: removed the "show_indicators" gimprc option.
	The toolbox layout will change and thus obsolete it anyway.

	* app/gui/Makefile.am
	* app/gui/input-dialog.[ch]: removed.

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/menus.c: changed accordingly.

	* app/gui/preferences-dialog.c: Added an "Input Devices" page and
	embed the input_dialog stuff there. Put "Display" and "Monitor"
	under "Interface". Removed the "Session" page. Lots of cleanup and
	reordering of options.  Please comment...

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/input-devices.png: new icon.
	* themes/Default/images/preferences/session.png: removed.

2002-02-28  Sven Neumann  <sven@gimp.org>

	* app/gui/resolution-calibrate-dialog.[ch]: take an optional pixbuf
	as eye-candy.

	* app/gui/preferences-dialog.c
	* app/gui/user-install-dialog.c: changed accordingly.

2002-02-28  Michael Natterer  <mitch@gimp.org>
	    Sven Neumann  <sven@gimp.org>

	* configure.in
	* themes/Default/images/Makefile.am
	* themes/Default/images/preferences/Makefile.am: new directory
	for themeable preferences icons.

	* themes/Default/images/preferences/default-comment.png
	* themes/Default/images/preferences/display.png
	* themes/Default/images/preferences/environment.png
	* themes/Default/images/preferences/folders.png
	* themes/Default/images/preferences/help-system.png
	* themes/Default/images/preferences/image-windows.png
	* themes/Default/images/preferences/interface.png
	* themes/Default/images/preferences/monitor.png
	* themes/Default/images/preferences/new-image.png
	* themes/Default/images/preferences/session.png
	* themes/Default/images/preferences/tool-options.png: added some
	GPL icons from Jimmac's site (http://jimmac.musichall.cz/).

	* app/gui/gui.[ch]: added gui_themes_get_theme_dir() so we can find
	icons which are loaded on demand.

	* app/gui/preferences-dialog.c: added the icons to the tree and
	the notebook page headers. Cleaned up and reduced the code a lot
	by adding utility functions prefs_table_new() and
	prefs_check_button_new().

	* app/display/gimpdisplayshell.c
	* app/display/gimpdisplayshell-callbacks.[ch]: added a "Default"
	menu entry to the display's color button context menu so we can
	reset the padding color to the theme's bg color.

2002-02-28  Sven Neumann  <sven@gimp.org>

	* app/gui/file-commands.c: fixed message string.

2002-02-27  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/stock-button-stroke.png
	* themes/Default/images/stock-button-to-path.png
	* themes/Default/images/stock-button-to-selection.png: removed.

	* themes/Default/images/stock-button-path-stroke.png
	* themes/Default/images/stock-button-selection-stroke.png
	* themes/Default/images/stock-button-selection-to-path.png: new ones.

	* themes/Default/Makefile.am
	* themes/Default/images/Makefile.am
	* libgimpwidgets/gimpstock.[ch]: changed accordingly.

	* themes/Default/images/stock-button-selection-add.png
	* themes/Default/images/stock-button-selection-intersect.png
	* themes/Default/images/stock-button-selection-replace.png
	* themes/Default/images/stock-button-selection-subtract.png: cropped.

	* themes/Default/images/tools/stock-tool-button-brightness-contrast.png:
	a nicer one from Ville Ptsi.

	* app/gui/menus.c
	* app/widgets/gimpvectorslistview.c: use the new stock items.

	* app/gui/dialogs-commands.c: create the new paths dialog, not the
	old one in dialogs_lc_cmd_callback().

	* app/gui/vectors-commands.c: some more s/Vectors/Path/ in
	user-visible strings.

	* app/app_procs.c: some test code for the filename -> uri migration.

2002-02-27  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimppaintinfo.[ch]: new object for registering
	GimpPaintCore subclasses, just like GimpToolInfo for tools.

	* app/core/gimp.h: added gimp->paint_info_list to hold them.

	* app/core/gimptoolinfo.[ch]: removed the "pdb_string" and
	"paint_core_name" pointers and added a GimpPaintInfo pointer
	instead.

	* app/core/gimpimage-mask.c
	* app/gui/vectors-commands.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/tool_manager.c: changed accordingly.

	* app/paint/paint-types.h
	* app/paint/paint.c: added paint class registration stuff like
	the tool_manager does.

	* app/paint/gimpairbrush.[ch]
	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.[ch]
	* app/paint/gimpdodgeburn.[ch]
	* app/paint/gimperaser.[ch]
	* app/paint/gimppaintbrush.[ch]
	* app/paint/gimppencil.[ch]
	* app/paint/gimpsmudge.[ch]: added register functions which are
	called from paint_init().

	The core object system lives not only in "core/", but in
	core, paint, vectors, file, plug-in and xcf, so I had to hack
	a bit to keep the deps working:

	* app/pdb/pdb-types.h: don't include "paint/paint-types.h"...

	* app/core/core-types.h: ...because it's included here. Moved
	the inclusions of the core's subsystems' "foo/foo-types.h"
	files to the end of the file.

	* app/paint/Makefile.am: Some slimy radioactive uglyness.

	* app/gui/drawable-commands.c
	* app/tools/gimpblendtool.c: removed calling core functions via
	the PDB because it makes no sense to do it manually in only a few
	places.  This needs to be done generically using generated
	wrappers living in "app/commands/" or something...

2002-02-27  Sven Neumann  <sven@gimp.org>

	* config.guess
	* config.sub: removed from CVS, they get added by automake -a.

2002-02-26  Sven Neumann  <sven@gimp.org>

	* app/gui/tips-dialog.c
	* app/gui/tips-parser.c: added support for simple text markup.

	* tips/gimp-tips.xml.in: document and use the new markup tags.

2002-02-26  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c: make absolute paths out of relative ones
	passed on the commandline so the GimpImagefiles can generate
	previews.

	* app/gui/Makefile.am
	* app/gui/drawable-commands.[ch]: new files implementing menu
	callbacks which work not just on layers.

	* app/gui/layers-commands.[ch]: removed them here. Cleanup.

	* app/gui/menus.c: changed accordingly.

	* app/gui/brushes-commands.c
	* app/gui/channels-commands.c
	* app/gui/vectors-commands.c: cleanup. Added macros to get
	rid of code duplication.

2002-02-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/guillotine.c: code cleanup by Maurits Rijk 
	<lpeek.mrijk@consunet.nl> (#72288).

	* plug-ins/script-fu/interp_slib.c: fixed typo (#72673).

2002-02-26  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpitemlistview.[ch]: added a "item_activate_func"
	to the struct and the constructor so we can distinguish double
	click from right click in the callbacks.

	* app/widgets/gimpvectorslistview.[ch]: added a "item_stroke_func".

	* app/widgets/gimpchannellistview.c: reorder the "To Selection" button.

	* app/gui/dialogs-constructors.c: changed accordingly.

	* app/gui/menus.c: added separators and some new items to the
	vectors menu. Use the SELECTION_REPLACE, _ADD, ... icons for
	the resp. menu items.

	* app/gui/vectors-commands.[ch]: added empty callbacks for the new
	menu items, put the stroke stuff to an own function which is used
	as "item_stroke_func" when creating GimpVectorsListViews.

2002-02-26  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-mask-select.[ch]: implemented
	gimp_image_mask_select_vectors() as simple wrapper around
	gimp_image_mask_select_polygon().

	* app/gui/vectors-commands.c: call it from the "to selection"
	callbacks.

	* app/gui/channels-commands.c: use gimp_image_mask_select_channel()
	instead of doing the same manually.

	* app/paint/gimppencil.c: register as "GimpPencil", not
	"GimpPencilCore".

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpvectorslistview.[ch]: new GimpItemListView
	subclass featuring a "To Selection" and "Stroke" button.

	* app/widgets/gimpitemlistview.c: create GimpVectorsListViews.

2002-02-26  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintcore-stroke.[ch]: added
	gimp_paint_core_stroke_vectors() which strokes the whole vector
	using one undo step.

	* app/gui/vectors-commands.c: use the new function.

	* app/tools/gimpvectortool.c: changed to do evil voodoo in
	gimp_vectors_tool_set_vectors() and thus to always find a
	display to show the vectors.

2002-02-26  Sven Neumann  <sven@gimp.org>

	* NEWS: updated

2002-02-26  Simon Budig  <simon@gimp.org>

	* app/gui/vectors-commands.c
	* app/tools/gimpvectortool.c
	* app/tools/gimpvectortool.h: fixed a name of a function
	and corrected gimp_vector_tool_set_vectors.

2002-02-26  Michael Natterer  <mitch@gimp.org>

	Added some kind of paint core registry. It's ugly and will change...

	* app/core/gimp.c: call paint_init() and paint_exit().

	* app/core/gimptoolinfo.[ch]: added "gchar *paint_core_name" to
	the GimpToolInfo structure and the contstructor.

	* app/tools/tool_manager.c: pass the class names of the
	GimpPaintCore subclasses to gimp_tool_info_new().

	* app/paint/Makefile.am
	* app/paint/paint.[ch]: new files. Simlply ref/unref all paint
	core classes so we can find them using g_type_from_name().

	* app/paint/gimppaintcore-stroke.[ch]: changed to take an array
	of GimpCoords, not just gdouble.

	* tools/pdbgen/pdb/paint_tools.pdb: convert the stroke array here.

	* app/gui/vectors-commands.c: ad-hoc implementation of vectors
	stroking.  Double click now sets the active vectors in the vectors
	tool.

	* app/pdb/paint_tools_cmds.c: regenerated.

2002-02-26  Sven Neumann  <sven@gimp.org>

	* app/gui/tips-parser.c: some documentation can't hurt.

	* app/tools/Makefile.am
	* app/paint/Makfile.am
	* app/vectors/Makfile.am
	* plug-ins/tools/Makefile.am: fixed dist target. 

2002-02-26  Simon Budig  <simon@gimp.org>

	* app/tools/gimpdrawtool.c
	* app/tools/gimpdrawtool.h: Added function gimp_draw_tool_draw_strokes
	to be able to draw lines from a GimpCoords array.

	* app/vectors/gimpanchor.h: removed "active", since this should
	be a GUI thing.

	* app/vectors/gimpstroke.c
	* app/vectors/gimpstroke.h
	* app/vectors/gimpbezierstroke.c
	* app/vectors/gimpbezierstroke.h: Implemented (and fixed API) for
	interpolation.

	* app/tools/gimpvectortool.c
	* app/tools/gimpvectortool.h: Changed accordingly, we can actually
	draw polylines now.

2002-02-26  Michael Natterer  <mitch@gimp.org>

	* app/undo.[ch]: renamed undo_push_layer_rename() to
	undo_push_item_rename(), so channel/vectors renaming is undoable.
	Use "gsize" for all undo size variables. Cleanup.

	* app/undo_types.h: s/LAYER_RENAME_UNDO/ITEM_RENAME_UNDO/.

	* app/core/core-types.h: added LAYER_PROPERTIES_UNDO_GROUP.

	* app/core/gimpimage.c: s/Vectors/Path/ in all user-visible strings.

	* app/core/gimpitem.[ch]: cleanup.

	* app/gui/menus.c: s/"New Path"/"New Path..."/, pass
	"vectors_menu_update" to gimp_item_factory_new().

	* app/gui/layers-commands.c: renaming the floating layer
	transforms it into an ordinary layer. Push an undo group around
	around both the "fs_to_layer" and the renaming.

	* app/gui/channels-commands.c
	* app/gui/vectors-commands.c: made renaming undoable, cleanup.

	* app/widgets/gimpitemlistview.c: added an EEKY hack so "Delete"
	is not broken any more for floating selections. Need a better
	solution...

2002-02-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/fileops.pdb: changed dot to underscore in
	implementation of gimp_temp_name(). Fixes bug #72324.

	* app/pdb/fileops_cmds.c: regenerated.

	* Makefile.am
	* tips/update.sh: added a script to update po files.
	
2002-02-25  Sven Neumann  <sven@gimp.org>

	* app/gui/tips-dialog.c
	* app/gui/tips-parser.c: added proper error handling. This completes
	the new XML-based tips system that closes bug #68846.

2002-02-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpitemlistitem.[ch]: new GimpListItem subclass
	which handles DND reordering of GimpItems.

	* app/widgets/gimpdrawablelistitem.[ch]: derive from GimpItemListItem
	and removed the reordering code.

	* app/widgets/gimplistitem.c: create a GimpItemListItem if the
	passed viewable is a GimpItem.

2002-02-25  Sven Neumann  <sven@gimp.org>

	* README.i18n: updated
	
	* app/gui/tips-dialog.c
	* app/gui/tips-parser.[ch]: dropped the locale matching magic since
	it would never work for all cases. Instead introduced a special 
	message so translators can specify the exact tips locale.

2002-02-25  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpitem.[ch]: new base class for something which is a
	child of an image, has a PDB ID, a tattoo, parasites and emits
	a "removed" signal.

	* app/core/gimpdrawable.[ch]
	* app/vectors/gimpvectors.[ch]: derive from GimpItem. Removed
	lots of stuff from GimpDrawable.

	* app/core/gimp.[ch]: changed gimp->drawable_table and
	gimp->next_drawable_ID to gimp->item_table and gimp->next_item_id.

	* app/undo.[ch]: s/undo_push_drawable_parasite/undo_push_item_parasite/,
	minor cleanups.

	* app/core/gimplayer.[ch]: changed gimp_layer_new_from_tiles() and
	gimp_layer_new_from_drawable() to take the "dest_gimage" as
	second, not first parameter.

	* app/image_map.c
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpdrawable-histogram.c
	* app/core/gimpdrawable-offset.c
	* app/core/gimpdrawable-preview.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpedit.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-pick-color.c
	* app/core/gimpimage.c
	* app/core/gimplayer-floating-sel.c
	* app/display/gimpdisplayshell-dnd.c
	* app/file/file-save.c
	* app/gui/channels-commands.c
	* app/gui/file-save-dialog.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* app/gui/paths-dialog.c
	* app/gui/toolbox.c
	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppaintcore.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c
	* app/plug-in/plug-in.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimppainttool.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* app/widgets/gimpdrawablepreview.c: changed accordingly.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpitemlistview.[ch]: new widget implementing most
	of the stuff formerly done by GimpDrawableListView.

	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.[ch]
	* app/widgets/gimplayerlistview.c: changed accordingly.

	* app/widgets/gimpdnd.[ch]: added a vectors DND type.

	* app/gui/menus.c
	* app/gui/dialogs.c
	* app/gui/dialogs-constructors.[ch]: added a vectors dialog and
	a vectors item_factory.

	* app/gui/Makefile.am
	* app/gui/vectors-commands.[ch]: new files implementing the
	callbacks for the new vectors dialog and item_factory.

	* app/pdb/pdb_glue.h: some more ugly hacks to keep intermediate
	perl code working...

	* tools/pdbgen/pdb.pl: added a vectors type, use GimpItem for all
	ID lookups.

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/misc_tools.pdb
	* tools/pdbgen/pdb/parasite.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/selection_tools.pdb: misc changes according to
	stuff above.

	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/floating_sel_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/misc_tools_cmds.c
	* app/pdb/paint_tools_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/selection_tools_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2002-02-25  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c
	* app/tools/gimpvectortool.[ch]
	* app/vectors/gimpstroke.[ch]
	* app/vectors/gimpvectors.[ch]: Fixed various bugs, *including*
	the nasty one from this morning (thanks Mitch).

2002-02-25  Sven Neumann  <sven@gimp.org>

	* app/gui/tips-parser.[ch]: strip newlines, tabs and adjacent spaces
	from string values. Added a naive locale match algorithm. We'll see
	how well it works in real life...

	* app/gui/tips-dialog.c: call gimp_tips_from_file() with current
	locale. Let GTK+ do the line breaks, assorted cosmetic changes.
	
	* tips/de.po: stripped newlines from translation.

2002-02-25  Michael Natterer  <mitch@gimp.org>

	* app/vectors/Makefile.am
	* app/vectors/gimpvectors-preview.[ch]: new files creating dummy
	vectors previews.

	* app/vectors/gimpvectors.[ch]: added a "gimage" pointer.

	* app/vectors/gimpbezierstroke.c
	* app/vectors/gimpstroke.c: some object stuff fixes.

2002-02-25  Sven Neumann  <sven@gimp.org>

	* po-libgimp/Makefile.in.in
	* po-plug-ins/Makefile.in.in
	* po-script-fu/Makefile.in.in: updated, they used to refer to
	po/po2tbl.sed which is no longer existant.

2002-02-25  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpvectors.c
	* app/vectors/gimpvectors.h: Changed to a container of
	GimpStrokes. This will enable it to contain different
	Stroke-types in one Vectors-Object (think Entry in path
	dialog)
	
	* app/vectors/gimpstroke.c
	* app/vectors/gimpstroke.h
	* app/vectors/gimpbezierstroke.c
	* app/vectors/gimpbezierstroke.h: New Objects: A connected
	component in a vector.
	
	* app/vectors/gimpbezier.c
	* app/vectors/gimpbezier.h: Removed, obsoleted by gimpstroke
	and gimpbezierstroke.

	* app/tools/gimpvectortool.c
	* app/vectors/Makefile.am
	* app/vectors/vectors-types.h
	* app/vectors/gimpanchor.h: Changed accordingly.

	There is a nasty bug I am yet unable to find in the tool.
	Don't use it. For some reason a wrong function instead of
	gimp_stroke_real_anchor_get_next gets called. I have *no*
	idea, whats wrong here. I stared at the code for hours.

	If somebody has an idea I'd appreciate a hint.

2002-02-25  Sven Neumann  <sven@gimp.org>

	* app/gui/Makefile.am
	* app/gui/tips-parser.[ch]: new files. A simple XML parser for the 
	gimp-tips.xml file.
	
	* app/gui/tips-dialog.c: Removed old gimp_tips.txt parsing code and
	switched to use gimp-tips.xml with the new parser. This needs some
	more work ...

2002-02-24  Sven Neumann  <sven@gimp.org>

	* HACKING
	* autogen.sh: fixed intltool version number, we need intltool 0.15.

	* tips/Makefile.am
	* tips/POTFILES.in
	* tips/de.po
	* tips/gimp-tips.xml.in: translation framework for new XML-ized tips
	file. Thanks to Carol for converting the tips to XML.

2002-02-24  Michael Natterer  <mitch@gimp.org>

	* app/undo.[ch]
	* app/undo_types.h: added undo stuff for GimpVectors.

	* app/core/gimimage.c: use the new undo functions. Still unused
	and untested.

2002-02-24  Michael Natterer  <mitch@gimp.org>

	* app/core/core-types.h: added parasite undo groups.

	* app/undo.c: added assertions to make undo_push_group_start()
	accept only "UndoType" values and undo_push() only "UndoImplType".

	* app/core/gimpdrawable.c: use the new undo group and don't
	include "undo_types.h".

2002-02-23  Michael Natterer  <mitch@gimp.org>

	* app/undo_types.h
	* app/undo.[ch]: added new undo type IMAGE_TYPE_UNDO along with
	undo_push_image_type(), removed undoing the base_type from
	IMAGE_SIZE_UNDO. Hacked the undo_names a bit.

	* app/core/gimpimage-convert.c: call undo_push_image_type().

	This removes lots of unneeded invalidations on type/size undo.

2002-02-23  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable.c: include undo_types.h to fix the build.

2002-02-23  Michael Natterer  <mitch@gimp.org>

	General undo cleanup:

	* app/undo.[ch]: made all undo structs private. Changed all
	undo_push_foo() functions to take useful parameters instead of
	"gpointer foo_ptr" and create the undo structs internally.
	Renamed lots of functions so they are more self-explanatory
	(like undo_push_gimage_mod -> undo_push_image_size). Added some
	undo functions (channel reordering is undoable now).  Never pass
	in a UndoType, as they are reseved for groups now (see below).
	Lots of cleanup and stuff...

	* app/undo_types.h: is a private header now which defines "enum
	UndoImplType" which is reserved for actual undo operations.
	All enum values are named "FOO_UNDO".

	* app/core/core-types.h: added the "UndoType" enum here and don't
	include "undo_types.h" any more. The UndoType values are all
	named "FOO_UNDO_GROUP" and are reserved for undo groups.

	The ID space of actual undo operations and undo groups
	is now strictly disjunct.

	* app/core/gimpchannel.h
	* app/core/gimpimage.h
	* app/core/gimplayer.h
	* app/core/gimplayermask.h
	* app/paint/gimppaintcore.h
	* app/tools/gimptransformtool.h: removed undo struct definitions.

	* app/undo_history.c
	* app/path_transform.h
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpedit.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-qmask.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage.c
	* app/core/gimplayer-floating-sel.c
	* app/core/gimplayer.c
	* app/display/gimpdisplayshell-dnd.c
	* app/gui/channels-commands.c
	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/gui/paths-dialog.c
	* app/paint/gimppaintcore.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c
	* tools/pdbgen/pdb/guides.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/undo.pdb: changed accordingly.

	* app/pdb/guides_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/undo_cmds.c: regenerated.

	* app/core/gimpimage.[ch]: added infrastructure for holding a
	GimpList of GimpVectors objects. The API is the same as for layers
	and channels. Not used yet.

2002-02-22  Sven Neumann  <sven@gimp.org>

	* HACKING
	* Makefile.am
	* autogen.sh
	* configure.in: depend on intltool for handling i18n stuff. This
	means that you need intltool to compile The GIMP from CVS. Grab
	it from ftp://ftp.gnome.org/pub/GNOME/stable/sources/intltool/
	or out of gnomecvs module intltool. You shouldn't need it if you
	compile The GIMP from tarball.
	
	* data/misc/Makefile.am
	* data/misc/gimp.desktop.in.in: merge translations into the desktop
	file. 

2002-02-22  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: cleaned up --with-sendmail, --enable-threads and
	--enable-mp options. Added --with-gnome-desktop=PATH option.

	* data/misc/Makefile.am
	* data/misc/gimp.desktop.in.in: install a GNOME desktop file for
	The GIMP and create a link so GNOME-2.0 should be able to find it.
	Use --with-gnome-desktop=PATH to override the link location.

	* data/images/Makefile.am
	* data/images/wilber-icon.png: new file to serve as application icon.
	
	* plug-ins/script-fu/script-fu-scripts.c: register script-fu
	SF_ADJUSTMENT parameters as GIMP_PDB_FLOAT (spotted by Masahiro
	Sakai <zvm01052@nifty.ne.jp>).

2002-02-22  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpprogress.[ch]: removed...

	* app/display/Makefile.am
	* app/display/gimpprogress.[ch]: ...and added here. Prefixed
	everything with "gimp_".

	* app/gui/image-commands.c
	* app/plug-in/plug-in.c
	* app/tools/gimpblendtool.c
	* app/tools/gimptransformtool.c: changed accordingly.

2002-02-22  Michael Natterer  <mitch@gimp.org>

	* app/vectors/Makefile
	* app/vectors/Makefile.in: removed.

2002-02-22  Simon Budig  <simon@gimp.org>

	* app/vectors/Makefile
	* app/vectors/Makefile.am
	* app/vectors/Makefile.in
	* app/vectors/gimpanchor.h
	* app/vectors/gimpbezier.c
	* app/vectors/gimpbezier.h
	* app/vectors/gimpvectors.c
	* app/vectors/gimpvectors.h
	* app/vectors/vectors-types.h: new files, the beginning
	of a new vector infrastructure for gimp.
	
	* configure.in
	* app/Makefile.am
	* app/core/core-types.h: changed accordingly.

	* app/tools/Makefile.am
	* app/tools/gimpvectortool.c
	* app/tools/gimpvectortool.h
	* app/tools/tools.c: New tool without practical use (yet),
	using the new infrastructure.

	to be continued...

2002-02-21  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/floating_sel.[ch]: removed...

	* app/core/Makefile.am
	* app/core/gimplayer-floating-sel.[ch]: ...and added here.

	* app/undo.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpedit.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-projection.c
	* app/core/gimpimage-qmask.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage.c
	* app/core/gimplayer.c
	* app/gui/layers-commands.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* plug-ins/tools/common/gimpbrushselecttool.c
	* tools/pdbgen/pdb/floating_sel.pdb
	* tools/pdbgen/pdb/layer.pdb: changed includes accordingly.

	* app/pdb/floating_sel_cmds.c
	* app/pdb/layer_cmds.c: regenerated.

2002-02-21  Michael Natterer  <mitch@gimp.org>

	Made the paint tool PDB wrappers work again (a bit at least...)

	* app/Makefile.am: changed linking order. libtool sucks.

	* app/undo.c: check if active_tool is a GimpPaintTool before
	casting it.

	* app/paint/Makefile.am
	* app/paint/paint-types.h: added new files/types.

	* app/paint/gimppaintoptions.[ch]: new files cut out of
	tools/paint_options.h. Prefixed everything with "Gimp". There is
	still GtkWidget* cruft hanging around in the structs...

	* app/paint/gimppaintcore-stroke.[ch]: utility function
	which paints a stroke array. Needed for the PDB wrappers.

	* app/paint/gimpairbrush.[ch]
	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.[ch]
	* app/paint/gimpdodgeburn.[ch]
	* app/paint/gimperaser.[ch]
	* app/paint/gimppaintbrush.c
	* app/paint/gimppaintcore.[ch]
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.[ch]: added *_options_new() functions which
	create correctly initialized options structures without widgets.

	* app/tools/paint_options.[ch]: removed the options struct
	definitions and value initialisations.

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpinktool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpsmudgetool.c: changed all paint_options functions
	accordingly, s/PaintOptions/GimpPaintOptions/g etc., removed all
	#if 0'ed non_gui functions.

	* tools/pdbgen/pdb/paint_tools.pdb: use gimp_paint_core_stroke().
	We currently leak all paint_options structs created by the PDB
	wrappers, more stuff to come...

	* app/pdb/paint_tools_cmds.c: regenerated.

2002-02-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/glasstile.c: code cleanup based on a patch from
	Maurits Rijk <lpeek.mrijk@consunet.nl> (#72051).

2002-02-21  Michael Natterer  <mitch@gimp.org>

	Implemented #66921 (needs gimp-*-refresh in PDB)

	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/patterns.pdb: added gimp_*_refresh() procedures.

	* tools/pdbgen/pdb/palette.pdb: typo: s/patterns/palettes/

	* app/pdb/gradients_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* app/pdb/patterns_cmds.c
	* libgimp/gimpgradients_pdb.[ch]
	* libgimp/gimppalette_pdb.c: regenerated.

2002-02-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpdrawtool.c: return the corrent value in
	g_return_val_if_fail().

	* app/tools/gimppainttool.c: removed some more painting logic...

	* app/paint/gimppaintcore.[ch]: ...and added it here so the PDB
	wrappers can use it too. Added "gboolean use_pressure" which needs
	to be set by GimpPaintTool so we don't need access to GdkDevices.

2002-02-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colortoalpha.c: optimization and cleanup based
	on a patch from Maurits Rijk <lpeek.mrijk@consunet.nl> (#72044).

2002-02-20  Michael Natterer  <mitch@gimp.org>

	Implemented #7100 (initialize layer mask with a copy of the image)

	* app/core/core-types.h: added ADD_COPY_MASK and ADD_INV_COPY_MASK
	enum values.

	* app/pdb/layer_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/gimplayer.c (gimp_layer_create_mask): implement
	the new layer mask add modes.

	* app/gui/layers-commands.c (layers_add_mask_query): added radio
	buttons for the new modes.

	* app/paint-funcs/paint-funcs.c (flatten_region): this function
	was never needed so nobody noticed that it never worked. Fixed now.

	* app/undo.c
	* app/core/gimplayermask.h
	* app/core/gimpimage.c: the "mode" field of LayerMaskUndo is
	obsolete since some earlier 1.3 layer mask change. Removed it.
	(Makes mask undos work again)

2002-02-20  Michael Natterer  <mitch@gimp.org>

	Implemented #10125 ("quick" colour picker does not honour
	"sample merged")

	* app/tools/gimpcolorpickertool.[ch]: made definition of
	GimpColorPickerToolOptions public.

	* app/tools/gimppainttool.c: get the color picker's tool_options
	and pick colors accordingly. Also draw a rectangle for
	"sample_average".

2002-02-20  Michael Natterer  <mitch@gimp.org>

	Oops, yesterday's "fix" for #10466 made it even worse :)

	* app/core/gimpdrawable-transform.c: need the 0.5 offset to
	the pixel's center only for INTERPOLATION_NONE, as the LINEAR
	and CUBIC algorithms already know about their errors.

	* app/tools/gimpperspectivetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: some more s/gint/gdouble/ so the
	tools can detect pointer motions again...

2002-02-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/vinvert.c: applied a patch with some optimizations
	from Maurits Rijk <lpeek.mrijk@consunet.nl> (#71955).

2002-02-19  Michael Natterer  <mitch@gimp.org>

	Fixed #10466 (disappearing pixels when rotating by 90 deg):

	* app/core/gimpdrawable-transform.c: when transforming backwards
	to find the destination line's sub-pixel source coordinates, we
	need to transform the pixels _center_, not it's upper left corner.

	* app/core/gimpdrawable-transform-utils.[ch]: added
	gimp_drawable_transform_matrix_rotate_center() which takes double
	center coordinates instead of an integer pixel bounding box.

	* app/tools/gimptransformtool.[ch]: use double instead of int for
	all coordinates except the original bounding box.

	* app/tools/gimprotatetool.c: use double whenever touching the
	"center" value, so it can be sub-pixel positioned.

2002-02-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/pagecurl/pagecurl.c: code cleanup based on a patch from 
	Maurits Rijk <lpeek.mrijk@consunet.nl> (#71866).

2002-02-18  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpintl.h: removed INIT_LOCALE() macro. Error out if
	config.h wasn't included before.

	* app/main.c: directly call the appropriate functions to set up I18N.
	
	* libgimp/libgimp-intl.h: error out if config.h wasn't included.

	* plug-ins/script-fu/script-fu-intl.h: set codeset to UTF-8.

2002-02-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/tools-types.h
	* app/tools/*.[ch]: chain up unconditionally in control(),
	s/ToolAction/GimpToolAction/g, s/ToolState/GimpToolState/g.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimppainttool.c: don't touch tool->paused_count
	(setting it to 0 was a hack which should no longer be needed).

	* app/tools/gimpdrawtool.c: check if the draw tool has actually
	been started (draw_tool->gdisp != NULL) before calling it's
	draw() function.

	* app/tools/tool_manager.c: simplified tool_manager_control_active():
	simply call gimp_tool_control() if gdisp == tool->gdisp.

	* app/tools/gimptool.[ch]: gimp_tool_control(): do all the PAUSE,
	RESUME and HALT voodoo here.

	* app/tools/gimppainttool.c: implemented #9902 (Drawing straight
	lines does not work between different views). It's an evil hack,
	but clearly marked in the source.

2002-02-18  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c
	* app/base/temp-buf.c
	* app/core/gimpmodules.c
	* app/plug-in/plug-in.c
	* libgimpbase/gimpenv.c
	* libgimpwidgets/gimpfileselection.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/gimpressionist.[ch]: use g_file_test()
	instead of stat() whereever possible. Improves code readability.

2002-02-18  Sven Neumann  <sven@gimp.org>

	* configure.in: require latest glib and gtk+ releases (1.3.14).
	Bumped our version number to 1.3.4.

2002-02-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c: implement thumbnail loading according
	to the latest version of the Thumbnail Managing standard.
	
	* app/widgets/gimpimagefilepreview.[ch]: draw a GTK_DIALOG_QUESTION 
	pixbuf when no preview is available. The implementation is a bit ugly
	but we can improve this later when GimpPreview has been generalized
	to accept pixbufs also.

	* themes/Default/gtkrc: register the icons for GtkWidget instead of
	GtkImage so they can be used from other widgets too.

	* plug-ins/common/zealouscrop.c: merged fix for bug #71795 from
	stable branch.

2002-02-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/aa.c: code cleanup based on a patch from 
	Maurits Rijk <lpeek.mrijk@consunet.nl>.

2001-02-17  Manish Singh  <yosh@gimp.org>

	* app/core/Makefile.am: add a -DGIMP_COMPILATION so cpercep can
	optionally include glib.h. This needs to be done in the makefile.msc
	too, but I'm unsure on the right way to do that.

	* app/core/cpercep.c: guard #include <glib.h> in GIMP_COMPILATION.
	cbrt() is a GNU extension, so define in terms of pow if we aren't
	on glibc. Guard CLAMP against redefinition.

	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/gimpressionist.c: make them build again

2001-02-17  Hans Breuer  <hans@breuer.org>

	* */*/makefile.msc */makefile.msc : from now on use 
	make.msc from $(TOP)/glib/build/win32; all occurences
	of DIRENT removed and general update

	* app/config/makefile.msc app/paint/makefile.msc
	  app/plug-in/makefile.msc themes/Default/makefile.msc :
	new files

	* app/base/base.c : ported to GDir usage

	* app/config/gimpconfig-serialize.c :
	  app/config/gimpconfig-deserialize.c : HAVE_UNISTD_H
	* app/config/gimpconfig.c :
	  app/config/gimprc.c : HAVE_UNISTD_H, use <io.h> for
	open() prototype and merged pmode parameter 
	(_S_IREAD | _S_IWRITE)

	* app/core/cpercep.c : msvc doesn't have cbrt(), provide
	it via pow(). Also include <glib.h> for painless 'inline'
	definition.

	* app/core/gimpdatafiles.c : ported to GDir usage

	* app/core/gimpimage-convert.c : work around a msvc compiler
	limitation (can't convert from uint64 to double)

	* app/file/file-open.c app/file/file-save.c :
	access() -> _access() for G_OS_WIN32

	* app/plug-in/plug-in.c : HAVE_UNISTD_H and <io.h>

	* libgimpbase/gimpbase.def : updated externals

	* libgimpbase/gimpenv.c : define WIN32_LEAN_AND_MEAN to
	avoid clashes with incompatible DATADIR definitions

	* libgimpcolor/gimpcolor.def : updated externals

	* lingimpmath/gimpmath.def : updated externals

	* libgimpwidgets/gimpwidgets.def : updated externals

	* libgimpwidgets/libgimp-glue.c : adapt to const changes
	of some prototypes

	* plug-ins/makefile.msc : disabled gdyntext

	* plug-ins/gap/iter_ALT/*/*.inc : GimpRunModeType -> GimpRunMode

	* plug-ins/FractalExplorer/FractalExplorer.c :
	* plug-ins/gap/gap_lib.c :
	* plug-ins/gfig/gfig.c :
	* plug-ins/gflare/gflare.c :
	* plug-ins/gimpressionist/gimpressionist.c :
	replaced DIRENT usage with GDir

	* plug-ins/script-fu/script-fu-scripts.c : #include <windows.h>
	to get the Sleep() prototype

2002-02-17  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]: made
	gimp_display_shell_update_icon() public, removed the update_icon
	signal handler and idle function.

	* app/display/gimpdisplayshell-handlers.c: added the update_icon
	stuff here so it get's properly dis- and reconnected.

2002-02-17  Michael Natterer  <mitch@gimp.org>

	Fixed #34633 (wheel mouse zooming leaves straigth-line helpline on
	image) and maybe some other stuff caused by the misbehaviour
	described below:

	* app/tools/tools-types.h
	* app/tools/tool_manager.c (tool_manager_control_active):

	Removed the "PAUSED" ToolState.

	The possible state transitions were INACTIVE <-> ACTIVE <-> PAUSED,
	where the ACTIVE <-> PAUSED transition was done only in the
	tool_manager, causing the tools's control() never to be called
	when the tool was INACTIVE.

	The GimpPaintTool however wants to draw on the display when it's
	INACTIVE, and of course wants to be suspended/resumed correctly
	while fiddling with display repainting/scaling/...

	The PAUSED state was also redundant information, since
	(tool->paused_count > 0) is the same information (only more
	correct and independent of tool activity).

	* app/display/gimpdisplayshell-scale.[ch]: suspend/resume the
	active tool around _all_ changes to the display's "scale" and
	"offset" fields.  Added new function
	gimp_display_shell_scale_by_values() which does that and is called
	from all places which need to change these values.

	* app/tools/gimpmagnifytool.c: changed accordingly.

	Unrelated stuff:

	* app/paint/gimpairbrush.c: added a #warning FIXME.

	* app/tools/gimpdrawtool.c: made a warning more verbose.

	* app/tools/gimppainttool.c: put one more drawable offset
	calculation in { .. }, will make a utility function out of it...

2002-02-16  Manish Singh  <yosh@gimp.org>

	* app/gui/file-open-dialog.c: use new GtkFileSelection multiselect
	API.

2002-02-15  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-handlers.c: added back the handler
	which invalidates the display_title on dirty/clean. Removing it
	was simply wrong.

	* app/display/gimpdisplayshell-scale.c: don't call
	gimp_display_shell_update_title() directly but set
	shell->title_dirty to TRUE before calling gdisplays_flush().

	* app/paint/gimppaintcore.[ch]: added gimp_paint_core_constrain()
	which does the "snap to 15 degrees" stuff formerly done in
	GimpPaintTool. Call gimp_brush_select_brush() in
	gimp_paint_core_paint() if paint_state == MOTION, not in several
	other places.  Reordered functions, added some comments and
	documentation.

	* app/paint/gimpairbrush.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimperaser.c
	* app/paint/gimppaintbrush.c
	* app/paint/gimppencil.c
	* app/paint/gimpsmudge.c:
	s/CORE_CAN_HANDLE_CHANGING_BRUSH/CORE_HANDLES_CHANGING_BRUSH/g,
	minor cleanup.

	* app/pdb/pdb-types.h: include "paint/paint-types.h"

	* app/tools/gimppainttool.[ch]: use gimp_paint_core_constrain(),
	removed paint_tool->state because it's not needed any more,
	lots of cleanup.

	* tools/pdbgen/app.pl: another eeky special case for "paint/".

	* tools/pdbgen/pdb/paint_tools.pdb: include stuff from "paint/",
	not "tools/".

	* app/pdb/paint_tools_cmds.c: regenerated.

2002-02-14  Michael Natterer  <mitch@gimp.org>

	Core/UI separation for the paint tools:

	* configure.in
	* app/Makefile.am
	* app/paint/.cvsignore
	* app/paint/Makefile.am: added new directory for the paint methods
	without GUI and tools around them.

	* app/paint/paint-types.h: typedefs for this module.

	* app/paint/gimppaintcore-kernels.h
	* app/paint/gimppaintcore.[ch]: the general paint logic taken
	from GimpPaintTool.

	* app/paint/gimpairbrush.[ch]
	* app/paint/gimpclone.[ch]
	* app/paint/gimpconvolve.[ch]
	* app/paint/gimpdodgeburn.[ch]
	* app/paint/gimperaser.[ch]
	* app/paint/gimppaintbrush.[ch]
	* app/paint/gimppencil.[ch]
	* app/paint/gimpsmudge.[ch]: subclasses of GimpPaintCore,
	implementing their own paint() methods.  Needs more hacking
	to get the GtkWidget pointers out of the options structs.

	* app/tools/gimppainttool_kernels.h: removed.

	* app/tools/tools-types.h: removed the paint tool enums.

	* app/tools/gimpairbrushtool.[ch]
	* app/tools/gimpclonetool.[ch]
	* app/tools/gimpconvolvetool.[ch]
	* app/tools/gimpdodgeburntool.[ch]
	* app/tools/gimperasertool.[ch]
	* app/tools/gimppaintbrushtool.[ch]
	* app/tools/gimppainttool.[ch]
	* app/tools/gimppenciltool.[ch]
	* app/tools/gimpsmudgetool.[ch]: all paint tools are pure GUI
	things now.  PaintOptions and friends still need to be chopped up
	though...

	* app/undo.c: changed PaintUndo to GimpPaintCoreUndo, some minor
	cleanup.

	* tools/kernelgen.c: changed accordingly.

	* tools/pdbgen/Makefile.am: scan paint/paint-types.h for enums.

	* tools/pdbgen/pdb/paint_tools.pdb: hardcode "success = FALSE" for
	all paint PDB wrappers.  The non-gui stuff is completely broken.
	More commits to come...

	* app/pdb/paint_tools_cmds.c
	* tools/pdbgen/enums.pl: regenerated.

2002-02-13  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppainttool.[ch]: moved all global variables into
	the GimpPaintTool structure so they have a proper lifecycle and
	it's easier to move them to the upcoming GimpPaintCore (??)
	object.

	* app/tools/gimppainttool_kernels.h
	* tools/kernelgen.c: s/SUBSAMPLE/KERNEL_SUBSAMPLE/

2002-02-13  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: moved "Merge Layers" and "Flatten Image" from
	"Layer/" to "Image/", removed them from the "<Layers>" menu
	entirely, moved "Merge Down" after "Anchor Layer" in both menus.

	* app/gui/image-commands.[ch]: moved callbacks from here...

	* app/gui/layers-commands.[ch]: ...to here.

	* app/gui/layers-commands.[ch]
	* app/display/gimpdisplayshell.c: changed menu_update functions
	accordingly.

2002-02-12  Nathan Summers  <rock@gimp.org>

	* plug-ins/tools/.cvsignore
	* plug-ins/tools/Makefile.am: new directory for tool plug-ins

	* plug-ins/tools/common/.cvsignore
	* plug-ins/tools/common/Makefile.am: unified directory for single-file
	tool plug-ins, just like the "common" subdirectory for plug-ins

	* plug-ins/tools/common/gimpbrushselecttool.[ch]: start of a
	tool plug-in that uses the current brush to select from the image.

	* configure.in
	* plug-ins/Makefile.am: changed accordingly


2002-02-12  Michael Natterer  <mitch@gimp.org>

	* app/gui/edit-commands.c: merged partial fix for #62592 from
	stable branch.

2002-02-12  Michael Natterer  <mitch@gimp.org>

	* app/gui/resize-dialog.c: merged fix for #63741 from stable
	branch, minor cleanup.

2002-02-12  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c: changed "Nearest Neighbor" interpolation
	to "None".

2002-02-12  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: scale_region_no_resample() no
	longer needs to be public, as we can call
	scale_region(src, dest, GIMP_INTERPOLATION_NONE).

2002-02-12  Nathan Summers  <rock@gimp.org>

	* app/plug-in/plug-in-rc.c: implement a new pluginrc flag,
	"has-init", so that only plug-ins with init functions are
	initialized.

	* app/plug-in/plug-in.ch
	* libgimp/gimp.c
	* libgimpbase/gimpprotocol.ch: send a new gimpwire message,
	GP_HAS_INIT during the query stage if the plug-in needs to be
	initialized.  Only invoke the plug-in in init mode if the plug-in
	has an init function.  Incremented the interface age.

	(inspired by a patch by Tor Lillqvist available at 
	http://bugzilla.gnome.org/showattachment.cgi?attach_id=6214)

2002-02-12  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.h: renamed GimpInterpolationType values to
	something sane and unexported it from the PDB since it was never
	used in any PDB calls.
	
	* app/gimprc.c
	* app/config/gimpcoreconfig.c
	* app/core/gimpcoreconfig.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimplayer.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/paint-funcs/paint-funcs.c
	* app/pdb/transform_tools_cmds.c
	* app/tools/transform_options.c
	* tools/pdbgen/pdb/transform_tools.pdb: changed accordingly.
	
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2002-02-11  Nathan Summers  <rock@gimp.org>

	* app/plug-in/plug-in.[ch]
	* libgimp/gimp.c: added support for the init function in plug-ins 
	(fixes bug #66859).

2002-02-12  Michael Natterer  <mitch@gimp.org>

	Made the interpolation type configurable in the scale and
	transform options dialogs (#69251):

	* app/base/base-config.[ch]
	* app/config/gimpbaseconfig.[ch]: removed interpolation_type here...

	* app/core/gimpcoreconfig.[ch]
	* app/config/gimpcoreconfig.[ch]: ...and added it here.

	* app/gimprc.c
	* app/gui/preferences-dialog.c: changed accordingly.

	* app/paint-funcs/paint-funcs.[ch]: scale_region: take an
	interpolation_type parameter.

	* app/core/gimpchannel.[ch]
	* app/core/gimpdrawable-transform.[ch]
	* app/core/gimpimage-scale.[ch]
	* app/core/gimplayer.[ch]: pass interpolation_type parameters to all
	scale and transform functions.

	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: changed accordingly.

	* app/gui/resize-dialog.[ch]
	* app/tools/transform_options.[ch]: added an interpolation_type menu.

	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/tools/gimptransformtool.c: changed accordingly.

	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2002-02-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/MapObject/mapobject_preview.c: 
	s/gdk_image_get/gdk_drawable_get_image/

	* plug-ins/MapObject/mapobject_ui.c: fixed wrong refcounting of 
	GtkImage.

2002-02-11  Sven Neumann  <sven@gimp.org>

	* libgimpmath/Makefile.am
	* libgimpmath/gimpmath.h
	* libgimpmath/gimpmd5.[ch]
	* libgimpmath/test-md5.c: added MD5 digest algorithm (based on code
	taken from evolution). We will need this to implement the thumbnail
	standard (http://triq.net/~pearl/thumb-spec.php).

2002-02-11  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.[ch]
	* app/config/gimpdisplayconfig.[ch]
	* app/gui/preferences-dialog.c: made the string which appears in
	the display's statusbar configurable separately from the title
	string. They still both have the same default value.

	* app/display/gimpdisplayshell.c: changed accordingly.

	Also added lots of new % expansions which implement all stuff
	mentioned in #5843. Didn't apply the original patch because it is
	overly complicated (the same can be acheived using %D and %C).
	Instead, applied a changed version of gimp-quinet-000618-0.patch.
	Added %Cx, which expands to 'x' if the image is clean.

	* docs/gimprc-1.3.5.in
	* etc/gimprc.in
	* etc/gimprc.win32: added documentation for the new stuff.

2002-02-11  Nathan Summers  <rock@gimp.org>

	* gui/preferences-dialog.c: s/directory/folder/ and other
	bex-approved proofreads.

2002-02-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/jpeg.c: merged fix for bug #69127 from stable branch.

2002-02-11  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpbucketfilltool.c
	* app/tools/selection_options.c: added missing tooltips, enabled
	"reset" for the new select/fill transparent toggles.

2002-02-11  Michael Natterer  <mitch@gimp.org>

	* etc/gimprc.in
	* etc/gimprc.win32: document the new %m image-title-format expansion.

2002-02-11  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in.c: small hack that strips the ellipses
	from the "Repeat" and "Re-Show" menu entries.

	* plug-ins/mosaic/mosaic.c: register under "Filters/Distorts", not
	"Filters/Render" because this plug-in changes the image and
	doesn't render something from scratch.

2002-02-11  Sven Neumann  <sven@gimp.org>

	* TODO.xml: updated.

2002-02-10  Sven Neumann  <sven@gimp.org>

	* Made 1.3.3 release.
	
2002-02-10  Sven Neumann  <sven@gimp.org>

	* NEWS: updated.
	
	* app/batch.c
	* app/general.c
	* app/core/gimpbrushgenerated.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpdata.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/file/file-utils.c: don't include ctype.h, use g_ascii_* 
	functions from GLib instead.

	* app/gui/file-open-dialog.c: disabled multiple selection in the
	file open dialog until this is fixed in GTK+.

2002-02-10  Adam D. Moss  <adam@gimp.org>

	* app/core/gimpimage-convert.[ch]:
	RGB->Indexed quantizer version 3.0 (the rest of the commit started
	a year ago -- whoops).  Divide colours within CIE L*a*b* space using
	CPercep module (cpercep.[ch]), colour-match and dither likewise,
	change the underlying box selection criteria and division point
	logic, bump luminance precision upwards, etc. etc.

	* app/core/cpercep.[ch] (new files): utility module used by
	quantizer for quantifying perceptual colour distances

	* app/core/gimpimage-convert-data.h (new file): move the big
	static data arrays out of gimpimage-convert.c

	* app/core/gimpimage-convert-fsdither.h: static-ify data

	* app/core/Makefile.am: add cpercep.[ch] and gimpimage-convert-data.h

2002-02-10  Michael Natterer  <mitch@gimp.org>

	* app/undo.c: removed #if 0'ed old display update hackery. Don't
	flush the displays here at all and include nothing from
	"display/".

	* app/undo_history.c
	* app/gui/edit-commands.c: call gdisplays_flush() if undo_pop() or
	undo_redo() return TRUE.

	* app/core/gimpimage-contiguous-region.[ch]: allow a contiguous
	transparent region to be selected/filled (#71058).

	* app/core/gimpdrawable-bucket-fill.[ch]
	* app/core/gimpimage-mask-select.[ch]: take a boolean
	fill_transparent/select_transparent parameter and pass it to the
	contiguous region funcion.

	* app/display/gimpdisplayshell-dnd.c: pass
	fill_transparent == FALSE to bucket_fill_full because we fill the
	whole drawable anyway here.

	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/selection_options.[ch]: added toggle buttons to the
	tool options and pass the value to the fill and select core
	functions.

	* tools/pdbgen/pdb/misc_tools.pdb
	* tools/pdbgen/pdb/selection_tools.pdb: hardcode
	"select_transparent" to FALSE to get the old behaviour. Should
	export the new feature to plug-ins however.

	* app/pdb/misc_tools_cmds.c
	* app/pdb/selection_tools_cmds.c: regenerated.

2002-02-09  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptoolmodule.[ch]
	* app/tools/tools-types.h
	* app/tools/tools.c: code cleanup, no real changes.

2002-02-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gradmap.c: merged fix for bug #70964 from stable 
	branch.

2002-02-08  Nathan Summers  <rock@gimp.org>

	* app/tools/gimptoolmodule.[ch]: split registering classes and
	registering tools into separate functions. Makes tool plug-ins
	actually work!

	* app/tools/tools.c: replaced extremely ugly temporary hack for
	loading tool modules with ugly temporary hack for loading tool
	modules.

2002-02-08  Sven Neumann  <sven@gimp.org>

	* app/gui/tips-dialog.c
	* app/gui/user-install-dialog.c
	* libgimpwidgets/gimpfileselection.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/presets.c
	* plug-ins/script-fu/script-fu-scripts.c: use the term Folder instead
	of Directory (bug #56194).

	* etc/gimprc.in
	* etc/gimprc.win32: added global palettes folder to the palettes
	search path.

	* data/misc/user_install: don't copy palettes into users ~/.gimp-1.3.
	
2002-02-08  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.[ch]: added gimp_rc_duplicate() and started to
	add inline documentation.
	
	* app/config/test-config.c: test the new functionality.

2002-02-08  Sven Neumann  <sven@gimp.org>

	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c: added missing finalizers.

2002-02-07  Nathan Summers  <rock@gimp.org>

	* app/tools/gimptoolmodule.[ch]: New class that uses GTypeModule to
	dynamically load tool plugins.  Does not quite work yet, but builds
	correctly.

	* app/tools/tools.c: added some code to test the GimpToolModule code.

	* app/tools/Makefile.am: added gimptoolmodule to the build.

2002-02-07  Nathan Summers  <rock@gimp.org>

	* app/gimprc.c
	* app/config/gimpcoreconfig.[ch]
	* app/core/gimpcoreconfig.[ch]
	* app/gui/preferences-dialog.[ch]
	* etc/gimprc.in: add a preferences option for tool plug-ins,
	in anticipation of future work on them. Tool plug-ins should be 
	in a separate directory so that the plug-in codecan distinguish 
	them.  
	
2002-02-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-new.[ch]: renamed the image size utility
	functions from foo_size_bar() to foo_memsize_bar(), use "gsize"
	instead of "gdouble". Also take the selection mask into account
	for the initial image size.

	* app/display/gimpdisplayshell.c
	* app/gui/file-new-dialog.c: changed accordingly.

	* app/display/gimpdisplayshell-handlers.c: connect to "undo_event",
	not "dirty" and "clean" to dirty the image title.

	* app/tools/gimpmovetool.c: factored common code out to
	gimp_move_tool_start_guide(), also set a useful cursor there.

2002-02-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpwidgets-utils.c (gimp_message_box): changed the
	message dialog icon to WARNING since we mostly use this for
	warnings. We should change the API so that gimp_message knows
	about the severity of the message it displays.
	
	* themes/Default/images/stock-wilber-16x16.png
	* themes/Default/images/stock-wilber-32x32.png
	* themes/Default/images/stock-wilber-48x48.png
	* themes/Default/images/stock-wilber-64x64.png: slightly better icons.

	* themes/Default/Makefile.am
	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-wilber-eek.png: added a new eek wilber
	based on suggestions made in bug-report #65194. Actually I'd like it
	be more eeeky, so feel free to submit a better one.
	
	* libgimpwidgets/gimpstock.[ch]: register the new stock icon.

	* app/gui/gui.c (gui_really_quit_dialog): use STOCK_WILBER_EEK.

2002-02-07  Sven Neumann  <sven@gimp.org>

	* app/gui/file-new-dialog.c
	* app/gui/resize-dialog.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c: moved Cancel button to the left.

	* data/images/Makefile.am
	* data/images/tips_wilber.png: removed ...
	* data/images/wilber-tips.png: ... and readded under a new name.

	* app/gui/tips-dialog.c: changed accordingly.

	* data/images/wilber-wizard.png: new wilber for the user installation
	dialog.

	* app/gui/user-install-dialog.c: use the new wilber icon. We still
	need a good new eeek wilber.

	* themes/Default/gtkrc: don't change the default font size.

2002-02-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpobject.c: made the gimp_object_get_memsize()
	debugging output configurable by a global "gimp_debug_memsize"
	boolean.

	* app/display/gimpdisplay.c: removed duplicated prototype.

	* app/display/gimpdisplayshell.[ch]: renamed the various cursor
	functions to be more consistent and shorter. Compress window title
	updates by adding a "gboolean title_dirty" and updating the title
	in gimp_display_shell_flush().  Added "%m" (memory size) to the
	possible title string substitutions.

	* app/display/gimpdisplay-foreach.c
	* app/display/gimpdisplayshell-handlers.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimptool.c: changed accordingly.

	* app/display/gimpdisplayshell-callbacks.c: forgot to grab the
	pointer when dragging guides from the rulers. Coincidentially,
	this also fixes the buggy offset between guide and mouse
	pointer...
	Cleaned up the main tool event callback a bit more.

	* app/widgets/gimppreview.c
	* app/gui/commands.c: set the new global "gimp_debug_memsize"
	toggle to TRUE while calling gimp_object_get_memsize().

	* app/gui/preferences-dialog.c: added a image title example
	containing the new "%m" feature.

	* docs/gimprc-1.3.5.in: document "%m" in the manpage.

	* app/tools/gimpbezierselecttool.c: reordered some statements.

	* app/tools/gimpdrawtool.[ch]: store the GimpDisplay passed to
	gimp_draw_tool_start() in draw_tool->gdisp and use it for
	coordinate transfomration. This way we can draw on a display
	which is not tool->gdisp.

	* app/tools/gimppainttool.c: changed the gimp_draw_tool_foo()
	calls needed to make the straight_line preview work in a way
	that does not interfere with paint_tool subclasses which want
	to do their own drawing (like the clone tool).

	Also changed the paint_tools PRETRACE_PAINT and POSTTRACE_PAINT
	flags usage in a way that subclasses can use them without major
	hackery: don't simply wrap gimp_display_flush_now() with
	PRETRACE/POSTTRACE calls, but wrap the actual painting calls, so
	subclasses are able to do useful things with paint_tool->*_coords.

	* app/tools/gimpclonetool.c: removed poking around in draw_tool
	internals and simply suspend()/resume() it in
	PRETRACE_PAINT/POSTTRACE_PAINT to get the clone_src indicator
	drawn correctly.

2002-02-05  Michael Natterer  <mitch@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/flame/flame.c
	* plug-ins/fp/fp_gtk.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gfli/gfli.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/maze/maze_face.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/sel2path/sel2path.c: reordered action_area buttons.

	* themes/Default/gtkrc: namespace cleanup.

2002-02-05  Michael Natterer  <mitch@gimp.org>

	Removed pointer grabbing from all tools:

	* app/tools/gimptool.[ch]: added "gboolean perfectmouse" which
	defaults to FALSE but can be set to TRUE in a tool's instance_init
	function.

	* app/display/gimpdisplayshell-callbacks.c: look at
	active_tool->perfectmouse and gimprc.perfectmouse and do the
	pointer grab/ungrab here. The pointer is now grabbed right before
	dispatching the button_press to the tool and ungrabbed after
	the tool's button_release has returned. It is also grabbed
	*always*, not only if tool->state got ACTIVE by button_press,
	which makes it all much simpler...

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c: removed
	gdk_pointer_grab()/ungrab() calls all over the place. Also removed
	inclusion of "display/gimpdisplayshell.h" from most of them.

2002-02-04  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptool.[ch]: added fields for both the tool's
	toggled and untoggled GdkCursorType, GimpToolCursorType and
	GimpCursorModifier. Added a default implementation of
	gimp_tool_cursor_update() which uses the new fields. Added
	gimp_tool_set_cursor() as simple wrapper around the resp.
	GimpDisplayShell functions so tools don't need to know them.

	Tool implementations can either set the new fields in their
	cursor_update() function and chain up or call the new wrapper.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.[ch]
	* app/tools/gimppathtool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c: changed accordingly:

	- set default values in the tools' instance_init functions.
	- changed the cursor_update() stuff.
	- removed inclusion of subclasses in gimppainttool.c
	- the cursor_update() functions are better than before but still evil.
	- i probably broke some of them...

	* app/tools/gimptool.c: fixed NULL pointer dereference by using
	the tools's class name as identifier for gimp_statusbar_foo()
	instead of accessing tool->tool_info (which may be NULL)
	(spotted by David Odin).

2002-02-03  Manish Singh  <yosh@gimp.org>

	* libgimpwidgets/gimpwidgets.c: ref and sink the adjustment we use
	for the mem_size_entry.

2002-02-03  Manish Singh  <yosh@gimp.org>

	* docs/Makefile.am: don't install gimp-remote manpage yet

2002-02-03  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c: merged fix from stable branch (#70344).
	
	* plug-ins/common/smooth_palette.c: merged fix from stable branch
	(#70333).

2002-02-03  Manish Singh  <yosh@gimp.org>

	* configure.in
	* tools/Makefile.am: commit everything this time (see my previous
	log entry).

2002-02-03  Sven Neumann  <sven@gimp.org>

	* configure.in
	* tools/Makefile.am: fixed the build by trying to do the changes
	Yosh didn't commit.

2002-02-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/frosty-logo.scm: don't redefine min.
	Thanks to Jeff Trefftzs <trefftzs@tcsn.net> for spotting this.

2002-02-03  Michael Natterer  <mitch@gimp.org>

	* app/display/Makefile.am
	* app/display/display-types.h
	* app/display/gimpstatusbar.[ch]: new widget derived from
	GtkStatusbar.  Contains the coordinates display, a progress bar
	which is also used for status message display and a cancel button.
	Added a simplified API for pushing/popping messages which takes a
	string as context_id and does the conversion to guint internally
	on each call.

	* app/display/gimpdisplayshell.[ch]: removed the status bar code.

	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell-scale.c
	* app/gui/view-commands.c
	* app/gimpprogress.c: changed accordingly.

	Removed knowledge about GimpDisplayShell from tools:

	* app/tools/gimptool.[ch]: added gimp_tool_push_status() and
	gimp_tool_pop_status() so tools don't need to fiddle with
	display details.

	* app/tools/gimpdrawtool.[ch]: pass a GimpDisplay instead of
	a GdkWindow to gimp_draw_tool_start() (the window passed was
	always gdisp->shell->canvas->window).

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.[ch]
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.[ch]
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.[ch]
	* app/tools/gimppathtool.c
	* app/tools/gimprectselecttool.[ch]
	* app/tools/gimptransformtool.c: changed accordingly:

	- pass GimpDisplay to gimp_draw_tool_start().
	- use GimpTool's new status push/pop functions.
	- removed the statusbar context_id from all tool structs.

	* app/gui/dialogs-constructors.[ch]: a bit cleanup in preparation
	of dockable editor dialogs.

2002-02-02  Manish Singh  <yosh@gimp.org>

	* configure.in
	* Makefile.am
	* app/Makefile.am 
	* docs/Makefile.am
	* plug-ins/print/Makefile.am
	* tools/Makefile.am
	* (the various manpages): versioned the binaries and manpages.
	Added an --enable-default-binary switch to configure to make
	symlinks for unversioned things (defaults to no for 1.3). The
	perl stuff isn't touched, but that's disabled in the build here
	anyway.

2002-02-01  Manish Singh  <yosh@gimp.org>

	* libgimpwidgets/gimppatheditor.[ch]: treeviewized and undeprecated

	* plug-ins/webbrowser/webbrowser.c: set_size_request takes a 0 size
	and makes it 1 instead of -1 like set_usize did, so pass -1

2002-01-31  Simon Budig  <simon@gimp.org>

	* plug-ins/rcm/rcm.c: register as "plug_in_rotate_colormap"
	instead of "plug-in-rotate-colormap". This fixes the usage
	in gimp-python (despite the fact that there is no PDB
	interface)

2002-01-31  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.c
	* app/core/gimpdocuments.c
	* app/core/gimpmodules.c
	* app/core/gimppalette.c: fixed some get_memsize()
	implementations, give useful names to some global objects so the
	new mem profile of "the_gimp" looks nicer.

	* app/gui/menus.c
	* app/gui/commands.[ch]: added a "Debug" menu to the toolbox,
	offer a mem profile of the global "Gimp" instance.

2002-01-31  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.[ch]: removed gimp_layer_has_alpha(), use
	gimp_drawable_has_alpha() instead.

	* app/core/gimpimage-convert.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-projection.c
	* app/display/gimpdisplayshell.c
	* app/gui/layers-commands.c: changed accordingly.

	* app/core/gimpimage.[ch]: added gimp_image_has_alphe(), made some
	variable names more verbose and use enum types instead of "gint"
	in functions calling initial_region() and combine_regions().

	* app/widgets/gimpchannellistview.c: show an alpha channel preview
	only if the image has alpha.

	* app/widgets/gimppreview.c: reordered functions,
	gimp_preview_render_and_flush(): fixed channel preview rendering,
	calculate the component byte offsets before entering the render
	loop instead of duplicating the render code for the gray/alpha
	case.

2002-01-31  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfontselection-dialog.c: use GtkTreeViews instead of 
	deprecated GtkCLists.
	
	* app/widgets/gimpfontselection.c: use a proper size for the eeky hack.

2002-01-31  Manish Singh  <yosh@gimp.org>

	* app/gui/file-open-dialog.c: fixed up so it works with the patch
	I posted to gtk-devel-list. Real fix pending discussion there.

2002-01-30  Sven Neumann  <sven@gimp.org>

	* app/gui/about-dialog.c: GDK_RGB_DITHER_NORMAL should be good enough.
	
	* app/gui/preferences-dialog.c: undef GTK_DISABLE_DEPRECATED for
	GtkListItem.
	
	* app/widgets/gimpcomponentlistitem.c: don't use GtkPreview methods
	on a GimpPreview. The component views are still broken but at least
	the warnings are gone.
	
	* app/widgets/gimpfontselection.c: fixed warnings by hardcoding a 
	font size when validating a font name :-(
	
	* app/widgets/gimppreview.c: set allocation to desired size.
	
	* libgimpwidgets/gimpcolorarea.c: flipped so it looks like before
	the port to GtkDrawingArea. Use GDK_RGB_DITHER_MAX to render.

2002-01-30  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppreview.[ch]: derive from GtkDrawingArea
	instead of deprecated GtkPreview.

	* app/gui/buffers-commands.c
	* app/gui/device-status-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/indicator-area.c
	* app/gui/info-window.c
	* app/gui/palette-import-dialog.c
	* app/gui/palettes-commands.c
	* app/gui/test-commands.c
	* app/gui/tool-options-dialog.c
	* app/gui/toolbox.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpimagedock.c
	* app/widgets/gimpmenuitem.c: removed #undef GTK_DISABLE_DEPRECATED.

2002-01-30  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorarea.c: pass a GdkGC to
	gdk_draw_rgb_image(), fixed dither offsets.

	* app/core/gimpobject.[ch]: new virtual function
	gimp_object_get_memsize().

	* app/base/temp-buf.[ch]
	* app/base/tile-manager.[ch]: added *_get_memsize() methods.

	* app/core/gimp.c
	* app/core/gimpbrush.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpbuffer.c
	* app/core/gimpchannel.c
	* app/core/gimpcontainer.c
	* app/core/gimpcontext.c
	* app/core/gimpdata.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdrawable.c
	* app/core/gimpgradient.c
	* app/core/gimpimage.c
	* app/core/gimplayer.c
	* app/core/gimplist.c
	* app/core/gimpmoduleinfo.c
	* app/core/gimppalette.c
	* app/core/gimpparasitelist.c
	* app/core/gimppattern.c
	* app/core/gimppreviewcache.[ch]
	* app/core/gimpundo.[ch]
	* app/core/gimpundostack.c
	* app/core/gimpviewable.c: added get_memsize() implementations.

	* app/widgets/gimppreview.c
	* app/core/gimpobject.[ch]: some #ifdef DEBUG_MEMSIZE code to
	test the new memsize stuff (middle click any preview to get
	it's viewable's memory footprint).

2002-01-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Events.c
	* plug-ins/FractalExplorer/FractalExplorer.[ch]
	* plug-ins/FractalExplorer/Globals.c
	* plug-ins/common/film.c
	* plug-ins/common/plugindetails.c
	* plug-ins/fp/fp_misc.c
	* plug-ins/rcm/rcm_callback.c
	* plug-ins/rcm/rcm_misc.c: removed the ugly hacks and simply define
	GTK_DISABLE_DEPRECATED before including gtk.h.

2002-01-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.[ch]: derive from GtkDrawingArea
	instead of deprecated GtkPreview.

	* app/nav_window.c
	* app/gui/brush-editor.c
	* app/gui/buffers-commands.c
	* app/gui/color-select.c
	* app/gui/colormap-dialog.c
	* app/gui/device-status-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/file-open-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/indicator-area.c
	* app/gui/info-window.c
	* app/gui/palette-editor.c
	* app/gui/palette-import-dialog.c
	* app/gui/palettes-commands.c
	* app/gui/test-commands.c
	* app/gui/tool-options-dialog.c
	* app/gui/toolbox.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimpimagedock.c
	* app/widgets/gimpitemfactory.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplistitem.c
	* app/widgets/gimpmenuitem.c
	* app/widgets/gimppreview.c
	* libgimp/gimpbrushmenu.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpmenu.c
	* libgimp/gimppatternmenu.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/blinds.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/depthmerge.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/destripe.c
	* plug-ins/common/diffraction.c
	* plug-ins/common/emboss.c
	* plug-ins/common/exchange.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/fractaltrace.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/grid.c
	* plug-ins/common/illusion.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/nlfilt.c
	* plug-ins/common/noisify.c
	* plug-ins/common/nova.c
	* plug-ins/common/plasma.c
	* plug-ins/common/polar.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/sinus.c
	* plug-ins/common/tileit.c
	* plug-ins/common/video.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/common/wind.c
	* plug-ins/flame/flame.c
	* plug-ins/fp/fp_gtk.c
	* plug-ins/gimpressionist/brush.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/rcm/rcm_dialog.c: define GTK_DISABLE_DEPRECATED to make
	it compile.

	We really need a generic plug-in preview system that doesn't use
	GtkPreview.

2002-01-30  Sven Neumann  <sven@gimp.org>

	* configure.in: depend on glib-1.3.13, pango-0.24 and gtk+-1.3.13.
	Bumped our version number to 1.3.3.

	* NEWS: updated.

2002-01-30  Manish Singh  <yosh@gimp.org>

	* app/gui/file-open-dialog.c: ported to the new treeviewized file
	selection widget. Unfortunately, multiple selections aren't supported
	anymore so it's still broke. I'll make a patch to gtk to address this
	after I get some sleep.

	* app/widgets/gimppreview.h
	* libgimpwidgets/gimpcolorarea.h
	* plug-ins/FractalExplorer/Events.c
	* plug-ins/common/film.c 
	* plug-ins/common/plugindetails.c 
	* plug-ins/fp/fp_misc.c 
	* plug-ins/rcm/rcm_callback.c
	* plug-ins/rcm/rcm_misc.c: REALLY REALLY ugly hack to get things to
	build under the latest enum deprecations. Of course, we'll remove
	these when these files compile with deprecation turned on

	* plug-ins/dbbrowser/dbbrowser_utils.c: warning cleanup

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpoffsetarea.c: need a custom marshaller for
	our signal since the gtk marshaller we used went away.

2002-01-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: added a call to gtk_widget_show() that
	got lost during porting. Now you can shoot the whole screen again.

2002-01-27  Sven Neumann  <sven@gimp.org>

	* app/gui/file-new-dialog.c: moved the memory size information out
	of the frame label to avoid redrawing the whole frame for every change.

2002-01-25  Michael Natterer  <mitch@gimp.org>

	* configure.in: CPPFLAGS: added -DGTK_DISABLE_DEPRECATED

	* libgimpwidgets/gimpdialog.c: still use the deprecated
	gtk_window_set_policy() but spit out a #warning.

	* app/widgets/widgets-types.h
	* app/widgets/gimpitemfactory.[ch]: made it a GtkItemFactory
	subclass. This way we can reproduce the effect of
	gtk_item_factory_get_from_path() which is deprectated for good
	reasons.  For GIMP, using it its perfectly OK since we only have
	one item factory per "<prefix>".

	* app/widgets/gimpbrushfactoryview.[ch]
	* app/widgets/gimpbufferview.[ch]
	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpdatafactoryview.[ch]
	* app/widgets/gimpdialogfactory.[ch]
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimpdocumentview.[ch]
	* app/widgets/gimpdrawablelistview.[ch]
	* app/widgets/gimppreview.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell.[ch]: pass around GimpItemFactory
	pointers instead of "const gchar *" item factory identifiers.
	Replaced gtk_window_set_policy() by gtk_window_set_resizable()
	and other recommended stuff.

	* app/gui/about-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/dialogs.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/menus.c
	* app/gui/offset-dialog.c
	* app/gui/splash.c
	* app/gui/tips-dialog.c
	* app/gui/toolbox.c: lots of
	s/gtk_item_factory_from_path/gimp_item_factory_from_path/,
	gtk_window_set_policy() replacements, misc fixes.

	* plug-ins/gdyntext/charmap_window.c
	* plug-ins/gdyntext/gdyntext_ui.c
	* plug-ins/gdyntext/message_window.c
	* plug-ins/imagemap/imap_main.c: replaced gtk_window_set_policy().

2002-01-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/tga.c
	* plug-ins/common/video.c: compile with GTK_DISABLE_DEPRECATED.

2002-01-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/tga.c: merged fix for bug #53278 from stable branch.
	
	* plug-ins/common/tiff.c: merged fix for bug #69129 from stable branch.

2002-01-23  Simos Xenitellis  <simos@hellug.gr>

	* configure.in: Added "el" (Greek) to ALL_LINGUAS.

2002-01-22  Sven Neumann  <sven@gimp.org>

	* gimptool-1.3.in: fixed usage info.
	
	* themes/Default/images/Makefile.am: should really install the stock
	icons defined in our gtkrc.

2002-01-18  Raja R Harinath  <harinath@cs.umn.edu>

	* configure.in: Add a few [] to nested AC_CHECK_* invocations.
	Needed for autoconf 2.52, but also the right fix for older
	autoconfs.  (http://bugzilla.gnome.org/show_bug.cgi?id=68958)

	* app/gui/Makefile.am
	* app/tools/Makefile.am
	* app/widgets/Makefile.am: Search for include files in build
	directory too.  (http://bugzilla.gnome.org/show_bug.cgi?id=68961)

2002-01-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/video.c
	* plug-ins/common/vinvert.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/warp.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/common/wind.c
	* plug-ins/common/wmf.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/common/xwd.c: compile with GTK_DISABLE_DEPRECATED.

2002-01-14  Rebecca Walter  <bex@gimp.org>

	* app/gui/palette-editor.c
	* app/gui/palette-import-dialog.c
	* app/gui/paths-dialog.c: more proofreading with help from 
	CyBeR (Marco Wessel)

2002-01-13  Manish Singh  <yosh@gimp.org>

	* plug-ins/dbbrowser/dbbrowser_utils.c: I'm dumb, use better sorting.
	It's all _kris_'s fault.

2002-01-13  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpstock.[ch]: removed stock items which are
	already defined in Gtk+ (GTK_STOCK_NEW etc.).

	* libgimpwidgets/gimpquerybox.[ch]: moved the icon code from the
	boolean query box constructor to create_query_box() so it can be
	used for all of them. New macro GIMP_QUERY_BOX_VBOX() to pack
	custom widgets into the dialogs. Will probably have to make a
	real widget out of it to get a sane API...

	* app/gui/menus.c
	* app/gui/select-commands.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpdrawablelistview.c
	* libgimpwidgets/gimppatheditor.c
	* plug-ins/common/uniteditor.c: changed accordingly.

	* libgimpwidgets/gimpwidgets.c: register the WM icons in
	large -> small order.

	* themes/Default/Makefile.am: don't create inline pixbufs of the
	removed stock items' icons...

	* themes/Default/gtkrc: ...but simply override them here.

	* themes/Default/imagerc: removed them here too.

2002-01-12  Manish Singh  <yosh@gimp.org>

	* plug-ins/dbbrowser/dbbrowser_utils.c: use GtkTreeView and multiline
	labels now. UI still needs some tweaking, but compiles with
	GTK_DISABLE_DEPRECATED.

2002-01-09  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/gimp-dialog-error.png
	* themes/Default/images/gimp-dialog-info.png
	* themes/Default/images/gimp-dialog-question.png
	* themes/Default/images/gimp-dialog-warning.png: new stock icons to
	override the standard gtk-dialog icons.

	* themes/Default/images/gimp-dialog-icons.xcf.gz: XCF version of the
	new dialog icons.

	* themes/Default/gtkrc: override the standard gtk-dialog icons with
	our versions.

	* libgimpwidgets/gimpquerybox.[ch]: allow to pass a stock_id instead
	of the boolean eek.

	* app/widgets/gimpwidgets-utils.c: added an icon to the gimp_message
	dialog. We need to add an API to declare the severity of the message
	or allow to pass a stock_id. For now all messages habe the Info icon.

	* app/gui/file-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gui.c
	* app/gui/image-commands.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c: pass a suitable(?) stock_id to 
	gimp_query_boolean_box().

2002-01-08  Michael Natterer  <mitch@gimp-org>

	* plug-ins/common/tga.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/tiff.c
	* plug-ins/common/tile.c
	* plug-ins/common/tileit.c
	* plug-ins/common/tiler.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/unsharp.c
	* plug-ins/common/url.c
	* plug-ins/common/zealouscrop.c: compile with
	GTK_DISABLE_DEPRECATED, cleanup.

2002-01-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/xbm.c: merged fix from stable branch.

2002-01-03  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/sinus.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/snoise.c
	* plug-ins/common/sobel.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/spread.c
	* plug-ins/common/struc.c
	* plug-ins/common/sunras.c: compile with GTK_DISABLE_DEPRECATED.

2002-01-02  Michael Natterer  <mitch@gimp.org>

	* pixmaps/Makefile.am
	* pixmaps/zoom_in.xpm
	* pixmaps/zoom_out.xpm: removed.

	* app/nav_window.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c: use GTK_STOCK_ZOOM_[IN|OUT]
	instead.

2002-01-02  Michael Natterer  <mitch@gimp.org>

	* plug-ins/pagecurl/pagecurl.c: compile with GTK_DISABLE_DEPRECATED.

2002-01-02  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppixmap.c: made a warning more verbose.

	* libgimpwidgets/gimppixmap.h: no need to fiddle around with evil
	#defines now that it's ported to GtkImage.

2001-12-30  Manish Singh  <yosh@gimp.org>

	* app/gui/module-browser.c: add a shadow to the scrolled window, so
	it looks nicer

	* libgimpwidgets/gimpbutton.c: try to restore gtk_widget_draw behavior

	* libgimpwidgets/gimpoffsetarea.c
	* libgimpwidgets/gimppixmap.[ch]: compile with GTK_DISABLE_DEPRECATED

2001-12-31  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am: use GLIB_CFLAGS instead of GTK_CFLAGS.

	* app/libgimp_glue.[ch]: do not allow anyone but app/libgimp_glue.c
	to include libgimp_glue.h.

	* libgimpbase/gimpunit.h
	* libgimp/gimpunit.c: cache return values of GimpUnit PDB calls and 
	return const strings from the GimpUnit accessor functions just like
	the equivalent functions in the application do.
	
	* plug-ins/common/uniteditor.c: don't free GimpUnit strings. Don't
	free the result of gtk_entry_get_text() neither.

2001-12-31  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/nlfilt.c
	* plug-ins/common/noisify.c
	* plug-ins/common/nova.c
	* plug-ins/common/oilify.c
	* plug-ins/common/papertile.c
	* plug-ins/common/pat.c
	* plug-ins/common/pixelize.c
	* plug-ins/common/plasma.c
	* plug-ins/common/plugindetails.c
	* plug-ins/common/png.c
	* plug-ins/common/pnm.c
	* plug-ins/common/polar.c
	* plug-ins/common/ps.c
	* plug-ins/common/psp.c
	* plug-ins/common/randomize.c
	* plug-ins/common/ripple.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/screenshot.c
	* plug-ins/common/sel_gauss.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/shift.c: compile with GTK_DISABLE_DEPRECATED.

2001-12-30  Sven Neumann  <sven@gimp.org>

	* app/libgimp_glue.[ch]
	* app/gui/info-window.c: some const fixes.

2001-12-30  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/core/Makefile.am
	* app/display/Makefile.am: nicer output of glib-mkenums.

2001-12-29  Sven Neumann  <sven@gimp.org>

	* data/brushes/Makefile.am (brushdata_DATA): added missing brush
	vine.gih.

2001-12-29  Michael Natterer  <mitch@gimp.org>
	    Sven Neumann  <sven@gimp.org>
	    Simon Budig  <simon@gimp.org>

	* Made 1.3.2 release from 18C3.

2001-12-29  Simon Budig  <simon@gimp.org>
	    Sven Neumann  <sven@gimp.org>

	* data/images/Makefile.am
	* data/images/gimp_splash.gif: new blinking splash.
	
	* app/gui/splash.c (splash_create): load splash from gimp_splash.gif.

2001-12-29  Michael Natterer  <mitch@gimp.org>

	* NEWS: mention GTK_DISABLE_DEPRECATED.

2001-12-29  Sven Neumann  <sven@gimp.org>

	* data/brushes/vine.gih: fixed rank and increased spacing.

2001-12-29  Michael Natterer  <mitch@gimp.org>

	* app/gimpprogress.c
	* app/nav_window.c
	* app/ops_buttons.c
	* app/undo_history.c
	* app/display/gimpdisplayshell.c
	* app/gui/about-dialog.c
	* app/gui/brush-editor.c
	* app/gui/channels-commands.c
	* app/gui/color-area.c
	* app/gui/color-notebook.c
	* app/gui/color-select.c
	* app/gui/colormap-dialog.c
	* app/gui/convert-dialog.c
	* app/gui/device-status-dialog.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/info-dialog.c
	* app/gui/layers-commands.c
	* app/gui/module-browser.c
	* app/gui/offset-dialog.c
	* app/gui/palette-editor.c
	* app/gui/palettes-commands.c
	* app/gui/paths-dialog.c
	* app/gui/qmask-commands.c
	* app/gui/resize-dialog.c
	* app/gui/resolution-calibrate-dialog.c
	* app/gui/splash.c
	* app/gui/tips-dialog.c
	* app/gui/toolbox.c
	* app/gui/user-install-dialog.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcolorpanel.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpconstrainedhwrapbox.c
	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainerlistview.c
	* app/widgets/gimpcontainermenuimpl.c
	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimpfontselection-dialog.c
	* app/widgets/gimphistogramview.c
	* app/widgets/gimpitemfactory.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplistitem.[ch]
	* app/widgets/gimpmenuitem.c
	* app/widgets/gimppreview.[ch]
	* app/widgets/gtkhwrapbox.c
	* app/widgets/gtkvwrapbox.c
	* app/widgets/gtkwrapbox.c
	* libgimp/gimpbrushmenu.c
	* libgimp/gimpexport.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpmenu.c
	* libgimp/gimppatternmenu.c
	* libgimpwidgets/gimpbutton.c
	* libgimpwidgets/gimpchainbutton.[ch]
	* libgimpwidgets/gimpcolorarea.h
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpfileselection.c
	* libgimpwidgets/gimphelpui.c
	* libgimpwidgets/gimpoffsetarea.c
	* libgimpwidgets/gimppatheditor.c
	* libgimpwidgets/gimppixmap.h
	* libgimpwidgets/gimpquerybox.c
	* libgimpwidgets/gimpstock.[ch]
	* libgimpwidgets/gimpwidgets.h
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/Events.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/bmp/bmpwrite.c
	* plug-ins/dbbrowser/dbbrowser_utils.c
	* plug-ins/fits/fits.c
	* plug-ins/flame/flame.c
	* plug-ins/fp/fp_gtk.c
	* plug-ins/fp/fp_misc.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gfli/gfli.c
	* plug-ins/gimpressionist/*.c
	* plug-ins/imagemap/*.[ch]
	* plug-ins/maze/maze_face.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/print/print_gimp.h
	* plug-ins/rcm/rcm_callback.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/rcm/rcm_misc.c
	* plug-ins/script-fu/script-fu-console.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-server.c
	* plug-ins/sel2path/sel2path.c
	* plug-ins/sel2path/sel2path_adv_dialog.c
	* plug-ins/sgi/sgi.c
	* plug-ins/webbrowser/webbrowser.c
	* plug-ins/xjt/xjt.c
	* plug-ins/common/[A-n]*.c: compile with GTK_DISABLE_DEPRECATED
	defined. Not everything is fully ported yet, had to #undef
	GTK_DISABLE_DEPRECATED in many places and added #warnings when
	doing so.

	* pixmaps/Makefile.am
	* pixmaps/chain.xpm: removed.

	* themes/Default/Makefile.am
	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-button-hchain-broken.png
	* themes/Default/images/stock-button-hchain.png
	* themes/Default/images/stock-button-vchain-broken.png
	* themes/Default/images/stock-button-vchain.png: new stock icons.

2001-12-28  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.c: write comment to top of gimprc.

	* app/core/gimpscanconvert.c: removed redundant CLAMP statements.
	
	* app/plug-in/plug-in-rc.[ch]
	* app/plug-in/plug-in.c: rewrote pluginrc scanner and moved the code 
	that writes the pluginrc into plug-in-rc.c.

2001-12-28  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpmagnifytool.c: calculate mouse movement in screen
	coordinates. Reset threshold to default value when the Reset button
	is pressed.

2001-12-28  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimpconfig.h
	* app/config/gimprc.[ch]: added new function to only write changes to
	the personal gimprc.
	
	* app/config/test-config.c: test the new functionality.
	
	* tools/pdbgen/pdb/procedural_db.pdb: the change I did yesterday 
	wasn't overly clever; here's a better one.

	* app/pdb/procedural_db_cmds.c: regenerated.

2001-12-28  Sven Neumann  <sven@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-rc.[ch]: new files that parse pluginrc using a
	GScanner.

	* app/plug-in/plug-in.[ch]: made PlugInDef public again so we can use
	it from the pluginrc parser.

	* tools/pdbgen/pdb/procedural_db.pdb: made regex string matching 
	robust against NULL pointers.

	* app/pdb/procedural_db_cmds.c: regenerated.

	* app/gimprc.c: removed old pluginrc parser.
	
2001-12-27  DindinX  <David@dindinx.org>

	* app/tools/gimpmagnifytool.c: Added a threshold value determining
	by how many pixels the mouse should move to use the window mode.

2001-12-27  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/Makefile.am: fixed for 'make dist'.

2001-12-27  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* NEWS
	* configure.in: require latest versions of glib, gtk+ and friends. 
	Bumped our version number to 1.3.2.

	* app/plug-in/plug-in.c (plug_in_params_destroy, plug_in_args_destroy):
	moved condition out of the switch statement, simplified code.
	
	* app/plug-in/plug-in-proc.[ch]: moved plug_in_proc_def_destroy() here.

	* app/gimprc.c: use plug_in_proc_def_destroy().
	
	* app/pdb/procedural_db.c: use g_string_hash() instead of our own hash
	function.

	* app/xcf/xcf.c: initialize all fields of the PlugInProcDef struct.
	
2001-12-20  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c (text_render): fixed text positioning by
	removing a workaround for a bug that has finally been fixed in Pango.

2001-12-19  Sven Neumann  <sven@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in-proc/plug-in-proc.[ch]: new files. Started to split
	plug-in.c into smaller pieces.
	
	* app/plug-in/plug-in-types.h: namespacified GimpRunModeType enum and
	renamed it to GimpRunMode.
	
	* app/plug-in/plug-in.[ch]
	* app/gimphelp.c
	* app/file/file-open.[ch]
	* app/file/file-save.[ch]
	* app/file/file-utils.c
	* app/gui/file-commands.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/paths-dialog.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb: changed accordingly.
	
	* app/pdb/fileops_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* libgimp/gimpfileops_pdb.[ch]
	* tools/pdbgen/enums.pl: regenerated.

	* libgimp/Makefile.am
	* libgimp/gimpcompat.h: added gimpcompat.h mostly as a place to 
	document plug-in API changes.

	* plug-ins/*: changed all occurences of GimpRunModeType to GimpRunMode.
	
2001-12-18  Sven Neumann  <sven@gimp.org>

	* docs/gimptool-1.3.1.in
	* gimptool-1.3.in: applied patch from Roger Leigh <rl117@york.ac.uk>
	that makes gimptool respect the DESTDIR environment variable.

	* app/config/Makefile.am: declare test-config as TESTS so it is build
	and executed when running 'make check'.
	
	* app/config/gimpbaseconfig.c: don't register a GimpConfig interface.
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c: no need to include "gimpconfig.h".
	
	* app/config/gimpconfig.[ch]: removed store_unknown parameter from
	deserialize method. The default implementation will bail out on 
	unknown tokens.
	
	* app/config/gimprc.c: override deserialize method so it stores 
	unknown tokens.

2001-12-18  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am: don't build test-config by default.
	
	* app/config/gimprc.[ch]: new files for the GimpRc implementation.

	* app/config/gimpcoreconfig.h
	* app/config/gimpdisplayconfig.h
	* app/config/gimpguiconfig.h: include the necessary enum headers
	here and prefix local includes with config so the files can be safely
	included from almost everywhere.
	
	* app/config/test-config.c: instantiate and test GimpRc.

2001-12-18  DindinX  <David@dindinx.org>

	* app/base/boundary.c:
	* app/base/pixel-surround.c:
	* app/base/temp-buf.c: some more g_malloc -> g_new and 
	  g_realloc -> g_renew changes, foe better readability and type
	  safety.

2001-12-18  Sven Neumann  <sven@gimp.org>

	* app/display/Makefile.am
	* app/display/display-enums.h: new file with GimpCursorMode enum.

	* app/display/display-types.h: removed CursorMode enum here, include
	display-enums.h.

	* app/gimprc.c
	* app/display/gimpdisplayshell.c
	* app/gui/preferences-dialog.c: changed accordingly.

	* app/config/Makefile.am
	* app/config/gimpbaseconfig.[ch]
	* app/config/gimpcoreconfig.[ch]
	* app/config/gimpdisplayconfig.[ch]
	* app/config/gimpguiconfig.[ch]: implemented the remaining properties.

2001-12-18  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-utils.[ch]: new files with utility functions.

	* app/config/gimpdisplayconfig.[ch]: new class with display config
	properties so GimpGuiConfig doesn't get too large.

	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.[ch]
	* app/config/gimpguiconfig.[ch]: install path properties with
	useable defaults (substituted gimpdir and friends). Moved properties
	around.

	* app/gui/session.c: removed outdated comment.

2001-12-18  Michael Natterer  <mitch@gimp.org>

	* configure.in: added -DGDK_PIXBUF_DISABLE_DEPRECATED to CPPFLAGS.

	* app/core/gimpbuffer.[ch]: gimp_buffer_get_[width|height]:
	added "const" to the GimpBuffer parameter.

	* app/core/gimpchannel.c: indentation and comment changes.

	* app/core/gimpdrawable-desaturate.c: don't include
	"paint-funcs/paint-funcs.h".

	* app/display/gimpdisplayshell.c: don't include "base/temp-buf.h".

	* app/gui/gui.c: removed the image container's "name_changed"
	handler.

	* app/gui/palette-import-dialog.[ch]: use GimpPreview and
	GimpContainerMenu instead of doing the same manually. Removed lots
	of code. Not perfect yet.

	* app/tools/gimpfuzzyselecttool.c: no need to include tile stuff.

	* app/widgets/gimpcontainerview-utils.c: better g_warning() message.

	* tools/pdbgen/pdb/paint_tools.pdb: don't include
	"base/tile-manager.h".

	* app/pdb/paint_tools_cmds.c: regenerated.

	* data/images/Makefile.am
	* data/images/gimp_logo.ppm: removed...
	* data/images/gimp_logo.png: ...and added as PNG.

	* app/gui/about-dialog.c: use gdk_pixbuf_new_from_file() to load
	the PNG logo instead of manually parsing the PPM.

2001-12-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdrawablelistview.[ch]: changed
	the GimpNewDrawableFunc typedef to take an additional 
	"GimpDrawable *template" paramater, added the "Drop to New"
	feature again by passing the dropped drawable to
	view->new_drawable_func().

	* app/gui/channels-commands.[ch]: channels_new_channel_query:
	* app/gui/layers-commands.[ch]: layers_new_layer_query:

	Added the "template" parameter because they are used as the
	views' new_drawable_func(), create layers/channels with
	the template's properties if a template is passed.

2001-12-17  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-mask.c: oops, GIMP_IS_DRAWABLE(gimage) will
	always fail :-) fixed.

2001-12-17  Sven Neumann  <sven@gimp.org>

	* gimpconfig.[ch]: don't serialize unknown tokens; leave that to
	the gimprc implementation. Create file with correct permissions.
	
	* test-config.c: changed accordingly.
	
	* gimpguiconfig.[ch]: added more properties.

2001-12-16  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpguiconfig.[ch]
	* app/config/test-config.c: started to implement GimpGuiConfig.

	* app/config/gimpcoreconfig.c: set default for image-comment.

2001-12-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimpcoreconfig.[ch]: changed thumbnail_mode to boolean
	write_thumbnails. thumbnail_mode used to have only two defined
	values; if we need more later, we can change that easily when the 
	new GimpConfig system is in place.

	* app/gimprc.c
	* app/file/file-save.c
	* app/gui/file-open-dialog.c
	* app/gui/preferences-dialog.c: changed accordingly.
	
	* app/config/gimpcoreconfig.[ch]: finished GimpCoreConfig class.

2001-12-16  Sven Neumann  <sven@gimp.org>

	* docs/make-todo: added icon for developer.gimp.org.

2001-12-16  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-params.[ch]
	* app/config/gimpconfig-types.[ch]: added support for GimpUnit type.
	
	* app/config/gimpbaseconfig.[ch]
	* app/config/gimpcoreconfig.[ch]
	* app/config/test-config.c: cleaned up includes. Added more properties
	to GimpCoreConfig.

	* app/libgimp_glue.h
	* libgimpbase/gimpunit.h: 
	declared gimp_unit_get_number_of_built_in_units() G_GNUC_CONST.

	* app/core/gimpunit.[ch]: internal GimpUnit functions return const 
	strings.

	* app/xcf/xcf-save.c: changed accordingly.

2001-12-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.c: merged fix for bug #66003 from stable
	branch.

2001-12-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/gap/gap_decode_xanim.c (p_xanim_dialog)
	* plug-ins/common/sinus.c (sinus_dialog): merged typo fixes from
	stable branch.

2001-12-14  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.[ch]: added
	GIMP_IMAGE_TYPE_IS_[RGB|GRAY|INDEXED]() and
	GIMP_IMAGE_TYPE_BASE_TYPE() macros.

	* app/plug-in/plug-in.[ch]: new enum PlugInImageType instead of
	multiple #defines.

	* app/gui/file-dialog-utils.[ch]: file_dialog_update_menus(): take
	a GimpImageType instead of the PlugInImageType.

	* app/core/gimpdrawable-preview.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/core/gimpimage-contiguous-region.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimplayermask.c
	* app/core/gimppalette-import.c
	* app/display/gimpdisplay-handlers.c
	* app/display/gimpdisplayshell-render.c
	* app/gui/file-save-dialog.c
	* app/gui/toolbox.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/image.pdb: use the new macros, cleanups like
	storing GimpImageType in GimpImageType variables, not just gint.

	* app/pdb/convert_cmds.c
	* app/pdb/image_cmds.c: regenerated.

	* app/widgets/gimpdialogfactory.c: save the state of the "Auto"
	button in sessionrc.

2001-12-13  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.h
	* app/config/gimpconfig-serialize.c: fixed typos.
	
	* app/core/core-enums.h
	* app/core/core-types.h: converted ChannelType enum to GimpChannelType
	and moved it to core-enums.h.
	
	* app/core/gimpimage.[ch]
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcomponentlistitem.[ch]
	* tools/pdbgen/pdb/image.pdb: changed accordingly.

	* app/pdb/image_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2001-12-13  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-params.h
	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimpconfig-substitute.c
	* app/config/gimpconfig-types.c
	* app/config/gimpconfig.[ch]
	* app/config/test-config.c: code cleanup, I18N

	* app/config/gimpcoreconfig.[ch]: some more properties.

2001-12-13  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.[ch]: made gimp->global_buffer a GimpBuffer,
	not TileManager.

	* app/core/gimpbuffer.[ch]: added a "gboolean copy_pixels" to
	gimp_buffer_new().

	* app/core/gimpimage-new.c
	* app/core/gimpedit.[ch]
	* app/core/gimpimage-qmask.c
	* app/widgets/gimpbufferpreview.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpcontainerview-utils.c: chaned accordingly, don't
	include "base/tile-manager.h".

	* app/core/gimpdrawable.[ch]: added gimp_drawable_copy().

	* app/core/gimpchannel.[ch]
	* app/core/gimplayer.[ch]
	* app/core/gimplayermask.[ch]: use it in
	gimp_[channel|layer|layer_mask]_copy(), added "GType new_type" as
	paramater to all of them.

	* app/core/gimpimage-duplicate.c
	* app/gui/channels-commands.c
	* app/gui/edit-commands.c
	* app/gui/layers-commands.c
	* app/widgets/gimpchannellistview.c
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/selection.pdb: changed accordingly.

	* app/pdb/channel_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/selection_cmds.c: regenerated.

	* app/core/gimplayer.[ch]: removed the "layer_type" parameter from
	gimp_layer_new_from_tiles() because it always needed to be equal
	to gimp_image_base_type_with_alpha() of the passed image.

	* app/core/gimpdrawable-transform.c
	* app/core/gimpedit.c
	* app/core/gimpimage-mask.c: cahanged accordingly.

	* app/core/gimpimage.[ch]: added some new GIMP_IMAGE_TYPE_FOO()
	marcos to get rid of magic values like "pixels = 3" all over the
	place.

	* app/core/gimplayer.[ch]: added gimp_layer_new_from_drawable()
	which creates a layer from an other image's drawable.

	* app/core/gimpimage-convert.[ch]: made the RGB and GRAY converters
	public to use them above, use the new GIMP_IMAGE_TYPE() macros.

	* app/display/gimpdisplayshell-dnd.c
	* app/gui/toolbox.c: removed tile manager stuff and use the new
	functions.

	* app/widgets/gimpdrawablelistview.[ch]: added a
	"convert_drawable_func" which is used to handle drops from other
	images.

	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplistitem.[ch]: implemented DND of layers between
	images using gimp_layer_new_from_drawable().

	* app/gui/dialogs-constructors.c: changed accordingly.

2001-12-12  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpimage-pick-color.[ch]: new files.

	gimp_image_pick_color() doesn't set the FG or BG color and doesn't
	touch the current palettte.

	* app/tools/gimpcolorpickertool.[ch]: removed the actual picking
	code, set the user_context's FG or BG color here.

	* app/gui/palette-editor.[ch]:
	s/palette_set_active_color/palette_editor_update_color/, don't set
	the FG and BG color here. The function is still #if 0'ed.

	* app/gui/toolbox.c: fixed WM resize hints in toolbox_style_set(),
	code cleanup.

	* app/tools/gimppainttool.[ch]: some cleanup before chopping.

	* app/tools/gimpsmudgetool.c: changed accordingly.

	* tools/pdbgen/pdb/misc_tools.pdb: removed the possibility to set
	the FG or BG color or add the picked color to the active palette
	bacause it doesn't belong here. Palette PDB wrappers are on the
	TODO anyway.

	* app/pdb/misc_tools_cmds.c
	* libgimp/gimpmisctools_pdb.[ch]: regenerated.

	* plug-ins/perl/examples/image_tile
	* plug-ins/perl/examples/logulator
	* plug-ins/script-fu/scripts/hsv-graph.scm
	* plug-ins/script-fu/scripts/title-header.scm: changed accordingly.

2001-12-12  Michael Natterer  <mitch@gimp.org>

	* docs/Wilber_Construction_Kit.xcf.gz: new version with additional
	layers by Ville Ptsi (drc).

2001-12-12  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-serialize.c
	* app/config/gimpconfig-substitute.c: plugged a memleak and applied
	some optimizations.

2001-12-11  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h
	* app/core/core-types.h: moved gradient enums to core-enums.h and
	namespaceified them.
	
	* app/core/gimpdrawable-blend.[ch]
	* app/core/gimpgradient.c
	* app/gui/gradient-editor-commands.c
	* app/pdb/misc_tools_cmds.c
	* app/tools/gimpblendtool.c
	* tools/pdbgen/pdb/misc_tools.pdb: changed accordingly.

	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2001-12-11  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.h
	* app/base/base-types.h: moved all remaining enums to base-enums.h
	
	* app/core/core-enums.h
	* app/core/core-types.h: moved GimpImageType to core-enums.h and
	changed the values from RGB_GIMAGE to GIMP_RGB_IMAGE and the like.
	
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-preview.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/core/gimpimage-contiguous-region.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-projection.c
	* app/core/gimpimage.[ch]
	* app/core/gimplayer.c
	* app/core/gimplayermask.c
	* app/core/gimppalette-import.c
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell-render.c
	* app/gui/file-save-dialog.c
	* app/gui/toolbox.c
	* app/plug-in/plug-in.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpdodgeburntool.c: changed accordingly.

	* tools/pdbgen/Makefile.am: no need to parse app/base/base-types.h
	any longer.

	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/paint_tools_cmds.c
	* tools/pdbgen/enums.pl: regenerated.

2001-12-11  Sven Neumann  <sven@gimp.org>

	* app/core/core-types.h: removed GimpImageBaseType enum ...

	* app/core/core-enums.h: and added it here with proper namespace
	(enum values prefixed with GIMP_).

	* app/gimprc.c
	* app/core/gimpcoreconfig.c
	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpdrawable-preview.c
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-projection.c
	* app/core/gimpimage.c
	* app/core/gimplayer.c
	* app/core/gimppalette-import.c
	* app/display/gimpdisplay-handlers.c
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell.c
	* app/file/file-utils.c
	* app/gui/colormap-dialog.c
	* app/gui/convert-dialog.c
	* app/gui/info-window.c
	* app/gui/layers-commands.c
	* app/gui/palette-import-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/toolbox.c
	* app/tools/gimpclonetool.c
	* app/tools/gimppainttool.c
	* app/widgets/gimpchannellistview.c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/image.pdb: changed accordingly.

	* tools/pdbgen/enums.pl
	* app/pdb/convert_cmds.c
	* app/pdb/image_cmds.c
	* libgimp/gimpconvert_pdb.c
	* libgimp/gimpimage_pdb.c: regenerated.

	* app/config/Makefile.am
	* app/config/gimpconfig-params.h
	* app/config/gimpconfig-serialize.c
	* app/config/gimpcoreconfig.[ch]: added more stuff to GimpCoreConfig.

2001-12-10  Sven Neumann  <sven@gimp.org>

	* libgimpbase/Makefile.am
	* libgimpbase/gimpenv.[ch]: added new function gimp_plug_in_directory()
	to retrieve the compile_time defined plug_in directory. Declared some
	functions G_GNUC_CONST and simplified code by introducing a helper
	function.
	
	* app/config/Makefile.am
	* app/config/gimpcoreconfig.[ch]: started to implement GimpCoreConfig
	derived from GimpBaseConfig.
	
	* app/config/gimpbaseconfig.[ch]: misc small changes.

	* app/config/gimpconfig-deserialize.c
	(gimp_config_deserialize_properties): return quietly if there are no
	properties.
	
	* app/config/gimpconfig-substitute.c: more special cases.
	
	* app/config/test-config.c: test GimpCoreConfig.

2001-12-10  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-substitute.[ch]: new files with code to do
	substitution magic on path strings. Similar to the code in gimprc.c
	but UTF8 safe.

	* app/config/gimpconfig-params.h
	* app/config/gimpbaseconfig.c: added a bunch of convenience macros
	to register config properties and use them for GimpBaseConfig.
	
	* app/config/gimpconfig-types.h: added missing GIMP_VALUE_HOLDS_FOO()
	macros.

	* app/config/gimpconfig-deserialize.c: UTF8-validate all strings.
	
	* app/config/gimpconfig-serialize.c: some code reorganisation.

2001-12-10  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/screenshot.c: removed deprecated use of
	"user_data" together with libgimpwidgets standard
	callbacks. Reported by Carbamide on #gimp.

2001-12-10  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/tools.pdb: removed, chopped...

	* tools/pdbgen/pdb/misc_tools.pdb
	* tools/pdbgen/pdb/paint_tools.pdb: ...and added here.

	* app/pdb/tools_cmds.c
	* libgimp/gimptools_pdb.[ch]: removed.

	* app/pdb/internal_procs.c
	* app/pdb/misc_tools_cmds.c
	* app/pdb/paint_tools_cmds.c
	* libgimp/gimpmisctools_pdb.[ch]
	* libgimp/gimppainttools_pdb.[ch]: generated files.

	* app/pdb/Makefile.am
	* libgimp/Makefile.am
	* libgimp/gimp_pdb.h
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/groups.pl: changed accordingly.

	* tools/pdbgen/pdb/selection_tools.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: cosmetic comment changes.

2001-12-10  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/core/Makefile.am: use GLIB_GENMARSHAL and GLIB_MKENUMS variables
	declared by AM_PATH_GLIB_2_0 instead of calling the binaries directly.

2001-12-10  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig.c: stricter parsing.
	
	* app/config/test-config.c: more output.

2001-12-09  Sven Neumann  <sven@gimp.org>

	* autogen.sh: check for pkg.m4.
	
	* configure.in: removed logic to extract GLIB CFLAGS and LDFLAGS 
	from the GTK CFLAGS and LDFLAGS. Use AM_PATH_GLIB_2_0() instead. 
	This change will break things on awfully misconfigured systems.
	Simplified the checks and moved version numbers to the top to ease
	maintainance. Check if gtk-doc is suffiently new.

	* app/main.c: removed the GimpConfig test code.

	* app/config/Makefile.am
	* app/config/test-config.c: added a (yet very small) standalone test 
	suite for GimpConfig.

	* app/config/gimpconfig.[ch] 
	* app/config/gimpconfig-deserialize.[ch]: allow to specify if
	unknown tokens should be stored or should cause a parser error. 
	Changed code to store unknown tokens to use a list since a hash 
	table seems to be overkill here.

2001-12-09  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-params.[ch]
	* app/config/gimpconfig-types.[ch]: added new param_spec 
	GIMP_PARAM_PATH with value_type GIMP_PATH_TYPE.

	* app/config/gimpconfig.[ch]: added code to store and lookup unknown 
	tokens.

	* app/config/gimpconfig-deserialize.c: improved logic, prepared for 
	special handling of GIMP_PATH_TYPE; still work in progress...

	* app/config/gimpbaseconfig.c: register temp-path and swap-path as
	GIMP_PARAM_PATH properties.

2001-12-08  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/enumgen.pl: introduced new trigraph keyword
	/*< pdb-skip >*/ used to skip enums for inclusion in libgimp when
	parsing headers. The keyword /*< skip >*/ is still used to skip
	enum values. This change is necessary since glib-mkenums also uses
	/*< skip >*/.

	* app/base/base-types.h * app/base/base-enums.h: moved
	GimpCheckType and GimpCheckSize to base-enums.h so they get
	registered with the type system, marked them as /*< pdb-skip >*/.
	
	* app/core/core-types.h * app/display/display-types.h *
	app/paint-funcs/paint-funcs-types.h * app/tools/gimppainttool.h *
	app/tools/tools-types.h: changed /*< skip >*/ to /*< pdb-skip >*/.
	
2001-12-08  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/core-enums.h: new file that holds enums that are registered
	with the type system and is used to generate core-enums.c.
	
	* app/core/core-types.h: include core-enums.h

	* app/base/base-types.h: namespace cleanup. Prefix all enumeration
	types with Gimp and their values with GIMP. Moved GimpLayerModeEffects
	enum ...

	* app/base/base-enums.h: ... here.

	* app/image_map.c
	* app/base/temp-buf.c
	* app/core/gimpcontext.[ch]
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-projection.c
	* app/core/gimpimage.[ch]
	* app/core/gimplayer.[ch]
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell-render.c
	* app/gui/brush-select.c
	* app/gui/layers-commands.c
	* app/gui/preferences-dialog.c
	* app/gui/toolbox.c
	* app/paint-funcs/paint-funcs.[ch]
	* app/tools/gimpconvolvetool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimppainttool.[ch]
	* app/tools/gimptexttool.c
	* app/tools/paint_options.c
	* app/widgets/gimplayerlistview.c
	* app/widgets/gimpwidgets-constructors.[ch]
	* app/xcf/xcf-load.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/tools.pdb: changed accordingly.
	
	* libgimpbase/gimpbasetypes.h: no need to chop GIMP prefix off the 
	enums any longer.
	
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/message_cmds.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

	* app/gimprc.c: removed code to parse for "plug_in" keyword which was 
	left over from some very early gimp days.
	
	* app/plug-in/plug-in.[ch]: removed now unused function plug_in_add().

2001-12-08  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am: fixed build rules for gimpmarshal.[ch].
	
2001-12-08  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.c: improved code readability by 
	splitting deserialize_property into smaller functions.

	* app/config/gimpconfig.[ch]: added gimp_config_debug_notify_callback()
	for debugging purposes.

	* app/main.c: use gimp_config_debug_notify_callback().

2001-12-08  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-params.[ch]
	* app/config/gimpconfig-types.[ch]: new files implementing special
	GParamSpecs and GValueTypes needed for GimpConfig.
	
	* app/config/gimpbaseconfig.c: register tile-cache-size property
	with GimpParamSpecMemsize.
	
	* app/config/gimpconfig-deserialize.[ch]
	* app/config/gimpconfig-serialize.[ch]: enable serialization and 
	deserialization of non-fundamental types.

2001-12-07  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/devices.[ch]: removed, chopped...

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/gui/Makefile.am

	* app/widgets/gimpdeviceinfo.[ch]
	* app/widgets/gimpdevices.[ch]
	* app/gui/device-status-dialog.[ch]
	* app/gui/input-dialog.[ch]: ...and added here.

	Made GimpToolInfo a GimpContext subclass. Create a GimpDeviceManager
	struct in gimpdevices.c and attach it to the Gimp instance.

	* app/core/gimp.[ch]: removed gimp_create_context(). It was a bad
	idea in the first place beause it prevented GimpContext subclasses
	from being be properly registered with their Gimp instance.

	* app/core/gimpcontext.c: moved the stuff which used to be in
	gimp_create_context() back here. Added a "gimp" property which
	must be set on construction. Added a "dispose" implementation
	which removes the context from it's Gimp's context_list.

	* app/gimprc.c
	* app/core/gimptoolinfo.[ch]
	* app/display/gimpdisplayshell-callbacks.c
	* app/gui/brush-select.c
	* app/gui/dialogs-constructors.c
	* app/gui/gradient-editor.c
	* app/gui/gradient-select.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/palette-editor.c
	* app/gui/palette-select.c
	* app/gui/pattern-select.c
	* app/gui/toolbox.c
	* app/tools/gimppainttool.c
	* app/tools/tool_manager.c
	* app/widgets/gimpimagedock.c: changed accordingly.

	* app/gui/tools-commands.[ch]: made all callback signatures
	the same.

	* app/gui/preferences-dialog.c: cleaned up the
	display_format_string GtkCombo code.

2001-12-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpmarshal.[ch]: removed from CVS, they are generated.

	* app/base/Makefile.am
	* app/base/base-enums.h: new file defining enums that are to be
	registered. Used to build app/base/base-enums.c.

	* app/base/base-types.h: include base-enums.h.

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enumcode.pl
	* tools/pdbgen/enums.pl: parse the new base-enums.h file and modified
	the perl voodoo so it doesn't prefix enums with GIMP_ that are already
	properly namespaced.

	* app/core/core-types.h: don't need to chop GIMP from enum.

	* app/pdb/color_cmds.c
	* app/pdb/tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c: regenerated.

	* app/config/gimpconfig-deserialize.[ch]
	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimpconfig.[ch]: made GimpConfig an interface including
	a reasonable default implementation that works on object properties.

	* app/config/Makefile.am
	* app/config/gimpbaseconfig.[ch]: new GimpBaseConfig using the
	GimpConfig interface. Yet only used for testing from app/main.c.

	* app/main.c: test the new GimpBaseConfig object.

	* app/gimprc.c
	* app/base/base-config.h
	* app/base/*.c
	* app/core/gimpdatafiles.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimppreviewcache.c
	* app/gui/preferences-dialog.c
	* app/paint-funcs/paint-funcs.c
	* app/xcf/xcf-seek.c: need to include glib-object.h since base-config
	contains registered enums now. Follow name change of InterpolationType
	to GimpInterpolationType.
	
2001-12-06  David Neary  <bolsh@gimp.org>

	* plug-ins/common/vpropagate.c: Create Erode and Dilate filter
	menu entries with reasonable defaults for this plug-in.

2001-12-06  Sven Neumann  <sven@gimp.org>

	* app/gui/offset-dialog.c: some GUI fiddling.

2001-12-06  Rebecca Walter <bex@gimp.org>

	* app/gui/module-browser.c
	* app/gui/offset-dialog.c: More of my proofing.

2001-12-06  Dindinx  <David@dindinx.org>

	* plug-ins/*/*.c: use the G_N_ELEMENTS macro where appropriate,
	removing a bunch of unuseful static variables. Changed some
	g_malloc to g_new while I was on it.

2001-12-03  Michael Natterer  <mitch@gimp.org>

	* app/devices.c: use the passed Gimp pointer instead of
	using "the_gimp".

	* app/base/temp-buf.c: indentation.

	* app/gui/preferences-dialog.c: prefs_toggle_callback(): fixed
	segfault when trying to find the prefs_dlg widget from a menu
	item callback (Fixes #65757).

	* app/gui/offset-dialog.[ch]: fixed public prototype, include
	the header in the .c file.

	* app/tools/gimpblendtool.c
	* app/tools/paint_options.c
	* app/tools/transform_options.c: removed usage of "the_gimp".

	* app/gui/menus.c: some menu cleanup: moved all functions which
	operate on the active layer/drawable to <Image>/Layer. Renamed
	"Layers" to "Layer".

	* app/display/gimpdisplayshell.c: changed menu update function
	accordingly.

	* app/gui/image-commands.[ch]
	* app/gui/layers-commands.[ch]: moved stuff from image-commands.*
	to layers-commads.*.

	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c
	* plug-ins/common/align_layers.c
	* plug-ins/common/autocrop.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/c_astretch.c
	* plug-ins/common/color_enhance.c
	* plug-ins/common/guillotine.c
	* plug-ins/common/normalize.c
	* plug-ins/common/rotate.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/zealouscrop.c
	* plug-ins/rcm/rcm.c
	* plug-ins/fp/fp.c: register under <Image>/Layer, some cosmetic
	fixes.

2001-12-03  Sven Neumann  <sven@gimp.org>
	    Michael Natterer <mitch@gimp.org>

	* app/paint-funcs/paint-funcs-mmx.h: removed redefiniton of HAS_ALPHA
	macro.

	* app/core/gimp.c: reverted Daniel's change; it doesn't make the code
	simpler, only more error-prone.

	* app/gui/info-dialog.h
	* app/gui/resize-dialog.h
	* app/core/gimp.h
	* app/core/gimpbrushgenerated.h
	* app/core/gimpbrushpipe.h
	* app/core/gimpchannel.[ch]
	* app/core/gimpcontainer.h
	* app/core/gimpcoreconfig.h
	* app/core/gimpdata.h
	* app/core/gimpdatafactory.[ch]
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable.[ch]
	* app/core/gimpimage.h
	* app/core/gimpimagefile.h
	* app/core/gimplayer.h
	* app/core/gimplayermask.h
	* app/core/gimpmoduleinfo.h
	* app/core/gimppalette.h
	* app/core/gimpundo.h
	* app/widgets/gimpbrushfactoryview.h
	* app/widgets/gimpconstrainedhwrapbox.h
	* app/widgets/gimpcontainermenu.h
	* app/widgets/gimpcontainerview.h
	* app/widgets/gimpdialogfactory.h
	* app/widgets/gimpimagedock.h
	* app/widgets/gimplistitem.h
	* app/widgets/gimpmenuitem.h
	* app/widgets/gimpnavigationpreview.h
	* app/widgets/gimppreview.h
	* app/gimprc.h
	* app/pathP.h
	* app/tools/gimpbezierselecttool.h
	* app/tools/gimpcolorbalancetool.h
	* app/tools/gimpcurvestool.h
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpfreeselecttool.h
	* app/tools/gimphuesaturationtool.h
	* app/tools/gimpinktool-blob.h
	* app/tools/gimpinktool.h
	* app/tools/gimpiscissorstool.h
	* app/tools/gimpmagnifytool.h
	* app/tools/gimpmeasuretool.h
	* app/tools/gimppainttool.h
	* app/tools/gimppathtool.h
	* app/tools/gimprectselecttool.h
	* app/tools/gimpthresholdtool.h
	* app/tools/gimptool.h
	* app/tools/gimptransformtool.h
	* app/base/base-config.h
	* app/base/gimplut.[ch]
	* app/base/pixel-region.h
	* app/base/pixel-surround.[ch]
	* app/base/temp-buf.[ch]
	* app/base/tile-manager-private.h
	* app/base/tile-manager.[ch]
	* app/base/tile-private.h
	* app/base/tile.[ch]
	* app/display/gimpdisplay.h
	* app/display/gimpdisplayshell-selection.h
	* app/display/gimpdisplayshell.h
	* app/gui/brush-select.h
	* app/gui/gradient-editor.h
	* app/gui/gradient-select.h: reverted most of Daniel's changes.
	
	There's no reason to use unsigned integers here and in lots of places 
	it is even wrong. 

	Then it's way too early to convert gbooleans into bitfields. This 
	change may make sense in a few places but can happen later when the 
	API has settled and the code is more stable.
	
	* app/gimprc.c: reverted Daniel's change. This is a GCC-ism and this
	code is about to die soon anyway.

2001-12-03  Daniel Egger  <degger@fhm.edu>

	* app/core/gimp.c: Simplified logic thanks to bitfields.

2001-12-02  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in.c: use g_tree_foreach() instead of deprecated
	g_tree_traverse().

	* app/undo_history.c
	* app/display/gimpdisplayshell-selection.c
	* app/display/gimpdisplayshell.c
	* app/gui/about-dialog.c
	* app/gui/color-area.c
	* app/gui/color-select.c
	* app/gui/gradient-editor.c
	* app/gui/gui.c
	* app/gui/paths-dialog.c
	* app/gui/user-install-dialog.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpinktool.c
	* app/widgets/gimpcursor.c
	* app/widgets/gimpnavigationpreview.c
	* libgimpwidgets/gimpchainbutton.c
	* libgimpwidgets/gimppixmap.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/uniteditor.c
	* plug-ins/ifscompose/ifscompose.c: s/gdk_gc_unref/g_object_unref/, 
	s/gdk_drawable_unref/g_object_unref/

2001-12-02  Daniel Egger  <degger@fhm.edu>

	* app/gimprc.c: Convert ugly comments into named structure fields.
	Much cleaner and less errorprone though may cause troubles on
	older compilers and then needs to be reverted. Please report!

	* app/base/base-types.h: Add FIXME reminder.

	* app/base/gimplut.c: Use CLAMP macro instead of if-cascade. 
	
	* app/base/temp-buf.c: Remove duplicated calculations and simplify
	checks.
	
	* app/base/tile-manager.c: 
	- (tile_manager_get_tile_num): Return success and take an additional
	  pointer for the tilenumber.
	- Simplify logic in the rest of the file as a result.
	- Remove rotten debugging cruft. 
	
	* app/core/gimpbrushgenerated.c: Fix two stylistic nits.

	* app/app_procs.c: Include <stdlib.h> for exit () prototype.

	* app/core/gimpdrawable-blend.c: Include <stdlib.h> for abs () 
	prototype.

	* app/display/gimpdisplay.c: Include <string.h> for memcpy () 
	prototype.
	
	* app/core/gimpimage-convert.c: (HIST_RGB): First parameter is
	not const. Fixes a gcc warning for a wrong return value.

	* libgimpwidgets/gimpunitmenu.c	
	* app/core/gimpunit.c: Add suggested (by gcc 3.1 cvs) parentheses 
	to group correct logic tests together.

	* app/paint-funcs/paint-funcs-generic.h: Fix my HAS_ALPHA macro
	to avoid gcc 3.1 cvs warning.
	
	* app/gimprc.h
	* pathP.h
	* base-config.h
	* app/base/boundary.h
	* app/base/gimplut.[ch]
	* app/base/pixel-region.h
	* app/base/pixel-surround.[ch]
	* app/base/temp-buf.[ch]
	* app/base/tile-manager-private.h
	* app/base/tile-manager.c
	* app/base/tile-private.h
	* app/base/tile.[ch]
	* app/core/gimp.h
	* app/core/gimpbrushgenerated.h	
	* app/core/gimpbrushpipe.h
	* app/core/gimpchannel.[ch]
	* app/core/gimpcontainer.h
	* app/core/gimpcoreconfig.h	
	* app/core/gimpdata.h
	* app/core/gimpdatafactory.[ch]	
	* app/core/gimpdrawable-blend.c	
	* app/core/gimpdrawable.[ch]
	* app/core/gimpimage.h
	* app/core/gimpimagefile.h
	* app/core/gimplayer.h
	* app/core/gimplayermask.h
	* app/core/gimpmoduleinfo.h
	* app/core/gimppalette.h
	* app/core/gimpundo.h
	* app/display/gimpdisplay.h
	* app/display/gimpdisplayshell-selection.h
	* app/display/gimpdisplayshell.h
	* app/gui/brush-select.h
	* app/gui/gradient-editor.h
	* app/gui/gradient-select.h
	* app/gui/info-dialog.h	
	* app/gui/resize-dialog.h
	* app/tools/gimpbezierselecttool.h
	* app/tools/gimpcolorbalancetool.h
	* app/tools/gimpcolorpickertool.h
	* app/tools/gimpcurvestool.h
	* app/tools/gimpdodgeburntool.c	
	* app/tools/gimpfreeselecttool.h
	* app/tools/gimpfuzzyselecttool.h
	* app/tools/gimphuesaturationtool.h
	* app/tools/gimpinktool-blob.h
	* app/tools/gimpinktool.h
	* app/tools/gimpiscissorstool.h
	* app/tools/gimpmagnifytool.h
	* app/tools/gimpmeasuretool.h
	* app/tools/gimppainttool.h
	* app/tools/gimppathtool.h
	* app/tools/gimprectselecttool.h
	* app/tools/gimpthresholdtool.h
	* app/tools/gimptool.h
	* app/tools/gimptransformtool.h
	* app/tools/path_toolP.h
	* app/widgets/gimpbrushfactoryview.h
	* app/widgets/gimpconstrainedhwrapbox.h
	* app/widgets/gimpcontainermenu.h
	* app/widgets/gimpcontainerview.h 
	* app/widgets/gimpdialogfactory.h
	* app/widgets/gimpimagedock.h
	* app/widgets/gimplistitem.h
	* app/widgets/gimpmenuitem.h
	* app/widgets/gimpnavigationpreview.h
	* app/widgets/gimppreview.h: Unsignify lots of variables and
	parameters and use bitfields in structs where possible. First
	part of a huge cleanup all over the code...

2001-12-01  Michael Natterer  <mitch@gimp.org>

	* app/errors.c: forgot a "return".

	* app/gui/error-console-dialog.c: the menu item signals were
	connected "swapped", which is wrong.

	* app/tools/gimperasertool.c: added a cursor_update_func(), update
	the "toggled" state there and chain up. Fixes wrong cursor
	updating.

	Made brush_pipe slection work again, removed the #warnings:

	* app/core/gimpbrush.[ch]
	* app/core/gimpbrushpipe.c: changed brush_class->select_brush()
	and brush_class->want_null_motion() to be proper virtual
	functions. Pass last_coords and cur_coords to them.

	* app/tools/gimppainttool.c: call the functions again.

2001-12-01  Michael Natterer  <mitch@gimp.org>

	* app/main.c
	* app/appenv.h: moved "message_handler" from here...

	* app/core/gimp.[ch]: ...to here. Added gimp_message() and a
	"gui_message_func" pointer...

	* app/gui/gui.c: ...which gets set here to gui_message().

	* app/errors.c: don't include any gui stuff but simply call
	gimp_message().

	* app/app_procs.c: don't set "message_handler" here, it's done in
	gui.c now.

	* app/gui/error-console-dialog.[ch]: use gimp->message_handler.

	* app/gui/dialogs-constructors.c: pass a Gimp pointer to
	error_console_create().

	* app/widgets/gimpwidgets-utils.[ch]: made the "message" parameter
	of gimp_message_box() a const gchar*, not just gchar*.

	* tools/pdbgen/pdb/message.pdb: use gimp->message_handler, don't
	include "appenv.h".

	* app/pdb/message_cmds.c: regenerated.

	* app/devices.[ch]: cleanup before chopping: removed global
	variable "current_device", added devices_get_current(), pass lots
	of Gimp pointers around.

	* app/gimprc.c: pass a Gimp pointer to devices_rc_update().

	* app/display/gimpdisplayshell-callbacks.c
	* app/gui/toolbox.c
	* app/tools/gimppainttool.c: use devices_get_current(), pass Gimp
	pointers to all devices_foo() functions.

	* app/core/gimpimage-mask.c: no need to include "pdb/pdb-types.h".

2001-12-01  Daniel Egger  <degger@fhm.edu>

	* app/core/Makefile.am
	* libgimp/Makefile.am
	* libgimpbase/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimpwidgets/Makefile.am
	* modules/Makefile.am
	* themes/Default/Makefile.am: Don't try to concatenate something
	to a variable not used before but simply assign it. Shuts up
	annoying automake warnings for me.

2001-12-01  Abel Cheung  <maddog@linux.org.hk>

	* tips/{Makefile.am,makefile.mingw}: Added gimp_tips.zh_TW.txt
	  to the targets.

	* tips/gimp_tips.zh_TW.txt: Added traditional Chinese translation
	  in Big5 encoding.

2001-11-30  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/plug_in.[ch]: removed...

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-types.h
	* app/plug-in/plug-in.[ch]: ...and added here.

	* app/appenv.h: removed StackTraceMode and MessageHandlerType...

	* libgimpbase/gimpbasetypes.h: ...and added them here.

	* tools/pdbgen/Makefile.am: don't scan "app/apptypes.h" for enums.

	* tools/pdbgen/enumcode.pl: added a general check to prevent
	enums which are defined in libgimp* from being written to
	"libgimp/gimpenums.h".

	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/core-types.h: include "pdb/pdb-types.h" so including
	"core/core-types.h" gets the whole core type space.

	* app/core/gimp.[ch]: added a "stack_trace_mode" parameter to the
	constructor and store it in the Gimp struct because the value is
	also passed to plug-ins and nobody should include "appenv.h".

	* app/gimprc.[ch]: pass the alternate_system_gimprc and
	alternate_gimprc filenames from the command line to gimprc_prase()
	so we don't need to include "appenv.h".

	* app/batch.[ch]: pass the "batch_cmds" as parameter, don't
	include "append.h".

	* app/app_procs.c: pass more parameters around.

	* app/devices.c
	* app/errors.c
	* app/gimphelp.c
	* app/main.c
	* app/core/gimpgradient.c
	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/file/file-utils.c
	* app/gui/commands.c
	* app/gui/error-console-dialog.c
	* app/gui/file-dialog-utils.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/paths-dialog.c
	* app/gui/user-install-dialog.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/xinput_airbrush.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/message.pdb
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly:

	- changed "plug-in.h" include where needed.
	- don't call gimp_fatal_error() directly, it's called via the log
	  handler when calling g_error().
	- don't incude "errors.h" except from main.c.
	- changed stack_trace and message_handler enum names.
	- get "stack_trace_mode" from Gimp.
	- removed many inclusions of "appenv.h".

	* app/pdb/fileops_cmds.c
	* app/pdb/help_cmds.c
	* app/pdb/message_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db.c: regenerated.

2001-11-30  Michael Natterer  <mitch@gimp.org>

	* app/display/Makefile.am
	* app/display/gximage.[ch]: removed. It was a wrapper around
	nothing since we use GdkRGB.

	* app/display/gimpdisplayshell-render.[ch]: added the render
	buf size defines here, added the #if 0'ed display filter stuff
	and the actual GdkRGB render stuff here too.

	* app/display/gimpdisplayshell.[ch]: added shell->render_buf as
	replacement for the global gximage buffer, renamed shell->scroll_gc
	to shell->render_gc and use it all over the place when rendering
	image data.

	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-scroll.c: changed accordingly.

	* app/gui/gui.c: don't call gximage init/exit stuff.

2001-11-30  Rebecca Walter  <bex@gimp.org>

	* app/gui/gradient-select.c
	* app/gui/gui.c
	* app/gui/indicator-area.c
	* app/gui/info-dialog.c
	* app/gui/info-window.c:  More proofreading.
	In cooperation with Marco Wessel (CyBeR)

2001-11-30  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/colormaps.[ch]: removed.

	* app/app_procs.c: don't call it.

	* app/gui/gui.c: configure GdkRGB here.

	* app/display/gimpdisplayshell.c
	* app/display/gximage.c
	* app/gui/color-notebook.c
	* app/gui/color-select.c
	* app/gui/colormap-dialog.c
	* app/gui/info-window.c
	* app/gui/preferences-dialog.c
	* app/tools/gimpmovetool.c
	* app/display/gimpdisplayshell-selection.c: changed accordingly
	(simply removed the unneded include or use
	gdk_gc_set_rgb_[fg|bg]_color() instead).

	* app/display/gimpdisplayshell.c
	* app/display/gimpdisplayshell-callbacks.[ch]: chopped
	gimp_display_shell_canvas_events() in smaller callbacks. Only the
	events that trigger tool actions are handled in a single callback.

2001-11-30  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpimage-qmask.[ch]: new files: the QMask stuff
	stripped from GUI code. Added gimp_image_qmask_invert().

	* app/core/gimpimage.[ch]: removed the QMask functions.

	* app/display/Makefile.am
	* app/display/gimpdisplayshell-qmask.[ch]: removed.

	* app/gui/Makefile.am
	* app/gui/qmask-commands.[ch]: new files for the new QMask item
	factory callbacks and the qmask query dialog.

	* app/gui/menus.c: added a context menu for the QMask button.

	* app/display/gimpdisplayshell.c
	* app/display/gimpdisplayshell-handlers.c: don't include the qmask
	stuff.

	* app/display/gimpdisplayshell-callbacks.[ch]: Moved the 2 qmask
	callbacks here. Don't popup the dialog on double_click. Show
	the contect menu on right-click.

	* app/display/gimpdisplayshell-callbacks.[ch]:
	gimp_display_shell_canvas_events(): removed the hack of
	conntecting "key_press_event" to gtk_true() while a tool is
	active. Instead, check for (event & GDK_BUTTON1_MASK) in the
	key_press and key_release handlers and stop signal emission. Save
	the modifier state on "button_press" and restore it after
	"button_release".

	Changed the way context menus are updated/shown:

	- removed GimpContainerContextFunc.
	- pass around item factory identifiers (e.g. "<Brushes>")
	- added voodoo to update the menus before showing them.

	* app/widgets/gimpitemfactory.[ch]: gimp_item_factory_new(): take
	a GimpItemFactoryUpdateFunc parameter, attach it as data to the
	factory and use it to update the menu in
	gimp_item_factory_popup_with_date().

	* app/widgets/gimpwidgets-utils.[ch]: removed
	gimp_item_factory_popup_with_data() here.

	* app/widgets/gimpbrushfactoryview.[ch]
	* app/widgets/gimpbufferview.[ch]
	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpdatafactoryview.[ch]
	* app/widgets/gimpdocumentview.[ch]
	* app/widgets/gimpdrawablelistview.[ch]: use item_factory
	identifier strings all over the place.

	* app/widgets/gimpdockbook.c: removed the menu update code, it's
	now in gui/dialogs-commands.c.

	* app/gui/brushes-commands.[ch]
	* app/gui/buffers-commands.[c]
	* app/gui/channels-commands.[ch]
	* app/gui/dialogs-commands.[ch]
	* app/gui/documents-commands.[ch]
	* app/gui/gradient-editor-commands.[ch]
	* app/gui/gradients-commands.[ch]
	* app/gui/layers-commands.[ch]
	* app/gui/palettes-commands.[ch]
	* app/gui/patterns-commands.[ch]: removed all show_context_menu()
	functions and made the update functions public. Changed all
	update functions to use the gimp_item_factory_set_foo() methods
	instead of gimp_menu_item_set_foo().

	* app/gui/menus.c: pass the update functions to the
	gimp_item_factory_new().

	* app/gui/dialogs-constructors.c: pass item factory identifiers to
	all view constructors.

	* app/gui/gradient-editor.c: show the context menu using the new
	method.

	* app/gui/toolbox.c: no need to include "dialogs-commands.h".

2001-11-29  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig.c (gimp_config_serialize): ooops.

2001-11-29  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: set the accelerators for the "Open Recent"
	items > 10 to "" instead of NULL so gtk+ doesn't use the stock
	item's default accel.

	* app/widgets/gimpdock.c
	* app/widgets/gimpimagedock.c: set the docks' titles to
	"Gimp Dock #<n>" instead of just "Gimp" so they can be
	distinguished in the WM's window list or dock or whatever.

2001-11-29  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: put the last_opened menu entries in a
	submenu called "Open Recent", added items to create a dock
	with some useful tabs in it ("Brushes, Patterns & Stuff..."),

	* app/gui/dialogs-commands.[ch]: added a callback for the new
	"Stuff" menu entry.

	* app/gui/dialogs-constructors.h: removed dialogs_lc_get()
	declaration because it doesn't exist.

2001-11-29  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.[ch]: replaced the QMask radio
	buttons by a single check button. Still needs some tuning.

	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell-qmask.[ch]: changed accordingly.

	* app/tools/gimptool.[ch]: added "gboolean handle_empty_image" to
	the GimpTool structure.

	* app/tools/gimpmovetool.c: set it to TRUE.

	* app/tools/gimpfuzzyselecttool.c: don't gimp_[set|unset]_busy()
	while calculating the selection but set the busy cursor on the
	display manually (we have the pointer grabbed anyway).

	* app/display/gimpdisplayshell-callbacks.c: don't check for
	GIMP_IS_MOVE_TOOL(active_tool) but look at
	active_tool->handle_empty_image. Removed the checks for
	GIMP_IS_FUZZY_SELECT_TOOL(active_tool) because fuzzy_select
	doesn't set GIMP busy while it's active any more.

	* app/tools/transform_options.[ch]
	* app/tools/gimptransformtool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c: added widgets for the transform tools'
	constraints (one more #51108 issue fixed).

	* app/tools/gimperasertool.c: cosmetic.

	* app/widgets/gimpdockbook.c: don't hardcode GtkNotebook's
	tab_border to 0 but add a style property for it...

	* themes/Default/gtkrc: ...and set it to 0 here.

2001-11-29  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpenv.c
	* plug-ins/helpbrowser/helpbrowser.c
	* plug-ins/imagemap/imap_preferences.c: use g_build_filename().

	* plug-ins/script-fu/script-fu-scripts.c: use new GDir functions,
	g_build_filename() and g_file_test() to make code more portable.
	Don't use deprecated gdk_font functions. We don't use X fonts any 
	longer.

2001-11-29  Sven Neumann  <sven@gimp.org>

	* app/gimprc.c (save_gimprc_strings): reverted list handling for 
	unknown_tokens to the code used in 1.2 which has the advantage that
	it doesn't crash.

2001-11-29  Sven Neumann  <sven@gimp.org>

	* m4macros/gimp-1.4.m4: use gimptool-1.3.

	* app/display/gimpdisplayshell.c
	* app/gui/gui.c: cosmetic changes from Guillermo S. Romero.

	* plug-ins/common/*.c
	* plug-ins/script-fu/script-fu-scripts.c: applied patches from
	Guillermo S. Romero that change the button ordering. I had to redo
	some of the changes by hand since the patches didn't apply cleanly.
	Hopefully got it all right...

2001-11-28  Kelly Martin  <kmartin@pyrzqxgl.org>

	* base/pixel-region.c base/tile-manager.c: a couple more
	interesting off-by-one errors.  it appears to work now, though.

2001-11-28  Kelly Martin  <kmartin@pyrzqxgl.org>

	* base/pixel-region.c: corrected an off-by-one error, sorry :)

2001-11-28  Kelly Martin  <kmartin@pyrzqxgl.org>

	* app/undo.c: Fixed another use of array of gpointer in place of a
	proper struct, this time in undo_(push|pop)_channel_mod.

	* base/base-types.h
	* base/tile-manager.h
	* base/tile-manager-private.h
	* base/tile-manager.c: added PixelDataHandle as an abstraction
	on top of tiles.  PixelDataHandles either return a pointer into
	the tile data, or create a temporary buffer so the calling
	function can access data from disparate tiles using a single
	buffer.  This is a step in reducing the dependence of core
	image functions being aware of tiles as well as a step toward
	having a single abstraction for pixel data.

	* app/image_map.c: changed to use read_pixel_data_1
	* app/pixel-region.c: changed to use the read_pixel_data and
	write_pixel_data where practical.  

2001-11-28  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-mask.[ch]: s/gimage_mask/gimp_image_mask/g

	* app/floating_sel.c
	* app/undo.c
	* app/undo_history.c
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/core/gimpedit.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-mask-select.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage.c
	* app/display/gimpdisplayshell-qmask.c
	* app/display/gimpdisplayshell-selection.c
	* app/display/gimpdisplayshell.c
	* app/gui/channels-commands.c
	* app/gui/edit-commands.c
	* app/gui/layers-commands.c
	* app/gui/select-commands.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpchannellistview.c
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/selection.pdb: changed accordingly.

	* app/pdb/edit_cmds.c
	* app/pdb/selection_cmds.c: regenerated.

2001-11-28  Michael Natterer  <mitch@gimp.org>

	* app/base/base-types.h: include the new
	"paint-funcs/paint-funcs-types.h".

	* app/paint-funcs/Makefile.am
	* app/paint-funcs/paint-funcs-types.h: new file. Includes
	"base/base-types.h".

	* app/paint-funcs/paint-funcs.[ch]: removed the enums here,
	include "paint-funcs-types.h".

	* app/widgets/widgets-types.h: include "display/display-types.h"

	* app/display/display-types.h: include "widgets/widgets-types.h".

	* app/tools/tools-types.h: include "display/display-types.h"

	* app/gui/gui-types.h: include "tools/tools-types.h".

	The order of namespaces/dependencies should be (but is not):

	(base, paint-funcs) -> (core, file, xcf, pdb) ->
	(widgets, display) -> tools -> gui

	* app/path.c: include "tools/tools-types.h".

	* app/core/Makefile.am
	* app/core/gimpimage-guides.[ch]
	* app/core/gimpimage-merge.[ch]
	* app/core/gimpimage-resize.[ch]
	* app/core/gimpimage-scale.[ch]: new files.

	* app/core/gimpimage.[ch]: removed the stuff which is in the new
	files. Reordered all functions in both the .h and .c files,
	commented the groups of functions.

	* app/core/gimpcontainer.c: create the handler_id using a counter,
	not the address of a pointer, because the address *may* be the
	same twice, added debugging output.

	* app/core/gimpviewable.[ch]: added primitive support for getting
	a preview GdkPixbuf.

	* app/nav_window.c
	* app/undo.c
	* app/undo_history.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.[ch]
	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-scroll.c
	* app/gui/image-commands.c
	* app/gui/info-window.c
	* app/gui/layers-commands.c
	* app/gui/palette-import-dialog.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/widgets/gimpcontainerview-utils.c
	* app/xcf/xcf-load.c: changed accordingly, some cleanup.

	* tools/pdbgen/pdb/guides.pdb
	* tools/pdbgen/pdb/image.pdb: changed accordingly, reordered functions.

	* app/plug_in.c: set the labels of the "Repeat" and "Re-Show" menu
	items to the name of the last plug-in (Fixes #50986).

	* app/display/gimpdisplayshell.[ch]: set the labels of "Undo" and
	"Redo" to the resp. undo names. Much simplified the WM-icon stuff
	by removing most code and using gimp_viewable_get_new_preview_pixbuf().

	* app/widgets/gimpbrushfactoryview.c: forgot to assign the GQuark
	returned by gimp_container_add_handler().

	* app/pdb/guides_cmds.c
	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.[ch]: regenerated.

2001-11-28  Kelly Martin  <kmartin@pyrzqxgl.org>

	* app/undo.c: Fixed evil<tm> double casting of enum to glong to
	gpointer for layer_mod undo by using a struct instead of an array
	of gpointer (!!!) for storing layer_mod undo data.  Also moved
	layer offset undo information out of the undo tile manager. 
	* app/image_map.c: Moved layer offset undo information out of the
	undo tile manager.

	Above changes may break image_map and layer_mod undos, please test
	as I haven't. :)

2001-11-28  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpimage-projection.[ch]: new files. Changed function
	names to be consistent.

	* app/core/gimpimage.[ch]: removed the projection stuff
	here. Removed the gimp_image_composite_blah() functions because
	they were just calling the resp. gimp_image_projection ones.

	* app/core/gimpimage-contiguous-region.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-crop.c
	* app/core/gimppalette-import.c
	* app/undo.c
	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-render.c
	* app/gui/info-window.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpiscissorstool.c: changed accordingly.

2001-11-28  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-wilber-16x16.png
	* themes/Default/images/stock-wilber-32x32.png
	* themes/Default/images/stock-wilber-48x48.png
	* themes/Default/images/stock-wilber-64x64.png: new files.

	* themes/Default/Makefile.am: create gimp-wilber-pixbufs.h

	* libgimpwidgets/gimpdialog.[ch]: removed gimp_dialog_set_icon().

	* libgimpwidgets/gimpwidgets.[ch]: added gimp_widgets_init() which
	calls gimp_stock_init() and calls gtk_window_set_default_icon_list()
	with the above set of inlined pixbufs.

	* libgimp/gimpui.c
	* app/gui/gui.c: call gimp_widgets_init().

	* app/display/gimpdisplayshell.c: removed the fallback icon stuff.

	* app/gui/splash.c
	* app/gui/user-install-dialog.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpitemfactory.c
	* libgimpwidgets/gimphelpui.c
	* plug-ins/imagemap/imap_default_dialog.c
	* plug-ins/imagemap/imap_file.c: don't call gimp_dialog_set_icon().

	* plug-ins/common/uniteditor.c: wanted to start hacking here...
	Nothing really changed.

2001-11-28  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpbutton.c
	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpoffsetarea.c: fixed button_press event handling,
	removed double g_return_if_fail()s, misc. cleanup.

	* app/display/gimpdisplayshell.c: removed the SET_COLOR() stuff
	here...

	* app/gui/menus.c: ...and added it here so it actually works.

	* app/widgets/gimpcolorpanel.c: add color previews to the
	item_factory.

	* app/widgets/gimpdockbook.c: use the item_factory functions now
	that they are in widgets/.

	* app/widgets/gimpitemfactory.[ch]: nothing, we just want to keep
	the RCS hirtory.

2001-11-27  Daniel Egger  <degger@fhm.edu>

	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c
	* app/paint-funcs/paint-funcs.h: Unsignified lots of arguments
	and misc cleanups.

2001-11-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/gimpitemfactory.[ch]: put the whole generic stuff
	from gui/menus.[ch] here (where generic == less_evil because it at
	least does not depend on particular menu entries).

	* app/gui/menus.[ch]: removed the stuff here. Only the global menu
	definitions and bad hacks to adjust them to our needs left.
	Removed all menus_get_foobar_factory() functions because we can
	use gtk_item_factory_from_path("<FooBar>") all over the place.

	* app/plug_in.c
	* app/display/gimpdisplayshell.c
	* app/gui/brushes-commands.c
	* app/gui/buffers-commands.c
	* app/gui/channels-commands.c
	* app/gui/dialogs.c
	* app/gui/documents-commands.c
	* app/gui/file-dialog-utils.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor-commands.c
	* app/gui/gradients-commands.c
	* app/gui/gui.c
	* app/gui/layers-commands.c
	* app/gui/palettes-commands.c
	* app/gui/paths-dialog.c
	* app/gui/patterns-commands.c
	* app/gui/toolbox.c: changed accordingly. None of these files
	except gui/gui.c includes gui/menus.h any more.

2001-11-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontainer.c: GType is a pointer now, not a guint.

	* app/widgets/gimpdock.c: chain up in widget_class->style_set().

	Gradient Editor chopping plus merging of bex' proofreading:
	(fixes #62278).

	* app/core/core-types.h: moved the gradient related enums here.

	* app/core/gimpgradient.[ch]: removed the enums, added gradient
	segment utility functions from the gradient_editor.

	* app/gui/gui-types.h: added the GradientEditor typedef here.

	* app/gui/Makefile.am
	* app/gui/gradient-editor-commands.[ch]: new files implementing
	callbacks and menu_update stuff for the new gradient_editor
	item factory.

	* app/gui/gradient-editor.[ch]: removed tons of code, namespace
	cleanup, stuff...

	* app/gui/menus.[ch]: added the gradient_editor menu stuff here.
	Added menus_set_color() which creates & updates a color menu item
	(will soon be used in other places too). Renamed menus_set_state()
	to menus_set_active().

	The editor's menu code is ugly as before, only different and evil
	the same way as the rest of the menu stuff, so it's at least
	consistent :)

	* app/display/gimpdisplayshell.c: changed accordingly.

	* app/gui/test-commands.c: don't include "gradient-editor.h".

2001-11-27  Sven Neumann  <sven@gimp.org>

	* configure.in
	* app/Makefile.am
	* app/config/gimpconfig.[ch]
	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimpconfig-deserialize.[ch]: added new base class
	GimpConfig that knows how to serialize and deserialize it's properties
	in sexp format. Contains two example properties that will go into
	derived classes once this is really used.

	* app/main.c: deserialize and serialize the test GimpConfig object to
	~/.gimp-1.3/foorc (only for debugging).

	* app/widgets/widgets-types.h
	* app/core/core-types.h: moved GimpPreviewSize enum to core-types.

	* app/core/core-types.h: don't include gdk-pixbuf.h.

	* app/core/gimptoolinfo.h
	* app/core/gimpimagefile.c: include gdk-pixbuf.h.

	* app/core/gimpimage.[ch]: made construct_flag a gboolean.

	* app/core/gimpdrawable-invert.c
	* app/core/gimpunit.c
	
	* tools/pdbgen/pdb/plug_in.pdb
	* app/pdb/plug_in_cmds.c: removed unused variables.

	* app/display/Makefile.am: removed .PHONY and files cruft

	* app/Makefile.am
	* libgimp/Makefile.am
	* libgimpbase/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimpwidgets/Makefile.am
	* plug-ins/Makefile.am: removed commented out makefile.mingw rules.
	If we ever need them again, they can easily be resurrected from CVS.
	
2001-11-26  Kelly Martin  <kmartin@pyrzqxgl.org>

	* app/Makefile.am
	* libgimp/Makefile.am
	* libgimpbase/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimpwidgets/Makefile.am
	* plug-ins/Makefile.am:
	Commented out makefile.mingw rules in Makefile.am.  These conflict
	with the default rules generated by automake and generate annoying
	warnings.  tml doesn't think they're needed anymore.  If it turns
	out they are, they can be added back.

2001-11-26  Rebecca Walter  <rjp@mail.tele.dk>

	* app/gui/convert-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/error-console-dialog.c
	* app/gui/file-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c: More of my extensive proofing.
	Someone needs to check bex comments and do some hacking.

2001-11-26  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.c: gimp_image_construct_layers/channels():
	actually free the reverse_list after projecting the drawables.
	(Spotted by Kelly Martin).

2001-11-26  Michael Natterer  <mitch@gimp.org>

	* tools/authorsgen/contributors: added Rebecca Walter (bex).

	* AUTHORS
	* app/gui/authors.h: regenerated.

	* app/widgets/widgets-types.h: added GimpPreviewSize enum.

	* app/gimprc.c
	* app/gui/menus.c
	* app/gui/preferences-dialog.c
	* app/widgets/gimpdockbook.c: use the new enum.

	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpmagnifytool.c: added "(<Ctrl>)" and "(<Alt>)" to
	some tool options strings.

	* app/tools/gimpmovetool.c: some more widgets for hidden tool
	options (#51108).

	* app/tools/transform_options.c: renamed to "Tool Paradigm" stuff
	to something more understandable.

	* app/widgets/gimpdock.c: added a style property for the height
	of the separator.

	* themes/Default/gtkrc: show how to use the new property.

	* app/widgets/gimpcontainerview.c
	* app/widgets/gimpdockable.c
	* app/widgets/gimplayerlistview.c: waste less lines when calling
	gtk_widget_style_get().

2001-11-25  Simon Budig  <simon@gimp.org>

	* app/tools/gimperasertool.c
	* app/tools/gimperasertool.h
	* tools/pdbgen/pdb/tools.pdb: Removed the color_erase option of
	the eraser.

	* app/pdb/tools_cmds.c: regenerated.

2001-11-25  Simon Budig  <simon@gimp.org>

	* app/paint-funcs/paint-funcs.c: ANTI_ERASE had wrong
	layer mode information (according to the comments).
	Changed it to something sane. I did test it and no
	errors occurred. I wonder why they did not happen earlier...

2001-11-25  Sven Neumann  <sven@gimp.org>

	* Made 1.3.1 release.
	
2001-11-25  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/Makefile.am
	* data/misc/Makefile.am: made 'make dist' happy.

2001-11-25  Sven Neumann  <sven@gimp.org>

	* Makefile.am
	* configure.in
	* gimp-1.3.pc.in
	* gimpui-1.3.pc.in: added pkg-config files for gimp-1.3.

	* gimptool-1.4.in: renamed to gimptool-1.3.in

	* docs/Makefile.am
	* docs/gimptool-1.4.1.in renamed to docs/gimptool-1.3.1.in.
	Disabled installation of man-pages; they need to be updated and
	should probably be renamed.

	* app/Makefile.am: generate binary called gimp-1.3 so we don't clash
	with older gimp installations.

	* gimp-1.3.pc.in
	* gimpui-1.3.pc.in: added pkg-config files for gimp-1.3.

	* INSTALL
	* NEWS: updated

2001-11-24  Sven Neumann  <sven@gimp.org>

	Clean up after Marc Lehmann who changed tools/pdbgen/pdb/color.pdb
	and tools/pdbgen/pdb/image.pdb without writing a ChangeLog entry and
	without regenerating the respective files :-(
	
	* tools/pdbgen/pdb/color.pdb: another typo fix similar to the one
	Marc spotted.

	* app/pdb/color_cmds.c
	* app/pdb/image_cmds.c
	* libgimp/gimpcolor_pdb.c
	* libgimp/gimpimage_pdb.c: regenerated.

2001-11-24  Sven Neumann  <sven@gimp.org>

	* app/gimprc.c
	* app/plug_in.[ch]
	* app/pdb/plug_in_cmds.c
	* tools/pdbgen/pdb/plug_in.pdb: started to clean up plug_in code a 
	little. Still a long way to go...

	* app/gui/splash.c: simplified

2001-11-24  Simon Budig  <simon@gimp.org>

	* app/base/base-types.h
	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c
	* app/paint-funcs/paint-funcs.h
	* app/widgets/gimpwidgets-constructors.c:

	implemented "Color Erase" paint mode, the hack in the
	eraser tool will be removed.

	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated

2001-11-24  Rebecca Walter  <rjp@mail.tele.dk>

	* app/gui/about-dialog.c
	* app/gui/brush-select.c
	* app/gui/color-notebook.c
	* app/gui/colormap-dialog.c: miscellaneous proofreading.

2001-11-23  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c: don't draw resize_grip in status bar
	(patch from Guillermo S. Romero).

	* app/devices.c
	* app/display/gimpdisplayshell-filter-dialog.c
	* app/display/gimpdisplayshell-qmask.c
	* app/display/gimpdisplayshell.c
	* app/gui/channels-commands.c
	* app/gui/color-notebook.c
	* app/gui/convert-dialog.c
	* app/gui/error-console-dialog.c
	* app/gui/file-new-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/layers-commands.c
	* app/gui/module-browser.c
	* app/gui/offset-dialog.c
	* app/gui/palette-import-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/gui/resolution-calibrate-dialog.c
	* app/gui/user-install-dialog.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c
	* app/widgets/gimpfontselection-dialog.c
	* libgimpwidgets/gimpquerybox.c
	* libgimpwidgets/gimpunitmenu.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c: changed button order to follow the
	new GTK+ style: confirmative is right-most (for LTR rendering).

2001-11-23  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontainer.c: removed a useless g_return_if_fail().

	* app/widgets/gimpcontainereditor.h: removed GimpViewType enum.

	* app/widgets/widgets-types.h: added it here.

	* app/widgets/gimpcontainerview-utils.[ch]: added a utility function
	which gets the GimpContainerView out of a GimpDockable.

	* app/widgets/gimpdialogfactory.[ch]: added support for saving and
	loading of each GimpDockable's preview size. Store the dialog's
	default preview size in the GimpDialogFactoryEntry.  Pass the
	preview_size to each created dialog.

	* app/gui/menus.c: added menu items for setting the preview_size
	and switching between list and grid view. Removed the item
	overkill in the "Add Tab" submenu.

	* app/gui/dialogs-commands.[ch]: added callbacks for the new items.

	* app/widgets/gimpdockbook.c: set the item's state before showing
	the menu.

	* app/errors.c
	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/edit-commands.c
	* app/gui/gui.c
	* app/gui/indicator-area.c
	* app/gui/toolbox.c: changed accordingly.

	* app/tools/selection_options.[ch]: cleaned up the selection
	options and added some tooltips. Much more to do...

2001-11-23  Rebecca Walter  <rjp@mail.tele.dk>

	* app/file/*.c: Proofing. only minor changes.

2001-11-23  Sven Neumann  <sven@gimp.org>

	* app/gimprc.c: don't include gimputils.h, it's gone.

	* libgimpbase/Makefile.am: removed stale reference to gimputils.h.

	* libgimpwidgets/gimpcolorbutton.h: wanted to type G_END_DECLS here.

2001-11-23  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version number to 1.3.1. 
	Require Glib/GTK+-1.3.11 and Pango-0.22. Removed GDK_DISABLE_COMPAT_H
	and GTK_DISABLE_COMPAT_H from our default CFLAGS since they don't
	exist any longer.
	
	* RELEASE-TO-CVS.patch: removed since the glib/gtk+ API is supposed to
	be frozen now.

	* HACKING: removed reference to RELEASE-TO-CVS.patch

	* app/gui/menus.c
	* app/tools/gimptexttool.c: applied RELEASE-TO-CVS.patch to conform
	to the new GTK+/Pango API.

	* app/core/Makefile.am: generate marshallers with gimp_marshal prefix.
	
	* app/core/gimpmarshal.list: added all marshallers we use.

	* app/core/gimpmarshal.[ch]: regenerated.

	* app/[lots of .c files]: use gimp_marshal_* for all marshallers.
	
	* data/images/
	* app/app_procs.c
	* app/gui/splash.c:

	* libgimpbase/Makefile.am
	* libgimpbase/gimpbase.h
	* libgimpbase/gimputils.[ch]: removed since they are no longer needed.

	* app/gimprc.c
	* plug-ins/common/ps.c
	* plug-ins/gdyntext/gdyntext.c
	* plug-ins/gdyntext/gdyntextcompat.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/script-fu/script-fu-scripts.c: use glib functions instead
	of gimp_strescape() and gimpstrcompress().

	* cleaned up all header files: use G_BEGIN_DECLS/G_END_DECLS, declared
	all _get_type function as G_GNUC_CONST.
	
	* tools/pdbgen/enumcode.pl
	* tools/pdbgen/lib.pl: make them generate header files using 
	G_BEGIN_DECLS/G_END_DECLS.

	* pixmaps/Makefile.am
	* pixmaps/wilber3.xpm: removed ...
	* data/images/tips_wilber.png: ... and added here as PNG
	
	* app/gui/tips-dialog.c: load the Wilber on demand using GdkPixbuf.

	* data/images/gimp_splash.ppm: removed ...
	* data/images/gimp_splash.png: ... and added as PNG

	* app/app_procs.c
	* app/gui/splash.[ch]: load the splash image using GdkPixbuf.

	* app/gui/about-dialog.c: sink the GtkPreview.
	
2001-11-22  Michael Natterer  <mitch@gimp.org>

	* app/devices.c: made device_status_update() static as declared.

	* app/core/gimpobject.h: don't include <gobject/gobject.h> as this
	is forbidden now (doesn't hurt as we need to include glib or gtk+
	before gimp headers in .c files anyway).

	* app/widgets/gimpcontainerlistview.c: better handling of
	"button_press" of list items: don't let a selected item being
	deselected, fixed context menu popup.

2001-11-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/paint_options.c
	* app/tools/transform_options.c: removed the remaining cases of
	we-rely-on-the-radio-buttons-being-in-the-same-order-as-the-enum
	and use gimp_radio_group_set_active() instead.
	Use GINT_TO_POINTER(gint) instead of (gpointer)gint all over
	the place.

2001-11-22  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpstock.c: added stock *items* (not only icons)
	for all tools so they can be used as action buttons.

	* app/tools/gimptransformtool.[ch]: added
	transform_tool->use_center so subclasses can switch on/off center
	detection/cursor_update . Added an oper_update() implementation
	and figure the current handle out there. Reordered button_press()
	so we don't need to call it recursively.

	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: use the new stock items instead of
	_("Rotate") etc.

	* app/tools/gimpperspectivetool.c
	* app/tools/gimpscaletool.c: allow the whole thing being dragged
	around by handling the center separately.

	* app/tools/gimpdrawtool.c: gimp_draw_tool_on_handle(): need to
	use the radius, not the diameter to check if being over a
	GIMP_HANDLE_CIRCLE handle.

2001-11-22  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.[ch]: use "gimp-item-data" instead of
	"user_data" as data key when attaching values to radio buttons or
	menu items. (For backward compat, attach "user_data" additionally,
	but don't use it to _get_data()).
	Added gimp_radio_group_set_active() which works like
	gimp_options_menu_set_history() and sets the active item by
	attached "gimp-item-data" value.

	* app/gui/brush-select.c
	* app/gui/file-new-dialog.c
	* app/gui/info-window.c
	* app/gui/preferences-dialog.c
	* app/gui/resolution-calibrate-dialog.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpselectiontool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/widgets/gimplayerlistview.c: removed all kinds of
	"user_data" stuff and evil hacks to find a radio button by the
	value it represents (simply call gimp_radio_group_set_active()).

	* app/tools/gimpdrawtool.c: added a g_return_if_fail().

	* app/tools/gimpfliptool.c: don't set draw_tool_class->draw to NULL,

	* app/tools/gimptransformtool.[ch]: fixed some stuff i broke when
	removing the old "interactive" boolean (there is no
	non-interactive transform tool any more).  Put the info_dialog
	pointer and the old_trans_info array into the GimpTransformTool
	instance. Added gimp_transform_tool_info_dialog_connect(). Don't
	include any subclasses any more.

	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: use
	gimp_transform_tool_info_dialog_connect() to create and connect
	the info dialogs' action_area.

2001-11-21  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: sink the GtkPreview created for the splash.
	
	* libgimpwidgets/gimphelpui.c: ref and sink the tooltips on creation.
	
2001-11-21  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpfileselection.c: set the window title for file
	selection dialogs as we do for directory selection dialogs. Provide
	fallbacks if gimp_file_selection_new() is called with a NULL title.

	* plug-ins/script-fu/script-fu-enums.h
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/siod-wrapper.c: applied a modified version of a
	patch from Matteo Nastasi <matteo.nastasi@milug.org> that adds the new 
	Script-Fu parameter type SF-DIRNAME.

	* plug-ins/script-fu/scripts/test-sphere.scm: use SF-DIRNAME.

2001-11-21  Michael Natterer  <mitch@gimp.org>

	* RELEASE-TO-CVS.patch: regenerated with the stuff below included.

2001-11-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptexttool.c: seems I've comitted something which
	should only be in RELEASE-TO-CVS.patch. Sorry...

2001-11-21  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: key press and release
	events were sent swapped to tools.

	* app/tools/selection_options.[ch]: added radio buttons for the
	selection operation (REPLACE, ADD, ...). Partly fixes #51108.

	* app/tools/gimpselectiontool.[ch]: honor the new tool options
	stuff. Do evil things in gimp_selection_tool_modifier_key().

	* app/tools/gimpbycolorselecttool.[ch]: removed most of the
	widgets from the by_color_select window because they are all in
	the selection_options now.

	* libgimpwidgets/gimpstock.[ch]: added new stock items for the
	buttons.

	* themes/Default/Makefile.am
	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-button-selection-add.png
	* themes/Default/images/stock-button-selection-intersect.png
	* themes/Default/images/stock-button-selection-replace.png
	* themes/Default/images/stock-button-selection-subtract.png: new
	stock images.

2001-11-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/selection_options.c: added "reset" code for the new
	auto_shrink tool options.

2001-11-21  Michael Natterer  <mitch@gimp.org>

	* pixmaps/Makefile.am
	* pixmaps/anchor.xpm
	* pixmaps/edit.xpm
	* pixmaps/eye.xpm
	* pixmaps/linked.xpm
	* pixmaps/paste-as-new.xpm
	* pixmaps/paste-into.xpm
	* pixmaps/refresh.xpm: felt like i had to remove some cruft, so
	these unused pixmaps had to go to the Attic.

2001-11-21  Michael Natterer  <mitch@gimp.org>

	* RELEASE-TO-CVS.patch: regenerated after the text tool changes.

2001-11-20  Michael Natterer  <mitch@gimp.org>

	* app/tools/tools-types.h: added GimpToolRegisterFunc,
	GimpToolRegisterCallback and GimpToolOptionsNewFunc typedefs
	which are used to register tools.

	* app/tools/tools.c: put the register funcs in an array of
	GimpToolRegisterFuncs. Pass a Gimp pointer *plus* a
	GimpToolRegisterCallback (which is tool_manager_register_tool())
	to the tools' register functions.

	* app/tools/tool_manager.[ch]: added a GimpToolOptionsNewFunc to
	the parameters of tool_manager_register_tool(). Create the tool
	options here, not in each tool.

	* app/tools/paint_options.[ch]
	* app/tools/selection_options.[ch]
	* app/tools/tool_options.[ch]
	* app/tools/transform_options.[ch]: all _init() and _new()
	functions take a GimpToolInfo pointer now. The _reset() func needs
	to be set manually now.

	* app/tools/[all_tools].[ch]: changed accordingly:

	- pass GimpToolOptionsNewFuncs to the register callback.
	- don't create the tool options in the tools' _init() function.
	- removed all static tool options variables.
	- get the options from the tool system in the cases i missed
	  in my last commit.
	- added minor hacks to get rid of the static options pointer
	  in some pathological cases :) (i.e. the ink tool).

2001-11-20  David Neary <dneary@eircom.net>

	* app/core/gimppalette.c: Included errno.h

2001-11-20  Rebecca Walter <rjp@mail.tele.dk>

	* app/core/gimpedit.c
	* app/core/gimpimagefile.c
	* app/core/gimpmoduleinfo.c
	* app/core/gimpmodules.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c: More of the extensive proofing. Fun fun fun!

2001-11-20  Sven Neumann  <sven@gimp.org>

	* app/gui/preferences-dialog.c
	* plug-ins/common/gif.c
	* plug-ins/common/jpeg.c
	* plug-ins/common/mail.c: don't strip last character off when 
	retrieving text from a GtkTextBuffer. There used to be a bug in GTK+
	that made this necessary. It has been fixed in the meantime.

	* plug-ins/gimpressionist/size.c: merged string fix from stable branch.

2001-11-20  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpdrawtool.[ch]
	* app/tools/gimppainttool.[ch]
	* app/tools/gimprectselecttool.[ch]
	* app/tools/gimptool.[ch]
	* app/tools/gimptransformtool.[ch]: use simple virtual functions
	instead of signals for all tools because they are much faster and
	don't need to be signals at all.

2001-11-20  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.c: put a g_object_ref() on a different line.

	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpmodules.c: ne need to #include "core/..." here.

	* app/display/gimpdisplay-handlers.c: added debugging output
	because we have an image refcounting problem :(

	* app/display/gimpdisplayshell-handlers.c: fixed a signal
	disconnection.

	* app/tools/gimpbezierselecttool.[ch]
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimpsmudgetool.c: get the tool's options via
	tool->tool_info->tool_options, not from the local statis pointer.
	Some minor cleanups & function reordering.

	* app/widgets/gimpdockbook.c: return TRUE from the notebook tabs'
	"button_press" handler, connect DND before cnnecting to
	"button_press" because we now stop it's emission.

2001-11-19  Daniel Egger  <degger@fhm.edu>
	
	* app/paint-funcs/paint-funcs.h: Added magic comment to prevent
	enums from being exported.

2001-11-19  Daniel Egger  <degger@fhm.edu>
	
	* app/paint-funcs/paint-funcs-mmx.h 
	* app/paint-funcs/paint-funcs.c: Fixed typoes and brought the
	code back to compileland.

	Now the code IS tested. :)

2001-11-19  Michael Natterer  <mitch@gimp.org>

	Some moving of unused files so they don't clutter app/...

	* app/gdisplay_color.[ch]
	* app/gdisplay_color_ui.[ch]: removed...

	* app/display/gimpdisplayshell-filter.[ch]
	* app/display/gimpdisplayshell-filter-dialog.[ch]: ...added here.

2001-11-19  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay-foreach.c: forgot to commit last time.

	Transform stuff cleanup:

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpdrawable-transform.[ch]: new files implementing
	the actual transform functions cut from tools/gimptransformtool.*.

	* app/core/gimpdrawable-transform-utils.[ch]: new files implementing
	transform matrix assembly utility functions.

	* app/tools/gimptransformtool.[ch]: removed the stuff here. cleanup.

	* app/tools/transform_options.[ch]: removed all stuff which does
	not belong here, e.g. the transform_tool_* functions and the
	global "transform_options" variable. Works like all other tool
	options now.

	* app/tools/gimpfliptool.[ch]
	* app/tools/gimpperspectivetool.[ch]
	* app/tools/gimprotatetool.[ch]
	* app/tools/gimpscaletool.[ch]
	* app/tools/gimpsheartool.[ch]: massive code removal because
	we can use core/gimpdrawable-fransform* functions now. cleanup.

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/groups.pl: added new PDB group "transform_tools".

	* tools/pdbgen/pdb/tools.pdb: removed the transform stuff here...

	* tools/pdbgen/pdb/transform_tools.pdb: and added *much*
	simplified versions which use the new core/gimpdrawable-transform*
	utilities.

	* app/pdb/Makefile.am
	* app/pdb/transform_tools_cmds.c: new file.

	* app/pdb/internal_procs.c
	* app/pdb/tools_cmds.c: regenerated.

	* libgimp/Makefile.am
	* libgimp/gimp_pdb.h
	* libgimp/gimptransformtools_pdb.[ch]: new files.

	* libgimp/gimptools_pdb.[ch]: regenerated.

2001-11-19  Daniel Egger  <degger@fhm.edu>

	* app/paint-funcs/paint-funcs.c
	* app/paint-funcs/paint-funcs-generic.h 
	* app/paint-funcs/paint-funcs.h: 
	- Statified a few functions so they can be inlined.
	- Simplified function calls.
	- Unsignified variables and parameters where possible.
	- Reduced lookuptable size for add_pixels from 256*256*4 bytes
	  to 2*256-1 bytes and O(n*n) function in paint_funcs_setup
	  to O(n). Should reduce memory consumption by almost 1/4 Mb.
	
	This needs much more cleanup....
	
2001-11-19  Daniel Egger  <degger@fhm.edu>
	
	* app/paint-funcs/paint-funcs-mmx.h: New file. Added glue code
	for the assembly MMX functions.

	* app/paint-funcs/paint-funcs-generic.h: Moved MMX code from here ...
	* app/paint-funcs/paint-funcs-mmx.h: ... to here. Cleaned up a bit
	and don't check for use_mmx on every single call but ...
	* app/paint-funcs/paint-funcs.c: (paint_funcs_setup): ... here and
	register MMX functions if CPU has those capabilities.

	Code is untested for the MMX case due no available Intel-Machine
	right now but should't be to far away from a working state. 

2001-11-19  Sven Neumann  <sven@gimp.org>

	* RELEASE-TO-CVS.patch: changes to the text tool to make it compile 
	with the new PangoFT2 API. 

2001-11-19  Daniel Egger  <degger@fhm.edu>

	* app/paint-funcs/paint-funcs.c
	* app/paint-funcs/paint-funcs-generic.h: Split generic (read: C) 
	code for pixelmanipulation and most of the code that belongs to it
	into new file.
	(apply_layer_funcs): Gone. The correct layer function is now 
	dispatched from the layer_mode_funcs table and the table is 
	per default initialised with the generic functions. Arguments
	will be passed by a struct apply_layer_mode_struct instead
	of directly per stack to avoid parameter typying madness.
	
	It's now cleanly possible to check for availabilty of 
	MMX/AltiVec/(insert your favourite brew here) in 
	paint_funcs_setup () and change the table to use faster routines.
	The old MMX cruft which is temporaribly in paint-funcs-generic.h
	will soon be gone but I'm to tired now.

	* app/paint-funcs/paint-funcs.c: Braind dead code for temporary 
	buffer (which never shrunk only grew) gone and replaced by 
	straightforward code.

	* app/paint-funcs/paint-funcs-generic.h: Applied a bunch of obvious 
	optimisations to reduce code size and avoid parameter madness.

	* paint-funcs-[gray|graya|indexed|rga|rgba].[c|h]: Gone. I lost
	several days of work on these files and came to the conclusion
	that there has to be an easier way anyway. :)

	Everything well tested on PPC and producing exactly the same results
	as the code before so this has good odds to be the first major
	change that won't break GIMP. :)

2001-11-18  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay-foreach.c: fixed a comment.

	* app/gui/file-open-dialog.c: no need to declare
	"extern GSList *display_list;".

	* app/gui/brush-select.c
	* tools/pdbgen/pdb/brush_select.pdb: pass opacity as [0.0..100.0]
	through the PDB and as [0.0..1.0] to the app.

	* app/pdb/brush_select_cmds.c: regenerated.

	* plug-ins/gfig/gfig.c: full opacity is 100.0, not 1.0.

	(GFig and script-fu may still be broken after this change).

2001-11-17  Michael Natterer  <mitch@gimp.org>

	Made --no-interface not calling gtk_init() (and thus not
	contacting the X server) any more. (Fixes #58961).

	* app/core/gimp.[ch]: added two new function pointers
	"gui_main_loop_func" and "gui_main_loop_quit_func" and an own
	stack of GMainLoops which is used if they are not set.

	* app/gui/gui.[ch]: added main loop functions here and set them as
	pointers in the Gimp instance. Separated gui_libs_init() from
	gui_themes_init() so it can be used as replacement for gtk_init()
	and be called before command line parsing.

	* app/main.c: check for "--no-interface" before initializing
	anything. Added a "--g-fatal-warnings" option (cut'n'paste from
	gtkmain.c). Added a check for "--" (end of options).

	* app/app_procs.c: call the new gimp_main_loop() functions,
	call gui_themes_init().

	* app/devices.[ch]: reduce usage of "the_gimp" by passing "Gimp"
	pointers to some functions.

	* app/plug_in.c: some ugly checks for the_gimp->no_interface which
	will go away once this file is core/ui chopped. Call
	gimp_main_loop() stuff instead of gtk_main().

	* app/core/gimptoolinfo.c: allow passing a NUL GdkPixbuf pointer.

2001-11-17  Wang Jian  <lark@linux.net.cn>

	* configure.in(ALL_LINGUAS): Added zh_CN for Simplified Chinese.

2001-11-17  Daniel Egger  <egger@fhm.edu>

	* app/base/base.c: Prevent from crash if swap_path == NULL. 

2001-11-16  Michael Natterer  <mitch@gimp.org>

	Wishlist item #57669:

	* app/gimprc.[ch]: replaced gimprc option "allow-resize-windows"
	by "resize-windows-on-zoom" and "resize-windows-on-resize".

	* app/gui/preferences-dialog.c: added a toggle for
	"resize-windows-on-resize".

	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell-scale.c
	* app/tools/gimpmagnifytool.c
	* docs/gimprc.5.in
	* etc/gimprc.in
	* etc/gimprc.win32: changed accordingly.

	* app/display/gimpdisplay-area.[ch]: added gimp_area_new().

	* app/display/gimpdisplay.c: cleanup usage of GimpArea.

	* app/display/gimpdisplayshell.[ch]: added configurable canvas
	padding color and a small color_panel to change it in the upper
	right corner of the window.

	* app/display/gimpdisplayshell-callbacks.[ch]: added a callback
	for the color_panel, initialize the color in the "realize"
	callback.

	Wishlist item #51548.

	* app/display/gimpdisplayshell-selection.[ch]
	* app/gui/menus.c
	* app/gui/view-commands.[ch]: made the layer boundary toggleable
	separately from the selection.

	* app/gui/color-notebook.c: #if 0'ed a debugging g_print().

2001-11-16  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorbutton.[ch]: added Black and White to popup
	menu. Take widget->allocation into account when calculating popup 
	position since GtkButton is a NO_WINDOW widget now.

2001-11-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage.c: s/G_GNUC_PRETTY_FUNC/G_GNUC_PRETTY_FUNCTION/

2001-11-16  Rebecca Walter  <rjp@mail.tele.dk>

	* app/core/gimpcontext.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdrawable-bucket-fill.c
	* app/core/gimpdrawable.c
	* app/core/gimpgradient.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage.c: Extensive proofreading of messages and 
	warnings.  Improved standardization of string format and content.

2001-11-15  Michael Natterer  <mitch@gimp.org>

	Gimp's opacity values are a pain... the core actually *should*
	only accept and expose values in a [0.0..1.0] range.

	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-bucket-fill.c: take 0.0 <= opacity <= 1.0,
	*not* 0.0 < opacity <= 100.0.

	* app/tools/gimpblendtool.c: don't (opacity * 100.0) before passing.

	* tools/pdbgen/pdb/tools.pdb: (opacity / 100.0) before passing.

	* app/display/gimpdisplayshell-dnd.c: paint_mode and opacity were
	swapped in the call to gimp_drawable_bucket_fill_full().

	* app/pdb/tools_cmds.c: regenerated.

2001-11-15  Michael Natterer  <mitch@gimp.org>

	* app/gui/layers-commands.c: fixed the layers dialog's "New Layer"
	button by checking for a floating selection in
	layers_new_layer_query() instead of
	layers_new_layer_cmd_callback().

2001-11-15  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpdrawtool.[ch]: restructured the new draw utility
	functions and added gimp_draw_tool_draw_handle() and
	gimp_draw_tool_on_handle().

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimptransformtool.c: use the new functions all over
	the place so handle drawing and mouse_over detection work the same
	for all tools.

2001-11-15  Michael Natterer  <mitch@gimp.org>

	* Makefile.am: removed antique Makefile targets, including the
	"files" hack (which was some automatic EXTRA_DIST voodoo), added
	missing stuff to EXTRA_DIST.

	* app/plug-in/Makefile.am
	* devel-docs/Makefile.am
	* docs/Makefile.am
	* plug-ins/Makefile.am
	* plug-ins/FractalExplorer/Makefile.am
	* plug-ins/FractalExplorer/fractalexplorer-examples/Makefile.am
	* plug-ins/Lighting/Makefile.am
	* plug-ins/MapObject/Makefile.am
	* plug-ins/bmp/Makefile.am
	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/faxg3/Makefile.am
	* plug-ins/fits/Makefile.am
	* plug-ins/flame/Makefile.am
	* plug-ins/gap/Makefile.am
	* plug-ins/gdyntext/Makefile.am
	* plug-ins/gflare/Makefile.am
	* plug-ins/gflare/gflares/Makefile.am
	* plug-ins/gfli/Makefile.am
	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/gimpressionist/Brushes/Makefile.am
	* plug-ins/gimpressionist/Paper/Makefile.am
	* plug-ins/gimpressionist/Presets/Makefile.am
	* plug-ins/ifscompose/Makefile.am
	* plug-ins/imagemap/Makefile.am
	* plug-ins/libgck/Makefile.am
	* plug-ins/libgck/gck/Makefile.am
	* plug-ins/maze/Makefile.am
	* plug-ins/mosaic/Makefile.am
	* plug-ins/pagecurl/Makefile.am
	* plug-ins/plugin-helper/Makefile.am
	* plug-ins/print/Makefile.am
	* plug-ins/rcm/Makefile.am
	* plug-ins/script-fu/Makefile.am
	* plug-ins/script-fu/scripts/Makefile.am
	* plug-ins/sel2path/Makefile.am
	* plug-ins/sgi/Makefile.am
	* plug-ins/webbrowser/Makefile.am
	* plug-ins/xjt/Makefile.am
	* tips/Makefile.am: removed "files" too, some minor cleanups.

2001-11-15  Rebecca Walter <rjp@mail.tele.dk>

	* app/core/gimpbrush.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpchannel.c:  Proofreading to strings, approved by Sven

2001-11-15  Sven Neumann  <sven@gimp.org>

	* RELEASE-TO-CVS.patch: recreated from toplevel dir so it applies
	as advertised in HACKING.

2001-11-14  Manish Singh  <yosh@gimp.org>

	* RELEASE-TO-CVS.patch: gtk_item_factory_parse_rc->gtk_accel_map_load,
	gtk_item_factory_dump_rc->gtk_accel_map_save

	* configure.in: fixes for newer autoconf, AC_INIT with etc/gimprc.in
	now

	* app/core/gimpcontainer.c: g_type_instance_is_a is private (and
	got renamed recently), use G_TYPE_CHECK_INSTANCE_TYPE instead

	* app/gui/gradient-editor.c: use gtk_accel_label_set_accel_widget
	instead of gtk_accel_label_set_accel_object

	* app/gui/module-browser.c: replaced CList with a TreeView

2001-11-14  Michael Natterer  <mitch@gimp.org>

	* data/misc/Makefile.am
	* data/misc/rmshm: removed here again...

	* tools/Makefile.am
	* tools/rmshm: ...and added here.

2001-11-14  Michael Natterer  <mitch@gimp.org>

	* configure.in: new directories etc/, data/images/ and data/misc/.

	* Makefile.am
	* data/Makefile.am: added new SUBDIRs.

	* data/images/Makefile.am
	* data/misc/Makefile.am
	* etc/Makefile.am: new Makefiles

	* gimp1_0_splash.ppm
	* gimp1_2_splash.ppm
	* gimp_logo.ppm
	* gimp_splash.ppm: removed, now in data/images/

	* rmshm
	* user_install
	* user_install.bat: removed, now in data/misc/

	* gimprc.in
	* gimprc.win32
	* gimprc_user.in
	* gtkrc_user
	* ps-menurc
	* unitrc: removed, now in etc/

	* app/gui/about-dialog.c
	* app/gui/splash.c
	* app/gui/user-install-dialog.c: changed image and script file
	paths accordingly.

2001-11-14  Sven Neumann  <sven@gimp.org>

	* app/pdb/gimprc_cmds.c
	* tools/pdbgen/pdb/gimprc.pdb: added a missing g_strdup() that caused
	gimp_get_default_comment() to free the global default comment.

2001-11-14  Michael Natterer  <mitch@gimp.org>

	* app/tools/tool_manager.[ch]: added
	tool_manager_button_press_active() and friends functions.

	* app/display/gimpdisplayshell-callbacks.c:
	gimp_display_shell_canvas_events(): use the functions instead of
	re-fetching the active_tool whenever it may have changed
	(which requires knowledge about the tools' implementation).
	Also moved lots of variables around.

2001-11-14  Michael Natterer  <mitch@gimp.org>

	* Makefile.am: changed build order of toplevel directories so that
	the stuff which is most likely to be broken during "make dist"
	(the po stuff) is built before the actual source.

2001-11-14  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.[ch]: added "update_guide" signal.

	* app/display/gimpdisplay-foreach.[ch]: removed
	gdisplays_expose_guide().

	* app/display/gimpdisplayshell-handlers.c: added a handler for
	"update_guide" and expose the guide there.

	* app/undo.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c: call gimp_image_update_guide() instead
	of gdisplays_expose_guide().

2001-11-14  Abel Cheung  <maddog@linux.org.hk>

	* configure.in (ALL_LINGUAS): Rename zh_TW.Big5 -> zh_TW to
	  prevent future encoding naming problem.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdnd.h: a cut'n'paste bug prevented tools and
	imagefiles from being dropped.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: get the active_tool
	_after_ maybe changing it by calling devices_check_change().

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: the toolbox menu's last_used_documents menu
	contained one entry too few if the number of documents was smaller
	or equal than gimprc.last_opened_size.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppainttool.[ch]: use GimpCoords structs for
	cur_coords, last_coords and start_coords and the undo struct
	instead of storing separate gdouble values.

	* app/undo.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpsmudgetool.c: changed accordingly.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/base/temp-buf.c: allow passing NULL to temp_buf_resize() again.

2001-11-13  Michael Natterer  <mitch@gimp.org>
	    Sven Neumann  <sven@gimp.org>

	* Made 1.3.0 release.

2001-11-13  Sven Neumann  <sven@gimp.org>

	* Makefile.am (EXTRA_DIST): added po/po2tbl.sed.in and the po update
	scripts.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* modules/Makefile.am: added colorsel_water.c to EXTRA_DIST.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* NEWS: some more stuff.

2001-11-13  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* NEWS
	* README
	* TODO.xml: updated

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/gui/user-installed-dialog.c: fixed some action_area uglyness
	which occured after the switch to GtkDialog.

2001-11-13  Sven Neumann  <sven@gimp.org>

	* app/base/temp-buf.c: added some safety checks. 

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpimagefilepreview.[ch]: a new class implementing
	special	GimpPreview methods for GimpImagefile.

	* app/core/gimpimagefile.c: added code to load thumbnails according
	to the proposed Thumbnail Managing Standard 
	(see http://triq.net/~pearl/thumbnail-spec/). Pretty much untested.

	* app/widgets/gimpcontainerview-utils.c: plugged a memleak.

	* app/widgets/gimpimagepreview.c: simplified.

	* app/widgets/gimppreview.c: tell it about GimpImagefilePreview.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am: need to spell EXTRA_DIST correctly now
	that the "files" hack is gone.

2001-11-13  Michael Natterer  <mitch@gimp.org>

	* configure.in: commented out generation of some files in
	plug-ins/ so config.status doesn't warn about non-existing
	directories.

2001-11-12  Michael Natterer  <mitch@gimp.org>

	* HACKING: small fix.

	* configure.in: changed --disable-perl to --enable-perl because
	it doesn't build properly at the moment.

	* pixmaps/Makefile.am: removed stuff which is no longer there
	from EXTRA_DIST.

	* plug-ins/Makefile.am: put back the $(GIMP_PERL) line in SUBDIRS.

	* app/widgets/gimpmenuitem.c. include "libgimpwidgets/gimpwidgets.h".

	* data/Makefile.am
	* data/brushes/Makefile.am
	* data/gradients/Makefile.am
	* data/palettes/Makefile.am
	* data/patterns/Makefile.am: removed the old "files" hack and put
	the stuff to EXTRA_DIST.

	* app/Makefile.am
	* app/base/Makefile.am
	* app/core/Makefile.am
	* app/file/Makefile.am
	* app/gui/Makefile.am
	* app/paint-funcs/Makefile.am
	* app/pdb/Makefile.am
	* app/tools/Makefile.am
	* app/widgets/Makefile.am
	* app/widgets/gimpmenuitem.c
	* app/xcf/Makefile.am
	* cursors/Makefile.am
	* libgimp/Makefile.am
	* libgimpbase/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimpwidgets/Makefile.am
	* m4macros/Makefile.am
	* themes/Makefile.am
	* themes/Default/Makefile.am
	* themes/Default/images/Makefile.am
	* themes/Default/images/tools/Makefile.am: removed "files" target.

2001-11-12  Sven Neumann  <sven@gimp.org>

	* po/Makefile.in.in
	* po-libgimp/Makefile.in.in
	* po-plug-ins/Makefile.in.in
	* po-script-fu/Makefile.in.in: fixed distdir.

2001-11-12  Michael Natterer  <mitch@gimp.org>

	* app/widgets/widgets-types.h: changed GimpItemGetNameFunc
	signature to return a tooltip in a passed gchar* pointer location.

	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainerview-utils.c
	* app/widgets/gimplistitem.c
	* app/widgets/gimpmenuitem.c: changed all get_name_funcs and their
	callers accordingly (passing the "gchar **tooltip" pointer is
	optional).

2001-11-12  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/pixelize.c: implemented a feature request:

	Made the pixel size configurable independently in x and y
	direction. Added new PDB function. Use a GimpCoordinates widget
	for the dialog.

2001-11-12  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: use
	gimp_display_shell_[install|remove]_override_cursor() to set the
	middle mouse button move cursor so we get the original cursor back
	after scrolling.

	* app/tools/gimpdrawtool.[ch]: added lots of drawing functions
	(gimp_draw_tool_draw_rectangle() etc.) which work in image (or
	active drawable) coordinates.

	* app/tools/gimpblendtool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptransformtool.[ch]
	* app/tools/path_tool.[ch]: use the new functions. Removed tons of
	gdk_draw_foo() and gdisplay_transform_foo() calls. Most drawing
	functions look *much* nicer now. Ported some tools to detect
	handle clicks in display coordinates while I was on it, misc
	fixes.

	* app/tools/gimpmovetool.[ch]: derive from GimpDrawTool instead
	of drawing manually.

2001-11-11  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb.pl: oops, this should have been checked in
	with my last commit.

2001-11-11  Manish Singh  <yosh@gimp.org>

	* configure.in
	* app/Makefile.am
	* app/plug-in/Makefile.am
	* plug-ins/Makefile.am
	* modules/Makefile.am: fixes to build with automake 1.5 (just hacks
	to get it to work, real fixes to come later)
 
	* app/gui/preferences-dialog.c: unset GValue from tree model when
	we're done with it.

	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpsizeentry.[ch]
	* libgimpwidgets/gimpwidgets.[ch]
	* plug-ins/common/animationplay.c
	* plug-ins/common/colorify.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/diffraction.c
	* plug-ins/common/film.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/gicon.c
	* plug-ins/common/gih.c
	* plug-ins/common/gtm.c
	* plug-ins/common/jpeg.c
	* plug-ins/common/mail.c
	* plug-ins/common/pat.c
	* plug-ins/common/plugindetails.c
	* plug-ins/common/png.c
	* plug-ins/common/ps.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/sinus.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/tileit.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/xbm.c: gtk_widget_set_usize is deprecated. Use
	gtk_widget_set_size_request instead.

	* libgimpwidgets/gimpunitmenu.[ch]: changed to use GtkTreeView.

2001-11-10  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplay-marching-ants.h
	* app/display/gimpdisplay-selection.[ch]: removed...

	* app/display/gimpdisplayshell-marching-ants.h
	* app/display/gimpdisplayshell-selection.[ch]: ...new names.

	* app/display/gimpdisplay.[ch]
	* app/display/gimpdisplayshell.[ch]: moved the Selection stuff
	from GimpDisplay to GimpDisplayShell.

	Renamed all functions which will stay in GimpDisplay from
	gdisplay_foo() to gimp_display_foo(). Added gimp_display_get_ID(),
	cleaned up the idle renderer.

	* app/image_map.c
	* app/plug_in.c
	* app/display/Makefile.am
	* app/display/gimpdisplay-foreach.[ch]
	* app/display/gimpdisplay-handlers.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell-scroll.c
	* app/gui/gui.c
	* app/gui/view-commands.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* tools/pdbgen/pdb.pl: changed accordingly, cleanup.

	* app/pdb/display_cmds.c: regenerated.

2001-11-10  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* user_install.[ch]: removed...

	* gui/Makefile.am
	* gui/user-install-dialog.[ch]: ...added here.

	* gui/file-open-dialog.[ch]: removed file_open_with_display() and
	file_open_with_proc_and_display() here...

	* file/file-open.[ch]: ...and added them here.

	* app_procs.c
	* widgets/gimpdnd.c
	* widgets/gimpdocumentview.c: changed accordingly.

2001-11-10  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/qmask.[ch]: removed.

	* app/core/gimpimage.[ch]: added "qmask_changed" signal and
	gimp_image_[set|get]_qmask_state().

	* app/display/Makefile.am
	* app/display/gimpdisplayshell-qmask.[ch]: put the stuff here.

	* app/display/gimpdisplayshell-handlers.[ch]: new files: handlers
	for GimpImage signals handled by GimpDisplayShell.

	* app/display/gimpdisplay-handlers.c: removed some of them here.
	Don't include any GimpDisplayShell stuff any more.

	* app/display/gimpdisplay.c: no need to update the qmask buttons
	in gimp_display_flush_whenever().

	* app/display/gimpdisplayshell.c: call gimp_display_shell_connect()
	and disconnect().

2001-11-10  Michael Natterer  <mitch@gimp.org>

	* app/qmask.c: fixed qmask callbacks to check if the toggle is
	active before performing any action.

	* app/core/core-types.h: added the GimpCoords type here because it
	will be used by core functions as soon as the painting stuff is
	separated from the painting tools.

	* app/core/gimpdrawable-bucket-fill.c: fixed g_return_if_fail()s
	to not disable any useful operation :-) Still didn't figure out
	how I broke display color and pattern dropping :-(

	* app/display/gimpdisplayshell.[ch]: added
	gimp_display_shell_[un]transform_coords() which work on two
	GimpCoords pointers.

	* app/display/gimpdisplayshell-callbacks.c: use the new functions
	instead of the gdisplay_* ones.

	* app/gui/image-commands.c: GimpImage emits "disconnect", not
	"destroy".

	* app/tools/tools-types.h
	* app/tools/gimptool.h: removed GimpCoords here.

	* app/tools/gimpconvolvetool.c: fixed modifier_key() implementation.

	* app/tools/gimpcroptool.c: cleanup.

	* app/tools/paint_options.c: don't need a separator in the ink
	tool options.

	* app/tools/gimprectselecttool.c
	* app/tools/selection_options.[ch]: implemented wish #50352:

	Added "Auto Shrink Selection" and "Sample Merged" toggles to
	the rect_select and ellipse_select tools. Put the "Fixed size"
	widgets in a frame. Removed the separators after the common
	selection tool options because I didn't like them any more
	(feel free to comment ;)

2001-11-09  Michael Natterer  <mitch@gimp.org>

	* app/gui/resize-dialog.c: added a "Center" button to the "Offset"
	frame (#51599).

2001-11-09  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpprotocol.[ch]: removed the "palette" PDB type
	again. Incremented protocol version.

	* app/plug_in.c
	* app/pdb/procedural_db.c
	* libgimp/gimp.c
	* libgimpbase/gimpbasetypes.h: changed accordingly.

	* app/pdb/procedural_db_cmds.c
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

2001-11-09  Michael Natterer  <mitch@gimp.org>

	* app/undo.c: should set the fs.backing_store TileManager pointer
	to NULL after deleting it. Why the heck didn't this crash
	before...?

	* app/core/Makefile.am
	* app/core/gimpdrawable-blend.[ch]: the blend stuff taken from
	the blend tool.

	* app/core/core-types.h: added the blend enums.

	* app/tools/gimpblendtool.[ch]: removed the stuff here.

	* tools/pdbgen/pdb/tools.pdb: changed blend wrapper accordingly.

	* app/pdb/tools_cmds.c: regenerated.

	* tools/pdbgen/Makefile.am: don't scan tools/gimpblendtool.c.

	* tools/pdbgen/enums.pl: regenerated.

	* app/tools/gimpbucketfilltool.c: fixed crash caused by my last
	change.

	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell.c: removed lots of uglyness by
	using GtkImages for the qmask and navigation buttons. Don't realize
	anything before the shell is shown. Connect the realize
	callback and do stuff there. Don't call the realize callback
	from gimp_display_shell_canvas_events() any more.

	* pixmaps/navbutton.xpm
	* pixmaps/qmasknosel.xpm
	* pixmaps/qmasksel.xpm: removed.

	* themes/Default/Makefile.am
	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-menu-navigation.png
	* themes/Default/images/stock-menu-qmask-off.png
	* themes/Default/images/stock-menu-qmask-on.png: new PNGs instead.

	* libgimpwidgets/gimpstock.[ch]: register them as stock icons.

2001-11-09  Sven Neumann  <sven@gimp.org>

	* app/gui/file-open-dialog.c: merged fix for bug #63880 from stable
	branch and fixed a wrong signal callback signature.
	
	* plug-ins/imagemap/imap_main.c: merged fix for bug #64075 from stable
	branch.

	* plug-ins/common/gauss_iir.c
	* plug-ins/common/gauss_rle.c: merged fix for bug #57853 from stable
	branch.

	* plug-ins/Lighting/lighting_ui.c: s/gdk_image_unref/g_object_unref/

2001-11-08  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: build display/ before tools/.

	* app/devices.c: devices_check_change(): added all events
	which have a GdkDevice pointer.

	* app/gimpprogress.c: include "display-types.h" instead of
	"core-types.h".

	* app/core/Makefile.am
	* app/core/gimpdrawable-bucket-fill.[ch]: new files: the bucket_fill
	stuff taken from tools/gimpbucketfilltool.[ch].

	* app/core/core-types.h: added "BucketFillMode".

	* app/core/gimpimage-mask-select.[ch]: cleanup.

	* app/core/gimpmarshal.list: added more marshallers for GimpTool's
	new signal signatures.

	* app/core/gimpmarshal.[ch]: regenerated.

	* app/display/Makefile.am
	* app/display/gimpdisplayshell-dnd.[ch]
	* app/display/gimpdisplayshell-layer-select.[ch]: new files: the
	canvas drop callbacks from gimpdisplayshell-callbacks.[ch] and
	the stuff formerly knows as gui/layer-select.[ch].

	* app/display/gimpdisplay.h: don't include "gui/gui-types.h".

	* app/display/gximage.c: include "display-types.h".

	* app/display/gimpdisplay-foreach.c
	* app/display/gimpdisplayshell.[ch]: call gdsplay_delete(), don't
	destroy the shell widget.

	* app/gui/Makefile.am
	* app/gui/layer-select.[ch]: removed.

	* app/gui/gradients-commands.c: fixed "Save as POV" fprintf()s.

	* app/gui/preferences-dialog.c: removed the layer_select stuff
	because it is useless with the new preview system.

	* app/gui/tool-options-dialog.c: send the correct data to the
	close_callback.

	* app/gui/tools-commands.c: changed to follow the new
	gimp_tool_initialize() semantics (see below).

	Tool & canvas event handling chainsawing:

	* app/tools/tools-types.h: new struct GimpCoords which contains
	x, y, pressure, tilt etc.

	* app/display/gimpdisplayshell-callbacks.[ch]: added utility
	functions which transparently retreive the current event's
	GimpCoords or take it from the device directly if the event has
	none. Pass GimpCoords _in_image_coordinates_ to all tool
	functions.

	Most important: don't pass GdkEvents and display coordinates to
	tools any more.

	* app/tools/gimptool.[ch]: changed virtual functions to take
	GimpCoords, time and state separately instead of GdkEvents.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.[ch]
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.[ch]
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.[ch]
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.[ch]
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpselectiontool.[ch]
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.[ch]
	* app/tools/path_tool.[ch]
	* app/tools/selection_options.c: tons and tons of changes:

	- changed to use the new virtual function parameters.
	- removed zillions of gdisplay_untransform_coords().
	- get the active drawable's offsets manually in many cases.
	  (questionable, but IMHO ok because it's obvious and not simply a
	  "TRUE" passed to some function)
	- reordered some functions to be consistent across tools.
	- some tools had to be changed to work on image coords, not
	  display ones (esp. crop).
	- fixed strange rotate tool behaviour which should be backported
	  to stable.
	- some stuff i came across.
	- indentation and other paranoia.
	- rounding of coordinated may be broken in some tools.
	- new bugs guaranteed.

	* app/tools/tool_manager.[ch]: new semantic of
	tool_manager_initialize_active() (looked at the places where it
	was used from and put common code together). Should be a bit
	better now :)

	* app/tools/gimpblendtool.c
	* app/tools/transform_options.c: use the new GTK+ feature that a
	widget (toggle button) can be a frame's title for this tools' tool
	options.

	* app/widgets/widgets-types.h: stuff.

	* themes/Default/gtkrc: s/GtkDialog/GimpDialog/.

	* tools/pdbgen/Makefile.am: don't scan tools/gimpbucketfilltool.h
	any more.

	* tools/pdbgen/enums.pl: regenerated.

	* tools/pdbgen/pdb/tools.pdb: changed bucket_fill wrapper.

	* app/pdb/tools_cmds.c: regenerated.

2001-11-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/*.c: ported fixes from stable branch (mostly 
	missing includes of config.h),

	* plug-ins/gimpressionist/orientmap.c: removed commented out code
	that continued to show up when grepping for deprecated GTK+ code.

	* tools/pdbgen/pdb/procedural_db.pdb: removed unneeded inclusion
	of config.h (it gets added automatically).

2001-11-02  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-scroll.c: stop synthesizing expose
	events but use gdk_window_invalidate_rect() and
	gdk_window_process_updates() (both with "update_children == FALSE"
	because the canvas has no children).

	* app/tools/gimpmagnifytool.c: nothing.

2001-11-01  Michael Natterer  <mitch@gimp.org>

	* app/display/Makefile.am
	* app/display/gimpdisplay-callbacks.[ch]
	* app/display/gimpdisplay-render.[ch]
	* app/display/gimpdisplay-scale.[ch]
	* app/display/gimpdisplay-scroll.[ch]: removed and added as
	gimpdisplayshell-foo.[ch] because they are all methods of the
	shell.

	* app/display/gimpdisplay.[ch]
	* app/display/gimpdisplayshell.[ch]: moved the "offset" and "size"
	variables from GimpDisplay to GimpDisplayShell. GimpDisplay
	should know nothing about screen coordinates.

	The gdisplay_[un]transform_foo() methods are still part of
	GimpDisplay but will be moved to GimpDisplayShell as soon as the
	tools' vitrual functions speak in image coordinates instead of
	GdkEvents.

	* app/display/gimpdisplayshell-callbacks.[ch]: prefixed all
	functions with gimp_display_shell_*. Moved some stuff to a
	"realize" callback File still has to be renamed.

	* app/display/gimpdisplay-foreach.[ch]: removed
	gdisplays_shrink_wrap().

	* app/gui/menus.c
	* app/gui/view-commands.[ch]
	* app/display/gimpdisplayshell-scale.[ch]: implemented "Zoom to
	Fit Window" function (#57670).

	* app/nav_window.c
	* app/display/gimpdisplay-handlers.c
	* app/display/gimpdisplayshell-render.[ch]
	* app/display/gimpdisplayshell-scale.[ch]
	* app/display/gimpdisplayshell-scroll.[ch]
	* app/gui/colormap-dialog.c
	* app/gui/gui.c
	* app/gui/preferences-dialog.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmovetool.c
	* app/widgets/gimppreview.c: changed according to variable
	and filename changes.

	* app/tools/tool_manager.c: tool_manager_select_tool(): send the
	active tool a "HALT" command before selecting the new one. Fixes
	stale tool dialogs which were there because some other hack was
	removed (This is IMHO the right place to shut down the active
	tool).

	* app/tools/gimpcroptool.c: don't shrink wrap after cropping but
	let gimprc.allow_resize_windows decide.

	* app/tools/gimpselectiontool.c: gimage_mask_value() takes image,
	not screen coordinates. A good example of how braindead it is to
	pass GdkEvents to tools :-) Fixes incorrect cursor and oper
	update of the selection tools.

	* app/tools/gimptransformtool.c
	* app/undo.c: removed (#if 0 for now) some strange code which did
	manual exposing of GimpDisplayShell areas. This was definitely a
	hack and should not be there given the image emits correct
	"update" signals.

2001-11-01 DindinX <odin@mandrakesoft.com>

	* plug-ins/common/bz2.c: fix a little typo in a comment

2001-10-31  Michael Natterer  <mitch@gimp.org>

	Chopped up the display stuff (beware: unfinished)...

	The plan is that GimpDisplay is the object which collects
	updates from the image, compresses them and waits for the GIMP
	to be idle to actually paint them. It should be a non-GUI object
	which is the model for the actual widget to connect to.

	GimpDisplayShell has all the widgets and handles painting and
	exposing of the result. Nobody should actually be required to
	update or look at it as it should be a view on the GimpDisplay
	object.

	Much stuff is still in the wrong place and the functions don't
	follow their files' filename namespace any more. More to come...

	* app/display/Makefile.am
	* app/display/gimpdisplay-ops.[ch]: removed. It's functions didn't
	belong together anyway.

	* app/display/gimpdisplay-area.[ch]: new files: the GimpArea
	functions.

	* app/display/gimpdisplay-handlers.[ch]: new files: signal
	handlers for GimpImage signals. Mostly from gui/gui.c.

	* app/display/gimpdisplay.[ch]: removed all widgets and other
	GUI stuff. There is still much undecided here...

	* app/display/gimpdisplayshell.[ch]: actually use the object and
	filled it with all the stuff from GimpDisplay.

	* app/display/gimpdisplay-callbacks.[ch]
	* app/display/gimpdisplay-foreach.[ch]
	* app/display/gimpdisplay-render.c
	* app/display/gimpdisplay-scale.[ch]
	* app/display/gimpdisplay-scroll.[ch]
	* app/display/gimpdisplay-selection.c: changed accordingly.

	* app/core/gimp.[ch]: return a GimpObject from
	gimp_create_display() so it can be used as single GUI independent
	point to create displays, require the initial scale as parameter.

	* app/core/gimpcontext.c: changed the ugly EEKWrapper according to
	the GimpDisplay structure changes. Bugfix: set the image to NULL
	in gimp_context_display_destroyed().

	* app/core/gimpedit.c
	* app/core/gimpimage-new.c: changed gimp_create_display() calls
	accordingly.

	* app/core/gimpimage-convert.c: invalidate the layer & image
	previews here, not in the caller.

	* app/core/gimpimage-crop.c: update the whole image after cropping.

	* app/core/gimpimage.[ch]: added gimp_image_find_guide(),
	gimp_image_snap_point() and gimp_image_snap_rectangle(). Added
	"resolution_changed" and "unit_changed" signals and corresp.
	public convenience functions to emit them.

	* app/core/gimplayer.c: emit the image's "alpha_changed" signal
	when adding alpha to the bottom (and only) layer of the image.

	* app/gimpprogress.c
	* app/image_map.c
	* app/nav_window.c
	* app/qmask.c
	* app/undo.c
	* app/user_install.c: changed accordingly.

	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/file-open-dialog.c
	* app/gui/image-commands.c
	* app/gui/info-window.c
	* app/gui/preferences-dialog.c
	* app/gui/toolbox.c
	* app/gui/view-commands.c: ditto.

	* app/gui/gui.[ch]: removed most gimp->images handlers as the
	displays connect to them themselves now. chaged gui_display_new()
	according to the gimp_create_display() changes.
	Added gui_get_screen_resolution().

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptool.c
	* app/tools/gimptransformtool.c
	* app/tools/xinput_airbrush.c: lots of changes because GimpDisplay
	has become two objects. Lots of gdisp->shell casting uglyness
	added. This is fine because exactly these parts will have to go
	away.

	(GimpDisplay will provide methods for XOR drawing upon the display
	in image coordinates without the need to transform coordinates all
	the time. Also the tools shouldn't see GdkEvents but get more
	useful virtual functions which speak in image coordinates too).

	* app/widgets/gimpcomponentlistitem.c: removed a now useless image
	update.

	* tools/pdbgen/pdb/display.pdb: use gimp_create_display().

	* app/pdb/display_cmds.c: regenerated.

2001-10-30  Simon Budig   <simon@gimp.org>

	* app/pdb/tools_cmds.c
	* app/tools/gimperasertool.c
	* app/tools/gimperasertool.h
	* tools/pdbgen/pdb/tools.pdb

	Added a "color erase" feature to the eraser. This is ported from
	the colortoalpha plugin and is utterly cool.

	The "Color Erase" Option should be disabled when the drawable
	has no alpha channel, however, I have no idea how to do this.

2001-10-29  Sven Neumann  <sven@gimp.org>

	* app/base/temp-buf.c (temp_buf_to_gray): rewrote so gcc-3.0 doesn't 
	complain.

	* app/widgets/gimpfontselection-dialog.c: use g_ascii_strcasecmp().
	
	* libgimp/gimpintl.h
	* libgimp/stdplugins-intl.h
	* plug-ins/script-fu/script-fu-intl.h: don't call gtk_set_locale()
	since gtk_init() does it for us now. Don't set LC_NUMERIC to "C".
	INIT_I18N_UI() is the same as INIT_I18N_UI() now.

	* app/devices.c
	* app/gimprc.c
	* app/core/gimpbrushgenerated.c
	* app/core/gimpgradient.c
	* app/gui/color-notebook.c
	* app/gui/gradients-commands.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/presets.c
	* plug-ins/ifscompose/ifscompose_storage.c: use g_ascii_formatd() and
	g_ascii_strtod() to serialize and deserialize floats. These functions 
	are locale-independent. There are probably more places that need to be
	fixed in this fashion.

	* plug-ins/script-fu/script-fu-console.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-server.c
	* plug-ins/script-fu/script-fu.c: s/INIT_I18N_UI/INIT_I18N/

	* tools/gimp-remote.c
	* app/widgets/gimpwidgets-utils.c
	* app/core/gimpimage-contiguous-region.c
	* app/paint-funcs/paint-funcs-indexeda.c
	* app/paint-funcs/paint-funcs.c
	* app/tools/gimppathtool.c
	* app/tools/path_tool.c
	* modules/colorsel_triangle.c
	* plug-ins/common/mpeg.c
	* plug-ins/imagemap/imap_csim_parse.c: cleanups
	
2001-10-29  Michael Natterer  <mitch@gimp.org>

	Cleanup weekend...

	* app/app_procs.c: pass "no_interface" to gimp_new().

	* app/core/gimp.[ch]: added "gboolean no_interface" and the
	load_procs and save_procs GSLists.

	* app/core/gimptoolinfo.[ch]: added a "Gimp" pointer to the
	GimpToolInfo object so more functions find their context without
	accessing the global "the_gimp" variable.

	* app/display/display-types.h: removed the GDisplay -> GimpDisplay
	typedef.

	* app/display/gimpdisplay.c: look at gimp->no_interface, don't
	include "appenv.h".

	* app/file/file-open.[ch]
	* app/file/file-save.[ch]: don't use "the_gimp" any more. Instead,
	pass around lots of "Gimp" pointers. Removed the global load_procs
	and save_procs variables here. Use access() to find out whether a
	file is readable/writable, removed the manual voodoo and it's
	Win32 wrappers. Added an optional (can be NULL) "PlunInProcDef"
	parameter to file_save(), removed file_save_with_proc().

	* app/gui/menus.c: Use the unused "gpointer data" parameter of the
	GtkItemFactory callbacks to pass a "Gimp" pointer to all of them.
	This reduces the usage of the global "the_gimp" hack to zero
	in app/gui/... yeah.

	* app/gui/channels-commands.c
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/gui/palettes-commands.c
	* app/gui/select-commands.c
	* app/gui/test-commands.c
	* app/gui/tools-commands.c
	* app/gui/view-commands.c: use the passed "Gimp" pointer.

	* app/gui/color-area.[ch]
	* app/gui/convert-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/file-new-dialog.[ch]
	* app/gui/file-open-dialog.[ch]
	* app/gui/file-save-dialog.[ch]
	* app/gui/gui.c
	* app/gui/info-window.[ch]
	* app/gui/module-browser.[ch]
	* app/gui/palette-editor.c
	* app/gui/palette-import-dialog.[ch]
	* app/gui/paths-dialog.c
	* app/gui/preferences-dialog.[ch]
	* app/gui/resize-dialog.[ch]
	* app/gui/tool-options-dialog.[ch]
	* app/gui/toolbox.c: pass around lots more "Gimp" and
	"GimpContext" pointers and don't use "the_gimp" any more.

	* app/tools/gimptool.h: added a pointer to the corresponding
	GimpToolInfo object (which in turn has a pointer to a Gimp).

	* app/tools/tool_manager.[ch]: set the pointer after creating the
	tool object. Removed tool_manager_get_info_by_tool() as there is a
	tool->tool_info pointer now.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppathtool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/path_tool.c
	* app/tools/xinput_airbrush.c: s/GDisplay/GimpDisplay/g.
	Use tool->tool_info and tool_info->gimp in some places to get
	rid of using "the_gimp".

	Removing the remaining ones involves changing the tool options
	system and is scheduled next...

	* app/widgets/gimpdnd.c
	* app/widgets/gimpdocumentview.c: pass a "Gimp" pointer to all
	file_open_*() functions.

	* app/gdisplay_color.[ch]
	* app/gdisplay_color_ui.[ch]
	* app/image_map.[ch]
	* app/nav_window.[ch]
	* app/path.c
	* app/path_bezier.c
	* app/path_transform.h
	* app/qmask.[ch]: s/GDisplay/GimpDisplay/g

	* tools/pdbgen/pdb/fileops.pdb: load_procs and save_procs are
	members of the "Gimp" object now.

	* tools/pdbgen/pdb/plug_in.pdb: use gimp->no_interface, don't
	include "appenv.h".

	* app/pdb/fileops_cmds.c
	* app/pdb/plug_in_cmds.c: regenerated.

2001-10-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/webbrowser/web-browser.scm: updated links

	* tools/pdbgen/lib.pl: cosmetic change (if (!x) -> unless (x)).
	
2001-10-28  Hans Breuer  <hans@breuer.org>

	* config.h.win32 : define HAVE_DIRENT_H, it's from build/win32/dirent

	* app/*/makefile.msc : updated
	* app/file/makefile.msc app/display/makefile.msc : new files

	* app/user_install.c : make the G_OS_WIN32 part compile again 
	(fn -> filename)

	* app/core/gimptoolinfo.c (gimp_tool_info_init) : cosmetic change,
	make implementation signature static like the local prototype

	* app/pdb/gradients_cmds.c app/pdb/palette_cmds.c : include <string.h>
	for strlen () / strcmp () by ...
	* tools/pdbgen/pdb/gradients.pdb tools/pdbgen/pdb/palette.pdb :
	... changing the perl source here

	* app/widgets/gimpdocumentview.c : #include <string.h>

	* libgimp/makefile.msc : 
	* libgimpwidgets/gimpwidgets.def : updated

	* plug-ins/makefile.msc : reflect the fact that DIRENT functions
	are removed from glib. Also define the questionable GETTEXT_PACKAGE
	and LOCALEDIR which are required to compile, not adapted to NLS
	support for win32 yet
  
2001-10-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/nlfilt.c
	* plug-ins/gap/gap_mov_dialog.c
	* plug-ins/gap/gap_navigator_dialog.c: removed code that sets the
	colormap and gamma value of a GtkPreview. We don't need to do this
	since GtkPreview uses GdkRGB.

2001-10-28  Sven Neumann  <sven@gimp.org>

	* configure.in: require GLib-1.3.10, GTK+-1.3.10 and Pango-0.21

	* RELEASE-TO-CVS.patch
	* libgimpbase/gimpparasiteio.c
	* libgimpwidgets/gimpstock.c
	* plug-ins/ifscompose/ifscompose_storage.c: applied the patch and
	emptied the patch file.
 	
	* libgimp/gimpgradientmenu.c: corrected order of parameters in call
	to gimp_gradients_get_gradient_data().

	* tools/pdbgen/pdb/palette.pdb: I think this is how Nathan wanted it
	to be.

	* app/pdb/palette_cmds.c
	* libgimp/gimppalette_pdb.[ch]: regenerated.

2001-10-27  Nathan Summers  <rock@gimp.org>

	* gimppalette_pdb.c: the autogenerated code for
	  gimp_palette_get_entry won't compile.  Temporary kludge so that it
	  will compile and work correctly.

2001-10-27  Nathan Summers  <rock@gimp.org>

	* app/plug_in.c
	* libgimp/gimp.c
	* libgimpbase/gimpbasetypes.h
	* libgimpbase/gimpprotocol.c
	* libgimpbase/gimpprotocol.h
	* tools/pdbgen/pdb/palette.pdb: added preliminary pdb support to
        manipulate palettes.  Incremented plugin interface version number.

        * app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* app/pdb/procedural_db.c
	* app/pdb/procedural_db_cmds.c
	* libgimp/gimppalette_pdb.c
	* libgimp/gimppalette_pdb.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated

2001-10-26  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbrushgenerated.h
	* app/core/gimpbrushpipe.h
	* app/core/gimpbuffer.h
	* app/core/gimpdatafactory.h
	* app/core/gimpdrawable.h
	* app/core/gimpgradient.h
	* app/core/gimpimage.h: added some missing FOO_GET_CLASS() macros.

2001-10-26  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/gradient_select.pdb: removed
	gradients_get_gradient_data() here...

	* tools/pdbgen/pdb/gradients.pdb: ...and added it here.

	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpgradients_pdb.[ch]
	* libgimp/gimpgradientselect_pdb.[ch]: regenerated.

	* app/core/gimpgradient.h: added GIMP_GRADIENT_DEFAULT_SAMPLE_SIZE
	here...

	* app/gui/gradient-select.h: ...removed it here.

	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimpgradientselect.[ch]: removed. We don't wrap
	_gradients_get_gradient_data() with gradients_get_gradient_data()
	any more but call the PDB wrapper directly.

	API CHANGE: Arguments 2 and 3 are swapped now!

	* plug-ins/FractalExplorer/Dialogs.c: changed accordingly.

2001-10-25  Michael Natterer  <mitch@gimp.org>

	* configure.in: generate app/file/Makefile

	* app/Makefile.am
	* app/file-open.[ch]
	* app/file-save.[ch]
	* app/file-utils.[ch]: removed...

	* app/file/Makefile.am
	* app/file/file-open.[ch]
	* app/file/file-save.[ch]
	* app/file/file-utils.[ch]: ...and added here.

	* app/gui/file-commands.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* tools/pdbgen/pdb/fileops.pdb: changed includes accordingly.

	* app/app_procs.[ch]: removed app_exit_finish() and
	app_exit_finish_done() from the public API, call gtk_main() here,
	pass "no_data" to gimp_new() and "restore_session" to
	gui_restore().

	* app/main.c: removed global variable "double_speed", don't
	call gtk_main() in main.c. Added some missing log domains.

	* app/appenv.h: removed "double_speed".

	* app/core/gimp.[ch]: added "gboolean no_data" property which
	must be passed to gimp_new().

	* app/display/gimpdisplay-foreach.[ch]: added gdisplays_set_busy()
	and gdisplays_unset_busy().

	* app/gui/about-dialog.c: don't include "appenv.h", declare
	"double_speed" extern.

	* app/gui/brush-select.[ch]
	* app/gui/gradient-select.[ch]
	* app/gui/palette-select.[ch]
	* app/gui/pattern-select.[ch]: made the list of dialogs and the
	global selection dialogs private. Added functions which get a
	dialog by PDB callback_name. Pass a "Gimp" and the callback_name
	to the constructors. Don't include "app_procs.h" for "the_gimp"
	and "appenv.h" for "no_data" any more. Use the passed "Gimp"
	instead and look at gimp->no_data.

	* app/gui/toolbox.[ch]: pass a "Gimp" to the constructor.

	* app/gui/gui.[ch]: use the new gdisplays_[un]set_busy() functions,
	use the passed "Gimp" all over the place, don't include
	"appenv.h" and "app_procs.h". gui_really_quit_dialog() takes
	a "quit_func" callback now and calls it instead of calling
	app_exit_finish() (which is now private) directly.

	* app/gui/convert-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/palette-import-dialog.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb: changed accordingly.

	* app/pdb/brush_select_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/pattern_select_cmds.c: regenerated.

2001-10-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/perl/examples/glowing_steel: merged Raphaels patch for 
	bug #56598 from the stable branch.

	* libgimp/gimpexport.c: merged Raphaels patch for bug #51114 from the 
	stable branch.
	
	* plug-ins/common/grid.c: merged the fix for indexed images from the
	stable branch.

2001-10-24  Michael Natterer  <mitch@gimp.org>

	* app/file-open.c
	* app/file-utils.c
	* app/gimprc.c
	* app/plug_in.c
	* app/user_install.c
	* app/base/base.c
	* app/base/temp-buf.c
	* app/core/gimpdata.c
	* app/core/gimpdatafiles.c
	* app/core/gimpimagefile.c
	* app/gui/about-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/splash.c
	* app/gui/tips-dialog.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* libgimpbase/gimpenv.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* tools/pdbgen/pdb/fileops.pdb: use g_build_filename() all over
	the place instead of g_strconcat() and friends together with
	G_DIR_SEPARATOR_S. Also removed all attempts to manually detect
	double dir separators. LibGimpBase's searchpath utility functions
	don't append a G_DIR_SEPARATOR_S to all paths any more.

	* app/pdb/fileops_cmds.c: regenerated.

2001-10-24  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpbutton.[ch]: added
	gimp_button_extended_clicked() which emits the resp. signal.

	* app/gui/menus.[ch]: added new item factories "<Buffers>" and
	"<Documents>".

	* app/gui/Makefile.am
	* app/gui/buffers-commands.[ch]
	* app/gui/documents-commands.[ch]: new files for the callbacks.

	* app/gui/dialogs-constructors.c: use them.

	* app/gui/file-open-dialog.c: set the title to "Open Image",
	not "Load Image".

2001-10-23  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c: pass a "Gimp" to gui_libs_init(), initialize
	the GUI before initializing the plug-ins.

	* app/gui/menus.[ch]: removed menus_last_opened_add() and connect
	to gimp->documents' "add", "remove" and "reorder" signals to
	auto-update the "last opened" menu entries. Moved all public
	functions to the top of the file. Removed global variable
	"last_opened_raw_filenames".

	* app/gui/gui.[ch]: removed "last opened" fiddling here, moved
	menu init functions which need to be called after plug-in query
	to gui_restore().

	* app/gui/session.[ch]: added "Gimp" parameters to all public
	functions.

	* app/file-save.c
	* app/gui/file-commands.c
	* app/gui/file-open-dialog.c: changed accordingly.

2001-10-23  Sven Neumann  <sven@gimp.org>

	* TODO.xml: added an entry for handling layers with masks with the 
	Transform Tool.

	* app/gui/tips_dialog.c: make Next and Previous buttons insensitive 
	if no tips could be loaded (as done in the stable branch).
	
	* plug-ins/common/mblur.c (mblur_linear): merged fix for bug #62640
	from stable branch.

	* plug-ins/gap/gap_lib.c: merged fix for bug #61677 from stable branch.

2001-10-22  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/docindex.[ch]: removed.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpdocumentview.[ch]: new widget as replacement.

	* app/core/gimpcontext.[ch]: added context->imagefile property.

	* app/app_procs.c
	* app/file-save.c
	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/test-commands.c: changed accordingly.

	* app/widgets/gimpcontainerview.[ch]: added "gboolean reorderable"
	property which needs to be set by subclasses.

	* app/widgets/gimpdrawablelistview.c: removed the "insert_item"
	implementation which was used to make the items reorderable.

	* app/widgets/gimpcontainerlistview.[ch]: make the list items
	reorderable depending on view->reorderable.

	* app/widgets/gimpbufferview.c: made it reorderable.

	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpcontainergridview.[ch]
	* app/widgets/gimpdatafactoryview.c: changed accordingly.

2001-10-22  Michael Natterer  <mitch@gimp.org>

	General cleanup of the selection tools and their PDB wrappers:

	* app/core/Makefile.am
	* app/core/gimpimage-contiguous-region.[ch]
	* app/core/gimpimage-mask-select.[ch]: new files providing a clean,
	uniform API for the selection functionalities. Changed order of
	parameters to be consistent, removed code duplication.

	The region returned by the "by_color" function is not really
	contiguous but the API is so similar to "by_seed" and it's used
	in the same context so it's fair enough to put them together.

	Also, I'm not sure if the two is_pixel_sufficiently_different()
	I've optimized away were meant to do *exactly* the same. Added
	a comment there to remember the former difference.

	* app/core/gimpchannel.[ch] (gimp_channel_feather): removed the
	"output" channel parameter and made it optionally push an undo
	(like the other channel operations do).

	* app/core/gimpimage-mask.c: call gimp_channel_feather() with
	"push_undo == TRUE", removed some useless comments.

	* app/tools/gimpbycolorselecttool.[ch]
	* app/tools/gimpellipseselecttool.[ch]
	* app/tools/gimpfreeselecttool.[ch]
	* app/tools/gimpfuzzyselecttool.[ch]
	* app/tools/gimprectselecttool.[ch]: removed all the actual
	selection functionality and call the new gimp_image_mask_select_*()
	and gimp_image_contiguous_region_*() functions instead.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpiscissorstool.c: use new function
	gimp_image_mask_select_channel() instead of doing the same manually.

	* app/tools/gimpbucketfilltool.c: find_contiguous_region() ->
	gimp_image_contiguous_region_by_seed().

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/groups.pl
	* tools/pdbgen/pdb/selection_tools.pdb: added new group "Selection
	Tools" which depends only on "core/" stuff (not on "tools/" any
	more, brrrr).

	* tools/pdbgen/pdb/text_tool.pdb: don't include "appenv.h"

	* tools/pdbgen/pdb/tools.pdb: removed the selection tools.

	* app/pdb/Makefile.am
	* app/pdb/selection_tools_cmds.c: new file.

	* app/pdb/internal_procs.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/tools_cmds.c: regenerated.

	* libgimp/Makefile.am
	* libgimp/gimp_pdb.h
	* libgimp/gimpselectiontools_pdb.[ch]: new files.

	* libgimp/gimptools_pdb.[ch]: regenerated

	Misc cleanups:

	* app/app_procs.c: call splash_create() with "no_splash_image"
	as parameter.

	* app/display/gimpdisplay-render.c
	* app/display/gximage.c: don't include "appenv.h".

	* app/gui/gui.c: call session_restore() only if "restore_session"
	is TRUE.

	* app/gui/session.c: don't "if(restore_session)" here and don't
	include "appenv.h"

	* app/gui/splash.[ch]: added "gboolean show_image" parameter to
	splash_create(), don't include "appenv.h"

	* app/tools/gimppainttool.[ch]: added a "GimpGradient" parameter
	to gimp_paint_tool_get_color_from_gradient().

	* app/tools/gimppaintbrushtool.c: pass the gradient.

	* app/tools/gimpselectiontool.c
	* app/tools/gimptransformtool.c
	* app/tools/tool_manager.c: s/GDisplay/GimpDisplay/.

	* app/widgets/gimpcontainergridview.[ch]: removed the "white_style"
	class variable and don't fiddle around with colors and styles...

	* themes/Default/gtkrc: ...do the same here with a simple rc style.

2001-10-19  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: link the app in a different order as some init
	functions are called from core/gimp.c instead of app_procs.c now.

	* app/app_procs.[ch]: made app_init_update_status() private and
	pass it as callback to various init functions.

	* app/plug_in.[ch]: plug_in_init() take "gimp" and "status_callback"
	parameters.

	* app/undo.c: use "gimage->gimp" instead of "the_gimp", don't
	include "app_procs.h".

	* app/core/core-types.h: added "GimpInitStatusFunc" typedef.

	* app/core/gimp.[ch]: gimp_initialize() and gimp_restore() now
	take a "status_callback" as parameter. Don't include "app_procs.h".

	* app/core/gimpmodules.c: putting the modules in a strong
	container was a bad idea because it may be impossible to finalize
	a GimpModuleInfo object belonging to a stalled module.

	* app/gui/color-area.c: use G_N_ELEMENTS().

	* app/gui/session.c: don't call app_init_update_status() and don't
	include "app_procs.h" because this happens after the splash is
	hidden.

	* tools/pdbgen/app.pl
	* app/pdb/internal_procs.[ch]: pass a "status_callback" to
	internal_procs_init(), don't include "app_procs.h".

	* plug-ins/Makefile.am: build gfig, gimpressionist and imagemap
	again.

	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_ui.c: s/gdk_image_unref/g_object_unref/

	* plug-ins/gfig/gfig.c
	* plug-ins/gimpressionist/brush.c
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/gimpressionist/ppmtool.[ch]
	* plug-ins/gimpressionist/presets.c
	* plug-ins/imagemap/imap_browse.[ch]
	* plug-ins/imagemap/imap_csim.y
	* plug-ins/imagemap/imap_edit_area_info.c
	* plug-ins/imagemap/imap_file.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_menu.c
	* plug-ins/imagemap/imap_polygon.c
	* plug-ins/imagemap/imap_popup.c
	* plug-ins/imagemap/imap_preferences.c
	* plug-ins/imagemap/imap_taglist.c
	* plug-ins/imagemap/imap_tools.c: ported to current GLib/Gtk+.

	* plug-ins/gap/gap_arr_dialog.c
	* plug-ins/gap/gap_decode_xanim.c
	* plug-ins/gap/gap_filter_foreach.c
	* plug-ins/gap/gap_filter_main.c
	* plug-ins/gap/gap_frontends_main.c
	* plug-ins/gap/gap_lib.c
	* plug-ins/gap/gap_main.c
	* plug-ins/gap/gap_mod_layer.c
	* plug-ins/gap/gap_mov_dialog.c
	* plug-ins/gap/gap_navigator_dialog.c
	* plug-ins/gap/resize.c: half-way fixed this one too but I'm not
	willing to fix tons of duplicated and deprecated app/ code...

2001-10-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/common/illusion.c: merged fixes for missing PDB parameters
	from stable branch.

2001-10-18  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/module_db.[ch]: removed.

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpmoduleinfo.[ch]
	* app/core/gimpmodules.[ch]: new files containing the module info
	object and the module list handling code.

	* app/gui/Makefile.am
	* app/gui/module-browser.[ch]: new files containing the GUI.

	* app/xcf/xcf.[ch]: pass a "Gimp" pointer to xcf_exit().

	* app/core/gimp.[ch]: handle modules and xcf init/exit here too.

	* app/app_procs.c: don't touch the modules and xcf stuff any more.

	* app/gui/dialogs-constructors.c: changed accordingly.

2001-10-18  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontainer.[ch]: added properties for "children_type"
	and "policy". Ref/unref the "children_type" class so we can do
	signal lookups and use other introspection features without an
	existing instance of "children_type".

	The new properties are G_PARAM_CONSTRUCT_ONLY and *MUST* be passed
	to g_object_new() to ref/unref children_type's class correctly.

	* app/core/gimpdatalist.c
	* app/core/gimplist.c: pass them as construct properties.

	* app/core/gimp.c: no need to manually ref classes any more.

2001-10-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpchannellistview.c: added a handler for GimpImage's
	"alpha_changed" signal (does nothing yet).

	* app/widgets/[lots of files]: somehow my last perl torturing
	removed my email address from the copyright notice. Another perl
	hack brought it back now :)

2001-10-16  Michael Natterer  <mitch@gimp.org>

	* app/gimpprogress.[ch]
	* app/undo.c: s/GDisplay/GimpDisplay/

	* app/plug_in.[ch]: removed unused boolean "destroy" field of
	the PlugIn struct.

	* app/core/gimpedit.c: don't include "app_procs.h"

	* app/display/gimpdisplay-callbacks.c: moved the "grab_and_scroll"
	stuff from gimpdisplay-scroll.* here (less complicated and easier
	to cleanup...)

	* app/display/gimpdisplay-scroll.[ch]: removed here.

	* app/display/gimpdisplay-render.[ch]
	* app/display/gimpdisplay-selection.[ch]
	* app/display/gimpdisplayshell.c: s/GDisplay/GimpDisplay/g

	* app/display/gimpdisplay.[ch]: ditto, removed gdisplay_active()
	which was just a wrapper around
	"gimp_context_get_display (gimp_get_user_context (the_gimp))"
	(which is more to type but makes the use of the global
	"the_gimp" variable more obvious).

	* app/gui/color-area.h
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/file-dialog-utils.c
	* app/gui/image-commands.c
	* app/gui/info-window.h
	* app/gui/paths-dialog.h
	* app/gui/select-commands.c
	* app/gui/tool-options-dialog.c
	* app/gui/tools-commands.c
	* app/gui/view-commands.c: s/GDisplay/GimpDisplay/, gdisplay_active()
	removal, include "app_procs.h" for "the_gimp".

	* app/tools/gimpbezierselecttool.h
	* app/tools/gimpbrightnesscontrasttool.[ch]
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorbalancetool.[ch]
	* app/tools/gimpcurvestool.[ch]
	* app/tools/gimpeditselectiontool.h
	* app/tools/gimphistogramtool.[ch]
	* app/tools/gimphuesaturationtool.[ch]
	* app/tools/gimplevelstool.[ch]
	* app/tools/gimpmovetool.h
	* app/tools/gimpperspectivetool.h
	* app/tools/gimpposterizetool.[ch]
	* app/tools/gimprotatetool.h
	* app/tools/gimpscaletool.h
	* app/tools/gimpsheartool.h
	* app/tools/gimptexttool.h
	* app/tools/gimpthresholdtool.[ch]
	* app/tools/gimptool.[ch]
	* app/tools/gimptransformtool.h
	* app/tools/tool_manager.[ch]: lots of s/GDisplay/GimpDisplay/, made
	all *_dialog_hide() functions private, cleanup.

	* app/widgets/*: removed GtkType and gtk_type_* stuff entirely and
	use GObject functions, removed lots of empty "destroy" methods and
	use more type checking class cast macros instead of casting
	directly.

	* app/widgets/gimpcontainermenu.c: fixed item insert order.

	* app/widgets/gimphistogramview.[ch]: cleaned up and renamed all
	functions.

	* app/widgets/gimpwidgets-utils.[ch]: removed gimp_dialog_hide() as
	Gtk+ does the right thing (TM) now.

	* tools/pdbgen/pdb/color.pdb: implemented "histogram" without
	digging into tools/ and widgets/ (needs to be done for all
	color PDB functions).

	* tools/pdbgen/pdb/gimprc.pdb: no need to use "the_gimp" in a PDB
	function as a "Gimp" pointer is passed to them all.

	* tools/pdbgen/pdb/image.pdb: don't include "app_procs.h"

	* app/pdb/color_cmds.c
	* app/pdb/gimprc_cmds.c
	* app/pdb/image_cmds.c: regenerated.

	* app/pdb/procedural_db.c: don't include "app_procs.h"

2001-10-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sel_gauss.c: merged fix for bug #62433 from stable
	branch. plug-ins/common/colortoalpha.c already had the problem fixed.

2001-10-13  Michael Natterer  <mitch@gimp.org>

	* RELEASE-TO-CVS.patch: gdk_pixbuf_new_from_stream -> _from_inline

	* app/display/Makefile.am
	* app/display/gimpdisplay-foreach.[ch]: new files for functions
	operating on all displays (will go away as soon as the display
	behaves like a proper view which doesn't need to be updated
	explicitly).

	* app/display/gimpdisplay-callbacks.c
	* app/display/gimpdisplay-scale.[ch]
	* app/display/gimpdisplay-scroll.[ch]
	* app/display/gimpdisplay.[ch]: "scale" and "scroll" namespace
	cleanup, moved bounds_checking() to gimpdisplay-scroll.[ch], lots
	of unfinished, intermediate stuff.

	* app/display/gimpdisplayshell.[ch]: added some GObject framework
	for the GimpDisplayShell object (not used yet).

	* app/app_procs.c
	* app/docindex.c
	* app/image_map.c
	* app/nav_window.c
	* app/path.c
	* app/qmask.c
	* app/undo.c
	* app/gui/channels-commands.c
	* app/gui/convert-dialog.c
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/gui.c
	* app/gui/image-commands.c
	* app/gui/layer-select.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* app/gui/paths-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/select-commands.c
	* app/gui/view-commands.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplayerlistview.c
	* app/widgets/gimplistitem.c
	* tools/pdbgen/pdb/display.pdb
	* app/pdb/display_cmds.c: changed accordingly (mostly including
	"gimpdisplay-foreach.h" instead of "gimpdisplay.h")

2001-10-10  DindinX <dindinx@wanadoo.fr>

	* app/display/gimpdisplay-callbacks.c: fixed a buglet. Key-release
	  events are now correctly handled.

2001-10-08  Dave Neary <nearyd@eircom.net>

	* HACKING
	* RELEASE-TO-CVS.patch: Added file, and instructions on
        why/how to use it to HACKING

2001-10-07  DindinX <dindinx@wanadoo.fr>

	* plug-ins/common/apply_lens.c: little optimisation by avoiding some
	useless recalculation.

2001-10-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfontselection-dialog.c: inserted some extra checks
	to work around a bug in PangoFT2 version 0.20.
	
2001-10-02  Emese Kovacs  <emese@gnome.hu>

	* tips/Makefile.am|makefile.mingw: Added gimp_tips.hu.txt to the
        targets.

        * tips/gimp_tips.hu.txt: Added Hungarian tips file in UTF-8
	encoding.

2001-10-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sobel.c (sobel_dialog): merged fix for bug #61525
	from stable tree.

2001-10-01  Michael Natterer  <mitch@gimp.org>

	* configure.in: create build/win32/dirent/Makefile.

2001-09-28  Sven Neumann  <sven@gimp.org>

	* configure.in(ALL_LINGUAS): Removed zh_CN again until all po files
	have been added. Translators, read README.i18n!

2001-09-28  Michael Natterer  <mitch@gimp.org>

	* app/gui/preferences-dialog.c: added a frame around the tree.

	* app/widgets/gimphistogramview.c: forgot to pass the "detail" to
	g_signal_emit(). Should fix the histogram tool. Thanks to Seth for
	debugging.

2001-09-28  Wang Jian  <lark@linux.net.cn>

	* configure.in(ALL_LINGUAS): Added zh_CN

2001-09-27  Sven Neumann  <sven@gimp.org>

	* HACKING
	* Makefile.am
	* acconfig.h
	* autogen.sh
	* configure.in: use AM_GLIB_GNU_GETTEXT. Since glib and GTK+ rely on
	gettext being available, we don't need to ship with the option to use
	an included implementation. The intl subdirectory will not be created
	anymore. Had to put the old sed hacks back in that create Makefiles
	from Makefile.in in the extra po directories.

	* almost all Makefile.am: removed $(top_srcdir)/intl from INCLUDES.
	
	* app/main.c
	* libgimp/stdplugins-intl.h
	* plug-ins/perl/Gimp.xs
	* plug-ins/script-fu/script-fu-intl.h: changed package names to 
	gimp14* so the po files don't clash with gimp12.

2001-09-26  Manish Singh  <yosh@gimp.org>

	* app/gui/preferences-dialog.c: replaced CTree with a TreeView

2001-09-26  Sven Neumann  <sven@gimp.org>

	* configure.in: we require glib-1.3.9, pango-0.20, atk-0.5 and
	gtk+-1.3.9 available from ftp://ftp.gtk.org/pub/gtk/v1.3/.

	* HACKING: mention the fact that we will try to keep our source
	compileable against the latest development releases of gtk+ and
	friends.

	* app/plug_in.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* plug-ins/common/csource.c
	* plug-ins/common/wmf.c: follow glib API changes.

	* plug-ins/common/mail.c: fixed a warning.

2001-09-26  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/disp_callbacks.[ch]
	* app/gdisplay.[ch]
	* app/gdisplay_ops.[ch]
	* app/gximage.[ch]
	* app/image_render.[ch]
	* app/interface.[ch]
	* app/marching_ants.h
	* app/scale.[ch]
	* app/scroll.[ch]
	* app/selection.[ch]: removed.

	* app/display/Makefile.am
	* app/display/display-types.h
	* app/display/gimpdisplay-callbacks.[ch]
	* app/display/gimpdisplay-marching-ants.h
	* app/display/gimpdisplay-ops.[ch]
	* app/display/gimpdisplay-render.[ch]
	* app/display/gimpdisplay-scale.[ch]
	* app/display/gimpdisplay-scroll.[ch]
	* app/display/gimpdisplay-selection.[ch]
	* app/display/gimpdisplay.[ch]
	* app/display/gimpdisplayshell.[ch]
	* app/display/gximage.[ch]: added here.

	* app/[many files]
	* app/gui/[many files]
	* app/tools/*
	* app/widgets/[many files]: changed accordingly. Still very
	incomplete separation of the display stuff but it at least
	compiles.

	* tools/pdbgen/pdb.pl:
	* tools/pdbgen/pdb/display.pdb: s/GDisplay/GimpDisplay/,
	s/"gdisplay.h"/"display/gimpdisplay.h"/.

	* app/pdb/display_cmds.c: regenerated.

2001-09-25  Michael Natterer  <mitch@gimp.org>

	* app/gdisplay.[ch]: renamed it to GimpDisplay and made it a
	GimpObject subclass.

	* app/disp_callbacks.[ch]
	* app/gdisplay_ops.[ch]
	* app/scale.[ch]
	* app/scroll.[ch]
	* app/display/display-types.h: changed accordingly.

	* app/core/gimpimage.[ch]: new signal "selection_control".

	* app/core/core-types.h: moved the SelectionControl enum and all
	other core enums here.

	* app/gui/gui.c: connect to the images' "selection_control" signal
	and call gdisplays_selection_visibility().

	* app/core/gimpcontext.c
	* app/core/gimpdrawable-offset.h
	* app/core/gimpimage-convert.h
	* app/core/gimpimage-mask.c
	* app/core/gimplayer.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c: changed accordingly.

	* app/gui/colormap-dialog.[ch]: GObject porting.

	* tools/pdbgen/Makefile.am: removed headers which no longer
	contain enums.

	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/drawable.pdb: include files which are no longer
	included automatically by the enum voodoo.

	* app/pdb/convert_cmds.c
	* tools/pdbgen/enums.pl: regenerated.

2001-09-24 Nathan Summers <rock@gimp.org>
        
        * plug-ins/Lighting/lighting_image.c
        * plug-ins/Lighting/lighting_shade.c: fixed off-by-one error that 
        caused segfaults on images with a width of exactly 64.  Bug is present 
        in 1.2.2; fix should be committed to stable after it is tested.

2001-09-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/Makefile.am: reenabled build of ifscompose. We should port 
	the gdk_string functions to Pango, but for the moment it builds again
	by undefining GDK_DISABLE_DEPRECATED.

2001-09-22  Hans Breuer  <hans@breuer.org>

	* app/makefile.msc : need to link with pangof2

	* app/display/display-funcs.h : new file to provide prototype
	gdisplays_selection_visibility ()
	* app/core/gimpimage-mask.c :
	* app/core/gimplayer.c : use it

	* app/core/makefile.msc : generate gimpmarshal.[hc]

	* app/gui/makefile.msc : add error-console-dialog.obj, also
	more trying for building as dll

	* app/tools/gimpinktool.c(965) : avoid "fatal error C1021: invalid 
	preprocessor command 'warning'", by wrapping it in #ifdef __GNUC__

	* app/tools/makefile.msc : add FREETYPE2_CFLAGS

	* app/widgets/gimpfontselction-dialog.c : use g_strcasecmp ()

	* app/tools/makefile.msc : add FREETYPE2_CFLAGS and gimpfontselction*

	* libgimp/gimp.def :
	* libgimpwidgets/gimpwidgets.def : updated externals

	* libgimpwidgets/makefile.msc : add gimpstock

	* plug-ins/makefile.msc : gflare doesn't require EXTRA_gflare anymore

	* plug-ins/common/spheredesigner.c : 
	* plug-ins/helpbrowser/helpbrowser.c :
	* plug-ins/imagemap/imap_main.c :
	remove _help_accel from gimp_help_connect ()

	* plug-ins/gap/gap_mov_dialog.c :
	* plug-ins/gap/gap_navigator_dialog.c : remove references to 
	use_xshm and gimp_color_cube ()

	* plug-ins/gfig/gfig.c : don't access ->klass, but use 
	G_OBJECT_GET_CLASS

	* plug-ins/gimpressionist/repaint.c : the GtkButton::child
	field is moved to the parent GtkBin.

	* plug-ins/ifscompose/ifscompose.c : the GtkStyle::font field
	isn't public anymore, use accessor gtk_style_get_font ()

	* plug-ins/imagemap/imap_preferences.c : reflect GTK2 API change
	gtk_notebook_set_current_page ()

2001-09-20  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.[ch]: made a real object (GtkDialog
	subclass) out of it. The API will change soon too.

	* libgimpwidgets/gimpwidgetstypes.h: added GimpDialog typedef.

	* libgimpwidgets/gimpbutton.[ch]
	* libgimpwidgets/gimpchainbutton.[ch]
	* libgimpwidgets/gimpcolorarea.[ch]
	* libgimpwidgets/gimpcolorbutton.[ch]
	* libgimpwidgets/gimpfileselection.[ch]
	* libgimpwidgets/gimpoffsetarea.[ch]
	* libgimpwidgets/gimppatheditor.[ch]
	* libgimpwidgets/gimppixmap.c
	* libgimpwidgets/gimpsizeentry.c
	* libgimpwidgets/gimpunitmenu.c: removed GtkType stuff and use
	GType in all get_type() functions. Some random GObject porting.

	* app/gui/info-dialog.c
	* app/gui/info-window.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimptransformtool.c: changed accordingly.

2001-09-20  Sven Neumann  <sven@gimp.org>

	* app/gdisplay.c: fixed resize of cursor position label that I broke
	with my latest change.
	
	* app/widgets/gimpfontselection-dialog.c: avoid the crash by using the
	correct PangoContext, but there's still a bug somewhere in this code
	(or in PangoFT2).

2001-09-19  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: added an entry about "Stroke".

	* app/gui/about-dialog.c: use g_timeout and g_source functions
	instead if gtk_timeout stuff.

	* app/widgets/gimpdnd.[ch]: general cleanup:

	- removed the internal enum duplication and use GimpDndType all over
	  the place.
	- added internal GimpDndDataDef entries for all public DND types.
	- code cleanup, some debugging output.

2001-09-19  Sven Neumann  <sven@gimp.org>

	* configure.in: require GTK+-1.3.8 and PangoFT2-0.19.
	
	* app/devices.c:
	* app/tools/gimppainttool.c: removed intermediate hacks that are no 
	longer needed with the new GTK+ release.
	
	* app/plug_in.c
	* libgimp/gimp.[ch]
	* libgimp/gimpui.c
	* libgimpbase/gimpprotocol.[ch]: removed use_xshm and color_cube
	variables and accessor functions. 
	
	* app/errors.c: use gtk_exit() instead of gdk_exit().

	* app/gdisplay.c: use Pango API to determine cursor label width. This
	does not work correctly, but at least it compiles...
	
	* app/gui/splash.c: follow Pango API changes.

	* app/tools/gimpcurvestool.[ch]: use PangoLayouts to draw text.

	* app/tools/gimptexttool.c: follow Pango API changes.
	
	* app/widgets/gimpfontselection-dialog.c
	* app/widgets/gimpfontselection.c: mostly rewritten following the
	changes in GtkFontSelection. This is unusable at the moment and 
	crashes, but at least it compiles again...

	* plug-ins/Makefile.am: temporarily disabled build of ifscompose since
	it does not compile any longer after the latest GDK cleanups.

	* plug-ins/common/nlfilt.c: gimp_color_cube() is obsolete.
	
2001-09-18  Sven Neumann  <sven@gimp.org>

	* app/pdb/parasite_cmds.c
	* tools/pdbgen/pdb/parasite.pdb: fixed nasty bug in perl expression
	that caused all parasite PDB functions to work on global gimp parasites
	even if the gimp_image_parasite* and gimp_drawable_parasite* functions
	were called.
	
2001-09-17  Sven Neumann  <sven@gimp.org>

	* app/gimprc.c (gimprc_init): 
	fixed a typo spotted by Ed Halley <ed@halley.cc>.

	* app/pdb/gimprc_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpgimprc_pdb.[ch]: added new PDB function 
	gimp_get_default_comment() that allows to access the default image
	comment as set in the preferences.

	* plug-ins/common/csource.c
	* plug-ins/common/gif.c
	* plug-ins/common/jpeg.c
	* plug-ins/common/tiff.c: use gimp_get_default_comment() instead of 
	a hardcoded string.

	* plug-ins/common/uniteditor.c: replaced deprecated GDK function
	gdk_color_alloc().

2001-09-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mail.c: resurrected mail plug-in. Thanks to 
	David Odin <dindinx@wanadoo.fr> for the patch.

	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl: build mail, nlfilt and plugindetails
	plug-ins again.

	* tips/Makefile.am
	* tips/gimp_conseils.fr.txt: removed ...
	* tips/gimp_tips.fr.txt: ... and readded under this name.

2001-09-11  Nathan Summers <rock@gimp.org>

	* all files: wilber cried.

2001-09-09  Sven Neumann  <sven@gimp.org>

	* app/devices.c
	* app/tools/gimppainttool.c: readded the old code here in case the
	old GDK variable is defined. Since GTK+-1.3.7 is finally out, we want 
	to try to keep GIMP compile against this release as long as possible.

	* plug-ins/common/gif.c: applied a patch from David Odin 
	<dindinx@wanadoo.fr> that brings the GIF plug-in back to live.

	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl: build it again.

2001-09-08  Daniel Egger  <egger@interearth.com>

	* app/devices.c
	* app/tools/gimppainttool.c: Use new gdk_device_get_core_pointer ()
	instead of the former gdk_core_pointer variable. You will need a
	recent CVS gtk to compile it!

2001-09-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpbrushfactoryview.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcolorpanel.c
	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainermenuimpl.c
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpoffsetarea.c
	* plug-ins/gdyntext/charmap.c
	* plug-ins/gdyntext/charmap_window.c
	* plug-ins/gdyntext/font_selection.c
	* plug-ins/gdyntext/message_window.c: 
	use GtkType instead of guint to store result of gtk_type_unique(). 
	Patch courtesy of Alex Larsson <alexl@redhat.com>.

2001-09-04  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/jpeg.c: JPEG is back!
	Thanks to David Odin <dindinx@wanadoo.fr> for the patch.

	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl: build it again.

2001-09-03  Sven Neumann  <sven@gimp.org>

	* app/gui/about-dialog.c
	* app/gui/splash.c: draw text using PangoLayouts, now compiles with
	GDK_DISABLE_DEPRECATED being defined.

	* app/gui/authors.h
	* tools/authorsgen/authorsgen.pl
	* tools/authorsgen/contributors: converted to use UTF-8 strings.

2001-09-03  Michael Natterer  <mitch@gimp.org>

	* configure.in: added -DGDK_DISABLE_DEPRECATED.

	* app/gui/about-dialog.c
	* plug-ins/common/wmf.c
	* plug-ins/ifscompose/ifscompose_utils.c: #undef it here (too lazy...)

	* app/colormaps.[ch]
	* app/gdisplay.c
	* app/module_db.c
	* app/plug_in.c
	* app/gui/brush-editor.c
	* app/gui/color-notebook.c
	* app/gui/gradient-select.c
	* app/gui/palette-select.c
	* app/gui/paths-dialog.c
	* app/gui/select-commands.c
	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c: replaced deprecated stuff,
	g_list_free() the return value of gtk_container_get_children().

	* plug-ins/Makefile.am: build gflare again.

	* plug-ins/gflare/asupsample.[ch]: removed because the same function
	is already in libgimpcolor.

	* plug-ins/gflare/gtkmultioptionmenu.[ch]: removed because Gtk+
	handles menu_height > screen_height by scrolling now.

	* plug-ins/gflare/Makefile.am
	* plug-ins/gflare/gflare.c: changed accordingly, cleanups.

2001-09-03  Sven Neumann  <sven@gimp.org>

	* app/plug_in.c
	* app/core/gimpbrush.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpgradient.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c: check strings from data files and plug-in 
	registration for UTF-8 validity. There are probably a lot more places 
	that need these checks.

	* plug-ins/common/gqbist.c: converted PDB texts to UTF-8.

2001-08-31  Thomas Canty  <tommydal@optushome.com.au>

	* app/colormaps.c
	* app/gdisplay.c
	* app/nav_window.c
	* app/scroll.c
	* app/selection.c
	* app/undo.c
	* app/gui/about-dialog.c
	* app/gui/color-area.c
	* app/gui/color-select.c
	* app/gui/gradient-editor.c
	* app/gui/gui.c
	* app/gui/splash.c
	* app/tools/gimpcurvestool.c
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/curve_bend.c
	* plug-ins/gap/gap_navigator_dialog.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_preferences.c
	* plug-ins/imagemap/imap_preview.c: replaced some deprecated GDK 
	functions

2001-08-30  Michael Natterer  <mitch@gimp.org>

	* app/plug_in.c
	* libgimpbase/gimpwire.c
	* libgimp/gimp.c: removed GIOChannel "channel->funcs->io_foo()"
	hacks and use plain g_io_channel_[read|write]_chars(). An
	additional g_io_channel_set_buffered (channel, FALSE); is needed
	to make the channels work in binary mode. Fixed misc other stuff
	in the GIOChannel code.

	* app/tools/gimpdrawtool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpdialogfactory.c
	* libgimpwidgets/gimpcolorarea.c
	* libgimp/gimpui.c: replaced some deprecated GDK functions.

	* app/gui/palette-editor.c: block the color_name entry's "changed"
	signal while setting it. Fixes invalid UTF-8 warnings.

2001-08-30  Sven Neumann  <sven@gimp.org>

	* app/plug-in.c: set the message encoding for the plug-in textdomain.
	
2001-08-30  Sven Neumann  <sven@gimp.org>

	* configure.in: check for bind_textdomain_codeset, use standard 
	HAVE_FOO semantic for difftime.

	* libgimp/gimpintl.h
	* libgimp/libgimp-intl.h
	* libgimp/stdplugins-intl.h: set encoding of message translations
	to UTF-8 if bind_textdomain_codeset() is available. We still 
	explicitely set LC_NUMERIC to "C" so we can write and parse floats 
	in a defined way independent of the locale. We might want to find 
	a cleaner solution for this.
	
	* plug-ins/script-fu/script-fu-server.c: inverted preprocessor logic
	from NO_DIFFTIME to HAVE_DIFFTIME.
	
	* plug-ins/script-fu/scripts/trochoid.scm: 
	fixed parameter description (bug #59760).

2001-08-29  Sven Neumann  <sven@gimp.org>

	* README.i18n: added a section that mentions the GNOME translation
	project that coordinates translation efforts in the GNOME CVS tree.

	Mention the fact that po files as well as the tips files need to be
	UTF-8 encoded to work with GTK+-2.0.

	* tips/gimp_tips.de.txt: converted to UTF-8.

2001-08-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gtkhwrapbox.[ch]
	* app/widgets/gtkvwrapbox.[ch]
	* app/widgets/gtkwrapbox.[ch]: make it compile even if you don't 
	have gle installed ;-)

2001-08-29  Sven Neumann  <sven@gimp.org>

	* configure.in: added comment how to handle version numbers when
	making releases so I don't get it wrong once again. 
	Removed leftover GIMP_CONTRIBUTORS.

	* gimptool.1.in: removed this file.

	* docs/Makefile.am
	* docs/gimp.1.in: fixed stuff that was left after the removal of
	the GIMP_CONTRIBUTORS hack.

2001-08-29  Michael Natterer  <mitch@gimp.org>

	* configure.in: added -DG_DISABLE_DEPRECATED and
	-DGDK_DISABLE_COMPAT_H.

	* app/batch.c
	* app/file-utils.c
	* app/gdisplay.c
	* app/gdisplay_ops.c
	* app/gimprc.[ch]
	* app/module_db.c
	* app/nav_window.c
	* app/undo_history.c
	* app/core/gimpgradient.c
	* app/core/gimpimagefile.c
	* app/core/gimppalette.c
	* app/gui/color-notebook.c
	* app/gui/convert-dialog.c
	* app/gui/error-console-dialog.c
	* app/gui/file-commands.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/info-window.c
	* app/gui/menus.c
	* app/gui/palette-import-dialog.c
	* app/tools/gimpbycolorselecttool.c
	* app/widgets/gimpcontainerview-utils.c
	* app/widgets/gimpdatafactoryview.c
	* libgimp/gimpmenu.c
	* plug-ins/common/bz2.c
	* plug-ins/common/compose.c
	* plug-ins/common/csource.c
	* plug-ins/common/decompose.c
	* plug-ins/common/gz.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/wmf.c
	* plug-ins/common/xbm.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/script-fu/interp_slib.c
	* plug-ins/script-fu/script-fu-console.c
	* plug-ins/script-fu/script-fu-scripts.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gimprc.pdb
	* app/pdb/fileops_cmds.c
	* app/pdb/gimprc_cmds.c: removed deprecated stuff like
	g_basename(), g_dirname(), g_strup() and friends. Added some
	"const gchar *" declarations while I was on it. Added some
	G_N_ELEMENTS() macros instead of declaring a useless variable
	for the number of items.

	* app/widgets/gtkhwrapbox.[ch]
	* app/widgets/gtkvwrapbox.[ch]
	* app/widgets/gtkwrapbox.[ch]: replaced with the latest versions
	from GLE, ported by the master himself.

	* app/gui/toolbox.c: changed accordingly.

	* app/plug_in.c
	* libgimp/gimp.c
	* libgimpbase/gimpwire.[ch]: use evil hacks to get binary mode
	from the new GIOChannel implementation (upstream bugreport already
	posted).

2001-08-28  Sven Neumann  <sven@gimp.org>

	* configure.in: removed the authorgen hack. It broke the build with
	autoconf-2.52. Need to come up with a better idea. Until then the
	manpages don't show the autors anymore.
	Removed the useless definitions of brushdata, palettedata, ...
	while I was on it.

	* data/Makefile.am
	* data/brushes/Makefile.am
	* data/gradients/Makefile.am
	* data/palettes/Makefile.am
	* data/patterns/Makefile.am: do it the conventional way and list all
	data files in the Makefiles.

2001-08-28  Sven Neumann  <sven@gimp.org>

	* HACKING
	* autogen.sh: libtool >= 1.3.4 should be good enough

2001-08-28  Sven Neumann  <sven@gimp.org>

	* acinclude.m4: removed redefinitions of libtool macros. We use the
	installed libtool now. If this breaks the build for your system, 
	upgrade libtool. If that does not help, let us know.
	
	* ltconfig
	* ltmain.sh: removed these files. Newer versions of libtool don't use
	ltconfig and ltmain.sh is taken from your libtool installation.

	* autogen.sh: check for presence of libtool.
	
	* Makefile.am
	* configure.in
	* gimp-remote.1.in
	* gimp.1.in
	* gimprc.5.in: removed man-pages from toplevel dir ...
	
	* docs/Makefile.am
	* docs/gimp-remote.1.in
	* docs/gimp.1.in
	* docs/gimprc.5.in
	* docs/gimptool-1.4.1.in: ... and added them back here.
	
	* gimp-1.4.m4: removed from toplevel dir ...
	
	* m4macros/Makefile.am
	* m4macros/gimp-1.4.m4: ... and added it back here.

2001-08-19  Sven Neumann  <sven@gimp.org>

	* app/widgets/Makefile.am: added PANGOFT2_CFLAGS to INCLUDES.

2001-08-19  Sven Neumann  <sven@gimp.org>

	* app/devices.h
	* app/disp_callbacks.c
	* app/interface.c: applied a patch from <David.Odin@bigfoot.com> that
	changes some function prototype to return gboolean instead of gint.
	
	* app/tools/gimpblendtool.c: pixel_regions_register() and 
	pixel_regions_process() return a gpointer, not (gpointer *).

2001-08-17  Michael Natterer  <mitch@gimp.org>

	* configure.in: added app/display/ and app/plug-in/. Empty for
	now except for the types files.

	* app/Makefile.am
	* app/appenums.h
	* app/apptypes.h: removed.

	* app/display/Makefile.am
	* app/display/display-types.h
	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-types.h
	* app/gui/Makefile.am
	* app/gui/gui-types.h
	* app/pdb/Makefile.am
	* app/pdb/pdb-types.h: new files for typedefs.

	* app/appenv.h: added MessageHandlerType and StackTraceMode here.

	* app/undo_types.h: moved undo struct typedefs here.

	* app/tools/tools-types.h
	* app/core/core-types.h: added some enums and Tattoo here
	(renamed to GimpTattoo).

	* app/gdisplay.h: temp_hack: #include "display/display-types.h"

	* app/gimphelp.c: s/gtk_idle_add/g_idle_add/

	* app/gimprc.c: don't use "gimprc" in token handlers but the
	passed "val1p" and "val2p".

	* app/image_map.[ch]: cleanup in preparation of making a GObject
	out of it.

	* app/base/pixel-region.[ch]: no need to pass the
	PixelRegionIterator around as void pointer.

	* app/core/gimp.[ch]
	* app/core/gimpcontext.[ch]
	* app/core/gimptoolinfo.[ch]
	* app/tools/tool_manager.c
	* app/widgets/gimpdnd.c: added the standard_tool_info to the Gimp
	object.

	* app/batch.c
	* app/file-open.c
	* app/file-save.c
	* app/file-utils.c
	* app/interface.c
	* app/main.c
	* app/path.[ch]
	* app/pathP.h
	* app/plug_in.h
	* app/core/gimpdrawable.[ch]
	* app/core/gimpimage-mask.c
	* app/core/gimpimage.[ch]
	* app/core/gimplayer.c
	* app/gui/color-area.c
	* app/gui/color-notebook.c
	* app/gui/colormap-dialog.c
	* app/gui/dialogs-commands.c
	* app/gui/dialogs-constructors.c
	* app/gui/error-console-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/gradient-select.c
	* app/gui/indicator-area.c
	* app/gui/info-dialog.c
	* app/gui/palette-editor.c
	* app/gui/palette-select.c
	* app/gui/pattern-select.c
	* app/gui/session.c
	* app/gui/splash.c
	* app/gui/view-commands.c
	* app/tools/gimpinktool-blob.c
	* app/widgets/gimpcolorpanel.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimppreview.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* app/xcf/xcf.c: changed accordingly: s/Tattoo/GimpTattoo/, include
	the new types files, include <glib-object.h> instead of >gtk/gtk.h>.
	Bad hacks to get rid of SELECTION_OFF and friends in core/ (will
	be replaced ba a signal soon).

	* tools/pdbgen/Makefile.am: changed list of headers scanned for
	enums accordingly.

	* app/pdb/procedural_db.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/pattern_select.pdb: same fixes as above, added
	hacks to ensure that all foo-types.h files are included before all
	other gimp internal includes, include "pdb-types.h" unconditionally.

	* tools/pdbgen/enums.pl
	* app/pdb/*_cmds.c: regenerated.

2001-08-15  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptool.[ch]
	* app/tools/tool_manager.[ch]: removed all *_get_PDB_string()
	functions and GimpToolClass' "pdb_string" field as this info is
	stored independent from a specific tool instance in GimpToolInfo

	* app/tools/gimpbezierselecttool.c: use GimpToolInfo's "pdb_string".

2001-08-14  Michael Natterer  <mitch@gimp.org>

	* app/interface.c
	* app/gui/about-dialog.c
	* app/gui/brush-editor.c
	* app/gui/brush-select.c
	* app/gui/color-notebook.c
	* app/gui/color-select.c
	* app/gui/convert-dialog.c
	* app/gui/file-commands.c
	* app/gui/file-dialog-utils.c
	* app/gui/file-dialog-utils.h
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/gradients-commands.c
	* app/gui/gui.c
	* app/gui/image-commands.c
	* app/gui/info-window.c
	* app/gui/layer-select.c
	* app/gui/menus.c
	* app/gui/paths-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/resolution-calibrate-dialog.c
	* app/gui/select-commands.c
	* app/gui/splash.c
	* app/gui/test-commands.c
	* app/gui/tips-dialog.c
	* app/tools/gimpthresholdtool.c
	* app/tools/paint_options.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c: got rid of all
	gtk_object_[get|set]_data() and almost all gtk_signal_foo()
	function calls.

2001-08-14  Michael Natterer  <mitch@gimp.org>

	* app/gdisplay.h: an evil temp_hack which lets GimpContext manage
	the active display without including "gdisplay.h". Will go away as
	soon as context properties are registered dynamically.

	* app/module_db.c: cleaned up the object code in preparation of
	moving it to core/.

	* app/path.c: connect to GimpImage's "disconnect" signal instead
	of "destroy".

	* app/core/gimpobject.[ch]: derive it from GObject, not from
	GtkObject any more (yeah :-)

	* app/core/*.c: #include <glib-object.h> instead of <gtk/gtk.h>,
	removed some remaining GtkObject-isms.

	(left in a few #include <gtk/gtk.h> where bigger changes are needed
	to get rid of the UI dependency).

	* app/core/core-types.h: #include <gdk-pixbuf/gdk-pixbuf.h> here
	temporarily.

	* app/core/gimp.c (gimp_create_display): unref the image after
	creating it's first display.

	* app/core/gimpbrush.[ch]: disabled the parts of the code which
	depend on GimpPaintTool.

	* app/core/gimpbrushgenerated.c
	* app/core/gimpbrushpipe.c: changed accordingly.

	* app/core/gimpcontext.[ch]: evil hack (see above) to manage the
	active display without including "gdisplay.h"

	* app/core/gimpimage-mask.[ch]: pass a context to
	gimage_mask_stroke() and get the current tool's PDB string from
	there.

	* app/core/gimpedit.c: changed accordingly.

	* app/core/gimpimage.c: use gimp_image_update() instead of
	gdisplays_update_full().

	* app/gui/color-area.c
	* app/gui/colormap-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/edit-commands.c
	* app/gui/image-commands.c
	* app/gui/toolbox.c: changed accordingly (don't use Gtk methods on
	GObjects).

	* app/gui/menus.c: fix some const warnings by explicit casting.

	* app/tools/*.[ch]: ported all tools to GObject, some minor
	cleanup while i was on it.

	* app/widgets/gimpdialogfactory.[ch]: ported to GObject.

	* app/widgets/gimplayerlistview.h: added FOO_GET_CLASS() macro.

	* tools/pdbgen/app.pl: added a "widgets_eek" hack like "tools_eek"
	which inserts #include "widgets/widgets-types.h" before ordinary
	includes.

	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/edit.pdb
	* app/pdb/brush_select_cmds.c
	* app/pdb/edit_cmds.c: changed according to the stuff above.

2001-08-14  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c: take image resolution and choosen unit 
	into account for font and border size.
	
	* app/widgets/gimpfontselection-dialog.[ch]
	* app/widgets/gimpfontselection.[ch]
	* app/widgets/widgets-types.h: added an indicator for font validity.
	Added a font preview to the font selection dialog.
	
	* libgimpwidgets/gimpfileselection.c: return FALSE from 
	gimp_file_selection_entry_focus_out_callback() since we do not want
	to stop signal emission.
	
2001-08-12  Michael Natterer  <mitch@gimp.org>

	Switched to GObject reference counting:

	* app/core/gimpcontainer.c: only ref(), not ref()/sink() children
	of strong containers. Reordered gimp_container_remove() so we
	don't need to ref the object while removing it.

	* app/core/gimpcontext.c: misc fixes. Needs to be badly tortured...

	* app/app_procs.c
	* app/gdisplay.c
	* app/gimprc.c
	* app/core/gimp.c
	* app/core/gimpbrush.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdocuments.c
	* app/core/gimpgradient.c
	* app/core/gimpimage.c
	* app/core/gimplayer.c
	* app/core/gimplist.c
	* app/core/gimpobject.c
	* app/core/gimpparasite.c
	* app/core/gimppattern.c
	* app/core/gimpundostack.c
	* app/gui/dialogs.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpfuzzyselecttool.c: changed accordingly: don't
	ref()/sink() any more, unref all (??) objects after adding them to
	strong containers, misc. minor fixes.

	* app/gui/dialogs-constructors.c
	* app/widgets/gimpwidgets.c: use g_object_add_weak_pointer()
	instead of simply crashing because g_object_weak_ref() was used
	with gtk_widget_destroyed, brrr.

	* app/widgets/gimpdnd.c: removed unneeded g_return_if_fail()'s.

2001-08-12  Sven Neumann  <sven@gimp.org>

	* TODO.xml: fixed an error, updated some numbers and added new items.

2001-08-11  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c: return the created layer.

	* app/pdb/text_tool_cmds.c
	* libgimp/gimptexttool_pdb.c
	* tools/pdbgen/pdb/text_tool.pdb: hacked a bit so scripts using the 
	text_*_fontname procedures work again with the new text tool. 
	The fontname is however no longer a X Logical Font Description, but 
	the much simpler scheme that Pango understands: 
	"[FAMILY-LIST] [STYLE-OPTIONS]". Interactive font selection is still
	broken. The variants of the text PDB calls that pass the XLFD fields
	directly should also work since the PDB now translates this to a
	Pango-conform fontname. Later this API will die, but for the moment,
	some backward compatibility can't hurt...

2001-08-11  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.c: split "destroy" up in "dispose" and "finalize".

	* app/core/gimpcontext.c: objects need to be passed around with
	g_param_spec_object() or bad things will happen.

	* app/gui/channels-commands.c
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/gui.c
	* app/gui/layers-commands.c
	* app/gui/resize-dialog.c
	* app/gui/select-commands.c
	* app/tools/gimpclonetool.c
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimppreview.c: removed many connections to
	"destroy": Connect to "disconnect" or use g_object_weak_ref()
	instead.

2001-08-11  Michael Natterer  <mitch@gimp.org>

	* configure.in: fsck^^^ -- lovely autofoo wants "changequote([,])dnl"

	* app/core/gimpcontext.[ch]: lots of GObject porting.

	* app/core/gimpobject.[ch]: added a "disconnect" signal, which
	like gtk's "destroy" is emitted in dispose(). This is ugly but
	I don't see another "clean" way to implement weak containers.

	* app/core/gimpcontainer.c: connect to the "disconnect" signal of
	the children of weak containes.

	* app/core/gimpimage.[ch]: replaced the "destroy" implementation
	with "dispose" + "finalize". Removed gimage->undo_history.

	* app/devices.c
	* app/gui/dialogs-constructors.c
	* app/gui/tools-commands.c
	* app/tools/tool_manager.c
	* app/widgets/gimpimagedock.c: changed accordingly.

2001-08-11  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c: made border work and fixed render offsets.

2001-08-11  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptexttool.c: allow to specify size and border. 
	
	* app/widgets/gimpfontselection.c: use GTK_STOCK_SELECT_FONT icon.

2001-08-11  Sven Neumann  <sven@gimp.org>

	* configure.in: added dependency on PangoFT2 (Pango compiled with 
	FreeType2 support).
	
	* app/Makefile.am: link against PangoFT2.
	
	* app/tools/Makefile.am
	* app/tools/gimptexttool.[ch]: rudimentary new text tool. Still needs
	lots of work.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h:
	* app/widgets/gimpfontselection-dialog.[ch]
	* app/widgets/gimpfontselection.[ch]: added font selection widgets.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimpfontselection.[ch]: removed font selection code 
	from here since the fonts need to be selected from the core's 
	PangoContext. Will add PDB-controlled font selection later.

2001-08-11  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: added a TODO entry about additional image/file info.

	* app/file-save.c: #include "core/gimpdocuments.h"

	* app/core/gimpcontainer.[ch]: made virtual functions out of some
	signals.

	* app/core/*.[ch]: more GObject stuff: ported all
	gimp_foo_get_type() functions and replaced almost all "destroy"
	implementations with either "finalize" or "dispose" functions.

2001-08-11  Seth Burgess      <sjburges@gimp.org>
	
	* plug-ins/common/colortoalpha.c: set nparams != 4 for 
	non-interactive execution.  Thanks to alex@foogod.com for
	this fix.

2001-08-11  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpdocuments.[ch]: new file implementing the
	docindex.* replacement.

	* app/gimprc.c: added TT_XDOCUMENT to parse the new document
	history.

	* app/file-save.c
	* app/gui/file-open-dialog.c: add opened & saved images to the
	document history.

	* app/core/gimp.c: call gimp_documents_init/exit() instead of
	doing it here.

	* app/core/gimpimagefile.[ch]: removed the "filename" attribute
	and use GimpObject's "name" instead.

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/menus.c: added a menu entry/dockable for the document
	history.

	* app/widgets/gimpdnd.[ch]: make it DND-able.

	* app/widgets/gimppreview.c: fix preview rendering correctly this
	time.

2001-08-10  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimpfontselection.[ch]: added a rudimentary font
	selection widget, mostly copied from GtkFontSelection.

	* libgimpwidgets/gimpfileselection.c: more GObject porting.

2001-08-10  Michael Natterer  <mitch@gimp.org>

	* app/nav_window.c: fix compiler warning.

	* app/core/gimp.[ch]: added gimp->documents which will be an MRU
	list of GimpImagefile objects.

	* app/core/gimpcontainer.c: added some g_return_if_fail().

	* app/gui/palette-editor.c: use GtkImage instead of GtkPixmap,
	s/gtk_signal_*/g_signal_*/.

	* app/widgets/gimppreview.c: render the checkerboard only for
	channel == -1. In particular, don't render it for channel
	previews.

	* app/module_db.c
	* app/core/*.c
	* app/gui/colormap-dialog.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimperasertool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/tool_manager.c
	* app/widgets/*.c
	* libgimpwidgets/*.c: s/gtk_type_new/g_object_new/

2001-08-09  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: removed GIMP_ZOOM_TYPE,

	* app/widgets/widgets-types.h: added it here.

	* app/disp_callbacks.c
	* app/widgets/gimpnavigationpreview.[ch]
	* app/gui/gradient-editor.c: removed old cruft which expects wheel
	events as button_4 and button_5 and connect to GdkEventScroll
	instead.

	* app/nav_window.c: connect to GimpNavigationPreview's new
	"scroll" and "zoom" signals.

	* app/gui/error-console-dialog.c: remove wheel scrol stuff (done
	by GtkScrolledWindow now).

	* app/gui/color-notebook.c
	* app/gui/gradient-editor.c: removed GtkPixmap stuff and use
	GtkImage instead. Looks a bit ugly in the color_notebook (seems
	we need more icon sizes).

	* app/gui/indicator-area.c: GObject porting.

	* app/gui/menus.c_ some more menu icons.

	* app/gui/toolbox.c: pass a GimpContext around as callback data
	and use context->gimp instead of accessing the global "the_gimp"
	variable.

2001-08-09  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpimagefile.[ch]: added first draft of a GimpImagefile
	object that will handle image files on disk, in particular their 
	thumbnails.

2001-08-07  Michael Natterer  <mitch@gimp.org>

	* app/disp_callbacks.c: removed a gdk_pointer_ungrab(), it was
	only there because of buggy gtk+ 1.2.x. Cosmetic changes.

	* app/undo.c: use G_N_ELEMENTS() instead of
	sizeof(array)/sizeof(element).

	* app/gui/menus.c: more stock icons, moved the item_factory
	creation into the menus_get_foo_factory() functions, use
	G_N_ELEMENTS(). This file badly needs to be spit up...

	* app/core/gimpviewable.[ch]
	* app/widgets/gimpcontainermenu.[ch]
	* app/widgets/gimpcontainerview.[ch]
	* app/widgets/gimplistitem.[ch]
	* app/widgets/gimpmenuitem.[ch]
	* app/widgets/gimppreview.[ch]: replaced tons of signal emissions
	by virtual functions which are *much* faster. Moreover, all of
	them are private implementation bits of the specific class
	hierarchy and are useless or even dangerous to be exposed as
	signals.

	* app/widgets/gimpdrawablelistitem.c: removed the drag_motion()
	implementation as it's already done in the parent class.

	* app/widgets/gimplistitem.[ch]
	* app/widgets/gimplayerlistitem.c: redraw the widget when the
	drop_type has changed. Fixes drop_indicator drawing.

2001-08-07  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpbutton.[ch]: cleanup.

	* app/Makefile.am
	* app/errorconsole.[ch]: removed...

	* app/gui/Makefile.am
	* app/gui/error-console-dialog.[ch]: ...added here. Lots of cleanup,
	create a vbox instead of a dialog.

	* app/gui/dialogs-constructors.c
	* app/gui/dialogs.c: added a dockable for the error console.

	* app/errors.c
	* app/gui/gui.c
	* app/gui/menus.c: changed accordingly.

	* app/widgets/gimpcontainerview.c: conntect "extended_clicked" to
	the "extended_clicked" callback, not "clicked".

	* app/widgets/gimplayerlistview.c: set the layer option box'
	spacing in "style_set".

	* app/widgets/gimplistitem.c: argh.

	* themes/Default/gtkrc: changed the default theme to set a smaller
	font only for the dockable because that's where saving screen
	estate really makes sense. May need some further tweaking.

2001-08-06  Daniel Egger  <egger@suse.de>

	* autogen.sh: Fix error message to reflect that one needs
	gettext 0.10.38 to compile GIMP.

2001-08-06  Michael Natterer  <mitch@gimp.org>

	* configure.in
	* themes/Default/images/Makefile.am
	* themes/Default/images/tools/Makefile.am: some new Makefiles to
	make it installable.

	* Makefile.am
	* gtkrc: removed...

	* themes/Default/Makefile.am
	* themes/Default/gtkrc: ...added here.

	* themes/Default/imagerc: new file (not used, just for
	documentation) which loads the default theme's images in the same
	way the inlined pixbufs are registered with the stock system.

	* gimprc.in
	* gimprc.win32
	* user_install
	* user_install.bat
	* app/gimprc.[ch]: added "theme-path" and "theme" gimprc variables.

	* app/app_procs.c: prase gimprc before initializing the GUI.

	* app/core/gimpdatafiles.[ch]: added support for getting only
	subdirectories in the callback.

	* libgimpbase/gimpenv.c: as a temp_hack gimp_gtkrc(); returns the
	default theme's gtkrc.

	* app/gui/gui.c: build a hash of theme directories and select
	the one configured in gimprc.theme. Use gimp_gtkrc()'s default
	value if there is no theme installed or configured.

	* app/gui/preferences-dialog.c: Added theme_path to the GUI. No
	stuff for selection the theme yet.

	* app/gui/menus.c: beautify <Image>/Tools/

	* app/tools/gimpcroptool.c: register in <Image>/Tools/Transform Tools/

2001-08-05  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* configure.in
	* themes/.cvsignore
	* themes/Makefile.am
	* themes/Default/.cvsignore
	* themes/Default/Makefile.am
	* themes/Default/images/.cvsignore
	* themes/Default/images/*.png
	* themes/Default/images/tools/.cvsignore
	* themes/Default/images/tools/*.png: new place for all images
	which are registered with the stock system. The default images are
	all inlined but we will install the default theme later along with
	an appropriate gtkrc as a template for custom themes.

	Added PNGs of all tools icons. Thanks to syngin :)

	* pixmaps/.cvsignore
	* pixmaps/Makefile.am: reverted everything to the old state. This
	directory will go away soon.

	* libgimpwidgets/gimpstock.[ch]: changed accordingly. Register
	stock icons in GTK_ICON_SIZE_BUTTON for all tools.

	* app/core/gimptoolinfo.[ch]
	* app/tools/tool_manager.[ch]: GimpToolInfo wants a stock_id and a
	pre-rendered GdkPixbuf instead of ugly icon_data now. Added some
	workarounds until GimpPreview is a GtkImage and uses GdkPixbuf
	instead of TempBuf.

	* app/tools/Makefile.am
	* app/tools/icons.h: die, uglyness, die.

	* app/tools/[all tools].c: register with a stock_id, not a
	icon_data pointer.

	* app/gui/dialogs-constructors.c: Oops, GIMP badly crashed on
	changing the image for the past few days :)

	* app/gui/menus.c: create the tools' menu entries with stock
	icons.

	* app/gui/toolbox.c: use GtkImages instead of GimpPreviews for
	the toolbox buttons. Will need to change this back as soon
	as GimpPreview actually _is_ a GtkImage.

2001-08-05  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpstock.[ch]: register the button icons with
	GTK_ICON_SIZE_BUTTON, but set them as scalable fallbacks for
	themselves so they get scaled for menus.

	* app/gui/menus.c: set stock icons for much more menu entries.

	* app/widgets/gimpwidgets-utils.[ch]: new utility function
	gimp_item_factory_popup_with_data().

	* app/disp_callbacks.[ch]
	* app/gui/brushes-commands.c
	* app/gui/channels-commands.c
	* app/gui/gradients-commands.c
	* app/gui/layers-commands.c
	* app/gui/palettes-commands.c
	* app/gui/paths-dialog.c
	* app/gui/patterns-commands.c: use the new function.

	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c: s/_("Reset")/GIMP_STOCK_RESET/

	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpcontainerview.[ch]: moved the button_box utility
	functions from the container editor to GimpContainerView itself.

	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcomponentlistitem.c
	* app/widgets/gimpcontainergridview.[ch]
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimpdrawablelistview.[ch]
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplayerlistview.c: changed accordingly. Removed
	lots of duplicated code and use stock images instead of pixmaps.

	* libgimpwidgets/gimpfileselection.[ch]
	* libgimpwidgets/gimppatheditor.c: use stock images instead of
	pixmaps.

	* pixmaps/Makefile.am: removed "yes" and "no", added "stroke".

	* pixmaps/anchor.xpm
	* pixmaps/delete.xpm
	* pixmaps/lower.xpm
	* pixmaps/new.xpm
	* pixmaps/paste-as-new.xpm
	* pixmaps/paste-into.xpm
	* pixmaps/paste.xpm
	* pixmaps/raise.xpm
	* pixmaps/refresh.xpm
	* pixmaps/toselection.xpm: made them all 16x16 so they are scaled
	nicely in menus. Should probably be 18x18.

2001-08-04  Michael Natterer  <mitch@gimp.org>

	* Makefile.am: build pixmaps/ before libgimpwidgets/.

	* pixmaps/.cvsignore
	* pixmaps/Makefile.am: build gimp-stock-pixbufs.h using
	gdk-pixbuf-csource from some of our XPMs.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpstock.[ch]: new files featuring
	gimp_stock_init(). Register a default GtkIconFactory and a set of
	stock buttons.

	* app/gui/gui.[ch]: new function gui_libs_init(). Call
	gimp_stock_init() from it.

	* app/app_procs.c: call new function gui_libs_init().

	* libgimp/gimpui.c: call gimp_stock_init().

	* app/devices.c: removed action_area hacks as we can configure it
	via style properties now.

	* app/gui/menus.c: use <StockItem> for some menu entries.
	Looks nifty :-)

	* app/widgets/gimpcontainereditor.[ch]: take a "stock_id"
	parameter in gimp_container_editor_add_button(), not a EEKy
	pxm_data pointer.

	* app/widgets/gimpbufferview.c
	* app/widgets/gimpdatafactoryview.c: changed accordingly.

	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpdrawablelistview.c: removed ugly tooltips
	formating hacks since gtk2 does it right now.

	* app/widgets/gimpdockbook.c: re-enabled a line that was commented
	out for some reason...?

	* app/errorconsole.c
	* app/gui/file-new-dialog.c
	* app/gui/tool-options-dialog.c
	* plug-ins/common/uniteditor.c: use the new GIMP_STOCK_FOO id's.

	* libgimpwidgets/gimpquerybox.c: fixed auto-hiding by connection
	to a passed object's signal.

2001-08-03  Michael Natterer  <mitch@gimp.org>

	* gtkrc: set style properties for dockables.

	* app/main.c: some #if 0'ed code for mem profiling.

	* app/gui/commands.[ch]
	* app/gui/menus.c: added a mem profiling menu entry + callback.

	* app/gui/palette-editor.c: added a #warning as reminder, use
	gtk_dialog_set_has_separator().

	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpcontainerview.[ch]
	* app/widgets/gimpdockable.[ch]
	* app/widgets/gimpdrawablelistview.[ch]: added some style
	properties to set GimpDockable and friends' borders and spacings.

	* libgimpwidgets/gimppixmap.[ch]
	* libgimpwidgets/gimpsizeentry.[ch]
	* libgimpwidgets/gimpunitmenu.[ch]: GObject stuff, cleanup.

	* app/docindex.c
	* app/errorconsole.c
	* app/gdisplay_color_ui.c
	* app/gimpprogress.c
	* app/module_db.c
	* app/undo_history.c
	* app/user_install.c
	* app/gui/channels-commands.c
	* app/gui/gradient-editor.c
	* app/gui/info-window.c
	* app/gui/tips-dialog.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c
	* app/widgets/gimpdatafactoryview.c
	* libgimp/gimpexport.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* plug-ins/[lots of files]:

	Some perl mass processing applying s/_("Foo")/GTK_STOCK_FOO/g,
	minor manual cleanup in some files.

2001-08-02  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptexttool.c:
	s/#ifndef GDK_WINDOWING_WIN32/#ifdef GDK_WINDOWING_X11/

2001-08-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/tga.c: merged fix for small TGA2 files by
	 Nick Lamb <njl195@zepler.org.uk> from the stable branch.

2001-08-01  Sven Neumann  <sven@gimp.org>

	* app/docindex.c
	* app/gdisplay_color_ui.c
	* app/gimpprogress.c
	* app/nav_window.c
	* app/path.c
	* app/scale.c
	* app/undo_history.c
	* app/user_install.c
	* app/gui/resolution-calibrate-dialog.[ch]: converted uses of  
	gtk_signal_* to g_signal_*. 

	Changed expose_event handlers that used to be connected using 
	signal_connect_after to call the default handler, do the additional 
	drawing, then stop the signal emission by returning TRUE.

2001-08-01  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimperasertool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/tools/transform_options.c: got rid of all remaining gtk_signal 
	wrappers in the tools directory.

2001-08-01  Sven Neumann  <sven@gimp.org>

	* app/core/core-types.h: defined GimpTransferMode enum.
	
	* app/tools/gimpcolorbalancetool.[ch]
	* app/tools/gimpdodgeburntool.[ch]: use it here instead of defining
	the same enum again. Some GObject porting.
	
	* app/tools/gimpsmudgetool.h: removed unused enum SmudgeMode.

	* app/pdb/color_cmds.c
	* app/pdb/tools_cmds.c
	* libgimp/gimpenums.h
	* libgimp/gimptools_pdb.[ch]
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/tools.pdb: changed accordingly (mostly generated)

2001-08-01  Sven Neumann  <sven@gimp.org>

	* configure.in: added GTK_DISABLE_COMPAT_H back to CPPFLAGS.
	
	* app/user_install.c
	* app/base/base.c
	* app/gui/info-window.c
	* app/gui/menus.c
	* app/gui/preferences-dialog.c
	* app/pdb/procedural_db_cmds.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimpdrawablelistview.c
	* app/widgets/gimpnavigationpreview.c
	* libgimpbase/gimpparasiteio.c
	* libgimpwidgets/gimpwidgets.c
	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/uniteditor.c
	* plug-ins/dbbrowser/dbbrowser_utils.c
	* plug-ins/gap/gap_navigator_dialog.c
	* plug-ins/gdyntext/gdyntext_ui.c
	* plug-ins/helpbrowser/helpbrowser.c
	* plug-ins/ifscompose/ifscompose_storage.c
	* plug-ins/print/gimp_main_window.c
	* tools/gimp-remote.c
	* tools/pdbgen/pdb/procedural_db.pdb: replaced lots of deprecated 
	glib, gdk and gtk+ functions using the new API.

	* app/paint-funcs/paint-funcs-rgb.c: removed trailing commas.

2001-08-01  Michael Natterer  <mitch@gimp.org>

	* app/base/base.c: g_strdup (g_get_temp_dir ()), may fix an unseen
	crash.

	* libgimpwidgets/gimphelpui.[ch]: fixed the help stuff by using
	GtkWidget's new "show_help" signal, which is exactly what we did
	before, only without badly hacking around.
	Renamed gimp_help_connect_help_accel() to gimp_help_connect()
	because that's what it does.

	* app/devices.c
	* app/errorconsole.c
	* app/interface.c
	* app/gui/about-dialog.c
	* app/gui/edit-commands.c
	* app/gui/file-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradients-commands.c
	* app/gui/gui.c
	* app/gui/info-dialog.c
	* app/gui/palettes-commands.c
	* app/gui/paths-dialog.c
	* app/gui/select-commands.c
	* app/gui/tips-dialog.c
	* app/gui/toolbox.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpdatafactoryview.c
	* libgimpwidgets/gimpdialog.c
	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/common/CEL.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/gqbist.c
	* plug-ins/flame/flame.c
	* plug-ins/fp/fp_gtk.c
	* plug-ins/script-fu/script-fu-scripts.c: changed accordingly,
	GObject stuff, sprinkled some GTK_STOCK_FOOs, minor cleanups.

2001-07-31  Michael Natterer  <mitch@gimp.org>

	* gtkrc: eek, my last change changed the width of all GtkRange
	subclasses, not only GtkScale, fixed now.

	* app/devices.c: use GTK_STOCK_FOO button texts.

	* app/interface.c
	* app/qmask.[ch]: renamed all qmask callbacks to *_callback().

	* app/gui/tool-options-dialog.c: GObject stuff, use
	gtk_dialog_set_has_separator() instead of poking around.

	* app/widgets/gimpcolorpanel.c: set panel->color_notebook to NULL
	in "destroy".

	* app/widgets/gimpnavigationpreview.c: return TRUE from the
	"expose_event" handler.

	* app/widgets/gimppreview.c: tiny optimizatin.

2001-07-31  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpfileselection.c
	* libgimpwidgets/gimppixmap.c: replaced deprecated GDK calls
	
	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: GObject porting.

2001-07-31  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpexport.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpmenu.c
	* libgimp/gimppatternmenu.c: GObject porting.

2001-07-31  Sven Neumann  <sven@gimp.org>

	* app/core/core-types.h: removed g_signal_handlers_disconnect_by_data
	again. As Owen pointed out, it's generally a bad idea to use it since
	you can't be absolutely sure that no one else has a pointer to the 
	data you are disconnecting.

	* app/gdisplay.c: added the macro here temporarily.
	
	* app/module_db.c
	* app/undo_history.c
	* app/gui/brush-editor.c
	* app/gui/brush-select.c
	* app/gui/gradient-select.c
	* app/gui/pattern-select.c: use g_signal_handlers_disconnect_by_func.
	
	* libgimpwidgets/gimpbutton.c
	* libgimpwidgets/gimpchainbutton.c
	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpfileselection.c
	* libgimpwidgets/gimphelpui.c
	* libgimpwidgets/gimpoffsetarea.c
	* libgimpwidgets/gimppatheditor.c
	* libgimpwidgets/gimpsizeentry.c
	* libgimpwidgets/gimpunitmenu.c
	* libgimpwidgets/gimpwidgets.c: GObject porting.

2001-07-30  Michael Natterer  <mitch@gimp.org>

	* gtkrc: set the width of the scrollbar slider to the same value
	as our default font size so the sliders are nicely aligned with
	their descriptive labels.

	* libgimpwidgets/gimpdialog.[ch]
	* libgimpwidgets/gimpquerybox.[ch]: use GLib-isms and create the
	dialogs' action_area buttons with gtk_dialog_add_button() so we
	can use the GTK_STOCK_FOO buttons and plug in our own icon factory
	later.

	* app/qmask.[ch]: fixed the qmask buttons by applying proper
	GdkEvent callback conventions.

	* libgimpwidgets/gimpcolorbutton.c: NULLify all pointers in
	"destroy".

	* app/gdisplay_ops.c
	* app/gimphelp.c
	* app/interface.c
	* app/gui/brush-editor.c
	* app/gui/color-notebook.c
	* app/gui/convert-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/file-commands.c
	* app/gui/file-new-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/gui.c
	* app/gui/image-commands.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* app/gui/palette-editor.c
	* app/gui/palette-import-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/gui/resolution-calibrate-dialog.c
	* app/gui/tool-options-dialog.c
	* app/widgets/gimpwidgets-utils.c
	* libgimpwidgets/gimpunitmenu.c: g_signal_* and GObject stuff,
	use lots of GTK_STOCK_OK and friends instead of _("OK") etc.,
	misc minor cleanups.

2001-07-30  Sven Neumann  <sven@gimp.org>

	* HACKING
	* autogen.sh: require gettext version 0.38.

	* configure.in: removed some ugly sed hacks that are not any longer 
	needed with recent versions of gettext.

2001-07-29  Michael Natterer  <mitch@gimp.org>

	* app/gimphelp.c: code formating paranoia.

	* app/core/gimp.c: one more g_signal_connect().

	* app/tools/gimpmeasuretool.c: a gtk_widget_show() was optimized
	away :)

	* plug-ins/Makefile.am: re-enabled script-fu and dbbrowser.

	* plug-ins/dbbrowser/dbbrowser_utils.[ch]
	* plug-ins/script-fu/script-fu-console.[ch]
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-text-console.[ch]
	* plug-ins/script-fu/script-fu.c: use GtkTextBuffer/GtkTextView
	all over the place. GUI code cleanup in the dbbrowser and
	the script-fu console.

2001-07-29  Sven Neumann  <sven@gimp.org>

	* app/devices.c
	* app/disp_callbacks.c
	* app/docindex.[ch]
	* app/file-save.c
	* app/gdisplay.c
	* app/gimpprogress.[ch]
	* app/gimprc.c
	* app/plug_in.c
	* app/gui/gradient-editor.c
	* app/gui/menus.[ch]: more GObject and const changes.

2001-07-29  Hans Breuer  <hans@breuer.org>

	* plug-ins/common/animationplay.c : REVERTED for all platforms
	which do install headers 'reflect that GTK2 has its
	gdk<x|win32|fb>.h files in the back-end sub directories'
	only the win32 headers aren't installed ...

2001-07-29  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* README
	* configure.in
	* gimp-1.4.m4: updated pkg-config location and various other tweaks.
	
2001-07-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/fits/fits.c
	* plug-ins/flame/flame.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/maze/maze_face.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/sgi/sgi.c: removed compiler warnings by adding G_CALLBACK()
	casts and const declarations.

2001-07-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/AlienMap.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/align_layers.c
	* plug-ins/common/blinds.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/deinterlace.c
	* plug-ins/common/emboss.c
	* plug-ins/common/film.c
	* plug-ins/common/fractaltrace.c
	* plug-ins/common/gif.c
	* plug-ins/common/gih.c
	* plug-ins/common/hot.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/jpeg.c
	* plug-ins/common/lic.c
	* plug-ins/common/mail.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/mblur.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/nlfilt.c
	* plug-ins/common/papertile.c
	* plug-ins/common/pnm.c
	* plug-ins/common/ps.c
	* plug-ins/common/psp.c
	* plug-ins/common/ripple.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/screenshot.c
	* plug-ins/common/shift.c
	* plug-ins/common/sinus.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/struc.c
	* plug-ins/common/sunras.c
	* plug-ins/common/tiff.c
	* plug-ins/common/waves.c
	* plug-ins/common/wind.c
	* plug-ins/common/xbm.c: got rid of lots of compiler warnings by 
	adding G_CALLBACK() casts and some const declarations.

2001-07-29  Sven Neumann  <sven@gimp.org>

	* app/docindex.c
	* app/ops_buttons.[ch]: more GObject porting.

2001-07-28  Hans Breuer  <hans@breuer.org>

	* */*/makefile.msc : updated for GTK2 build

	* app/widgets/makefile.msc : (new file) forgot this one last time

	* plug-ins/common/animationplay.c : reflect that GTK2 has its
	gdk<x|win32|fb>.h files in the back-end sub directories

	* plug-ins/common/gif.c :
	* plug-ins/common/jpeg.c :
	* plug-ins/dbbrowser/dbbrowser_utils.c :
	* plug-ins/gap/gap_dbbrowser_utils.c :
	* plug-ims/gimpressionist/presets.c :
	* plug-ims/gimpressionist/imap_setting.c :
	* plug-ims/gimpressionist/imap_source.c :
	* plug-ims/script-fu/script-fu-console.c :
	* plug-ims/script-fu/script-fu-scripts.c : #define GTK_ENABLE_BROKEN
	and include <gtk/gtktext.h> to make them compile/work again

	* plug-ins/common/spheredesigner.c : gtk_color_selction_set_opacity
	renamed to gtk_color_selection_set_current_alpha

	* plug-ins/gflare/gtkmultioptionmenu.c : ported ny removing the
	virtual draw function and style->xthickness and ythickness via
	direct access, klass field isn't available anymore

	* plug-ins/common/nlfilt.c :
	* plug-ims/gap/gap_movdialog.c :
	* plug-ims/gimpressionist/gimpressionist.c : 
	gtk_widget_set_default_visible is neither available nor needed anymore

	* plug-ins/common/plugindetails.c : ported to GtkTextBuffer
	and reflect gtk_paned api changes 

	* plug-ims/gimpressionist/imap_preview.c : replace GTK_WIDGET(a)->klass
	access by GTK_WIDGET_GET_CLASS(a) 

	* plug-ims/gimpressionist/imap_selection.c :
	* plug-ims/gimpressionist/imap_toolbar.c :
	* plug-ims/gimpressionist/imap_tools.c : gtk_toolbar api changes

2001-07-27  Sven Neumann  <sven@gimp.org>

	* app/core/core-types.h: 
	defined convenience macro g_signal_handlers_disconnect_by_data().
	Will try to persuade Tim to accept it for GLib.

	* app/module_db.c
	* app/undo_history.c
	* app/core/gimp.c
	* app/core/gimpbrush.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpcontainer.c
	* app/core/gimpcontext.c
	* app/core/gimpdatafactory.c
	* app/core/gimpparasite.c
	* app/gui/brush-editor.c
	* app/gui/brush-select.c
	* app/gui/dialogs.c
	* app/gui/file-open-dialog.c
	* app/gui/gradient-select.c
	* app/gui/gradients-commands.c
	* app/gui/menus.c
	* app/gui/pattern-select.c: GObject porting. 
	Replaced all remainaing gtk_object_[unref|ref] calls by their 
	g_object_ counterparts, except refs that are used with 
	gtk_object_sink().

2001-07-27  Sven Neumann  <sven@gimp.org>

	* app/module_db.c
	* app/gui/color-area.c
	* app/widgets/gimpbrushfactoryview.c
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpcontainerlistview.c
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimpdock.c: more GObject porting

2001-07-27  Michael Natterer  <mitch@gimp.org>

	* app/errorconsole.c
	* app/user_install.c: use GtkTextView.

	* app/gui/preferences-dialog.c: use GtkTextView correctly :)

	* app/interface.c: a quick hack which enables setting the
	canvas padding color via gtkrc.

	* app/file-utils.c
	* app/plug_in.c
	* app/pdb/fileops_cmds.c
	* tools/pdbgen/pdb/fileops.pdb: s/g_basename/g_path_get_basename/

	* app/tools/gimpinktool.c
	* app/tools/gimppainttool.c: stupid /me disabled all paint tools
	by setting pressure to 0.0 instead of 1.0, fixed now.

2001-07-27  Michael Natterer  <mitch@gimp.org>

	* app/gui/indicator-area.c: create/raise the new dialogs, not the
	old ones when clicking on the previews.

	* app/gui/palette-editor.c: some debugging g_print()s to track
	down a funny GTK+ "lets trash const data" bug.

	* app/gui/preferences-dialog.c: replaced deprecated GtkText with
	GtkTextBuffer/GtkTextView.

	* app/widgets/gimpdockbook.c: when creating a new dock from a DND
	operation, set it's auto_follow_active and show_image_menu state
	to the source dock's values.

2001-07-26  Sven Neumann  <sven@gimp.org>

	* configure.in: check for X, respect X_LIBS when searching for libxpm.
	We can't rely on GTK_LIBS including the X_LIBS any longer.
	
	* app/errorconsole.[ch]: some const fixes.

2001-07-25  Michael Natterer  <mitch@gimp.org>

	* gtkrc
	* gtkrc_user: updated for gtk+ 2.0, added a "gimp-" prefix to
	all global GIMP styles.

	* app/app_procs.c: typo.

	* app/user_install.c
	* app/gui/resolution-calibrate-dialog.[ch]: use GtkRcStyle along
	with gtk_widget_get_modifier_style()/gtk_widget_modify_style() as
	recommended instead of messing with the widgets' styles directly.

	* app/core/gimpdatalist.[ch]
	* app/core/gimpparasitelist.[ch]
	* app/core/gimpundo.[ch]
	* app/core/gimpundostack.[ch]: GObject porting stuff.

2001-07-25  Sven Neumann  <sven@gimp.org>

	* app/devices.c: fixed typo.
	
	* app/gdisplay.c
	* app/undo_history.c
	* app/user_install.c
	* app/gui/about-dialog.c
	* app/gui/color-area.c
	* app/gui/gradient-editor.c
	* app/gui/gui.c
	* app/gui/paths-dialog.c
	* app/gui/splash.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpinktool.c
	* app/tools/gimptexttool.c: 
	s/gdk_[bit|pix]map_unref/gdk_drawable_unref/
	
	* app/xcf/xcf-load.c: use GObject functions

	* plug-ins/common/animationplay.c: include GDK backend specific 
	headers

2001-07-25  Sven Neumann  <sven@gimp.org>

	* configure.in: only build X11 specific plug-ins and tools if 
	building for GTK+ on X11.

2001-07-25  Michael Natterer  <mitch@gimp.org>

	* HACKING
	* INSTALL: updated, mention pkg-config.

	* app/gdisplay_ops.c
	* app/gui/resize-dialog.c
	* app/gui/toolbox.c: more GObject porting and const stuff.

2001-07-25  Sven Neumann  <sven@gimp.org>

	* configure.in: check for pkg-config (>= 0.7)
	
	* gimptool-1.4.in: use pkg-config instead of glib-config and 
	gtk-config.

2001-07-25  Sven Neumann  <sven@gimp.org>

	* app_procs.c
	* errors.c
	* errors.h
	* file-save.c
	* gdisplay.c
	* module_db.c
	* undo.c: use GObject functions and const fixes.

2001-07-25  Michael Natterer  <mitch@gimp.org>

	* app/gui/brush-select.c
	* app/gui/channels-commands.c
	* app/gui/info-window.c
	* app/gui/layers-commands.c
	* app/gui/offset-dialog.c
	* app/gui/palette-import-dialog.c
	* app/gui/paths-dialog.c
	* app/gui/preferences-dialog.c: use GObject functions, stuff.

2001-07-25  Sven Neumann  <sven@gimp.org>

	* app/nav_window.c
	* app/user_install.c
	* app/pdb/color_cmds.c
	* app/pdb/selection_cmds.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimppainttool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c
	* app/tools/tool_manager.c
	* app/tools/transform_options.c
	* app/widgets/gimpdnd.c
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/selection.pdb: use GObject functions.

2001-07-25  Sven Neumann  <sven@gimp.org>

	* app/gximage.c: replaced some deprecated gdk functions.
	
	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainermenuimpl.c
	* app/widgets/gimpcursor.c
	* app/widgets/gimpdialogfactory.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimphistogramview.c
	* app/widgets/gimplistitem.c
	* app/widgets/gimpmenuitem.c
	* app/widgets/gimpnavigationpreview.c
	* app/widgets/gimppreview.c
	* app/widgets/gimpwidgets-utils.c: more work on porting to GObject.

2001-07-25  Michael Natterer  <mitch@gimp.org>

	* app/gui/dialogs-constructors.c
	* app/widgets/gimpdockable.c: removed debugging g_print().

	* app/widgets/gimpdock.c: ditto, fixed a crash caused by some
	intermediate porting hack.

2001-07-24  Michael Natterer  <mitch@gimp.org>

	Port to glib/gtk+ 2.0 episode I (every segfault has it's beginning)

	* configure.in: require glib/gtk+ >= 1.3.7, commented out the
	gtkxmhtml stuff.

	From now on, you will need glib, pango, atk and gtk+ HEAD from CVS
	to hack or use GIMP HEAD.

	Beware, it crashes randomly :)

	* app/core/Makefile.am
	* app/core/gimpmarshal.list: new file plus rules to generate
	gimpmarshal.[ch] from it.

	* app/core/*
	* app/tools/*
	* app/widgets/*
	* libgimpwidgets/*: started to use the glib object system. All
	core/ objects are still gtk objects however. All signals are
	created using g_signal_new(). There are many gtk+ artefacts left.
	Finally, we will _not_ use the gtk_signal_foo() wrappers and
	friends any more.

	* app/colormaps.c
	* app/devices.[ch]
	* app/disp_callbacks.c
	* app/errorconsole.c
	* app/file-save.[ch]
	* app/interface.c
	* app/module_db.c
	* app/nav_window.c
	* app/ops_buttons.c
	* app/scroll.c
	* app/user_install.c
	* app/gui/about-dialog.c
	* app/gui/brush-editor.c
	* app/gui/brushes-commands.c
	* app/gui/color-notebook.c
	* app/gui/colormap-dialog.c
	* app/gui/dialogs-commands.c
	* app/gui/dialogs-constructors.c
	* app/gui/file-commands.c
	* app/gui/file-dialog-utils.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.[ch]
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/gradients-commands.c
	* app/gui/image-commands.c
	* app/gui/info-dialog.[ch]
	* app/gui/layer-select.c
	* app/gui/layers-commands.c
	* app/gui/menus.c
	* app/gui/offset-dialog.c
	* app/gui/palette-editor.c
	* app/gui/palettes-commands.c
	* app/gui/patterns-commands.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.[ch]
	* app/gui/splash.c
	* app/gui/tips-dialog.c
	* app/gui/tool-options-dialog.c
	* app/gui/toolbox.c
	* app/gui/tools-commands.c
	* libgimp/gimpbrushmenu.c
	* libgimp/gimpmenu.c
	* libgimp/gimppatternmenu.c
	* libgimp/gimpui.c
	* libgimpbase/gimpenv.c: tons and tons of changes like "const
	gchar*", switch from GdkDeviceInfo to GdkDevice (very incomplete
	and currently disables), lots of s/gtk_signal/g_signal/,
	removal/replacement of deprecated stuff,
	s/GtkSignalFunc/GCallback/ and lots of small changes and fixes 
	while I was on it, zillions of warnings left...

	* modules/Makefile.am: disabled the water color selector
	temporarily (XInput issues).

	* plug-ins/Makefile.am
	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl: simply excluded all plug-ins
	which did not build (including Script-Fu). They are trivial to
	fix.

2001-07-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/winclipboard.c
	* plug-ins/gap/gap_filter_foreach.c
	* plug-ins/imagemap/imap_cmd_guides.c
	* plug-ins/sel2path/pxl-outline.c: marked missing strings for 
	translation (patch from "Iccii" <iccii@hotmail.com>).

2001-07-22  Hans Breuer  <hans@breuer.org>

	* app/*/makefile.msc : 
	* plug-ins/makefile.msc	: 
	* libgimp/gimp.def :
	* libgimpwidgets/gimpwidgets.def : updated

	* makefile.msc :
	* app/xcf/makefile.msc :
	* regexrepl/makefile.msc : new files
	
	* app/base/base-config.c : a work-around for a gccism with
	structure initialization

	* app/core/gimp.c :
	* app/core/gimpimage-new.c :
	* app/gui/color-area.c
	* app/widgets/gimpdialogfactory.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* app/xcf/xcf-write.c
	* plug-ins/common/plasma.c :
	* plug-ins/flame/libifs.c : added <string.h> for strlen(), strcpy(),
	memcpy(), memcmp() and friends 	

	* plug-ins/imagemap/imap_rectangle.c :
	* plug-ins/ifscompose/ifscompose_storage.c : added <stdlib.h> for abs()

	* plug-ins/common/spheredesigner.c : reflect renaming of drawable.id
	drawable.drawable_id 

	* plug-ins/script-fu/siod-wrapper.c : <string.h> and conditional use
	of script_fu_server_quit () cause there is not yet script-fu server
	on win32.

2001-07-22  Stanislav Brabec  <utx@penguin.cz>

	* plugins/common/despeckle.c: Reflect my fix from 2001-03-01
	(range limits) in script-fu comments.

2001-07-20  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/dialog_handler.[ch]: removed.

	* app/widgets/gimpdialogfactory.[ch]: added the missing features
	from the dialog_handler: idle/unidle all dialogs and the show_all
	-> hide_all -> show_toolbox -> show_all cycling (a bit ugly
	currently because the toolbox's factory and it's identifier has to
	be passed to gimp_dialog_factories_toggle()).

	* app/disp_callbacks.c
	* app/gui/gui.c: call the new dialog factory class methods.

	* app/devices.c
	* app/docindex.c
	* app/errorconsole.c
	* app/nav_window.c
	* app/undo_history.c
	* app/gui/info-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c: currently "unmanaged" because they
	are not yet registered with a dialog factory.

	* app/gui/menus.c: ditto for the tearoff menus.

	* app/gui/brush-select.c
	* app/gui/colormap-dialog.c
	* app/gui/gradient-select.c
	* app/gui/palette-select.c
	* app/gui/pattern-select.c
	* app/gui/tool-options-dialog.c
	* app/gui/toolbox.c: these are already factory created so toggling
	and (un)idling works like before.

	* app/widgets/gimpdock.c: reduced the minimal width from 280 to 250.

	* app/widgets/gimplayerlistview.c: use a toggle button instead of
	a check button for "Keep transp.".

2001-07-19  Sven Neumann  <sven@gimp.org>

	* configure.in: ran autoupdate on this file
	
	* app/xcf/xcf-load.c
	* app/xcf/xcf-private.h
	* app/xcf/xcf-save.c: code cleanup, no changes

2001-07-18  Michael Natterer  <mitch@gimp.org>

	* app/batch.c: bahave like the old batch code and call
	app_exit(FALSE) when reading from STDIN is finished.

2001-07-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-text-console.c: stop reading on EOF

	* plug-ins/script-fu/script-fu-console.c
	* plug-ins/script-fu/script-fu.c: some small cleanups

2001-07-18  Michael Natterer  <mitch@gimp.org>

	* app/batch.[ch]: seems Mathieu messed up the last commit :) Added
	these two files back from the Attic, removed the old STDIN code
	and added a small hack which calls "extension-script-fu-text-console"

	* app/main.c: reverted to the last version, so old and new batch
	mode are both there now.

2001-07-17  Mathieu Lacage  <mathieu@gnome.org>

	* app/batch.c: new code to call the script_fuc_text_console pdb function.
	* app/main.c: (main): remove batch command code.

	* plug-ins/script-fu/Makefile.am: add siod-wrapper.h/c
	* plug-ins/script-fu/script-fu-console.c:
	(script_fu_cc_key_function), 
	(script_fu_open_siod_console),
	(script_fu_close_siod_console):
	* plug-ins/script-fu/script-fu-scripts.h: 
	* plug-ins/script-fu/script-fu-server.c: 
	(script_fu_server_quit),
	(script_fu_server_get_mode), 
	(execute_command):
	Replace all direct calls to the scheme interpreter with calls to the siod-wrapper.
	* plug-ins/script-fu/script-fu-console.h: remove run_eval.
	* plug-ins/script-fu/script-fu-server.h:
	* plug-ins/script-fu/script-fu-text-console.c:
	(script_fu_text_console_run), 
	(read_command),
	(script_fu_text_console_interface):
	The actual new text console.
	* plug-ins/script-fu/script-fu-text-console.h: header.
	* plug-ins/script-fu/script-fu.c: 
	(script_fu_quit),
	(script_fu_query), 
	(script_fu_run): rename to better words.
	move most of the code to siod-wrapper.c/h
	* plug-ins/script-fu/siod-wrapper.c: 
	(siod_get_output_file),
	(siod_set_output_file), 
	(siod_get_verbose_level),
	(siod_set_verbose_level), 
	(siod_print_welcome),
	(siod_interpret_string), 
	(siod_get_error_msg),
	(siod_get_success_msg), 
	(siod_init), 
	(init_procedures),
	(init_constants), 
	(convert_string), 
	(sputs_fcn), 
	(lprin1s),
	(marshall_proc_db_call), 
	(script_fu_register_call),
	(script_fu_quit_call):
	All the funcitons dealing with the internals of the scheme interpreter.
	* plug-ins/script-fu/siod-wrapper.h: the header.

2001-07-17  Michael Natterer  <mitch@gimp.org>

	* app/path.[ch]: removed path_to_beziersel() so this file can be
	safely included from core/.

	* app/tools/gimpbezierselecttool.[ch]: added it here.

	* app/core/core-types.h: added a GimpToolOptions typedef. Removes
	deps into tools/ and will later be a core object anyway.

	* app/tools/tools-types.h: removed the ToolOptions typedef here.

	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage.c
	* app/core/gimptoolinfo.[ch]: removed deps into tools/, misc stuff.

	* app/tools/tool_manager.[ch]: some ugly temp hacks. Please ignore.

	* app/widgets/gimpdialogfactory.[ch]: added a "remember_if_open" field
	to the GimpDialogFactoryEntry so we can manage dialogs which should
	not be re-opened on startup.

	* app/gui/dialogs-constructors.c
	* app/gui/dialogs.c: register & create all editor dialog with the
	"global_dialog_factory".

	* app/gui/tool-options-dialog.c
	* app/tools/*: s/ToolOptions/GimpToolOptions/

2001-07-15  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpwire.c: remove the usage of printf()/scanf()
	when sending doubles over the wire. Instead, rely on the memory
	layout of gdouble being IEEE compliant and transmit 8 bytes in
	network byte order.

	* libgimpbase/gimpprotocol.h: increase GP_VERSION because this
	makes the wire protocol binary incompatible.

	* app/main.c
	* libgimp/gimp.c: removed the setlocate(LC_NUMERIC,"C") workaround.

2001-07-15  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.c: don't use the global "the_gimp" variable.

	* app/core/gimpimage-convert.c: don't update the display here.

	* app/gui/gui.c: connect to the images' "mode_changed" signal
	and update here.

	* app/gui/brush-editor.[ch]
	* app/gui/gradient-editor.[ch]
	* app/gui/palette-editor.[ch]: pass a "Gimp" pointer to all
	editors. Added an palette_name entry to the palette editor.

	* app/gui/colormap-dialog.[ch]: removed all the dialog stuff and
	made the constructor return a vbox so it can be integrated in a
	dockable. Lots of cleanup and removal of anqiuqe aretfacts.

	* app/gui/dialogs-constructors.[ch]: wrap the colormap dialog in
	a dockable.

	* app/gui/dialogs-commands.[ch]
	* app/gui/dialogs.c
	* app/gui/menus.c: integrate the new dockable, made the "Brushes.."
	etc. menu entries create dockbles. Moved the old dialogs and the
	test menu entries to "Old + Testing" and removed N_() so the .po
	files stay cruft-free.

	* app/gui/test-commands.[ch]: removed lots of stuff which is not
	"testing" any more.

2001-07-14  Sven Neumann  <sven@gimp.org>

	* app/pdb/display_cmds.c
	* tools/pdbgen/pdb/display.pdb (display_new_invoker): removed 
	unnecessary check for image being nonempty.

2001-07-14  Fatih Demir <kabalak@gtranslator.org>

	* tips/Makefile.am|makefile.mingw: Added gimp_tips.tr.txt to the
	targets and re-ordered the tips files listings.

	* tips/gimp_tips.tr.txt: Added Turkish tips file from Alper Ersoy.

2001-07-13  Michael Natterer  <mitch@gimp.org>

	* app/appenv.h
	* app/main.c: removed "use_mmx" and the MMX detection.

	* app/base/Makefile.am: build the MMX detection unconditionally
	as it's already #ifdef'ed in the source.

	* app/base/detect-mmx.h: added a header for detect-mmx.S

	* app/base/base-config.[ch]: added the "use_mmx" boolean.

	* app/base/base.c: call intel_cpu_features() here.

	* app/paint-funcs/paint-funcs.c: #include "base/base-config.h".

	* app/floating_sel.c
	* app/core/gimpimage.c: removed commented out cruft.

	* app/core/gimplayer.c: gimp_layer_new_from_tiles(): pass the
	gimage instead of NULL to gimp_layer_new() because layers have to
	be created in an image context now
	(checked gimp_layer_new_from_tile()'s callers if this is
	semantically correct).

2001-07-12  Dave Neary  <dneary@eircom.net>

	* po/POTFILES.in: One line fix to fix dependency problem.
	
2001-07-12  Sven Neumann  <sven@gimp.org>

	* app/regexrepl.c
	* app/regexrepl.h: removed here ...

	* plug-ins/script-fu/regexrepl.c
	* plug-ins/script-fu/regexrepl.h: ... and here ...

	* regexrepl/Makefile.am
	* regexrepl/regex.c
	* regexrepl/regex.h: ... and added here again.
	
	* Makefile.am
	* configure.in
	* app/Makefile.am
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db_cmds.c
	* plug-ins/script-fu/Makefile.am
	* plug-ins/script-fu/interp_regex.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

2001-07-12  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/detect_mmx.S: removed.

	* app/base/Makefile.am
	* app/base/detect-mmx.S: added.

2001-07-11  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpunit.c
	* app/unitrc.h: removed...

	* app/core/Makefile.am
	* app/core/gimpunit.[ch]: ...re-added here.

	* app/core/gimp.[ch]: added the image and drawable hash tables,
	next_image_ID, next_guide_ID and next_drawable_ID, added a
	GimpCoreConfig pointer which is now initalized dynamically.

	* app/core/gimpcoreconfig.[ch]: don't provide a global core_config
	variable any more (need to access gimp->config now).

	* app/gdisplay.[ch]
	* app/core/gimpdrawable.[ch]
	* app/core/gimpimage.[ch]: removed all global variables from
	gimpimage.c and gimpdrawable.c, pass a Gimp* to all *_get_by_ID()
	functions.

	* tools/pdbgen/app.pl: pass Gimp* to all _get_by_ID() functions.

	* app/app_procs.c
	* app/file-open.c
	* app/file-save.c
	* app/gimprc.c
	* app/libgimp_glue.c
	* app/module_db.c
	* app/plug_in.c
	* app/undo.c
	* app/user_install.c
	* app/core/core-types.h
	* app/core/gimpcontext.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-new.c
	* app/core/gimpparasite.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/info-window.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* app/xcf/xcf.c
	* app/widgets/gimpdnd.c

	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/floating_sel_cmds.c
	* app/pdb/guides_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/tools_cmds.c
	* app/pdb/undo_cmds.c
	* app/pdb/unit_cmds.c

	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/unit.pdb: changed accordingly.

2001-07-10  Sven Neumann  <sven@gimp.org>

	Bugfixes from the stable branch:
	
	* plug-ins/common/bz2.c
	* plug-ins/common/gz.c: a fix for bug #57217 based on a patch from
	Raphael Quinet.

	* plug-ins/gap/gap_lib.c (p_file_copy): open files in binary mode. 
	A patch from Wolfgang Hofer that possibly fixes bug #52890.

	* tools/Makefile.am: added gimppath2svg.py to EXTRA_DIST.
	
2001-07-10  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.[ch]: removed the gimp_busy boolean, check whether
	user_installation is needed here, not in user_install.c, parse
	gtkrc an friends only if(!no_interface), create the Gimp object
	before parsing gimp's rc files and pass it to the parse functions,
	many other cleanups.

	* app/appenums.h: added MessageHandlerType and StackTraceMode.
	
	* app/appenv.h: removed MessageHandlerType, declare all global
	variables from main.c (no more hidden global stuff please).

	* app/errors.[ch]: added the fatal message func here (from main.c),
	removed the StackTraceMode enum.

	* app/gimprc.[ch]: renamed functions to gimprc_*(), pass a Gimp
	pointer to some functions.

	* app/gimpunit.c
	* app/unitrc.h: ok, this is ugly: renamed all functions to
	_gimp_unit_*() and made them public. The unit list is part
	of the Gimp object now, so pass a Gimp* to all functions.

	* app/libgimp_glue.[ch]: added EEKy wrappers for all gimp_unit_*()
	functions which are used by widgets.

	* app/main.c: cleaned up the global variables, removed the fatal
	message handler, call app_init() directly, not via the
	user_install stuff, misc. cleanups.

	* app/user_install.[ch]: removed the check if user_installation is
	needed (done by app_procs.c now).

	* app/core/gimp.[ch]: added the user_unit list and the "busy"
	boolean. Moved gimp_[set|unset]_busy() here. Added
	gimp_initialize() which is called after unitrc and gimprc are
	parsed.

	* app/batch.c
	* app/colormaps.c
	* app/devices.c
	* app/disp_callbacks.c
	* app/gdisplay_ops.c
	* app/gimphelp.c
	* app/module_db.c
	* app/nav_window.c
	* app/plug_in.c
	* app/core/gimpcontext.c
	* app/core/gimpdatafiles.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage.c
	* app/core/gimpparasite.c
	* app/core/gimpparasitelist.h
	* app/gui/file-open-dialog.c
	* app/gui/gui.[ch]
	* app/gui/info-dialog.c
	* app/gui/info-window.c
	* app/gui/preferences-dialog.c
	* app/gui/session.c
	* app/gui/tips-dialog.c
	* app/gui/toolbox.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimptransformtool.c
	* app/tools/tool_manager.c
	* app/widgets/gimpcolorpanel.c
	* app/widgets/gimpcursor.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* app/xcf/xcf.c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/app.pl
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/message.pdb
	* tools/pdbgen/pdb/unit.pdb
	* app/pdb/image_cmds.c
	* app/pdb/message_cmds.c
	* app/pdb/unit_cmds.c: changed accordingly, minor cleanups.

2001-07-09  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/datafiles.[ch]
	* app/gimpparasite.[ch]
	* app/parasitelist.[ch]: removed...

	* app/core/Makefile.am
	* app/core/gimpdatafiles.[ch]
	* app/core/gimpparasite.[ch]
	* app/core/gimpparasitelist.[ch]: ...and added here.

	* app/gimprc.c
	* app/module_db.c
	* app/plug_in.c
	* app/undo.c
	* app/core/gimp.c
	* app/core/gimpchannel.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdrawable.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage.c
	* app/core/gimplayer.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/parasite.pdb
	* app/pdb/parasite_cmds.c: changed #include's accordingly.

2001-07-09  Dave Neary  <dneary@eircom.net>

	* app/plug_in.c: One-line fix which is needed, but never showed 
	up before. Initialise a string to NULL, to avoid a !=NULL
	mishap later on. 
	
2001-07-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.[ch]: added a (commented out) function to open
	files (to get rid of including gui/file-open-dialog.h)

	* app/gui/file-open-dialog.[ch]
	* app/gui/file-save-dialog.[ch]: renamed all functions because they
	are no callbacks any more. Removed the _by_extension() callbacks.

	* app/gui/file-commands.[ch]: added the
	file_[open|save]_by_extension() callbaks here along with some
	other stuff which has nothing to do with the file dialogs.

	* app/gui/menus.c: added a helper function to create an item
	factory, cleanup.

	* app/gui/palette-editor.[ch]: contains only the editor for a
	single palette now (removed the notebook and the palette list).
	Renamed all functions to palette_editor_*(). Will be made a
	dockable later.

	* app/gui/palette-select.[ch]: made it work like the other
	selection dialogs.

	* app/app_procs.c
	* app/docindex.c
	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/gradient-select.c
	* app/gui/gui.c
	* app/widgets/gimpdnd.c: changed accordingly.

2001-07-08  Michael Natterer  <mitch@gimp.org>

	* app/disp_callbacks.c: the active_tool may change in the middle
	of gdisplay_canvas_events(), so re-get it after using it for
	cursor_update.

	* app/base/boundary.c: made some global variables local.

	* app/core/gimpdrawable.c: don't call gimp_drawable_set_visible()
	in gimp_drawable_configure() because we don't want signal
	emissions while configuring the drawable.

	* app/gui/Makefile.am
	* app/gui/brushes-commands.[ch]
	* app/gui/data-commands.[ch]
	* app/gui/gradients-commands.[ch]
	* app/gui/palettes-commands.[ch]
	* app/gui/patterns-commands.[ch]: new files for new new item
	factories' callbacks.

	* app/gui/menus.[ch]: added context menus for brushes, patterns, ...

	* app/gui/gradient-editor.c
	* app/gui/palette-editor.c: removed the "Save as POV", "Import
	Palette" and "Merge Palattes" buttons as they are item factory
	callbacks now.

	* app/widgets/gimpbrushfactoryview.[ch]
	* app/widgets/gimpbufferview.[ch]
	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpdatafactoryview.[ch]: pass a
	"GimpContainerContextFunc" pointer to all GimpContainerEditor
	subclasses' constructors. Use the function to show the context
	menu.

	* app/widgets/gimpcontainergridview.c: dispatch the previews'
	"context" signal.

	* app/widgets/gimppreview.[ch]: new signal "context" which is
	emitted on right-click.

	* app/gui/brush-select.c
	* app/gui/dialogs-constructors.c
	* app/gui/gradient-select.c
	* app/gui/layers-commands.c
	* app/gui/palette-select.c
	* app/gui/pattern-select.c
	* app/gui/test-commands.c: changed accordingly.

2001-07-08  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/drawable.[ch]: removed.

	* app/core/gimpdrawable.[ch]: added the functions here. Made an
	end to the myth that FG/BG and the undo system (!!!) are not
	really part of the core.

	* app/disp_callbacks.c
	* app/floating_sel.c
	* app/image_map.c
	* app/qmask.c
	* app/undo.c
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-desaturate.c
	* app/core/gimpdrawable-equalize.c
	* app/core/gimpdrawable-invert.c
	* app/core/gimpdrawable-offset.c
	* app/core/gimpedit.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage.[ch]
	* app/core/gimplayer.c
	* app/core/gimplayermask.c
	* app/gui/channels-commands.c
	* app/gui/gui.c
	* app/gui/layers-commands.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimppainttool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c
	* app/tools/tool_manager.c
	* app/widgets/gimpchannellistitem.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpdrawablelistitem.c
	* app/widgets/gimplayerlistitem.c
	* app/widgets/gimplayerlistview.c
	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/floating_sel_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/tools_cmds.c
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/drawable.pdb: changed accordingly. Misc small
	fixes and cleanups.

2001-07-07  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimage.[ch]: removed.

	* app/core/gimp.c: s/gimage_new/gimp_image_new/

	* app/gui/gui.c
	* app/tools/tool_manager.c: added the handlers from gimage.c

2001-07-07  Michael Natterer  <mitch@gimp.org>

	* app/tools/tool_manager.[ch]: put all tool_manager variables into
	a struct which is attached to a "Gimp". Pass a Gimp* to all
	tool_manager functions.

	* app/disp_callbacks.c
	* app/gdisplay.c
	* app/gimage.c
	* app/scale.c
	* app/scroll.c
	* app/undo.c
	* app/gui/convert-dialog.c
	* app/gui/edit-commands.c
	* app/gui/tool-options-dialog.c
	* app/gui/tools-commands.c: changed accordingly.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptool.c
	* app/tools/gimptransformtool.c: mostly bad hacks for tool dialogs
	which exist without a real context. Needs some more review.

2001-07-07  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpimage-crop.[ch]: new files for gimp_image_crop()
	and gimp_image_crop_auto_shrink() (should share large portions of
	code with gimp_image_resize()).

	* app/tools/gimpcroptool.[ch]: removed here.

	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/tools.pdb: gimp_crop --> gimp_image_crop

	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/tools_cmds.c
	* libgimp/gimpimage_pdb.[ch]
	* libgimp/gimptools_pdb.[ch]: regenerated.

	* plug-ins/common/autocrop.c
	* plug-ins/common/gif.c
	* plug-ins/common/guillotine.c
	* plug-ins/common/zealouscrop.c
	* plug-ins/perl/examples/image_tile
	* plug-ins/script-fu/scripts/add-bevel.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm
	* plug-ins/script-fu/scripts/slide.scm: changed accordingly. Some
	cleanups in the plug-ins.

2001-07-07  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/context_manager.[ch]: removed.

	* app/app_procs.c: call tool_mananger instead of context_manager
	functions, pass "the_gimp" to some more functions.

	* app/drawable.[ch]: pass a GimpContext to drawable_fill().

	* app/errors.c: behave according to "stack_trace_mode" when using
	the debugging signal handler.

	* app/gimprc.[ch]: removed the core/ config variables.

	* app/selection.c: set the selection's state to INVISIBLE in
	selection_pause().

	* app/core/Makefile.am
	* app/core/gimpcoreconfig.[ch]: new files (the configuration
	variables used by core/).

	* app/core/gimpcontext.[ch]: removed the global contexts (user,
	default, ...) and their functions. It's no longer possible to pass
	NULL to the context functions to manipulate the current context
	(gimpcontext.c doesn't know the current context any more).

	* app/core/gimp.[ch]: added them here. The functions are now called
	gimp_[set|get]_*_context(). Added gimp_create_context() which is
	the only function to create contexts now.

	* app/gui/dialogs.[ch]
	* app/gui/gui.[ch]: pass "gimp" to all functions.

	* app/tools/tool_manager.[ch]
	* app/tools/tools.[ch]: pass "gimp" to lots of functions. Added
	the "global_tool_context" logic and the global/non-global paint
	options switching from the context_manager. Pass "gimp" to all
	tools' "register" functions.

	* app/tools/*: changed accordingly.

	* app/devices.c
	* app/disp_callbacks.c
	* app/file-open.[ch]
	* app/file-save.c
	* app/gdisplay.c
	* app/gimage.c
	* app/libgimp_glue.c
	* app/module_db.c
	* app/nav_window.c
	* app/plug_in.c
	* app/qmask.c
	* app/undo.c
	* app/base/base-config.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpdrawable-offset.c
	* app/core/gimpgradient.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage.c
	* app/core/gimppalette.c
	* app/core/gimptoolinfo.[ch]
	* app/core/gimpundo.c
	* app/gui/brush-select.c
	* app/gui/channels-commands.c
	* app/gui/color-area.c
	* app/gui/dialogs-constructors.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/gradient-select.c
	* app/gui/info-window.c
	* app/gui/layers-commands.c
	* app/gui/menus.c
	* app/gui/palette-editor.c
	* app/gui/palette-import-dialog.c
	* app/gui/palette-select.c
	* app/gui/paths-dialog.c
	* app/gui/pattern-select.c
	* app/gui/preferences-dialog.c
	* app/gui/resize-dialog.c
	* app/gui/test-commands.c
	* app/gui/tool-options-dialog.c
	* app/gui/toolbox.c
	* app/gui/tools-commands.c
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdrawablelistview.[ch]
	* app/widgets/gimpimagedock.c
	* app/widgets/gimplayerlistview.c
	* app/pdb/brushes_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/palette_cmds.c
	* app/pdb/patterns_cmds.c
	* app/pdb/procedural_db.c
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/patterns.pdb: changed accordingly: remove usage
	of gimp_context_[get|set]_*(NULL), create contexts with
	gimp_create_context(). Get the user/current context with
	gimp_get_[user|current]_context(). Added/removed access to the
	global "the_gimp" variable in some places. Get the core's config
	variables from "core_config".
	
2001-07-06  Dave Neary  <dneary@eircom.net>

	* app/gimprc.c: Removed some C89 & gcc extention stuff which broke
	the build on some platforms.
	
2001-07-06  Dave Neary  <dneary@eircom.net>

	* po/POTFILES.in: Changed app/image_new.c to 
	app/core/gimpimage-new.c to get the build working.

2001-07-05  Michael Natterer  <mitch@gimp.org>

	* app/gimage.c: don't add the image to the image container,
	don't call undo_free().

	* app/core/gimp.[ch]: add new images to gimp->images, optionally
	attach the comment parasite.

	* app/core/gimpedit.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-new.c
	* app/gui/file-open-dialog.c
	* app/gui/toolbox.c
	* tools/pdbgen/pdb/image.pdb
	* app/pdb/image_cmds.c
	* app/xcf/xcf-load.c: call gimp_create_image() and/or
	gimp_create_display(), don't attach a comment parasite.

	* app/core/gimpimage.c: call undo_free() in "destroy".

	* app/file-open.c
	* app/gui/palette-import-dialog.c
	* app/xcf/xcf-save.c: don't #include "gimage.h"

2001-07-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/image_new.[ch]: removed...

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpimage-new.[ch]: ...and (partly) added here.

	* app/core/gimp.[ch]: added gimp_create_image() which will be the
	_only_ place to get new images from soon.
	Added  a "create_display_func" function pointer...

	* app/gui/gui.[ch]: ...which gets initialized here.

	This way the core can create displays without depending on the
	interface.

	* app/app_procs.c
	* app/apptypes.h
	* app/core/gimpedit.c
	* app/gui/file-commands.c
	* app/gui/file-new-dialog.[ch]: changed accordingly.

2001-07-05  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.[ch]: renamed gimp_initialize() to gimp_restore()
	because it loads all kinds of data. Added gimp_shutdown() to save
	the data. Added the global parasite list.

	* app/apptypes.h: removed ParasiteList.

	* app/core/core-types.h: added GimpParasiteList.

	* app/gimpparasite.[ch]: removed the global parasite list.

	* app/parasitelist.[ch]: s/ParasiteList/GimpParasiteList/
	s/parasite_list_*/gimp_patasite_list_*/

	* app/core/gimpdatafactory.c: don't save the data in
	gimp_data_factory_data_free().

	* app/app_procs.c
	* app/gimprc.c
	* app/undo.c
	* app/core/gimpchannel.c
	* app/core/gimpdrawable.[ch]
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage.[ch]
	* app/core/gimplayer.c
	* app/pdb/brushes_cmds.c
	* app/pdb/parasite_cmds.c
	* app/widgets/gimpdatafactoryview.c
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/parasite.pdb: changed accordingly.

2001-07-04  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimp.[ch]: added an "application object" called Gimp.

	Currently, it contains the image list, the clipboard, the data
	factories, the procedural hashtable and the tool info list.  It's
	the toplevel object of the core object system. Finally, creating a
	Gimp object will return a standalone gimp core engine instance
	with no other global states/variables involved.

	* app/app_procs.[ch]: allocate a "Gimp" instance called "the_gimp" :)
	Removed stuff which is now done by the "Gimp" object. Merged
	gimp_init() into app_init() because gimp_init() is taken now.

	* app/context_manager.[ch]: removed stuff done by "Gimp".

	* app/batch.[ch]
	* app/gimage.[ch]
	* app/xcf/xcf-load.[ch]
	* app/xcf/xcf.[ch]
	* app/core/gimpedit.[ch]
	* app/tools/tool_manager.[ch]: pass around an additional "Gimp"
	argument.

	* app/pdb/procedural_db.[ch]: pass a "Gimp" pointer as first
	parameter to all internal procedures and to all procedural_db_*
	functions.

	* app/core/gimpcontext.[ch]
	* app/core/gimpimage.[ch]: added a "Gimp" pointer to the structs.

	* app/devices.c
	* app/errors.c
	* app/file-open.c
	* app/file-save.c
	* app/gimphelp.c
	* app/gimpunit.c
	* app/image_new.c
	* app/main.c
	* app/nav_window.c
	* app/plug_in.c
	* app/base/base.c
	* app/core/gimpdatafactory.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-mask.c
	* app/core/gimptoolinfo.[ch]
	* app/gui/brush-select.c
	* app/gui/convert-dialog.c
	* app/gui/dialogs-constructors.c
	* app/gui/edit-commands.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/gradient-select.c
	* app/gui/gui.c
	* app/gui/image-commands.c
	* app/gui/info-window.c
	* app/gui/menus.c
	* app/gui/palette-editor.c
	* app/gui/palette-import-dialog.c
	* app/gui/palette-select.c
	* app/gui/paths-dialog.c
	* app/gui/pattern-select.c
	* app/gui/preferences-dialog.c
	* app/gui/test-commands.c
	* app/gui/toolbox.c
	* app/gui/tools-commands.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimppainttool.h
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.h
	* app/widgets/gimpbufferview.c
	* app/widgets/gimpcontainerview-utils.c
	* app/widgets/gimpcursor.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpimagedock.c: changed accordingly. Cleaned up
	lots of includes. Many files still access the global "the_gimp"
	variable exported by app_procs.h.

	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly. Don't
	use "the_gimp" here because all procedures get passed a "Gimp"
	pointer now.

	* app/pdb/*: regenerated.

2001-07-04  Dave Neary  <dneary@eircom.net>

	* po/POTFILESin: Changed to reflect some moved/removed files.

2001-07-03  Michael Natterer  <mitch@gimp.org>

	* configure.in: new directory app/xcf/

	* app/Makefile.am
	* app/global_edit.[ch]
	* app/xcf.[ch]: removed.

	* app/core/Makefile.am
	* app/core/gimpedit.[ch]: added here...

	* app/xcf/.cvsignore
	* app/xcf/Makefile.am
	* app/xcf/xcf-load.[ch]
	* app/xcf/xcf-private.h
	* app/xcf/xcf-read.[ch]
	* app/xcf/xcf-save.[ch]
	* app/xcf/xcf-seek.[ch]
	* app/xcf/xcf-write.[ch]
	* app/xcf/xcf.[ch]: ...and here (chopped up).

	* app/app_procs.c
	* app/disp_callbacks.c
	* app/floating_sel.c
	* app/gui/edit-commands.c
	* app/gui/toolbox.c
	* app/pdb/edit_cmds.c
	* app/widgets/gimpbufferview.c
	* tools/pdbgen/pdb/edit.pdb: changed accordingly.

2001-07-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/xwd.c: applied patch from Peter Kirchgessner 
	<peter@kirchgessner.net> that fixes bug #56830.

	* app/global_edit.c: attach default comment to image created by
	gimp_edit_paste_as_new().

	Both changes merged from stable branch.

2001-07-02  Michael Natterer  <mitch@gimp.org>

	* app/global_edit.c: allow a NULL gimage argument for
	gimp_edit_paste_as_new() (don't set resolution and unit).

	* app/disp_callbacks.[ch]
	* app/interface.c: allow dropping of a GimpBuffer (pastes the
	buffer).

	* app/gui/toolbox.c: ditto (creates a new image).

2001-07-02  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* configure.in
	* help/*: removed all help files. They will be distributed as a
	separate package in the future.

2001-07-02  Nick Lamb  <njl195@zepler.org.uk>

        * plug-ins/common/png.c: Change PNG defaults (no 1.0 gamma chunk)

2001-07-02  Sven Neumann  <sven@gimp.org>

	* gimptool-1.4.in
	* plug-ins/*/Makefile.am
	* plug-ins/common/mkgen.pl: merged fixes from stable branch
	
2001-07-02  Michael Natterer  <mitch@gimp.org>

	* app/gui/dialogs-commands.[ch]
	* app/gui/menus.c: added dialogs_toggle_auto_cmd_callback() which
	toggles GimpImageDock's "Auto" button.

	* app/gui/dialogs.c: ref/sink the global dialog factories.

	* app/widgets/gimpdialogfactory.[ch]: added some comments, some
	cleanups and additional checks. Factored out the "aux-info" stuff
	to separate functions.

	* app/widgets/gimpdockbook.c: set the state of the "Auto Follow
	Active Image" menu item.

	* app/widgets/gimpimagedock.[ch]: added a gboolean for
	"show_image_menu" so we don't need to fiddle around with the
	widgets to get this info. Added
	gimp_image_dock_set_auto_follow_active().

2001-07-01  Sven Neumann  <sven@gimp.org>

	* acconfig.h: add HAVE_FINITE and HAVE_ISFINITE 
	(fix from stable branch)

2001-06-29  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: removed GimpFillType.

	* app/gimprc.c: parse the session-info's new "aux-info" field.

	* app/global_edit.[ch]: removed the old "Paste Named" dialog and
	prefixed all functions with "gimp_".

	* app/core/core-types.h: added GimpFillType.

	* app/core/gimpbrush.[ch]: new signal "spacing_changed".

	* app/gui/Makefile.am
	* app/gui/tools-commands.[ch]: one more file cut out of commands.[ch].

	* app/gui/commands.[ch]: removed the tools stuff here.

	* app/gui/brush-select.[ch]
	* app/gui/dialogs-constructors.c: use the new GimpBrushFactoryView
	(see below).

	* app/gui/dialogs-commands.[ch]
	* app/gui/menus.[ch]:

	- Made it 64bit safe again by passing the dialog factory's
	  identifiers as GQuarks, not as guints created by GPOINTER_TO_UINT().
	- Added a "gchar *quark_string" field to GimpItemFactoryEntry
	  which gets transformed into a GQuark by menus_create_item().
	- Added SEPARATOR() and BRANCH() macros which make the *_entries[]
	  arrays more readable.
	- Added a menu item to show/hide GimpImageDock's image menu.
	- Removed file_last_opened_cmd_callback().

	* app/gui/edit-commands.c: the global_edit functions are "gimp_"
	prefixed now.

	* app/gui/file-commands.[ch]: added file_last_opened_cmd_callback()
	here.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpbrushfactoryview.[ch]: new widget: a
	GimpDataFactory subclass with a "spacing" scale.

	* app/widgets/gimpcontainereditor.[ch]:

	- Connect to the GimpContainerView's "select_item",
	  "activate_item" and "context_item" signals here once instead of
	  in each subclass and dispatch them via new virtual functions.
	- Added a convenience function which makes DND to the buttons much
	  less painful for subclasses.

	* app/widgets/gimpbufferview.c
	* app/widgets/gimpdatafactoryview.[ch]: changed accordingly.

	* app/widgets/gimpdialogfactory.[ch]:

	- Added gimp_dialog_factory_dialog_raise() which can raise
	  toplevel dialogs _and_ dockables (and creates them if they are
	  not open yet).
	- Keep track of all created dialogs (not only toplevels).
	- Added an "aux_info" field to GimpSessionInfo which is a GList of
	  gchar* and is saved in sessionrc.
	- Remember if GimpImageDock's image menu is visible by using an
	  aux_info string.
	- The code did not become nicer with all those new constraints. I
	  have to add comments before I forget how it works.

	* app/widgets/gimpdockbook.c: set the state of the "Show Image Menu"
	menu item before popping up the item factory.

	* app/widgets/gimpimagedock.[ch]: added
	gimp_image_dock_set_show_image_meu().

	* plug-ins/gdyntext/gdyntext.c
	* plug-ins/perl/examples/fit-text
	* plug-ins/perl/examples/terral_text
	* plug-ins/perl/examples/tex-to-float: register all text rendering
	plug-ins under <Image>/Filters/Text

	* app/pdb/brush_select_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/enums.pl
	* po/POTFILES.in: changed according to all the stuff above.

2001-06-27  Sven Neumann  <sven@gimp.org>

	* README.i18n: merged changes from stable branch.

2001-06-26  Sven Neumann  <sven@gimp.org>

	* gimptool.1.in
	* app/pdb/image_cmds.c
	* tools/pdbgen/pdb/image.pdb: ported changes from stable branch.

2001-06-26  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/color_transfer.[ch]: removed.

	* app/tools/Makefile.am
	* app/tools/gimpcolorbalancetool-transfer.[ch]: added.

	* app/tools/gimpcolorbalancetool.c: changed accordingly.

	* app/base/Makefile.am
	* app/base/tile-manager-crop.[ch]: formerly known as crop_buffer().

	* app/tools/gimptexttool.c: changed accordingly.

	* app/context_manager.[ch]: added the global clipboard and the
	named buffer list here.

	* app/app_procs.c: don't call color_transfer_init() and don't free
	the buffer stuff (done by the context manager now).

	* app/errorconsole.c: don't #include "gui/commands.h"

	* app/global_edit.[ch]: removed lots of stuff which is now done by
	gui/edit-commands.* or the new GimpBuffer object. The "paste
	named" dialog will go away and this file will be moved to core/
	soon.

	* app/image_new.c: no need to declare the global_buffer extern any
	more.

	* app/qmask.c: don't #include "global_edit.h"

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpbuffer.[ch]: new object (aka named buffer)

	* app/core/gimpcontext.[ch]: added a GimpBuffer attribute.

	* app/core/gimpimage.[ch]: one s/int/gboolean/.

	* app/core/gimppattern.c: hmm...

	* app/gui/commands.[ch]: split up in small files:

	* app/gui/Makefile.am
	* app/gui/edit-commands.[ch]
	* app/gui/file-commands.[ch]
	* app/gui/image-commands.[ch]
	* app/gui/select-commands.[ch]
	* app/gui/view-commands.[ch]: new files.

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c: added the named buffer list & grid.

	* app/gui/file-new-dialog.[ch]
	* app/gui/menus.c
	* app/gui/palette-editor.c
	* app/gui/test-commands.c: changed accordingly.

	* app/pdb/edit_cmds.c
	* tools/pdbgen/pdb/edit.pdb: changed for the global_edit stuff.

	* app/widgets/Makefile.am
	* app/widgets/gimpbufferpreview.[ch]
	* app/widgets/gimpbufferview.[ch]
	* app/widgets/gimpcontainereditor.[ch]: new widgets.

	* app/widgets/gimpcontainerview-utils.c
	* app/widgets/gimpdatafactoryview.[ch]
	* app/widgets/gimpdnd.[ch]
	* app/widgets/gimpdrawablepreview.c
	* app/widgets/gimplayerlistview.c
	* app/widgets/gimppreview.c
	* app/widgets/widgets-types.h: changed accordingly for the new
	GimpBuffer object and it's views, misc. cleanups.

	* pixmaps/Makefile.am
	* pixmaps/paste-as-new.xpm
	* pixmaps/paste-into.xpm
	* pixmaps/paste.xpm: new pixmaps (they all look the same... Tigert? ;-)

	* po/POTFILES.in: added the new files.

2001-06-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/burn-in-anim.scm: added Burn-In script
	written by Roland Berger <roland@fuchur.leute.server.de>.

2001-06-22  Sven Neumann  <sven@gimp.org>

	* libgimpmath/gimpmath.h: do not include math.h conditionally.
	
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c: ported fix for bug #50715 from
	stable branch.

2001-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/gdyntext/ChangeLog
	* plug-ins/gdyntext/gdyntext.[ch]: ported changes from stable branch,
	updating GDynText to version 1.5.4.

2001-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/Lighting/lighting_apply.c
	* plug-ins/common/papertile.c
	* plug-ins/common/vinvert.c
	* plug-ins/script-fu/scripts/textured-logo.scm: merged changes from
	stable branch that mark some leftover strings for translation.

2001-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/ps.c: applied fix for #51403.
	* plug-ins/flame/flame.c: applied fix for #37761.
	* plug-ins/script-fu/script-fu-console.c: applied fix for #50522.

	All fixes taken from the stable branch.

	* app/gui/file-open-dialog: ported fix for #51722 from stable branch.

2001-06-20  Michael Natterer  <mitch@gimp.org>

	* app/gdisplay.c: same gdisplays_update_full() fix as in the
	stable branch. Removed lots of commented out code and comments
	about whether the code should be commented out or not.

	* app/core/gimpimage-mask.c: tried to fix it here first an ended
	up with a little cleanup.

2001-06-20  David Neary  <dneary@eircom.net>

	* configure.in
	* libgimp/gimpmath.h: Imported fix from bug #51822 into 1.3
	branch. Fix is courtesy of <bugzilla-gnome@thewrittenword.com>.
	
2001-06-18  Austin Donnelly  <austin@gimp.org>

	* plug-ins/common/newsprint.c: Fix from
	    <warner-gnome.bugzilla@lothar.com> for problem with GREYA
	    images: it was using the settings from the RGB colourspace
	    due to testing bpp != 1 rather than colour_bpp != 1
	    (colour_bpp has alpha taken out of it).  Fixes Bug#52981.
	    Sven committed the same fix to 1.2 CVS.  This also bumps the
	    version number to 0.60 to reflect this fixed bug.

2001-06-18  Michael Natterer  <mitch@gimp.org>

	* app/nav_window.[ch]: major cleanup. After being finished, I
	decided that it needs to be factored out to a widget (see below),
	so like 90% of this file will go away soon.

	* app/apptypes.h: added opaque NavigationDialog typedef.

	* app/gdisplay.[ch]: Added gdisplay_selection_visibility() which
	is called from gdisplays_selection_visibility(). Capitalized the
	SelectionControl enum values. Cleaned up the GDisplay struct and
	it's initialisation while i was on it.

	* app/gimage.c: gimage_size_changed_handler(): removed stuff which
	is now done by GimpImage itself.

	* app/scale.c
	* app/scroll.c: also update the navigation popup, not only the
	dialog.

	* app/selection.[ch]: major indentation & cleanup attack. Maybe
	found the "Selection vanishes" bug (the timeout id was assinged to
	a gint, not a _guint_).

	* app/undo.c: s/gimp_image_size_changed/gimp_viweable_size_changed/

	* app/core/gimpdrawable.c: invalidate the image's preview from our
	"invalidate_preview" implementation. This means that the image's
	preview is invalidated way too often currently, which cries for
	some general freeze/thaw mechanism on the GimpViewable level.
	(Note that previews are rendered in the idle loop, so this is not
	really a major performance impact, it's just ugly).

	* app/core/gimpimage.[ch]: removed the "size_changed" signal...

	* app/core/gimpviewable.[ch]: ...and added it here.

	* app/core/gimplayer.c: invalidate_preview(): always chain up,
	also if it's a floating selection.

	* app/gui/info-dialog.[ch]
	* app/gui/info-window.c: minor cleanups.

	* app/gui/preferences-dialog.c: no need to invalidate the image
	after we have invalidated all it's layers.

	* app/core/gimpimage-mask.c
	* app/gui/commands.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c: capitalized the SelectionCommand enum
	values.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpnavigationpreview.[ch]: new widget.

	* app/widgets/gimppreview.[ch]: added a non-working
	non-dot-for-dot mode. Added xres/yres params to the
	gimp_preview_calc_size() helper function.

	Cache the "size" value which was passed to the simple function
	variants (gimp_preview_new() and gimp_preview_set_size()) so we
	can re-calculate the preview's extents on the underlying
	viewable's "size_changed" signal and on gimp_preview_set_viewable().

	* app/widgets/gimpdrawablepreview.c
	* app/widgets/gimpimagepreview.c: changed accordingly.

2001-06-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig.c
	* plug-ins/script-fu/scripts/land.scm: merged fixes from gimp-1-2.

2001-06-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/perl/Gimp/Lib.xs: forgot to s/id/drawable_id/ here.

2001-06-15  Austin Donnelly  <austin@gimp.org>

	* app/gdisplay.c: initialise gdisp->cursor_x and gdisp->cursor_y
	    to 0 in gdisplay_new() so that we don't get floating point
	    exceptions when attempting to translate to screen co-ords in
	    gdisplay_update_cursor().  Fixes critical Bug #56237.

2001-06-14  Michael Natterer  <mitch@gimp.org>

	* app/gdisplay.c: fixed a FIXME: set the sensitivity of the
	color tools' menu entries again.

	* libgimp/gimpcolorselector.h
	* libgimp/gimpdrawable.h
	* libgimp/gimpmenu.h: removed the usage of "id" from the public
	interface because it's a reserved keyword of Objective C.

	* libgimp/gimpdrawable.c
	* libgimp/gimptile.c

	* plug-ins/[lotsa plugins].c: changed accordingly.

2001-06-14  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpmeasuretool.c: fixed typo, closes bug #56200.

2001-06-14  Sven Neumann  <sven@gimp.org>

	* app/disp_callbacks.c
	* app/gdisplay.c
	* app/gui/info-window.[ch]: 
	applied a patch from Ralf Engels <ralf-engels@gmx.de> that adds info
	about the cursor position to the Info window. Cleaned up the code a
	little while I was on it and renamed info_window_update_RGB() to
	info_window_update_extended().

2001-06-14  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage.c: fixed typo, closes bug #56193.

2001-06-12  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpdrawable.h: removed one more
	gimp_channel_ops_duplicate #define.

	* plug-ins/gap/gap_mov_dialog.c
	* plug-ins/gap/gap_mov_exec.c
	* plug-ins/gap/gap_pdb_calls.[ch]: removed a handmade PDB wrapper
	and use gimp_image_duplicate().

2001-06-12  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/3d-outline.scm
	* plug-ins/script-fu/scripts/add-bevel.scm
	* plug-ins/script-fu/scripts/blend-anim.scm
	* plug-ins/script-fu/scripts/fuzzyborder.scm
	* plug-ins/script-fu/scripts/image-structure.scm
	* plug-ins/script-fu/scripts/old_photo.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm
	* plug-ins/script-fu/scripts/round-corners.scm
	* plug-ins/script-fu/scripts/slide.scm
	* plug-ins/script-fu/scripts/spinning_globe.scm
	* plug-ins/script-fu/scripts/swirltile.scm
	* plug-ins/script-fu/scripts/waves-anim.scm
	* plug-ins/script-fu/scripts/weave.scm: follow API cleanup:

	s/gimp-channel-ops-duplicate/gimp-image-duplicate/
	s/gimp-channel-ops-offset/gimp-drawable-offset/

2001-06-08  Michael Natterer  <mitch@gimp.org>

	* configure.in: don't build devel-docs/pdb/Makefile.am

2001-06-07  Michael Natterer  <mitch@gimp.org>

	* configure.in: added zh_TW.Big5 to ALL_LINGUAS. Added the
	STRIP_BEGIN and STRIP_END macros from gtk+.

	* app/base/makefile.msc: unmodified copy of app/core/makefile.msc
	(just to make "make dist" work).

	* */Makefile.am: use @STRIP_BEGIN@ and @STRIP_END@ all over the
	place. The Makefiles are a bit uglier now but it makes compiling
	output much more readable.

2001-06-06  Adam D. Moss  <adam@gimp.org>

	* tools/pdbgen/pdb/image.pdb: gimp_image_list(),
	gimp_image_get_layers() and gimp_image_get_channels() via
	pdb were eventually crashing due to prepending to an
	uninitialised GList*...

2001-06-06  Dave Neary  <dneary@eircom.net>

	* plug-ins/gap/gap_lib.c
	* plug-ins/gap/gap_dbbrowser_utils.[ch]: Made a couple of small
	changes to remove warnings (including string.h, and moving header
	includes from .h file to .c file).
	
2001-06-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/base/Makefile.am
	* app/core/Makefile.am
	* app/gui/Makefile.am
	* app/paint-funcs/Makefile.am
	* app/pdb/Makefile.am
	* app/tools/Makefile.am
	* app/widgets/Makefile.am: no need to build .la objects for
	convenience libraries which are never linked into another dynamic
	library. Create simple .a files instead. Reduces compilation time
	of app/ by about 50%.

2001-06-05  Dave Neary  <dneary@eircom.net>

	* po/POTFILES.in: Changed one line to satisfy dependencies
	
2001-06-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/authors.h: removed.

	* app/gui/Makefile.am
	* app/gui/authors.h: added.

	* tools/authorsgen/authorsgen.pl: generate it in the new place.

	* app/gui/about-dialog.c
	* app/gui/commands.c
	* app/interface.c: don't #include "gimphelp.h"

2001-06-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/resize.[ch]: removed.

	* app/gui/Makefile.am
	* app/gui/resize-dialog.[ch]: added.

	* app/gui/commands.c
	* app/gui/layers-commands.c: changed accordingly.

2001-06-05  Michael Natterer  <mitch@gimp.org>

	* app/global_edit.c: some s/0/FALSE/

	* app/resize.[ch]: removed resize_scale_implement() and
	resize_check_layer_scaling(), cleanup.

	* app/core/gimpimage.[ch]: added gimp_image_check_scaling().

	* app/gui/commands.c: added image_scale_implement() as static
	function.

	* app/gui/tool-options-dialog.[ch]: add the tool options widgets
	to the dialog when they are first needed. Removed
	tool_options_dialog_add().

	* app/tools/tool_manager.c: don't call tool_options_dialog_add().

2001-06-03  Dave Neary  <dneary@eircom.net>

	* app/gimprc.[ch]: Made all the global options members of one
	struct, gimprc.

	* app/app_procs.c
	* app/colormaps.c
	* app/context_manager.c
	* app/devices.c
	* app/disp_callbacks.c
	* app/file-save.c
	* app/gdisplay.c
	* app/gdisplay.h
	* app/gdisplay_ops.c
	* app/gimphelp.c
	* app/image_new.c
	* app/interface.c
	* app/module_db.c
	* app/nav_window.c
	* app/plug_in.c
	* app/resize.c
	* app/scale.c
	* app/selection.c
	* app/undo.c
	* app/undo_history.c
	* app/user_install.c
	* app/xcf.c

	* app/core/gimpcontext.c
	* app/core/gimpimage.c
	* app/core/gimpundo.c

	* app/gui/brush-select.c
	* app/gui/commands.c
	* app/gui/file-new-dialog.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/gui.c
	* app/gui/layer-select.c
	* app/gui/menus.c
	* app/gui/paths-dialog.c
	* app/gui/preferences-dialog.c
	* app/gui/session.c
	* app/gui/tips-dialog.c
	* app/gui/toolbox.c

	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimppainttool.c
	* app/tools/paint_options.c
	* app/tools/selection_options.c

	* app/widgets/gimpdrawablelistview.c

	* tools/pdbgen/pdb/gimprc.pdb
	* app/pdb/gimprc_cmds.c: Changed accordingly.
	
2001-06-01  Dave Neary  <dneary@eircom.net>

	* app/tools/gimpbycolorselecttool.c: added a call to
        by_color_select_close_callback() in _tool_destroy() to close 
        the dialog on exiting the tool.

2001-05-31  Dave Neary  <dneary@eircom.net>

	* app/core/gimpimage.[ch]
	* app/core/gimpimage-mask.c
	* app/tools/gimpbycolorselecttool.c
	* app/undo.c: Added a "mask_changed" signal, to allow
	gimpbycolorselect to update it's dialog properly, and take out a
	silly dependency in gimpimage.

	One outstanding issue is that now the dialog doesn't close
	automatically when the tool context changes. Working on it :)
	
2001-05-30  Michael Natterer  <mitch@gimp.org>

	* app/base/Makefile.am
	* app/core/Makefile.am
	* app/gui/Makefile.am
	* app/paint-funcs/Makefile.am: added makefile.msc to EXTRA_DIST.

	* app/core/gimpimage.c: don't try to create previews with width or
	height < 1.

	* app/gui/color-notebook.c: Major (??) dialog repacking. Don't
	show an action_area for the main color selection (it's now about
	half the size of the 1.2 one).

	* libgimp/gimpcolorselector.h: define some gui size constants
	here.

	* app/gui/color-select.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: use the constants and removed the
	spacing around the main container.

	* libgimpwidgets/gimpcolorarea.[ch]: rendering in the idle loop
	fixes a race condition when accessing widget->window during widget
	resizing.

	* modules/Makefile.am: disabled the "GTK" color notebook page (we
	will put the GtkHSV widget of gtk+ 2.0 here).

2001-05-29  Simon Budig  <simon@gimp.org>

	* po/POTFILES.in: Added app/tools/gimpposterizetool.c
        which replaces posterize.c. Is it complete now?  :-)
	
2001-05-28  Dave Neary   <dneary@eircom.net>

	* po/POTFILES.in: Changed one filename to (finally) fix
        the build - sorry I missed this yesterday :)
	
2001-05-27  Dave Neary   <dneary@eircom.net>

	* po/POTFILES.in: Removed posterize.c to fix build
	
2001-05-25  Hans Breuer  <hans@breuer.org>

	* app/*/makefile.msc : almost completely autogenerated 
	all new makefiles (it simply was too much work to do
	this manually)

	* app/core/makefile.msc :
	* app/gui/makefile.msc :
	* app/paint-funcs/makefile.msc : new files
 
	* app/base/base.c : include <io.h> for unlink

	* libgimp*/makefile.msc :
	* libgimp*/*.def : adapted or regenerated

	* libgimp/gimpcolorselctor.h : include gmodule.h to avoid
	different declarations in different context.

	* libgimp/proceduraldb.c : string.h for memcmp

	* libgimpwidgets/libgimp-glue.c : include gimpbasetypes.h before
	gimpunits.h

	* plug-ins/common/animoptimize.c : added nops after
	labels. At least the msvc compiler doesn't compile it otherwise

	* plug-ins/twain/twain.c : added main() to allow to build 
	as console app

2001-05-25  Michael Natterer  <mitch@gimp.org>

	* app/base/pixel-processor.c: fixing a typo fixes ENABLE_MP.

	* app/core/gimpdrawable-histogram.c
	* app/core/gimpimage-colorhash.c
	* app/core/gimptoolinfo.c: fixed some #includes.

	* libgimpwidgets/gimpfileselection.[ch]
	* libgimpwidgets/gimpwidgetstypes.h: moved the opaque typedef to
	gimpwidgetstypes.h

	* po/POTFILES.in: reflect app/'s state again.

2001-05-25  Michael Natterer  <mitch@gimp.org>

	* configure.in: new directory devel-docs/libgimpbase/

2001-05-25  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/scan_convert.[ch]: removed.

	* app/core/Makefile.am
	* app/core/gimpscanconvert.[ch]: added. Changed all function names
	and use GimpVector2 instead of ScanConvertPoint.

	* app/base/base-types.h: removed ScanConvertPoint (didn't belong
	here anyway).

	* app/pdb/tools_cmds.c
	* app/tools/gimpfreeselecttool.[ch]
	* app/tools/gimpiscissorstool.c
	* tools/pdbgen/pdb/tools.pdb: changed accordingly.

2001-05-25  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.[ch]: removed "num_processors".

	* app/base/base-config.[ch]: and added it here.

	* app/base/gimphistogram.c
	* app/base/pixel-processor.c
	* app/gui/preferences-dialog.c: changed accordingly.

2001-05-25  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpui.[ch]: removed.

	* app/tools/paint_options.[ch]: removed paint_mode_menu_new().

	* app/widgets/Makefile.am
	* app/widgets/gimpwidgets-constructors.[ch]
	* app/widgets/gimpwidgets-utils.[ch]: added here.

	* app/disp_callbacks.c
	* app/errors.c
	* app/gimphelp.c
	* app/interface.c
	* app/gui/brush-select.c
	* app/gui/channels-commands.c
	* app/gui/commands.c
	* app/gui/file-dialog-utils.c
	* app/gui/file-open-dialog.c
	* app/gui/file-save-dialog.c
	* app/gui/layers-commands.c
	* app/gui/tool-options-dialog.c
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimphistogramtool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformtool.c
	* app/tools/tool_manager.c
	* app/widgets/gimplayerlistview.c: changed accordingly.

2001-05-25  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/tool_options_dialog.[ch]: removed.
	* app/tools/tools.h: new file

	* app/gui/Makefile.am
	* app/gui/tool-options-dialog.[ch]: added.

	* app/tools/tools.c: renamed register_tools() to tools_init(), new
	function tools_exit().

	* app/app_procs.c
	* app/context_manager.c
	* app/tools/tool_manager.c
	* app/gui/dialogs-constructors.c
	* app/gui/gui.c: changed accordingly.

2001-05-25  Michael Natterer  <mitch@gimp.org>

	All tools are back :)

	* app/tools/Makefile.am
	* app/tools/brightness_contrast.[ch]
	* app/tools/color_balance.[ch]
	* app/tools/curves.[ch]
	* app/tools/histogram_tool.[ch]
	* app/tools/hue_saturation.[ch]
	* app/tools/levels.[ch]
	* app/tools/posterize.[ch]
	* app/tools/threshold.[ch]: removed...

	* app/tools/gimpbrightnesscontrasttool.[ch]
	* app/tools/gimpcolorbalancetool.[ch]
	* app/tools/gimpcurvestool.[ch]
	* app/tools/gimphistogramtool.[ch]
	* app/tools/gimphuesaturationtool.[ch]
	* app/tools/gimplevelstool.[ch]
	* app/tools/gimpposterizetool.[ch]
	* app/tools/gimpthresholdtool.[ch]: ...and ported to the new tool
	system. Yes, the toolbox looks strange right now.

	* app/tools/gimpimagemaptool.[ch]: base class for all image_map
	tools. Does nothing at all right now.

	* app/tools/gimpbucketfilltool.h: removed _new() function
	declaration.

	* app/tools/gimptool.c: removed obsolete stuff and STUB()s.

	* app/tools/tools.c: register the new tools.

	* app/menus.c: removed the #if 0 around the code which reorders
	the color tool menu entries.

	* app/app_procs.c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/color.pdb
	* app/pdb/color_cmds.c
	* po/POTFILES.in: changed accordingly.

2001-05-24  Michael Natterer  <mitch@gimp.org>

	* config.guess
	* config.sub: new versions from CVS (at least that's what my
	debian package says...)

	* app/Makefile.am
	* app/gimppreviewcache.[ch]: removed.

	* app/core/Makefile.am
	* app/core/gimppreviewcache.c: added.

	* app/core/gimpdrawable.c: reordered #includes

	* app/apptypes.h: make ImageMap a proper opaque typedef, not
	simply a gpointer.

	* app/image_map.[ch]: changed accordingly. cleanup.

	* app/tools/color_balance.h
	* app/tools/curves.h
	* app/tools/histogram_tool.h
	* app/tools/hue_saturation.h
	* app/tools/threshold.h: changed here too.

	* app/tools/gimptool.c: removed old by_color_select stuff.

	* libgimpbase/gimpbasetypes.h: /*< skip >*/ GIMP_UNIT_PERCENT as
	it's a UI convenience thing and no unit.

	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimpwidgets/gimpbutton.c: maybe this change makes GimpButton
	behave even more careful when changing GtkButton's private stuff.

2001-05-23  Michael Natterer  <mitch@gimp.org>

	* app/gimphistogram.[ch]
	* app/lut_funcs.[ch]: removed.

	* app/base/gimphistogram.[ch]
	* app/base/lut-funcs.[ch]
	* app/core/gimpdrawable-histogram.[ch]: added, cleanup.

	* app/Makefile.am
	* app/appenums.h
	* app/apptypes.h
	* app/base/Makefile.am
	* app/base/base-types.h
	* app/core/Makefile.am
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-equalize.c
	* app/core/gimpdrawable-invert.c
	* app/pdb/color_cmds.c
	* app/widgets/gimphistogramview.c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/color.pdb: changed accordingly.

2001-05-22  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/resolution_calibrate.[ch]: removed

	* app/gui/Makefile.am
	* app/gui/resolution-calibrate-dialog.[ch]: added

	* app/user_install.c
	* app/gui/preferences-dialog.c
	* po/POTFILES.in: changed accordingly.

	* app/core/gimplayer.c: irrelevant doc reformating.

2001-05-22  Sven Neumann  <sven@gimp.org>

	* app/module_db.c: ported bugfix for #55050 from stable branch.

2001-05-22  Michael Natterer  <mitch@gimp.org>

	* libgimp/.cvsignore
	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimpfeatures.h.in: removed gimpfeatures.h

	* libgimpbase/.cvsignore
	* libgimpbase/Makefile.am
	* libgimpbase/gimpbase.h
	* libgimpbase/gimpbasetypes.h
	* libgimpbase/gimpversion.h.in: and added it as gimpversion.h

	* configure.in: changed accordingly.

	* app/app_procs.c
	* app/main.c
	* app/gui/about-dialog.c
	* app/gui/splash.c
	* app/pdb/misc_cmds.c
	* tools/pdbgen/pdb/misc.pdb: fixed includes.

	* plug-ins/bmp/bmpread.c
	* plug-ins/bmp/bmpwrite.c
	* plug-ins/common/gif.c
	* plug-ins/common/gifload.c
	* plug-ins/common/jpeg.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/ps.c
	* plug-ins/common/tiff.c
	* plug-ins/gdyntext/gdyntextcompat.h
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/perl/Gimp.xs
	* plug-ins/perl/Gimp/Lib.xs
	* plug-ins/pygimp/gimpmodule.c
	* tools/gimp-remote.c: removed all #ifdef GIMP_HAVE_BLAH
	conditionals as they are broken anyway since we changed all
	plug-ins with perl scripts shortly before 1.2. Also, refering to
	intermediate unstable releases is evil.

2001-05-21  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c
	* app/datafiles.c
	* app/devices.c
	* app/docindex.c
	* app/gdisplay_color.c
	* app/gdisplay_color_ui.c
	* app/gimphelp.c
	* app/main.c
	* app/module_db.c
	* app/plug_in.c
	* app/resize.c
	* app/resolution_calibrate.c
	* app/undo_history.c
	* app/user_install.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpdata.c
	* app/core/gimpgradient.c
	* app/core/gimppalette.c
	* app/gui/about-dialog.c
	* app/gui/file-new-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/layers-commands.c
	* app/gui/menus.c
	* app/gui/palette-editor.c
	* app/gui/session.c
	* app/gui/splash.c
	* app/gui/tips-dialog.c
	* app/pdb/image_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/tools/curves.c
	* app/tools/gimptexttool.c
	* app/tools/levels.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimppreview.c
	* libgimp/gimpcolordisplay.h
	* libgimpbase/gimpbase.h
	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/libgimp-glue.c
	* plug-ins/common/gih.c
	* plug-ins/common/psp.c
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/text_tool.pdb: last checkin didn't get all
	#include "libgimp/i_dont_exist_any_more.h". This one should make
	it compile again without old crap hanging around in <prefix>/include.

2001-05-21  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimp.def: removed removed symbols :)

	* libgimpbase/gimpbase.def
	* libgimpbase/makefile.mingw.in
	* libgimpbase/makefile.msc: added because they are in EXTRA_DIST.
	Will definitely not work before a friendly visit by Tor or Hans.

2001-05-21  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* configure.in
	* gimptool-1.4.in: added new directory libgimpbase/

	* app/Makefile.am: link against the new lib.

	* app/appenums.h: removed the PDB enums which are in
	libgimpbase/gimpbasetypes.h now. They are all "Gimp" prefixed.

	* app/apptypes.h: #include "libgimpbase/gimpbasetypes.h"

	* app/[lots]
	* app/core/[of]
	* app/gui/[files]
	* app/tools/: changed includes and all PDB types.

	* app/pdb/*: regenerated.

	* libgimp/Makefile.am: don't build libgimpi.a uglyness any more.

	* libgimp/gimpenv.[ch]
	* libgimp/gimplimits.[hh]
	* libgimp/gimpparasite.[ch]
	* libgimp/gimpparasiteio.[ch]
	* libgimp/gimpprotocol.[ch]
	* libgimp/gimpsignal.[ch]
	* libgimp/gimpunit.h
	* libgimp/gimputils.[ch]
	* libgimp/gimpwire.[ch]: removed...

	* libgimpbase/*: ...and added here as new library.

	* libgimp/gimp.[ch]
	* libgimp/gimpdrawable.[ch]
	* libgimp/gimpenums.h
	* libgimp/gimpimage.[ch]
	* libgimp/gimptile.c
	* libgimp/gimptypes.h
	* libgimp/gimpunit.c: changed accordingly. Added the
	gimp_*_add_new_parasite to gimp.[ch], gimpdrawable.[ch] and
	gimpimage.[ch].

	* libgimpwidgets/gimppatheditor.c
	* libgimpwidgets/gimpquerybox.c
	* libgimpwidgets/gimpsizeentry.c
	* libgimpwidgets/gimpunitmenu.c
	* libgimpwidgets/gimpwidgets.c
	* libgimpwidgets/gimpwidgetstypes.h: changed includes accordingly.

	* plug-ins/*/Makefile.am
	* plug-ins/common/mkgen.pl: link against libgimpbase.

	* tools/pdbgen/Makefile.am: scan libgimpbase/gimpbasetypes.h, so
	the enums are known to pdbgen...

	* tools/pdbgen/enumcode.pl: ...but don't write them out to
	libgimp/gimpenums.h

	* tools/pdbgen/app.pl: include libgimp/gimpbase.h in all *_cmds.c
	files. Added GIMP_ to the type names ganerated in app/.

	* tools/pdbgen/enums.pl: regenerated.

	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/unit.pdb: changed includes.

Mon May 21 04:08:29 CEST 2001  Marc Lehmann <pcg@goof.com>

	* autogen.sh: allow for automake 1.4-p1 and similar version numbers.

2001-05-20  Michael Natterer  <mitch@gimp.org>

	* app/base/Makefile.am
	* app/base/base.[ch]: new files for base_init() and base_exit()
	which initialize/shutdown the paint_funcs and the tile_cache.

	* app/app_procs.c: removed the stuff here.

	* app/widgets/gimpchannellistitem.c: commented out unused code.

2001-05-20  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* plug-ins/script-fu/Makefile.am: put the regex and MMX sources to
	EXTRA_DIST so they get distributed unconditionally.

	* tools/pdbgen/pdb/layer.pdb: re-enabled the layer_mask procs but
	let them use accessors (which don't exist)...

	* app/pdb/pdb_glue.h: ... #define the accessors as macros here.

	Yes, this is ugly, but I simply don't fully understand pdbgen
	yoshcode.

	* app/pdb/internal_procs.c
	* app/pdb/layer_cmds.c
	* libgimp/gimplayer_pdb.[ch]: regenerated with the layer_mask
	accessors.

	* app/tools/Makefile.am: add the files which are not built to
	EXTRA_DIST.

	* pixmaps/Makefile.am
	* pixmaps/channel.xbm
	* pixmaps/eye.xbm
	* pixmaps/layer.xbm
	* pixmaps/linked.xbm
	* pixmaps/mask.xbm: removed.

	* plug-ins/Makefile.am: build XJT again because the layer_mask
	stuff is back. Perl also seems to build again.

	* plug-ins/common/aa.c: explicit casting fixes some warnings.

	* plug-ins/script-fu/interp_regex.c: #include "config.h".

2001-05-19  Sven Neumann  <sven@gimp.org>

	* app/main.c: s/USE_GCC_INTEL_MMX/HAVE_ASM_MMX/
	
	* app/path_curves.c: fixed some warnings and changed code so it
	does not try to draw unconfigured points.
	
	* app/base/temp-buf.[ch]: added a warning not to use the data field
	from the TempBuf struct directly.

2001-05-18  Michael Natterer  <mitch@gimp.org>

	* app/gui/menus.c: use the correct callback for opening L&C.

	* app/widgets/gimpdock.c: set the window title, the WM-name/class
	and the icon.

2001-05-16  Michael Natterer  <mitch@gimp.org>

	* app/general.[ch]: removed search_in_path() and the unused
	xstrsep().

	* app/plug_in.c: added plug_in_search_in_path(), don't include
	"general.h".

	* app/gimprc.c
	* app/image_render.c
	* app/gui/convert-dialog.c
	* app/gui/palette-editor.c
	* app/gui/paths-dialog.c
	* app/pdb/paths_cmds.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimptexttool.c
	* tools/pdbgen/pdb/paths.pdb: removed useless includes.

2001-05-15  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontextpreview.[ch]: removed (was not used).

	* app/apptypes.h: removed the Guide typedef.

	* app/core/core-types.h: added it here as GimpGuide (everything in
	core/ must be "Gimp"-prefixed).

	* app/gimage.[ch]: removed the global "next_guide_id" variable,
	don't destroy the guides in the "destroy" handler.

	* app/core/gimpimage.[ch]: destroy them in destroy().

	* app/xcf.c: use GimpImage accessors to add the guides, so we
	don't need "next_guide_id".

	* app/gdisplay.[ch]
	* app/undo.c
	* app/core/gimpimage-duplicate.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.[ch]
	* app/pdb/guides_cmds.c
	* tools/pdbgen/pdb/guides.pdb: s/Guide/GimpGuide/, cleanup.

2001-05-15  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/fsdither.h: removed...

	* app/core/Makefile.am
	* app/core/gimpimage-convert-fsdither.h: ...and added here.

	* app/core/gimpimage-convert.c: changed accordingly.

2001-05-15  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.c: register all parse functions in a hash table
	instead of a static array. This way, with some additional ugly
	hacking, we get the addresses of the variables in
	base/base-config.c registered. The whole config stuff has to be
	done properly at some point.

2001-05-15  Michael Natterer  <mitch@gimp.org>

	* configure.in: new directory app/base/

	* app/Makefile.am
	* app/boundary.[ch]
	* app/brush_scale.[ch]
	* app/gimpchecks.h
	* app/gimplut.[ch]
	* app/pixel_processor.[ch]
	* app/pixel_region.[ch]
	* app/pixel_surround.[ch]
	* app/temp_buf.[ch]
	* app/tile.[ch]
	* app/tile_cache.[ch]
	* app/tile_manager.[ch]
	* app/tile_manager_pvt.h
	* app/tile_pvt.h
	* app/tile_swap.[ch]: moved to base/

	* app/base/Makefile.am
	* app/base/base-types.h
	* app/base/*: new directory for the sub-object pixel maniplation
	and storage stuff. Does not include Gtk+ or anything outside
	base/. Did some cleanup in all files.

	* app/appenums.h
	* app/apptypes.h
	* app/core/gimpimage.h: removed types which are now in
	base/base-types.h.

	* app/base/base-config.[ch]
	* app/gimprc.[ch]: put the config variables for base/ to their own
	file so base/ doesn not have to include gimprc.h (does not yet
	work, i.e. the variables are un-configurable right now)

	* app/main.c: set a log handler for "Gimp-Base".

	* app/paint-funcs/Makefile.am
	* app/paint-funcs/paint-funcs.[ch]: removed the color hash which
	maps RGB to color indices because it's a totally standalone system
	which has nothing to do with the paint-funcs and introduced a
	GimpImage dependency.

	paint-funcs/ should be considered on the same sub-object
	(glib-only) level as base/, only in a different directory.

	* app/core/Makefile.am
	* app/core/gimpimage-colorhash.[ch]: put the color hash here.

	* app/gimage.c: don't invalidate the color hash here...

	* app/core/gimpimage.c: ... but in the colormap_changed() default
	inplementation. Initialize the hash in class_init().

	* tools/pdbgen/Makefile.am: scan app/base/base-types.h for enums.

	* tools/pdbgen/enums.pl: regenerated.

	* app/[lots]
	* app/core/[of]
	* app/gui/[files]
	* app/pdb/[all]
	* app/tools/[over]
	* app/widgets/[the]
	* tools/pdbgen/pdb/[place]: changed #includes accordingly. And use
	base_config->value instead of the stuff from gimprc.h.

2001-05-14  Michael Natterer  <mitch@gimp.org>

	* README.patch_xinput_airbrush
	* patch_xinput_airbrush: removed because GTK+-2.0 will manage the
	number of valuators dynamically.

	* app/Makefile.am: some more thinking about subdirectories.

	* app/boundary.c
	* app/pixel_processor.c
	* app/pixel_region.c: removed #include's, code cleanup.

	* libgimpwidgets/Makefile.am: install gimpbutton.h

	* devel-docs/libgimp/tmpl/gimpadaptivesupersample.sgml
	* devel-docs/libgimp/tmpl/gimpbilinear.sgml: removed ...

	* devel-docs/libgimpcolor/tmpl/gimpadaptivesupersample.sgml
	* devel-docs/libgimpcolor/tmpl/gimpbilinear.sgml: ... and added here.

	* devel-docs/libgimp/libgimp-decl.txt
	* devel-docs/libgimp/libgimp-sections.txt
	* devel-docs/libgimp/libgimp.hierarchy
	* devel-docs/libgimp/tmpl/gimpenums.sgml
	* devel-docs/libgimpcolor/libgimpcolor-decl.txt
	* devel-docs/libgimpcolor/libgimpcolor-docs.sgml
	* devel-docs/libgimpcolor/libgimpcolor-sections.txt
	* devel-docs/libgimpcolor/libgimpcolor.hierarchy
	* devel-docs/libgimpcolor/tmpl/gimpcolortypes.sgml: regenerated.

2001-05-14  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am
	* libgimp/Makefile.am: don't reference header files which don't exist
	any longer

2001-05-14  Sven Neumann  <sven@gimp.org>

	* app/ops_buttons.[ch]: use GimpButton and connect to extended_clicked.
	
	* app/docindex.c
	* app/gui/paths-dialog.c: changed accordingly.

2001-05-14  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am
	* app/pixmaps2.h: removed this file ...

	* app/tools/Makefile.am
	* app/tools/icons.h: ... and readded it here with some changes.

	* app/tools/*.c: include the new icons.h file

	* app/pdb/procedural_db.[ch]: declare name as const

2001-05-13  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/cursorutil.[ch]: removed. Stuff now lives in app_procs.[ch]
	and in widgets/gimpcursor.[ch]

	* app/appenv.h: added the "gimp_busy" boolean.

	* app/app_procs.[ch]: added the "busy" stuff here.

	* app/gui/gui.[ch]: "busy" stuff for the gui.

	* app/widgets/Makefile.am
	* app/widgets/gimpcursor.[ch]: exports only one function:
	gimp_cursor_new() which returns a GdkCursor which has to be
	destroyed.

	* app/apptypes.h
	* app/appenums.h: removed the cursor types.
	* app/widgets/widgets-types.h: added here.

	* app/tools/gimpeditselectiontool.[ch]: added
	gtkutil_compress_motion() here (will go to some utils file in
	widgets/).

	* app/tools/tools-types.h: #include "widgets/widgets-types.h"

	* app/dialog_handler.c
	* app/disp_callbacks.c
	* app/gdisplay.[ch]
	* app/nav_window.c
	* app/scroll.c
	* app/xcf.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage.c
	* app/gui/file-open-dialog.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimptransformtool.c
	* tools/pdbgen/pdb/image.pdb
	* app/pdb/image_cmds.c: use the new cursor and "busy" functions.

	* app/gdisplay.h
	* app/core/gimpbrush.c: added some ugly cross-includes.

	* app/context_manager.c
	* app/gdisplay_ops.c
	* app/gimprc.c
	* app/core/gimpdrawable-offset.c
	* app/gui/file-save-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/preferences-dialog.c
	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpselectiontool.c: removed inclusion of "cursorutil.h"

2001-05-13  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h
	* app/core/core-types.h
	* app/tools/tools-types.h: moved some more types to core-types.h
	and tools-types.h.  Removed AUXILLARY_CHANNEL from the ChannelType
	enum.

	* app/gdisplay.[ch]: removed the "depth" and "color_type" fields
	from the struct. Cleaned up the header.

	* app/selection.c
	* app/gui/info-window.c: use g_visual->depth instead of
	gdisp->depth.

	* app/gimphelp.c: #include "core/core-types.h"

	* tools/pdbgen/Makefile.am: added app/core/core-types.h to the
	list of files to be scanned for enums.

	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c: regenerated.

2001-05-13  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: some percentage updates.

	* autogen.sh: correctly parse latest autoconf's broken "--version"
	string.

	* app/widgets/Makefile.am
	* app/widgets/gimpcontainerview-utils.[ch]: new files which
	provide a set of built-in get_name_func()s for GimpContainerView
	and GimpContainerMenu.

	* app/widgets/gimpcontainermenu.c
	* app/widgets/gimpcontainerview.c: use them.

	* app/widgets/gimpimagedock.c
	* app/gui/dialogs-constructors.c: removed the get_name_func()s here.

2001-05-13  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h: removed some forgotten tools types.

	* app/tools/tools-types.h: and added them here.

	* app/interface.c
	* app/disp_callbacks.[ch]: ported dropping of drawables to the
	new DND system.

	* app/app_procs.c
	* app/core/gimpdatafactory.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimptoolinfo.h
	* app/gui/gui.c
	* app/tools/tool_options.c
	* app/widgets/gimpchannellistview.c
	* app/widgets/gimplayerlistview.c: removed/fixed includes.

	* app/gui/brush-select.[ch]
	* app/gui/pattern-select.[ch]: removed the display of the current
	name (done by the grid view now).

	* app/gui/palette-select.c: fixed palette preview size.

	* app/gui/dialogs-constructors.c: added get_name() functions for
	brushes, patterns, images and palettes.

	* app/widgets/gimpcontainergridview.[ch]: added a label for the
	name of the active item.

	* app/widgets/gimpdnd.[ch]: removed the old drawable DND preview
	icon code.

	* tools/pdbgen/app.pl: braino: the $tool_eek hack has to be
	initialized to 0 at the beginning of each file, otherwise we end
	up including "tools/tools-types.h" everywhere.

	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/tools.pdb: add "tools/tools-types.h" where needed.

	* app/pdb/color_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/undo_cmds.c
	* app/pdb/unit_cmds.c: regenerated.

2001-05-12  Adam D. Moss  <adam@gimp.org>

	* plug-ins/common/animoptimize.c: Cunningly decrease
	the efficiency of the plugin.  Add semi-broken code
	to find or remove the statistical mode pixels across
	all frames (ie. the animation background).  Checked in
	mainly to avoid tree-drift until I have time to finish
	this.

2001-05-11  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/lc_dialog.[ch]: taken behind the curtain and shot.
	(famous words of Seth Burgess on #gimp)

	* app/app_procs.c
	* app/gdisplay.c
	* app/gimage.c
	* app/gui/commands.c
	* app/gui/gui.c
	* app/gui/menus.c
	* app/gui/preferences-dialog.c: don't #include it or call it's
	functions any more.

	* app/gui/dialogs-commands.[ch]: added a constructor for a dock
	which looks like the old L&C dialog (taken from test-commands.*)

	* app/gui/test-commands.[ch]: removed here.

	* app/gui/dialogs-constructors.[ch]: wrapped the old
	paths-dialog.* stuff in a dockable which can be created only
	once. Will go away as soon as the new path stuff is there.

	* app/gui/dialogs.c: added the paths dockable, removed lc_dialog.

	* app/gui/paths-dialog.c: some changes to make it work without the
	lc_dialog around it. Will probably crash randomly and refuse to
	update it's contents properly (scheduled for removal).

2001-05-11  Michael Natterer  <mitch@gimp.org>

	* app/gui/Makefile.am
	* app/gui/channels-dialog.[ch]
	* app/gui/layers-dialog.[ch]: at the end of their epoch, the
	dinosaurs were wiped out by a "cvs remove" impact from space.

	* app/lc_dialog.c: changed accordingly.

	* app/gui/layer-select.c: use the new preview system (mostly code
	removal).

	* app/gui/menus.c: reorder the dialog factory menu.

2001-05-10  David Neary  <dneary@eircom.net>

        * app/tools/gimpbycolorselecttool.[ch]
        * app/undo.c: Temporarily fixed an issue with undo when
        there's a bycolorselect mask on the image - since
        gimp_by_color_select_tool_initialize_by_image() should be
        a private function, this needs changing.

2001-05-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpchannellistview.c: fixed button sensitivity.

	* app/widgets/gimpdialogfactory.c: write out newlines to
	.sessionrc at the right places.

	* app/widgets/gimpdock.c: s/gimp_dockable/gimp-dockable/ makes DND
	re-arranging of dialogs work again.

2001-05-10  David Neary  <dneary@eircom.net>

        * tools/gimp-remote.c: Got rid of some annoying 
        warnings about stuff like exit not having a prototype.
        Included string.h and stdlib.h.

2001-05-10  David Neary  <dneary@eircom.net>

	* app/tools/gimpbycolorselecttool.[ch]: Activate 
	"Select by color" tool.

	* app/tools/Makefile.am
	* app/tools/tools.c
	* app/tools/gimptool.[ch]
	* app/tools/selection_options.c
	* tools/pdbgen/pdb/tools.pdb: Changed accordingly
	
2001-05-10  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/asupsample.[ch]: removed.

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/tools/Makefile.am
	* app/tools/tools-types.h: new files.

	* app/tools/gimptoolinfo.[ch]: removed.
	* app/core/gimptoolinfo.[ch]: added here.

	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimpadaptivesupersample.[ch]
	* libgimp/gimpbilinear.[ch]: removed here...

	* libgimpcolor/Makefile.am
	* libgimpcolor/gimpcolortypes.h
	* libgimpcolor/gimpadaptivesupersample.[ch]
	* libgimpcolor/gimpbilinear.[ch]: ..and added here.

	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/paths.pdb

	* app/*.c: changed tons of #include's

2001-05-09  Michael Natterer  <mitch@gimp.org>

	* configure.in
	* app/Makefile.am: added new directory app/core/ for the core
	object system.

	* app/gimage_mask.[ch]
	* app/gimpbrush-header.h
	* app/gimpbrush.[ch]
	* app/gimpbrushgenerated.[ch]
	* app/gimpbrushpipe.[ch]
	* app/gimpchannel.[ch]
	* app/gimpcontainer.[ch]
	* app/gimpcontext.[ch]
	* app/gimpdata.[ch]
	* app/gimpdatafactory.[ch]
	* app/gimpdatalist.h
	* app/gimpdrawable-desaturate.[ch]
	* app/gimpdrawable-equalize.[ch]
	* app/gimpdrawable-invert.[ch]
	* app/gimpdrawable-offset.[ch]
	* app/gimpdrawable-preview.[ch]
	* app/gimpdrawable.[ch]
	* app/gimpgradient.[ch]
	* app/gimpimage-convert.[ch]
	* app/gimpimage-duplicate.[ch]
	* app/gimpimage-undo.[ch]
	* app/gimpimage.[ch]
	* app/gimplayer.[ch]
	* app/gimplayermask.[ch]
	* app/gimplist.[ch]
	* app/gimpmarshal.[ch]
	* app/gimpobject.[ch]
	* app/gimppalette-import.[ch]
	* app/gimppalette.[ch]
	* app/gimppattern-header.h
	* app/gimppattern.[ch]
	* app/gimpundo.[ch]
	* app/gimpundostack.[ch]
	* app/gimpviewable.[ch]: removed these files...

	* app/core/*: ...and added them here.

	* app/*.c
	* app/gui/*.c
	* app/pdb/*.c
	* app/tools/*.c
	* app/widgets/*.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gih.c
	* plug-ins/common/pat.c
	* po/POTFILES.in
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/*.pdb: changed accordingly.

2001-05-08  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: removed GimpDropType.
	* app/widgets/widgets-types.h: added GimpDropType.

	* app/gui/channels-dialog.c
	* app/gui/layers-dialog.c: #include "widgets/widgets-types.h"

2001-05-08  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpdnd.[ch]: removed.

	* app/widgets/Makefile.am
	* app/widgets/gimpdnd.[ch]: and moved here.

	* app/devices.c
	* app/docindex.c
	* app/interface.c
	* app/gui/about-dialog.c
	* app/gui/channels-dialog.c
	* app/gui/color-area.c
	* app/gui/color-select.c
	* app/gui/colormap-dialog.c
	* app/gui/gradient-editor.c
	* app/gui/indicator-area.c
	* app/gui/layers-dialog.c
	* app/gui/palette-editor.c
	* app/gui/palette-select.c
	* app/gui/toolbox.c
	* app/tools/gimpblendtool.c
	* app/tools/tool_manager.c
	* app/tools/tool_options_dialog.c: changed #includes accordingly.

2001-05-08  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: added ChannelType.
	* app/gimpimage.h: removed ChannelType.
	* tools/pdbgen/enums.pl: regenerated.

	* app/apptypes.h: don't include libgimpwidgets/gimpwidgetstypes.h
	and widgets/widgets-types.h any more.

	* app/devices.c
	* app/gimpdnd.c
	* app/gimprc.c
	* app/lc_dialog.c
	* app/gui/[many].c: include widgets/widgets-types.h

	* app/tools/histogram_tool.h: include widgets/widgets-types.h here
	because of an ugly dependency from pdb/color_cmds.c

	* app/tools/tool_options_dialog.c

	* app/widgets/widgets-types.h: include
	libgimpwidgets/gimpwidgetstypes.h and apptypes.h so files in
	widgets/ only have to include this file.

	* app/widgets/*.c: include widgets-types.h instead of apptypes.h

	* app/gimpdrawable-preview.c
	* app/gui/gradient-editor.c: removed useless #includes.

2001-05-07  Michael Natterer  <mitch@gimp.org>

	* app/gimpimage.[hc]: new signal "floating_selection_changed",
	removed ancient declaration of _GimpImageRepaintArg.

	* app/floating_sel.c
	* app/undo.c: emit "floating_selection_changed" where approptiate.

	* app/gimage_mask.c: s/"Floated Layer"/"Floating Selection"/
	because we view this layer directly now (not some thing with an
	"L" icon).

	* app/gui/layers-commands.c: don't use confusing boolean variables
	which indicate that something is not true (reversed their logic).

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpchannellistitem.[ch]: new widget. Does nothing yet.

	* app/widgets/gimpchannellistview.c: set the button box
	insensitive when there is a floating selection.

	* app/widgets/gimpdrawablelistitem.c: made channel DND work again.
	Very ugly btw.

	* app/widgets/gimpdrawablelistview.c: connect to
	"floating_selection_changed". Fake a change of the active drawable
	so the button boxes get updated correctly.

	* app/widgets/gimplayerlistview.c: set the sensitivity of the
	buttons correctly.

	* app/widgets/gimplistitem.c: create GimpChannelListItems for
	channels.  Some very ugly code to work around broken
	GTK_STATE_INSENSITIVE propagation in list items.

2001-05-06  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpchannellistview.c: enabled setting component
	activity. Connect an "extended_clicked" callback to the "To
	Selection" button for add/sub/intersect.

	* app/widgets/gimpcomponentlistitem.c: removed some commented out
	code.

	* app/widgets/gimpdrawablelistview.c: stuff.

	* app/widgets/gimplayerlistview.c: set "Raise" to insensitive if
	the active layer has no alpha.

	* libgimpwidgets/gimpbutton.c: fiddle around correctly with
	GtkButton's internals.

2001-05-06  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimpoffsetarea.c
	* libgimpwidgets/gimpoffsetarea.h: new widget GimpOffsetArea cut 
	of the resize dialog, allows to interactively specify offsets when 
	resizing images or drawables.

	* libgimpwidgets/gimppixmap.c: removed empty destroy method.

	* app/resize.c: use new GimpOffsetArea.

2001-05-06  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpbutton.[ch]: new widget derived from
	GtkButton.  It adds an "extended_clicked" signal which is emitted
	instead of "clicked" if a modifier was pressed.

	* libgimpwidgets/gimpchainbutton.[ch]
	* libgimpwidgets/gimppixmap.[ch]: removed the opaque typedefs.

	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h: and added them here. Added
	GimpButton.

	* app/widgets/gimpdrawablelistview.c: use GimpButtons for "Raise"
	and "Lower" and raise/lower to top/bottom on shift-click.

2001-05-06  Michael Natterer  <mitch@gimp.org>

	* app/gimpimage.[ch]: renamed "restructure" to "alpha_changed" and
	only emit it in flatten(), not in merge_layers().

	* app/gimage.c
	* app/gimplayer.c: changed accordingly.

	* app/widgets/gimpcontainerlistview.c: set both scrollbar policies
	to automatic.

2001-05-06  Michael Natterer  <mitch@gimp.org>

	* app/gimpimage.[ch]: renamed the "resize" signal to "size_changed".

	* app/gimage.c: changed accordingly.

	* app/undo.c: renamed the "shrink_wrap" to "size_changed", call
	gimp_image_size_changed() and let the handlers do the work.

	* app/widgets/gimplistitem.[ch]: added a virtual set_preview_size()
	method and a default implementation.

	* app/widgets/gimplayerlistitem.c: added an inplementation of
	set_preview_size() which set's the size of the mask preview.

	* app/widgets/gimpchannellistview.c: implement set_preview_size()
	and set the size of the component previews.

	* app/widgets/gimpcontainerlistview.c: call
	gimp_list_item_set_preview_size() instead of resizing the preview
	manually.

	* app/widgets/gimpcontainerview.c: emit "set_preview_size" even if
	the size has not changed so we can use it to re-calculate the
	preview size on image size change.

	* app/widgets/gimpdrawablelistview.c: connect to the image's
	"size_changed" signal and trigger preview size re-calculation in
	the callback.

2001-05-06  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: added GimpDropMode...
	* app/gimpdnd.h: ...removed from here.

	* app/gimpimage.[ch]:
	- New signal "mode_changed".
	- removed "const GimpImage*" from gimp_image_colormap_changed()
	  because a signal emission is never "const" for the object
	  which emits the signal.
	- Fixed gimp_image_[set|get]_component_[active|visible]():
	  ALPHA_CHANNEL maps to ALPHA_PIX only in RGB mode, use
	  ALPHA_G_PIX/ALPHA_I_PIX in GRAY/INDEXED mode.

	* app/gimpimage-convert.c
	* app/undo.c: call gimp_image_mode_changed().

	* app/gimpviewable.c: added an implementation of
	"invalidate_preview" which frees the preview temp_buf which may be
	attached to the viewable. Subclasses need to chain up now.

	* app/gimpdrawable.c
	* app/gimpimage.c: chain up in invalidate_preview().

	* app/widgets/gimpchannellistview.c: connect to the image's
	"mode_changed" signal and rebuild the channel list in the
	callback.

	* app/widgets/gimpcontainerview.h: indentation.

	* app/widgets/gimpdockbook.c: set the dockable's context to NULL
	in gimp_dockbook_remove()

	* app/widgets/gimpimagedock.c: forgot to actually set the dock's
	image in gimp_image_dock_new().

	* app/gui/dialogs-constructors.c: added a get_name_func() for tool
	views which returns the tool's "blurb". It's safe to assume now
	that a dockable's context will exist as long as the dockable
	exists unless it's explicitely set to NULL, so remove ugly hacks
	handling context destruction.

	* app/tools/gimptool.c: removed COMPAT_CRUFT and useless #include's.

2001-05-04  Michael Natterer  <mitch@gimp.org>

	* configure.in
	* devel-docs/Makefile.am
	* devel-docs/libgimpcolor/*
	* devel-docs/libgimpmath/*
	* devel-docs/libgimpwidgets/*: added new gtk-doc modules for
	libgimpcolor, libgimpmath and libgimpwidgets. Moved existing
	documentation from the old files to the new templates.

	* devel-docs/libgimp/*: regenerated all files and removed the
	stuff which is in the new modules now.

	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.[ch]: some documentation fixes.

	* po-libgimp/Makefile.in.in
	* po-plug-ins/Makefile.in.in
	* po-script-fu/Makefile.in.in: updated.

2001-05-03  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h: removed typedefs from the widgets/ subdir.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h: new file.

	* app/widgets/gimpcontainermenu.[ch]
	* app/widgets/gimpcontainerview.[ch]: synced them again and added a
	"get_name_func" 

	* app/widgets/gimplistitem.[ch]
	* app/widgets/gimpmenuitem.[ch]: add a "get_name_func" and use it
	to get the item's name.

	* app/widgets/gimpcontainerlistview.c
	* app/widgets/gimpcontainermenuimpl.c: pass the get_name_func to
	the created items.

	* app/widgets/gimpchannellistview.c: gtk_widget_queue_resize() the
	component frame after changing the image.

	* app/widgets/gimpcomponentlistitem.c: set a custom
	get_name_func() so the components are named Red, Green, ... again.

	* app/widgets/gimpimagedock.c: set a custom get_name_func() which
	returns names like in the old L&C dialog's image menu.

	* tools/pdbgen/Makefile.am: don't scan apptypes.h for enums.

2001-05-03  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c: don't #include "gui/color-select.h"

	* app/disp_callbacks.[ch]: renamed gdisplay_drop_viewable() to
	gdisplay_drop_pattern().

	* app/gimpimage.[ch]: added new signals
	"component_visibility_changed" and "component_active_changed" and
	emit them in the resp. accessors.

	* app/interface.c: removed old GimpPreview test code.

	* app/widgets/Makefile.am
	* app/apptypes.h
	* app/widgets/gimpchannellistview.[ch]
	* app/widgets/gimpcomponentlistitem.[ch]: new (unfinished) widgets.

	* app/widgets/gimpdockbook.c: switch to the right-clicked notebook
	page before showing the menu.

	* app/widgets/gimpdrawablelistitem.[ch]: removed the protected
	functions which make the toggle buttons look nicer...

	* app/widgets/gimplistitem.[ch]: ...and added them here.

	* app/widgets/gimpdrawablelistview.[ch]: virtualized set_image()
	so subclasses can properly (dis)connect on image change.

	* app/widgets/gimpdrawablepreview.c
	* app/widgets/gimpimagepreview.[ch]: removed the calc_size()
	functions which calculate the preview's aspect ratio...

	* app/widgets/gimppreview.[ch]: ...and added then here as
	protected functions.

	* app/widgets/gimplayerlistitem.c: flush displays after changing
	the layer mask's "apply" or "show" state.

2001-05-01  Michael Natterer  <mitch@gimp.org>

	* app/gimpimage.h: removed prototype of function which doesn't
	exist.

	* app/widgets/gimppreview.[ch]: new signal "extended_clicked"
	which is emitted instead of "clicked" if the user pressed shift,
	control or mod1 on button_press.

	* app/widgets/gimplayerlistitem.c: use the "extended_clicked"
	signal to toggle the layer mask's "show" and "apply" states.

2001-05-01  Michael Natterer  <mitch@gimp.org>

	* app/gimpdnd.[ch]: Made file/url DND work like the other DND types.
	The drop callback gets passed a GList of filenames.
	Provide a default callback which calls file_open_with_display()
	for each filename.

	* app/docindex.c: changed accordingly.

	* app/gui/toolbox.c: same file DND changes and made dropping
	drawables work again with the new DND system.

	* app/widgets/gimpdrawablelistview.c: properly disconnect from the
	image in "destroy".

	* app/widgets/gimplayerlistitem.c: gtk_signal_connect_while_alive()
	to the layer's "mask_changed" signal.

2001-05-01  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c: removed more GUI initialisation code.

	* app/color_transfer.c: removed useless includes.

	* app/gui/brush-editor.[ch]
	* app/gui/dialogs-constructors.c:
	s/BrushEditGeneratedWindow/BrushEditor/, s/begw/brush_editor/, made
	the brush preview of the editor autoresizing.

	* app/gui/dialogs.h: removed "extern" declaration of non-existant
	variable.

	* app/gui/gui.[ch]: new function gui_post_init() which shows the
	tips dialog.

	* app/gui/tips-dialog.c: made signal handling nicer (clean up in a
	"destroy" handler).

	* app/gui/toolbox.[ch]: removed toolbox_raise(), removed the help
	system (de)initialisation code which is now in gui.c, cleanup.

2001-04-30  Dave Neary  <dneary@eircom.net>

	* app/tools/tool_options.c: Ensure that option widgets are set to
	defaults on first call to the _init() function. 
	
2001-04-29  Garry R. Osgood  <grosgood@rcn.com>
	* plug-ins/plugin-helper/plugin-helper.c
	extensions don't have parameters,
	but helper_run() was asking anyway -
	and segfaulting. Commented out
	line for now; everything still seems
	prototypical in Plug In Helper Land.
	
2001-04-29  Michael Natterer  <mitch@gimp.org>

	* app/gimplayer.[ch]: added a "linked_changed" signal and emit it
	in gimp_layer_set_linked().

	* app/gui/layers-dialog.c: use the accessor when setting "linked".

	* app/widgets/gimpdrawablelistitem.[ch]: made the hacks which make
	the buttons look nice inside list items available to subclasses.

	* app/widgets/gimplayerlistitem.[ch]: added a "linked" button.

2001-04-29  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainerview.[ch]: added virtual method
	context_item() which works like select_item() and activate_item()
	and a function to trigger the signal from subclasses (marked as
	"protected").

	* app/widgets/gimpcontainerlistview.c: invoke context_item() on
	right click.

	* app/widgets/gimpdrawablelistview.[ch]: implement context_item()
	and show a context menu. The functions to show the menu as well as
	functions to create a new drawable and to edit it's attriutes must
	be passed to the constructor now.

	* app/gui/channels-commands.[ch]
	* app/gui/layers-commands.[ch]: added functions which show the
	layers and channels context menus. No accelerators supported yet.
	Auto-destroy all dialogs when their drawable is removed from the
	image.

	* app/gui/dialogs-constructors.c: changed the calls to
	gimp_drawable_list_view_new() accordingly.

	* app/gui/menus.c
	* app/gui/test-commands.[ch]: removed some test dialogs.

2001-04-28  David Neary  <dneary@eircom.net>

	* app/tools/transform_options.[ch]: Separated the transform
	options stuff from the gimptransformtool files so that each of the
	transform tools to make is available to the other transform tools.

	* app/tools/gimptransformtool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/Makefile.am: Changed accordingly
	
2001-04-28  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: added RunModeType.
	* app/plug_in.h: removed RunModeType.
	* tools/pdbgen/Makefile.am: don't scan app/plug_in.h for enums.
	* tools/pdbgen/enums.pl: regenerated.

	* app/file-open.[ch]
	* app/file-save.[ch]
	* app/file-utils.[ch]: removed all GUI specific code.

	* app/gui/Makefile.am
	* app/gui/file-dialog-utils.[ch]
	* app/gui/file-open-dialog.[ch]
	* app/gui/file-save-dialog.[ch]: new files.
	Renamed file_open() to 	file_open_with_display().

	* app/app_procs.c
	* app/docindex.c
	* app/gimpdnd.c
	* app/gui/commands.c
	* app/gui/gui.c
	* app/gui/menus.c: changed accordingly.

2001-04-27  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.[ch]: removed stuff which now lives in gui/gui.c,
	removed global variable "we_are_exiting", made app_init() static.

	* app/appenv.h: removed "we_are_exiting".

	* app/colormaps.c: don't #include "app_procs.h"

	* app/file-open.[ch]
	* app/file-save.[ch]: removed the *_pre_init() functions and
	renamed the *_post_init() functions to *_menu_init().

	* app/gui/gui.c: added more GUI init and shutdown code from
	app_procs.c

2001-04-26  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainermenuimpl.c: only work around option
	menu reference problems if the removed item was the active one.

	* app/widgets/gimpimagedock.c: don't try to avoid a recursive
	signal emission in gimp_image_dock_image_changed() but work around
	it. This makes the image menu work finally.

	* app/gui/dialogs-constructors.c: removed debugging output.

2001-04-25  Michael Natterer  <mitch@gimp.org>

	* app/gimpobject.c: free the object's name on destruction.

	* app/gimpparasite.c: gimp_personal_rc_file()'s return value has
	to be g_free()'d.

	* app/main.c: indentation.

	Ported memleak fixes from 1.2:

	* app/gimpbrush.c: don't leak all pixmaps.

	* app/gimpbrushpipe.c: free all the pipe's brushes here.

2001-04-24  David Neary  <dneary@eircom.net>

	* app/authors.h: Synced this file from the earlier commit.

	* app/pixmaps2.h
	* app/pdb/tools_cmds.c
	* app/tools/Makefile.am
	* app/tools/gimpperspectivetool.c
	* app/tools/gimpperspectivetool.h
	* app/tools/gimprotatetool.c
	* app/tools/gimprotatetool.h
	* app/tools/gimpsheartool.c
	* app/tools/gimpsheartool.h
	* app/tools/gimptool.c
	* app/tools/gimptool.h
	* app/tools/gimptransformtool.c
	* app/tools/tools.c
	* tools/pdbgen/pdb/tools.pdb:    Enabled the rest of the 
	transform tools and changed some of the options stuff in 
	transform_options_new(). There are one or two outstanding 
	(non-critical) runtime problems in that function.

2001-04-24  Michael Natterer  <mitch@gimp.org>

	* app/authors.h: regenerated.

	* app/gui/dialogs-constructors.c: call the drawable views's
	set_context() function once explicitly after creation.

	* app/gui/dialogs.c
	* app/widgets/gimpdialogfactory.[ch]: session management correctly
	remembers the dialogs' sizes again.

	* app/widgets/gimpcontainermenuimpl.c: set the options menu's
	history to "0" after removing a menu item (temp hack because
	GtkOptionMenu doesn't handle the removal of the currently active
	item correctly).

	* app/widgets/gimpimagedock.c: another try to get dock->context's
	signals handled correctly. Debugging output will disappear soon.

2001-04-23  David Neary  <dneary@eircom.net>

        * AUTHORS: Added my name here before being politely
        informed that the file is autogenerated. Ooops!

        * tools/authorsgen/contributors: Added my name to the
        list of contributors.

2001-04-23  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontext.[ch]: some minor fixes / cleanup.

	* app/gimpdata.c: forgot to gtk_object_class_add_signals() in
	class_init().

	* app/gui/dialogs-constructors.[ch]: added a tool_tab_func() so
	the notebook tab shows a tool preview, pass a GimpContext to all
	dialog constructors and added set_context() functions for all
	dockable based dialogs so they can be configured to use the
	context of the destination dock when dragging them around.

	* app/widgets/gimpcontainermenuimpl.c: removed debugging output.

	* app/widgets/gimpdialogfactory.[ch]: add a method to create
	dockables (which gets passed the dock the dockable will be added
	to) so the dockables can be created in the right context.

	* app/widgets/gimpdock.[ch]: added a GimpContext attribute, remove
	the dockbooks explicitely in destroy().

	* app/widgets/gimpdockable.[ch]: dockables now know about their
	set_context_func() and can thus be dragged between different
	contexts.

	* app/widgets/gimpdockbook.c: gimp_dockbook_add(): refuse to add
	dockables to dockbooks which are not part of a dock, set the
	dockable's context after adding it.

	* app/widgets/gimpimagedock.[ch]: image docks now keep a pointer
	to the global image list which is passed to them on construction
	so they don't need to know about the global "image_context"
	variable, added an "Auto" button like in L&C.

	* app/gui/dialogs-commands.c: changed accordingly.

2001-04-23  Sven Neumann  <sven@gimp.org>

	Merged Yosh's changes from stable branch:

	* acinclude.m4: updated libtool stuff

        * configure.in: more #undefs so jpeglib.h test works

        * plug-ins/common/bumpmap.c: speedup patch from Ernst Lippe
        <ernstl@planet.nl> (tile cache size optimization)

2001-04-23  Sven Neumann  <sven@gimp.org>

	Merged changes from stable branch:
	
        * plug-ins/perl/examples/terral_text: fixed typo.

        * plug-ins/perl/examples/image_tile
        * plug-ins/perl/examples/yinyang: 
        applied gimp-kirchgessner-010422-0.patch which fixes problems with 
        invalid number of parameters passed to some functions.

        * plug-ins/script-fu/interp_sliba.c: fixed problems with strbreakup 
        reported by Mike Kelly <mike@csuchico.edu> (bugs #52383 and #52385)

2001-04-22  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: cleanup.

	* app/interface.c: #include "gimpui.h"

	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c
	* app/gui/menus.c
	* app/gui/test-commands.[ch]: changes for the image menu below.

	* app/apptypes.h
	* app/widgets/Makefile.am
	* app/widgets/gimpcontainermenu.[ch]
	* app/widgets/gimpcontainermenuimpl.[ch]: new widgets. The actual
	implemtation lives in a separate file because
	gimpcontainermenu.c's code is identical to gimpcontainerview.c's
	except for the base class. This will become an interface with Gtk 2.0.

	* app/widgets/gimpimagedock.[ch]: a dock with an image menu. The
	pages still don't follow the context correctly.

	* app/widgets/gimpmenuitem.[ch]: a menu item with a preview.

	* app/widgets/gimpdialogfactory.[ch]: pass a dock constructor to
	the constructor and provide a method to create a new dock within
	this factory's context.

	* app/widgets/gimpdock.[ch]: removed the constructor because we
	create only image docks now. Put the vbox into a main_vbox (which
	also contains the image menu).

	* app/widgets/gimpdockbook.[ch]: create new docks with the dialog
	factory.

	* app/gimpcontainer.[ch]
	* app/gimpdata.[ch]
	* app/gimpdatafactory.[ch]
	* app/gimpdatalist.[ch]
	* app/gimplist.[ch]
	* app/gimpviewable.[ch]
	* app/widgets/gimpbrushpreview.[ch]
	* app/widgets/gimpcontainergridview.[ch]
	* app/widgets/gimpcontainerlistview.[ch]
	* app/widgets/gimpcontainerview.[ch]
	* app/widgets/gimpdatafactoryview.[ch]
	* app/widgets/gimpdockable.[ch]
	* app/widgets/gimpdrawablelistitem.[ch]
	* app/widgets/gimpdrawablelistview.[ch]
	* app/widgets/gimpdrawablepreview.[ch]
	* app/widgets/gimplayerlistitem.[ch]
	* app/widgets/gimplayerlistview.[ch]
	* app/widgets/gimplistitem.[ch]
	* app/widgets/gimppalettepreview.[ch]
	* app/widgets/gimppatternpreview.[ch]
	* app/widgets/gimppreview.[ch]: ass-sign some copyrights.

2001-04-21  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/lc_dialogP.h
	* app/paths_dialogP.h: removed stuff that will go away anyway (put
	the declarations to the public headers).

	* app/gimpui.[ch]: new function gimp_widget_get_callback_context()
	which may only be called from a *_cmd_callback() and returns the
	data we attached with weird methods.

	* app/gui/Makefile.am
	* app/gui/channels-commands.[ch]: callbacks independent from the
	channels dialog and the "new" and "edit channel" dialogs.

	* app/gui/channels-dialog.[ch]
	* app/gui/layers-commands.c
	* app/gui/layers-dialog.[ch]
	* app/lc_dialog.[ch]
	* app/gui/menus.c
	* app/gui/paths-dialog.[ch]
	* app/tools/gimpbezierselecttool.c
	* po/POTFILES.in: changed accordingly.

2001-04-20  Michael Natterer  <mitch@gimp.org>

	* app/gimpui.[ch]: new functions gimp_window_add_accel_group() and
	gimp_window_remove_accel_group() which do the ugly accel context
	hack described below.

	* app/interface.c
	* app/gui/layers-dialog.c: use the new functions.

	* app/disp_callbacks.c
	* app/gui/layers-commands.c: removed stuff which is now done
	automatically.

2001-04-20  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/layers_dialogP.h: removed.

	* app/gimpui.[ch]: new function gimp_menu_position().

	* app/disp_callbacks.c
	* app/interface.c
	* app/gui/layers-dialog.c: popup the image and layers menu with
	gtk_item_factory_popup_with_data() instead of gtk_menu_popup()
	and pass the GimpImage we're operating on as data.

	For accelerators, which are invoked without context, we catch key
	press events and attach the context to the GtkItemFactory.

	* app/gui/Makefile.am
	* app/gui/layers-commands.[ch]: common layer callbacks (instead of
	separate ones in commands.c and layers-dialog.c

	* app/gui/commands.[ch]
	* app/gui/layers-dialog.[ch]: removed the menu callbacks here.

	* app/gdisplay.h
	* app/lc_dialog.c
	* app/gui/channels-dialog.c
	* app/gui/layer-select.c
	* app/gui/menus.c
	* po/POTFILES.in: changed accordingly.

2001-04-20  Michael Natterer  <mitch@gimp.org>

	* app/main.c: set the message handler for all app log domains, not
	only for "Gimp".

	* app/gui/brush-select.c
	* app/gui/gradient-select.c
	* app/gui/palette-select.c: removed the "edit" callbacks.

	* app/gui/dialogs-constructors.[ch]: Added the callbacks
	here. Added layer and channel lists.

	* app/gui/dialogs.c: register the new lists.
	* app/gui/menus.c: their menu entries.

	* app/widgets/gimpdock.c: set a minimal width of 280 pixels.

2001-04-19  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpclonetool.[ch]
	* app/tools/gimpconvolvetool.[ch]
	* app/tools/gimppainttool.c
	* app/tools/gimptool.h
	* app/tools/paint_options.c
	* app/tools/tool_manager.c
	* app/tools/tools.c: Applied a patch from Dave Neary
	<dneary@eircom.net> which brings clone and convolve back.

	That's all paint tools, Dudes!

2001-04-19  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/brush_header.h
	* app/pattern_header.h
	* app/desaturate.[ch]
	* app/equalize.[ch]
	* app/invert.[ch]: removed.

	* app/gimpbrush-header.h
	* app/gimppattern-header.h
	* app/gimpdrawable-desaturate.[ch]
	* app/gimpdrawable-equalize.[ch]
	* app/gimpdrawable-invert.[ch]: new files.

	* app/gui/commands.c: put some stuff from desaturate, equalize and
	invert here. While it's ok to check the drawable type in the
	callback, this is the wrong place for PDB wrappers.

	* app/gimpbrush.c
	* app/gimpbrushpipe.c
	* app/gimplayer.c
	* app/gimppattern.c
	* app/pdb/color_cmds.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gih.c
	* plug-ins/common/pat.c
	* po/POTFILES.in
	* tools/pdbgen/pdb/color.pdb: changed accordingly.

2001-04-18  Michael Natterer  <mitch@gimp.org>

	* app/gimpdrawable-offset.[ch]: renamed ChannelOffsetType to
	GimpOffsetType.

	* app/pdb/channel_ops_cmds.c
	* libgimp/gimpchannelops_pdb.[ch]
	* tools/pdbgen/pdb/channel_ops.pdb: removed.

	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/image.pdb: put the "offset" and "duplicate"
	functions where they belong.

	* app/gui/offset-dialog.c
	* app/pdb/Makefile.am
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/Makefile.am
	* libgimp/gimp_pdb.h
	* libgimp/gimpdrawable_pdb.[ch]
	* libgimp/gimpenums.h
	* libgimp/gimpimage.h
	* libgimp/gimpimage_pdb.[ch]
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enumcode.pl
	* tools/pdbgen/enums.pl
	* tools/pdbgen/groups.pl
	* plug-ins/common/guillotine.c
	* plug-ins/print/print.c
	* plug-ins/script-fu/script-fu-constants.c: changed accordingly.

2001-04-18  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/channel_ops.[ch]: removed

	* app/gimpdrawable-offset.[ch]
	* app/gimpimage-duplicate.[ch]: new files without GUI.

	* app/gui/Makefile.am
	* app/gui/offset-dialog.[ch]: new files.

	* app/gui/commands.c
	* app/pdb/channel_ops_cmds.c
	* po/POTFILES.in
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/channel_ops.pdb: changed accordingly.

2001-04-18  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/convert.[ch]: removed.
	* app/gimpimage-convert.[ch]: new files: the convert functionality
	without GUI (now called gimp_image_convert()).

	* app/gui/Makefile.am
	* app/gui/convert-dialog.[ch]: new files.

	* app/gui/commands.c
	* app/pdb/convert_cmds.c
	* po/POTFILES.in
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl: changed accordingly.

2001-04-18  Michael Natterer  <mitch@gimp.org>

	* app/devices.[ch]
	* app/gui/about-dialog.[ch]
	* app/gui/preferences-dialog.[ch]
	* app/gui/tips-dialog.[ch]: return a GtkWidget from the constructor.

	* app/gui/dialogs.c
	* app/gui/dialogs-constructors.[ch]: register them with the dialog
	factory.

	* app/gui/commands.[ch]
	* app/gui/menus.c: removed their old callbacks.

	* app/gui/brush-select.c
	* app/gui/gradient-select.c
	* app/gui/palette-editor.[ch]: no need to show or raise the shell
	(that's done by the dialog factory now).

	* app/widgets/gimpdialogfactory.c: actually do what the
	"singleton" and "session_managed" flags say.

2001-04-18  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: commented the sections of the file list.
	* app/gui/Makefile.am: cleanup.

	* app/unittest/*: removed.

2001-04-17  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gui/Makefile.am
	* app/about_dialog.[ch]
	* app/brush_edit.[ch]
	* app/brush_select.[ch]
	* app/channels_dialog.[ch]
	* app/color_area.[ch]
	* app/color_notebook.[ch]
	* app/color_select.[ch]
	* app/colormap_dialog.[ch]
	* app/commands.[ch]
	* app/file_new_dialog.[ch]
	* app/gradient_editor.[ch]
	* app/gradient_select.[ch]
	* app/indicator_area.[ch]
	* app/info_dialog.[ch]
	* app/info_window.[ch]
	* app/layer_select.[ch]
	* app/layers_dialog.[ch]
	* app/menus.[ch]
	* app/palette.[ch]
	* app/palette_import.[ch]
	* app/palette_select.[ch]
	* app/paths_dialog.[ch]
	* app/pattern_select.[ch]
	* app/preferences_dialog.[ch]
	* app/session.[ch]
	* app/test_commands.[ch]
	* app/tips_dialog.[ch]
	* app/toolbox.[ch]: moved to gui/ (s/_/-/ and some more useful
	filenames on the way).

	* app/app_procs.c
	* app/context_manager.c
	* app/convert.c
	* app/disp_callbacks.c
	* app/errorconsole.c
	* app/file-open.c
	* app/file-save.c
	* app/file-utils.c
	* app/gdisplay.c
	* app/gimage.c
	* app/gimprc.c
	* app/image_new.c
	* app/interface.c
	* app/nav_window.c
	* app/path.c
	* app/plug_in.c
	* app/gui/dialogs-constructors.c
	* app/pdb/brush_select_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpcolorpanel.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* po/POTFILES.in: changed accordingly.

2001-04-17  Michael Natterer  <mitch@gimp.org>

	* app/session.[ch]
	* app/gimprc.c: removed the old dialog session management code...

	* app/widgets/gimpdialogfactory.[ch]: ...and manage all dialogs here.

	* app/gui/dialogs-constructors.[ch]: dialog factory compliant
	constructors for all session managed toplevel dialogs.

	* app/brush_select.[ch]
	* app/devices.[ch]
	* app/docindex.[ch]
	* app/errorconsole.[ch]
	* app/gradient_select.[ch]
	* app/info_dialog.c
	* app/lc_dialog.[ch]
	* app/palette.[ch]
	* app/pattern_select.[ch]
	* app/toolbox.[ch]
	* app/tools/tool_options_dialog.[ch]: all dialog constructors have
	to return the dialog now (even the legacy ones that will go away).
	Removed the session management code as this is now done for the
	dialogs, not by them.

	* app/app_procs.c
	* app/color_select.c
	* app/commands.[ch]
	* app/indicator_area.c
	* app/menus.c
	* app/palette_select.c
	* app/preferences_dialog.c
	* app/gui/dialogs.c
	* app/gui/dialogs-commands.[ch]
	* app/gui/gui.c
	* app/tools/gimptool.c
	* app/widgets/gimpdock.c: changed accordingly.

2001-04-16  Michael Natterer  <mitch@gimp.org>

	First attempt to get the docks session managed:

	* app/gimprc.c: new gimprc type "new-session-info" which will soon
	replace the original one.

	* app/menus.c
	* app/gui/dialogs.c: s/_/-/g in all dialog identifier strings.

	* app/session.[ch]: call the dialog factory's session functions.

	* app/test_commands.c: use the dialog factory to create the tabs.

	* app/gui/dialogs-commands.c
	* app/gui/dialogs-constructors.[ch]: the constructors return widgets,
	not dockables now.

	* app/widgets/gimpdialogfactory.[ch]: maintain a list of dialog
	factories in the class struct. Added ugly code to do the GimpDock
	session management.

	* app/gui/gui.c
	* app/widgets/gimpdock.c: changed accordingly.

2001-04-15  Michael Natterer  <mitch@gimp.org>

	* app/gui/Makefile.am: new files:

	* app/gui/gui.[ch]: the new place for the UI init and shutdown code.
	* app/gui/splash.[ch]: a separate file for the splash.

	* app/app_procs.c: removed lots of stuff. Still much UI code left.

2001-04-15  Michael Natterer  <mitch@gimp.org>

	* app/menus.[ch]: changed all menus_get_*() functions to return
	the GtkItemFactory, not separate widget, and accel_group
	pointers. Disabled automatic tearoff item creation for all
	factories axcept the toolbox and image factory.

	* app/channels_dialog.c
	* app/file-open.c
	* app/file-save.c
	* app/interface.c
	* app/layers_dialog.c
	* app/paths_dialog.c
	* app/toolbox.c: changed accordingly.

2001-04-15  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/paletteP.h: removed

	* app/palette.[ch]
	* app/palette_select.c: changed accordingly.

	* app/Makefile.am
	* app/gui/Makefile.am: some more preparation for file moving.

2001-04-15  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: grouped the files together which will go to gui/.

	* app/widgets/gimpdialogfactory.[ch]: maintain a list of open
	GimpDocks for session management.

	* app/widgets/gimpdock.c: register open docks with the dialog
	factory.

	* app/widgets/gimpdockable.[ch]
	* app/widgets/gimpdockbook.c: pass a pointer to the GimpDockbook
	to the GimpDockable's "get_tab" function because the function is
	called before the dockable is added to the dockbook.

	* app/test_commands.c
	* app/gui/dialogs-constructors.[ch]
	* app/gui/dialogs.c: changed accordingly.

2001-04-14  Michael Natterer  <mitch@gimp.org>

	* app/menus.c: added some more dialog types.

	* app/gui/Makefile.am
	* app/gui/gimpdialogfactory.[ch]: removed again...

	* app/widgets/Makefile.am
	* app/widgets/gimpdialogfactory.[ch]: ...and added where it belongs.

	* app/gui/dialogs.c
	* app/widgets/gimpdock.c: changed #include's

	* app/gui/dialogs-commands.c: dialogs can be removed via the menu
	now.

	* app/widgets/gimpdockbook.c: ref the dockbook while the item
	factory is active because an item factory callback may destroy it
	(we need to add the hijacked GtkNotebook menu back to the
	notebook).

2001-04-14  Michael Natterer  <mitch@gimp.org>

	* configure.in
	* app/Makefile.am
	* app/gui/Makefile.am: new directory which will contain all gui code
	except widgets (I was tired off adding new files to app/).

	* app/apptypes.h
	* app/gui/gimpdialogfactory.[ch]: factory which produces dialogs
	from string descriptions. Should maybe go to widgets/.

	* app/gui/dialogs-commands.[ch]: callbacks for the new menu
	factory below.

	* app/gui/dialogs-constructors.[ch]: dialog constructors which are
	registered with the dialog factory.

	* app/gui/dialogs.[ch]: register the dialogs with the factory.

	* app/app_procs.c: call dialogs_register().

	* app/menus.[ch]: a new item factory for creating dialogs.

	* app/test_commands.c
	* app/widgets/gimpdock.[ch]: added a dialog factory pointer to the
	GimpDock struct.

	* app/widgets/gimpdockbook.[ch]: badly (badly!) fiddle around with
	GtkNotebook's menu to get it integrated in the GtkItemFactory
	which produces new dialogs.

2001-04-13  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.[ch]: removed the ID system from the pdb/
	subdir...

	* app/gimpimage.[ch]: ...and temporarily added it back to GimpImage.

	The ID stuff is not only used by the PDB but is a more general
	type of service which is needed for the PDB, DND and some parts of
	the GUI. Finally, a GimpFactory class with subclasses for data
	objects, images etc. will maintain the ID spaces.

	* app/colormap_dialog.c
	* app/file-open.c
	* app/file-save.c
	* app/gdisplay.c
	* app/gimpdnd.c
	* app/gimpdrawable.c
	* app/info_window.c
	* app/lc_dialog.c
	* app/nav_window.c
	* app/palette_import.c
	* app/paths_dialog.c
	* app/plug_in.c
	* app/xcf.c
	* app/tools/gimptexttool.c
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/image.pdb: use GimpImage's ID functions.

	* app/pdb/channel_cmds.c
	* app/pdb/channel_ops_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/guides_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/tools_cmds.c
	* app/pdb/undo_cmds.c: regenerated.

2001-04-13  Michael Natterer  <mitch@gimp.org>

	* app/gimpdnd.c: added a DND type for GimpImage.

	* app/tools/tools.c: don't register bezier select twice.

	* app/widgets/gimpdockbook.[ch]: hacked the popup menu a bit.

2001-04-11  Stanislav Brabec  <utx@penguin.cz> 

        On request of Martin Weber <martweb@gmx.net>: 
        * plug-ins/bmp/bmpread.c:
        GIMP couldn't read bmp files with a bad chunk. This kind of files
        can be found in OS/2 1.x. 

2001-04-11  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpsmudgetool.[ch]
	* app/tools/gimptool.[ch]
	* app/tools/paint_options.c
	* app/tools/tool_manager.c
	* app/tools/tools.c
	* app/pdb/tools_cmds.c
	* tools/pdbgen/pdb/tools.pdb: applied a (slightly modified) patch
	from Dave Neary <dave.neary@palamon.ie> which reactivates the
	smudge tool.

2001-04-11  Michael Natterer  <mitch@gimp.org>

	* app/test_commands.c: fixed the dockable names.

	* app/tools/gimpbezierselecttool.c: applied patch from Dave Neary
	which fixes some minor stuff that was forgotten to port.

	* app/widgets/gimpdockbook.c: set the tooltip of the notebook tab
	also if it is a plain label.

2001-04-11  Simon Budig  <simon@gimp.org>

	* app/tools/gimppathtool.[ch]
	* app/tools/path_tool.[ch]

	Some tweaks to make gcc and mitch more happy.

2001-04-11  Simon Budig  <simon@gimp.org>

	* app/path_curves.[ch]
	* app/tools/gimpdrawtool.c
	* app/tools/gimppathtool.[ch]
	* app/tools/path_tool.[ch]
	* app/tools/path_toolP.h

	At least now it looks as if it could do something sometimes...

2001-04-11  Michael Natterer  <mitch@gimp.org>

	* configure.in
	* app/widgets/*: new directory containing all widgets. Some of them
	will go to libgimpwidgets.

	* app/color_panel.[ch]
	* app/gimpbrushpreview.[ch]
	* app/gimpconstrainedhwrapbox.[ch]
	* app/gimpcontainergridview.[ch]
	* app/gimpcontainerlistview.[ch]
	* app/gimpcontainerview.[ch]
	* app/gimpdatafactoryview.[ch]
	* app/gimpdock.[ch]
	* app/gimpdockable.[ch]
	* app/gimpdockbook.[ch]
	* app/gimpdrawablelistitem.[ch]
	* app/gimpdrawablelistview.[ch]
	* app/gimpdrawablepreview.[ch]
	* app/gimpgradientpreview.[ch]
	* app/gimpimagepreview.[ch]
	* app/gimplayerlistitem.[ch]
	* app/gimplayerlistview.{ch]
	* app/gimplistitem.[ch]
	* app/gimppalettepreview.[ch]
	* app/gimppatternpreview.[ch]
	* app/gimppreview.[ch]
	* app/gimptoolinfopreview.[ch]
	* app/gtkhwrapbox.[ch]
	* app/gtkvwrapbox.[ch]
	* app/gtkwrapbox.[ch]
	* app/histogramwidget.[ch]: removed from here.

	* app/Makefile.am
	* app/appenums.h
	* app/brush_select.c
	* app/channels_dialog.c
	* app/devices.c
	* app/gimpdnd.c
	* app/gimpdrawable-preview.c
	* app/gimphistogram.h
	* app/gradient_editor.c
	* app/gradient_select.c
	* app/indicator_area.c
	* app/info_window.c
	* app/palette.c
	* app/palette_select.c
	* app/pattern_select.c
	* app/qmask.c
	* app/test_commands.c
	* app/toolbox.c
	* app/pdb/color_cmds.c
	* app/tools/paint_options.c
	* app/tools/tool_options_dialog.c
	* tools/pdbgen/pdb/color.pdb: changed accordingly.

2001-04-10  Michael Natterer  <mitch@gimp.org>

	* app/gimpdock.c: started to add some more separator event handling.

	* app/gimppalettepreview.c: we don't want a popup if n_colors == 0.

	* app/test_commands.c: cleanup.

2001-04-10  Sven Neumann  <sven@gimp.org>

        * app/tools/posterize.c
        * plug-ins/common/fractaltrace.c
        * plug-ins/common/illusion.c
        * plug-ins/flame/flame.c
        * plug-ins/gfig/gfig.c
        * plug-ins/gimpressionist/general.c
        * plug-ins/imagemap/imap_cmd_guides.c
        * plug-ins/mosaic/mosaic.c
        * plug-ins/winsnap/winsnap.c: merged i18n fixes from stable branch

2001-04-10  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimpdockbook.[ch]: new object (the notebook separated out
	of gimpdock.[ch]).

	* app/gimpdnd.h: new DND type "DIALOG".

	* app/gimpdock.[ch]
	* app/gimpdockable.[ch]: DND mostly works now.

	* app/menus.c
	* app/test_commands.[ch]: updated.

2001-04-08  Sven Neumann  <sven@gimp.org>

        * plug-ins/bmp/bmp.c
        * plug-ins/common/jpeg.c
        * plug-ins/common/mpeg.c
        * plug-ins/common/png.c
        * plug-ins/common/tiff.c
        * plug-ins/common/xpm.c
        * plug-ins/twain/twain.c
        * plug-ins/winsnap/winsnap.c: ported I18N initialization fixes from
	stable branch

2001-04-07  Michael Natterer  <mitch@gimp.org>

	* app/paint_funcs.c
	* app/paint_funcs.h
	* app/paint_funcs_simd.S: removed the old files.

	* tools/pdbgen/Makefile.am
	* app/app_procs.c
	* app/channel_ops.c
	* app/channels_dialog.c
	* app/desaturate.c
	* app/disp_callbacks.c
	* app/floating_sel.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimpchannel.c
	* app/gimpdrawable-preview.c
	* app/gimpdrawable.c
	* app/gimpimage.c
	* app/gimplayer.c
	* app/gimplayermask.c
	* app/global_edit.c
	* app/image_map.c
	* app/image_new.c
	* app/layers_dialog.c
	* app/temp_buf.c
	* app/toolbox.c
	* app/undo.c
	* app/undo_history.c
	* app/paint-funcs/paint-funcs.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppainttool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c: changed accordingly.

2001-04-07  Simon Budig  <simon@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/path_bezier.[ch]
	* app/path_curves.[ch]
	* app/pixmaps2.h
	* app/tools/Makefile.am
	* app/tools/gimpdrawtool.[ch]
	* app/tools/path_tool.[ch]
	* app/tools/path_toolP.h
	* app/tools/tools.c

	new files:
	* app/tools/gimppathtool.c
	* app/tools/gimppathtool.h

	Reactivated (at least partially) the old new path tool. It
	will undergo major restructuring. Especially the path stuff 
	will become proper objects. This definitely is work in progress
	and totally unuseable now.

2001-04-07  Michael Natterer  <mitch@gimp.org>

	* configure.in
	* app/Makefile.am
	* app/paint-funcs/.cvsignore
	* app/paint-funcs/Makefile.am: made the paint-funcs directory compile
	so Prof can continue hacking it. The old stuff still needs to be
	removed.

	* app/apptypes.h
	* app/gimpdock.[ch]
	* app/gimpdockable.[ch]: new widgets (not used yet).

	* app/menus.c
	* app/test_commands.[ch]: untested testing code for the new widgets.

2001-04-07  Daniel Egger  <egger@suse.de>

	* app/paint-funcs/paint-funcs-gray.[ch]
	* app/paint-funcs/paint-funcs-graya.[ch]
	* app/paint-funcs/paint-funcs-indexed.[ch]
	* app/paint-funcs/paint-funcs-indexeda.[ch]
	* app/paint-funcs/paint-funcs-rgb.[ch]
	* app/paint-funcs/paint-funcs-rgba.[ch]: Added new files seperated
	and specialised from paint_funcs.c. Not used so far.

2001-04-07  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpairbrushtool.c
	* app/tools/gimpdodgeburntool.[ch]
	* app/tools/gimperasertool.c
	* app/tools/gimppaintbrushtool.[ch]
	* app/tools/gimppenciltool.c
	* app/pdb/tools_cmds.c
	* tools/pdbgen/pdb/tools.pdb: general cleanup of all paint tools we
	have so far: reordered/renamed functions to make them look the same,
	minor fixes in all files.

2001-04-06  Stanislav Brabec  <utx@penguin.cz> 

        On request of Martin Weber <martweb@gmx.net>:
        * plugins/common/tga.c: Fixed bug #52728 - problem in loading
        compressed and uncompressed 15 bit tga, compressed 16 bit tga
        files and removed a false warning for 32 bit tga files.

2001-04-02  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am
	* app/detect_mmx.S
	* app/arch/i386/mmx/detect_mmx.S
	* app/arch/i386/mmx/paint_funcs_mmx.S
	* app/arch/i386/mmx/paint_funcs_mmx.S.m4: split MMX detection out
	of paint_funcs_mmx.S and replaced it with a working version (the 
	old one used to execute an illegal instruction on non-MMX systems).

2001-04-01  Simon Budig  <simon@gimp.org>

	* nearly all files:
	
	Changed all GUI-Stuff back to Motif (see www.openmotif.org).
	Finally we have a professional toolkit here. When you need some
	reasons, why GTK+ sucks: See
	      http://unix.oreilly.com/news/motif_0400.html

2001-04-01  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpairbrushtool.[ch]: back again.

	* app/tools/gimptool.[ch]
	* app/tools/paint_options.c
	* app/tools/tool_manager.c
	* app/tools/tools.c: changed accordingly.

2001-03-31  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h
	* app/tools/tool_options_dialog.c: pass the ToolOptions to the
	ToolOptionsResetFunc instead of a useless (void).

	* app/tools/paint_options.[ch]
	* app/tools/selection_options.[ch]: pass ToolOptions pointers here too.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpinktool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimppaintbrushtool.c
	* app/tools/gimppenciltool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformtool.c: changed accordingly. Removed many
	"reset" callbacks which just redirected the call to
	paint_options_reset() or selection_options_reset().

2001-03-31  Michael Natterer  <mitch@gimp.org>

	* app/undo.c: made undo_pop_paint() work again.

	* app/tools/gimppainttool.[ch]: store the tool ID and the tool
	type in the PaintUndo struct.

	* app/tools/gimppenciltool.c: removed unused variable.

	* app/tools/gimptool.c: removed and reordered STUB()s and cruft.

2001-03-31  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpfliptool.[ch]: applied a patch from Dave Neary
	which re-activates this tool. Enabled the tool options too.

	* app/tools/gimpbezierselecttool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimptexttool.c: trivial fixes.

	* app/tools/gimptool.c: removed cruft.

	* app/tools/gimptransformtool.[ch]: a special case for the flip
	tool, cleanup.

	* app/tools/tools.c: register the flip tool.

2001-03-31  Michael Natterer  <mitch@gimp.org>

	* app/tools/bezier_select.[ch]
	* app/tools/bezier_selectP.h
	* app/tools/transform_core.[ch]
	* app/tools/transform_tool.[ch]: removed.

	* app/tools/Makefile.am
	* po/POTFILES.in: changed accordingly.

	* app/tools/gimpbezierselecttool.c: indentation fixes.

	* app/tools/gimpdodgeburntool.[ch]: made cursor toggling work
	again, cleanup.

	* app/tools/gimpscaletool.[ch]
	* app/tools/gimptool.c: minor cleanups like removing STUB()s.

	* app/tools/tool_manager.c: applied patch from Dave Neary which
	returns useful PDB strings for the paint tools again.

2001-03-31  Michael Natterer  <mitch@gimp.org>

	* app/undo.c: re-enabled transform undo. Fixes the transform tool
	crashes.

	* app/tools/gimptool.[ch]: put tool->ID back because the undo
	system uses it. Also, a unique tool serial number will be not too
	bad to have once we have module tools.

	* app/tools/gimptransformtool.[ch]: changed accordingly.

2001-03-31  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/pixel_surround.[ch]: lowlevel stuff taken out of the transform
	tool.

	* app/tools/gimpscaletool.[ch]: minor cleanups, declare
	gimp_scale_tool_register() publically.

	* app/tools/gimptransformtool.[ch]: removed the PixelSurround stuff,
	hardcode tr_tool->interactive to TRUE, removed the no_draw() function,
	register the tool options, misc. other fixes and bad hacks that need
	to go away.

	(All this non-interactive stuff needs to be done outside the tool
	system. A "non-interactive tool" is just pure nonsense)

	* app/tools/gimptool.h: spacing.

	* app/tools/tool_manager.c: tool_manager_register_tool_options():
	return after warning, don't simply continue and crash.

	* app/tools/tools.c: register the bezier select tool.

2001-03-30  Michael Natterer  <mitch@gimp.org>

	* app/devices.c
	* app/disp_callbacks.c
	* app/gimprc.c
	* app/scroll.c
	* app/tools/gimppainttool.[ch]
	* modules/colorsel_water.c: removed the GTK_HAVE_SIX_VALUATORS stuff
	in preparation of gtk 2.0 migration.

2001-03-30  Michael Natterer  <mitch@gimp.org>

	* app/fileops.[ch]
	* app/fileopsP.h: removed...

	* app/file-open.[ch]
	* app/file-save.[ch]
	* app/file-utils.[ch]: ...and split up into more hackable chunks.
	(didn't change any logic, just moved the functions around)

	* app/Makefile.am
	* app/app_procs.c
	* app/commands.c
	* app/docindex.c
	* app/gimpdnd.c
	* app/gimprc.c
	* app/menus.c
	* app/pdb/fileops_cmds.c
	* po/POTFILES.in
	* tools/pdbgen/pdb/fileops.pdb: changed accordingly (mostly changing
	#include's).

2001-03-30  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.[ch]: some random cleanups in pre-historic code.

	* app/fileops.c: useless cleanup (will be split into file-open.[ch]
	and file-save.[ch] soon).

	* app/gimppattern.c: implement GimpData's "duplicate" method.

	* app/global_edit.c: cleanup in preparation for making a view on a
	GimpContainer of cut buffers out of it.

	* app/gradient_editor.c: don't let the name entry expand vertically.

	* app/menus.c: typos.

2001-03-25 Seth Burgess <sjburges@gimp.org>

        * app/tools/gimpbezierselecttool.[ch]: added new files from
	Dave Neary <dneary@eircom.net> to give back bezier curves.  This
	might be entirely replaced at some future point.
	
	* app/Makefile.am
	* app/apptypes.h
	* app/path.[ch]
	* app/path_bezier.[ch]
	* app/paths_dialog.c
	* app/paths_dialogP.h
	* app/tools/Makefile.am
	* app/tools/gimpiscissorstool.c
	* app/tools/gimptool.c: applied patches to let bezier work again.

2001-03-25 Seth Burgess <sjburges@gimp.org>
	
	* app/tools/paint_options.c : applied 1-line patch by Dave Neary
	<dneary@eircom.net> that takes away the warning on startup of 
	dodgeburn.

2001-03-25 18:16:50  Adam D. Moss <adam@gimp.org>

	* app/convert.c: Define accessor function/macro for histogram
	reads and writes.  This slows us down a little because we avoid
	some of the dirty tricks we used when we knew that the histogram
	was a straight 3d array, so I've recovered some of the speed loss
	by implementing a 5d accessor function with good locality of
	reference.  This change is the first step towards quantizing in a
	more interesting colourspace than frumpy old RGB.

2001-03-24  Nathan Summers <rock@gimp.org>

	* app/tools/gimpscaletool.[ch]: Made the scale tool work again.
	Doesn't draw on the screen correctly, but works if you set the
	size in the dialog box.  Fixing the path tool should solve the
	problem.  Don't you love wierd dependancies?
	
	* app/tools/gimptool.c: stubbed some more path tool functions.
	
	* app/tools/gimptransformtool.[ch]: fixed some serious problems.
	I can't believe Gimp linked before!

	* app/tools/Makefile.am
	* app/tools/tools.c 
	* tools/pdbgen/pdb/tools.pdb: changed accordingly

2001-03-23  Seth Burgess <sjburges@gimp.org>

	* po-plug-ins/ro.po
	* po-script-fu/ro.po
	* po-libgimp/ro.po
	* plug-ins/perl/po/ro.po
	* plug-ins/perl/po/tr.po : added empty translation files so it would 
	compile again.  Translators, please add these when you add a new 
	language, even if they're blank!

2001-03-23  Seth Burgess <sjburges@gimp.org>
	
	* app/tools/Makefile.am
	* app/tools/gimpdodgeburntool.[ch]: dodgeburn works again.  Non-GUI
	disabled, some dialog bugs (gtk complains profusely) hanging around 
	still.

	* app/tools/gimptool.[ch]
	* app/tools/gimppainttool.c
	* app/tools/paint_options.c
	* app/tools/tools.c: changed accordingly.
 

2001-03-23  Marius Andreiana  <mandreiana@yahoo.com>

	* configure.in: Added ro (Romanian) to ALL_LINGUAS

2001-03-22  Stanislav Brabec  <utx@penguin.cz>  

        * app/tools/gimpbucketfilltool.c: Bucket fill threshold=0 must
        be allowed.

2001-03-18  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/app.pl: guard inclusion of <process.h> by G_OS_WIN32
	* tools/pdbgen/lib.pl: add include <string.h> if the generated code
	used memcpy().
	
	* tools/pdbgen/pdb/fileops.pdb: include process.h for G_OS_WIN32.

	* libgimp/gimpbrushes_pdb.c
	* libgimp/gimpdrawable_pdb.c
	* libgimp/gimpgradients_pdb.c
	* libgimp/gimpgradientselect_pdb.c
	* libgimp/gimpimage_pdb.c
	* libgimp/gimppaths_pdb.c
	* libgimp/gimppatterns_pdb.c
	* libgimp/gimpproceduraldb_pdb.c
	* tools/pdbgen/pdb/fileops.pdb: regenerated

2001-03-16  Hans Breuer  <hans@breuer.org>

	* plug-ins/common/gqbist.c : #define PATH_MAX as _MAX_PATH
	if it isn't defined

	* plug-ins/common/gz.c : #include <io.h> for win32 _get_osfhandle ()

	* plug-ins/gflare/gflare.c : #include <gtk/gtk.h> before using
	G_OS_WIN32

	* plug-ins/twain/twain.c : provide a main () entry point to allow
	to build as console application as well

2001-03-16  Hans Breuer  <hans@breuer.org>

	* app/makefile.msc
	* app/tools/makefile.msc : adapted to current state of file 
	renaming/restructuring. Probably will break again soon ...

	* app/context_manager.c : needs register_tools () prototype

	* app/gimplist.c
	* app/gimppalette-import.c : #include <string.h> for memcpy, strcmp 
	and friends

	* app/pdb/fileops_cmds.c : #include <process.h>	/* for _getpid() */
	(Yes I know that this is not the right place to change it, but hacking 
	pdbgen.pl to get platform specific headers is out of my scope)

	* app/test_commands.c : explicit casts to (GimpSetDrawableFunc) make
	it compile even with strict checks turned on.

	* app/undo.c (undo_pop_paint) : return a value even if the function 
	does nothing at the moment (makes it compile)

	* libgimp/gimp.def : updated

	* libgimp/gimpcolorselector.h : include <gmodule.h> to make 
	gimp_color_selector_(un)register prototypes conform to their
	implementation

	* libgimp/gimpfeatures.h : reflect 1.3 version

	* libgimpmath/gimpmatrix.c
	* libgimpwidgets/gimpdialog.c : more <string.h> inclusion

	* libgimp/makefile.msc : moved gimpadativesupersample.c to 
	libgimpcolor, which makes it reusable from the core, too.

	* libgimp/gimp.def : updated

	* libgimp/gimpproceduraledb.c : #include <string.h>

	* libgimpcolor/gimpcolor.def
	* libgimpcolor/makefile.msc : added gimpadaptivesupersample

	* libgimpmath/gimpmatrix.c : #include <string.h> for memcmp
	* libgimpwidgets/gimpdialog.c - " - for strcmp


2001-03-15 14:51:59Z  Marc Lehmann <pcg@goof.com>

	* gimptool-1.4.in: Fix --libs-noui so that plug-ins link against
        the new library names.
        * configure.in: Added the libtool-limitation-workaround to GIMP_LIBS*
        env vars so that gimp-perl works again.

2001-03-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: applied patch from 
        Tom Holroyd <tomh@po.crl.go.jp> which fixes wrong array size.

2001-03-14  Nathan Summers <rock@gimp.org>

	* tools/gimptransformtool.[ch]: merged in all the old transform
        tool code.

        * tools/gimptool.h: added dummy GtkTypes for all the transform tools.

2001-03-13  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" into ALL_LINGUAS..

2001-03-12  Simon Budig  <simon@gimp.org>

	* pixmaps/wilber.xpm: Fixed one pixel.

2001-03-12  Michael Natterer  <mitch@gimp.org>

	* app/gimplayerlistview.c: added some help_data and tooltips.

	* app/tools/Makefile.am
	* app/tools/gimperasertool.[ch]: one more.

	* app/tools/gimppaintbrushtool.[ch]
	* app/tools/gimppenciltool.[ch]: made all paint tools look the same.

	* app/tools/gimppainttool.c
	* app/tools/gimptool.[ch]
	* app/tools/paint_options.c
	* app/tools/tools.c: changed accordingly.

	* pixmaps/anchor.xpm: made it a bit smaller.

	* pixmaps/refresh.xpm: replaced with the "Recurrence" icon from
	evolution.

2001-03-12  Michael Natterer  <mitch@gimp.org>

	* pixmaps/Makefile.am
	* pixmaps/edit.xpm: new pixmap. "Someone" needs to go over the
	pixmaps one day ;)

	* app/gimpdatafactoryview.c
	* app/gimpdrawablelistview.c: use the new icon.

	* app/floating_sel.c: stupid: the new gimp_layer_get_opacity()
	accessor speaks in normalized [0.0..1.0] values, so the
	floating selection was invisible after blindly using it.

	* app/gimpimage.c: more stupid: a totally useless sanity clamping
	made the composite preview ugly. Fixed.

	* app/tools/tool_manager.c: why the heck did this never crash before:
	don't dereference a NULL GDisplay pointer.

2001-03-11  Seth Burgess      <sjburges@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimppenciltool.[ch]: no. 16 for your 
	pixelling pleasure.

	* app/tools/gimptool.[ch]
	* app/tools/paint_options.c
	* app/tools/tools.c: changed accordingly.
	
2001-03-11  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpiscissorstool.[ch]: no. 15 is alive.

	* app/tools/gimptool.[ch]
	* app/tools/selection_options.c
	* app/tools/tools.c: changed accordingly.

2001-03-11  Michael Natterer  <mitch@gimp.org>

	* app/gimplayerlistview.c: minor cleanups.

	* app/tools/Makefile.am
	* app/tools/gimpblendtool.[ch]: back again.

	* app/tools/gimptool.[ch]
	* app/tools/paint_options.c
	* app/tools/tools.c: changed accordingly.

2001-03-11  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimplayerlistview.[ch]: new subclass of GimpDrawableListView
	(the upcoming replacement of the layers dialog). Connects to the
	new GimpLayer signals using the layer container as signal proxy
	(see below).

	* app/gimpcontainerview.[ch]: made "set_container" a virtual
	function.  This is needed by the GimpLayerListView to
	connect/disconnect signals. Subclasses implementing this method
	MUST obey the following order of instructions:

	1. disconnect from signals related to GimpContainerView->container
	2. chain up (!!!)
	3. connect to signals related to GimpContainerView->container

	And yes, I will add DocBook files for all those new objects :)

	* app/gimppreview.[ch]: made "border_color" a GimpRGB instead of
	guchar[3]. Added gimp_preview_set_border_color().

	* app/gimpcontainergridview.c
	* app/gimplayerlistitem.c: use gimp_preview_set_border_color().

	* app/gimpcontainerlistview.c
	* app/gimpdrawablelistview.c: cleanup.

	* app/gimpdrawablelistitem.c: we can safely asume that our parent
	widget is a GimpDrawableListView and use it's "reorder_drawable"
	function pointer (after checking that it's there).

	* app/gimplistitem.c: connect the correct DND type when changing
	the container of a list item with "reorderable" enabled.

	* app/gimplayer.[ch]: added accessors and "*_changed" signals for
	layer->mode, layer->opacity and layer->preserve_trans.

	* app/disp_callbacks.c: fixed a FIXME: use the correct bucket fill
	tool context again.

	* app/tools/paint_options.[ch]: paint_mode_menu_new(): added a
	boolean which toggles the "Behind" item on/off to the same
	constructor can be used for all paint mode menus.

	* app/tools/gimptoolinfo.c: rect. select is the standard tool again.

	* app/brush_select.c
	* app/floating_sel.c
	* app/gimpimage.c
	* app/layers_dialog.c
	* app/pdb/layer_cmds.c
	* app/tools/gimpeditselectiontool.c
	* tools/pdbgen/pdb/layer.pdb: use the new layer accessors and the
	paint_mode_menu constructor.

	* app/commands.c
	* app/gdisplay.c
	* app/menus.c
	* app/undo.c
	* app/tools/gimppainttool.c
	* app/tools/gimptool.c
	* app/tools/paint_options.c
	* app/tools/tool_manager.c: put the #warning's back inside
	#ifdef __GNUC__

2001-03-10  Daniel Egger  <egger@suse.de>

	* plug-ins/common/sobel.c: Applied patch from
	Austin Donnelly to fix rendering of the topmost
	scanline.

2001-03-10  Garry R. Osgood <grosgood@rcn.com>
	
	* app/Makefile.am
	Inclusion of David's MMX code into Makefile now 
	depends on prior definition of HAVE_ASM_MMX.
	* app/pdb/procedural_db.c
	Line 276 cast of va_args to type GimpRGB seems
	very problematical on SGI, as the va_args macro
	expands to Extreme Ugliness and 
	(GimpRGB)(Extreme Ugliness) does not compile.
	RH Linux seems indifferent and accepts either.
	* app/commands.c
	* app/gdisplay.c
	* app/menus.c
 	* app/plug_in_cmds.c
	* app/undo.c
	* app/tools/gimppainttool.c
 	* app/tools/gimptool.c
	* app/tools/paint_options.c
	* app/tools/tool_manager.c
	s|#<remark about extreme buggedness>| 
	/* #<remark about extreme buggedness> */|
	Not all compilers are at peace with non-standard 
	pre-compiler directives. SGI MIPs compilers are 
	among the latter species.	
	
2001-03-11  Tor Lillqvist  <tml@iki.fi>

	* plug-ins/common/winclipboard.c: Enhance to also be able to paste
	BI_BITFIELDS images, 16- or 32-bit. Global indentation and spacing
	fix (use cvs diff -bu2 to see the real differences).

2001-03-09  Nathan Summers <rock@gimp.org>

	* app/tools/gimptransformtool.[ch]: it compiles, but probably isn't 
	useful

	* app/tools/Makefile.am: changed accordingly

2001-03-09  Zach Beane  <xach@mint.net>

	* TODO.xml: Added "Open into layer" entry.

2001-03-09  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/rect_selectP.h: removed.

	* app/tools/gimpfreeselecttool.[ch]
	* app/tools/gimpfuzzyselecttool.[ch]: reactivated.

	* app/tools/gimptool.[ch]: removed STUB()s and old crap.

	* app/tools/tools.c: register the new tools.

	* app/disp_callbacks.c
	* app/tools/selection_options.c: changed accordingly.

	* app/apptypes.h
	* app/tools/gimprectselecttool.c: cleanup.

2001-03-09  Nathan Summers <rock@gimp.org>

	* app/tools/gimptransformtool.[ch]: More work on the transform tool.
	Still does not compile, but it's much closer.

	* app/tools/Makefile.am
	* app/apptypes.h
	* app/undo.c: changed accordingly

2001-03-08  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpellipseselecttool.[ch]
	* app/tools/gimprectselecttool.[ch]: new objects based on a (heavily
	modified) patch by Dave Neary <dneary@eircom.net>.

	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimptool.[ch]
	* app/tools/selection_options.c
	* app/tools/tools.c: changed accordingly.

2001-03-08  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h
	* app/channel_ops.c
	* app/commands.c
	* app/convert.[ch]
	* app/fileops.c
	* app/floating_sel.c
	* app/gimage.h
	* app/gimage_mask.[ch]
	* app/gimpchannel.c
	* app/global_edit.h
	* app/image_map.c
	* app/layer_select.[ch]
	* app/layers_dialogP.h
	* app/lc_dialog.c
	* app/resize.c
	* app/toolbox.c
	* app/undo.h
	* app/undo_history.c
	* app/xcf.c
	* app/tools/gimpbycolorselecttool.h
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimppainttool.c
	* app/tools/transform_core.h: removed the GImage typedef, cleanup.

2001-03-08  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/[almost *]: lots of files renamed to gimp*tool.[ch]

	* app/commands.c
	* app/context_manager.c
	* app/disp_callbacks.c
	* app/gdisplay.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimpdnd.c
	* app/gimprc.c
	* app/global_edit.c
	* app/info_window.c
	* app/scale.c
	* app/scroll.c
	* app/undo.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/tools_cmds.c
	* po/POTFILES.in
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/tools.pdb: changed accordingly.

2001-03-06  Simon Budig  <simon@gimp.org>
	
	* app/mit.[ch]: Increased Mitch's age by one. Hopefully
	this won't break everything.

2001-03-06  Michael Natterer  <mitch@gimp.org>

	* app/gimage.[ch]: removed the layer mask functions.

	* app/gimpchannel.[ch]: added a boolean "dummy" parameter to
	gimp_channel_copy() so it has the same signature as
	gimp_layer_copy() and can be used by the GimpDrawableListView to
	generically duplicate drawables.

	* app/gimpcontainerview.c: call "select_item" with a NULL item
	before changing the underlying GimpContainer so subclasses have
	a chance to update (e.g. set button sensitivity).

	* app/gimpdnd.c: folded all the GtkType comparing code into a
	utility function (much more readable now).

	* app/gimpdrawablelistview.[ch]: activated the "raise", "lower",
	"duplicate" and "delete" buttons. I'm not really happy with all
	those function pointers passed to the constructor (and the dummy
	parameters I've added to some GimpChannel functions) -- OTOH the
	generic view maybe worth the "gboolean dummy" cruft hanging around
	in the channel class.

	* app/gimplayer.[ch]: removed the "apply_mask", "edit_mask" and
	"show_mask" booleans ...

	* app/gimplayermask.[ch]: .. and added them here together with
	proper accessors and "*_changed" signals.

	This also makes the layer mask undo code much clearer as we don't
	have to store the booleans separately.

	* app/gimplayerlistitem.c: badly hacked to acheive the correct
	indicator being drawn around the active drawable. This needs
	a new GimpPreview function for setting the border color.

	* app/gimplistitem.c: smaller horizontal spacing.

	* app/gimppreview.[ch]: added the "border_width" parameter also to
	gimp_preview_set_size() so we can modify all previews the same way
	after creation.

	* app/layers_dialog.c: no need to push an undo group around
	the "duplicate layer" code. Was this an artefact or did I miss
	something here ???

	* app/channel_ops.c
	* app/channels_dialog.c
	* app/gimage_mask.c
	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpdrawablelistitem.c
	* app/gimpimage.[ch]
	* app/qmask.c
	* app/test_commands.c
	* app/undo.c
	* app/xcf.c
	* app/pdb/channel_cmds.c
	* tools/pdbgen/pdb/channel.pdb
	* app/pdb/selection_cmds.c
	* tools/pdbgen/pdb/selection.pdb: changed accordingly.

	* app/pdb/internal_procs.c
	* app/pdb/layer_cmds.c
	* libgimp/gimplayer_pdb.[ch]
	* tools/pdbgen/pdb/layer.pdb: commented out the layer mask accessors
	from the perl code, so the functions temporarily disappeared all
	over the place.

	* plug-ins/Makefile.am: don't build XJT until the layer mask stuff
	is back.

	* pixmaps/eye.xpm: cropped it to it's minimal size.

2001-03-05  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimpimage-undo.[ch]
	* app/gimpundo.[ch]
	* app/gimpundostack.[ch]: added new GimpUndo and GimpUndoStack objects 
	which will be used for the upcoming new undo system. Actually my 
	current plan for the undo system is to keep it pretty much as it is...
	
	* app/gimpimage.[ch]: added new GimpUndoStacks but temporarily kept
	old GSLists around, so I don't break everything now.

2001-03-04  Michael Natterer  <mitch@gimp.org>

	* app/gimpbrushpreview.c
	* app/gimpgradientpreview.c
	* app/gimppalettepreview.c
	* app/gimppatternpreview.c
	* app/gimptoolinfopreview.c: removed all dnd code ...

	* app/gimppreview.c: ... and put it where is belongs.

	* app/gimpcontext.c: use g_type_is_a() instead of comparing the
	types directly.

	* app/gimpdnd.[ch]: same g_type_is_a() fix here. New function
	gimp_dnd_viewable_source_unset().

	* app/gimpdrawablelistitem.c: gtk_signal_connect_while_alive() to
	GimpDrawable's "visibility_changed" fixes a crash here.

	* app/gimplayerlistitem.c: check more strictly if DND reordering
	of layers is allowed.

	* app/gimplistitem.c: more DND reordering checking.
	Start drawing the drop indicator at x = name_label->allocation.x
	(looks better IMHO).

2001-03-04  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimplayerlistitem.[ch]: new widget derived from
	GimpDrawableListItem (additionally displays the layer mask),

	* app/gimplistitem.[ch]: added the preview_size to the struct so
	subclasses can create previews at arbitrary times. Removed the
	"preview_size" parameter from "set_viewable".

	* app/gimpimage.[ch]: removed the layer mask functions because
	they belong to GimpLayer.

	* app/gimplayer.[ch]: folded the layer mask code from GimpImage
	into GimpLayer's layer mask functions. Added a "mask_changed"
	signal which is emitted when a mask is added/removed. Added
	"push_undo" parameters to the functions so we can use them from
	the undo system.

	* app/undo.c: instead of badly poking the GimpLayer struct, use
	the accessors with push_undo = FALSE.

	* app/gimage_mask.c
	* app/gimpdrawablelistitem.c
	* app/layers_dialog.c
	* app/xcf.c
	* app/pdb/image_cmds.c
	* tools/pdbgen/pdb/image.pdb: changed accordingly.

2001-03-04  Michael Natterer  <mitch@gimp.org>

	* app/gimpdrawable.[ch]: new function gimp_drawable_set_visible().
	Renamed gimp_drawable_visible() to gimp_drawable_get_visible().
	Added a "visibility_changed" signal.

	* app/gimplistitem.[ch]: new virtual function "set_viewable"
	which allows subclasses to connect to the viewable's signals.

	* app/gimpdrawablelistitem.[ch]: added an eye button. Implement
	"set_viewable" to connect to the "visibility_changed" signal.

	* app/gimpchannel.[ch]: removed unused function
	gimp_channel_toggle_visibility().

	* app/channels_dialog.c
	* app/floating_sel.c
	* app/gimage_mask.c
	* app/gimpimage.c
	* app/gimplayer.c
	* app/layers_dialog.c
	* app/xcf.c
	* app/pdb/channel_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/pdb_glue.h
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/layer.pdb: removed direct access of
	drawable->visible and use the functions instead. Also makes PDB
	code generation nicer.

	* pixmaps/eye.xpm: cropped it a bit.

2001-03-04  Zbigniew Chyla  <cyba@gnome.pl>

	* app/commands.c (image_scale_callback),
	libgimpwidgets/gimpchainbutton.c (gimp_chain_button_destroy),
	libgimpwidgets/gimpcolorbutton.c (gimp_color_button_destroy):
	libgimpwidgets/gimppixmap.c (gimp_color_button_destroy):
	Move variable assignments out of assertions to allow compilation
	with "G_DISABLE_ASSERT" defined.

2001-03-04  Sven Neumann  <sven@gimp.org>

	* app/preferences_dialog.c (prefs_save_callback): applied a patch
	from David Odin <David.Odin@bigfoot.com> that fixes a typo in the code.

2001-03-04  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimpdrawablelistitem.[ch]
	* app/gimplistitem.[ch]: new widgets capable of reordering
	themselves using DND.

	* app/gimpcontainerlistview.c: removed stuff which is now done
	by the GimpListItem.

	* app/gimpdnd.[ch]: new function gimp_dnd_get_drag_data(widget)
	which returns a GimpViewable using the widget's drag callback.

	* app/gimpdrawablelistview.c: implement GimpContainerView's
	"insert_item" method and enable reordering for the created
	GimpListItem.

2001-03-03  Michael Natterer  <mitch@gimp.org>

	* app/appenums.h: renamed ZoomType to GimpZoomZype and added it
	here.

	* app/commands.c
	* app/disp_callbacks.c
	* app/nav_window.c
	* app/scale.[ch]: changed accordingly.

	* app/tools/Makefile.am
	* app/tools/magnify.[ch]: back as object.

	* app/tools/tool.c: removed the old ToolInfo entry.

	* app/tools/tools.c: register it.

2001-03-02  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpselectiontool.[ch]: new files ported by
	Dave Neary <dneary@eircom.net>. Changed them a bit to inherit
	from GimpDrawTool and added implementations of "modifier_key"
	and "oper_update" because they are shared by 4 of the old
	selection tools.

2001-03-01  Daniel Egger  <egger@suse.de>

	* app/fileops.c: Applied patch from Dave Neary to fix
	bug 37633 "File->Revert doesn't resize canvas".

2001-03-01  Stanislav Brabec  <utx@penguin.cz>

        * plugins/common/despeckle.c: Fixed black_level range.
        Valid range should be -1..255, not 0..256, because comaparison
        is > and <=. Bug became visible after last Martin Weber's fix.
        There must be for both black and white levels one extra value
        to cover all numbers 0..255.

2001-03-01  Michael Natterer  <mitch@gimp.org>

	* app/tools/crop.[ch]: we need to override GimpDrawTool's "draw"
	method to actually see something.

	* app/channels_dialog.c
	* app/layers_dialog.c: fixed the crash introduced by the migration
	of gimage->layers and gimage->channels to GimpContainer.

2001-02-20  Nathan Summers  <rock@gimp.org>

	* app/tools/gimptransformtool.c
	* app/tools/gimptransformtool.h: Started work on the TransformCore.  
	Very incomplete.  Needs a friendly visit from genmarshal.pl.  Not yet 
	included in the build.  Move along now, folks, there's nothing more to
	see.

2001-02-28  Nathan Summers  <rock@gimp.org>

	* app/tools/crop.c
	* app/tools/crop.h: Fixed a couple instances where the crop tool was
	incorrectly inheriting from GimpTool instead of GimpDrawTool.  The crop 
	tool still does not work completely correctly on my machine.  It does
	not show the lines and sometimes it includes garbage.

2001-02-28  Sven Neumann  <sven@gimp.org>

	Please, do not change the files in app/pdb directly, they are
	autogenerated. And, please, whatever you change, type make in
	the toplevel srcdir, since pdbgen might decide it has to change 
	some more files because of your changes.
	
	* app/pdb/layer_cmds.c
	* app/pdb/tools_cmds.c
	* app/tools/crop.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/tools.pdb: made everything compile again

2001-02-27  Jay Cox  <jaycox@gimp.org>

	* app/appenums.h
	* app/gimplayer.c
	* app/layers_dialog.c: When adding a layer mask allow the option
	of using the current selection (or it's inverse) to initialise
	the mask.

2001-02-28  Michael Natterer  <mitch@gimp.org>

	* app/gdisplay.c
	* app/gimage.c. #include "tools/tool.h"

	* app/tools/edit_selection.[ch]: the arrow_key function is not
	a method of edit_selection but of any tool that needs it.

	* app/tools/gimppaintbrushtool.c: removed variables.

	* app/tools/move.c: use the arrow_key function.

	* app/tools/tool_manager.h: removed the include of "tool.h"

2001-02-28  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/edit_selection.[ch]: back as real tool which gets
	temporarily pushed to the tool_manager's new tool stack.

	* app/tools/move.c
	* app/tools/text_tool.c: call the edit_selection stuff again.

	* app/tools/tool.c: added a STUB().

	* app/tools/tool_manager.[ch]: implemented tool_manager_push_tool()
	and tool_manager_pop_tool().

2001-02-28  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/bucket_fill.[ch]: one more...

	* app/tools/fuzzy_select.c: everything commented out except the
	find_region stuff.

	* app/tools/gimpcolorpickertool.c: cosmetic.

	* app/tools/paint_options.c: #include "bucket_fill.h"

	* app/tools/tool.[ch]: removed STUB()'s.

	* app/tools/tools.c: register it.

2001-02-28  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/ink.[ch]: back as object.

	* app/tools/paint_options.c: #include "ink.h"

	* app/tools/tool.h: removed the type #define.

	* app/tools/tools.c: register it.

2001-02-28  Michael Natterer  <mitch@gimp.org>

	* app/context_manager.[ch]: made the global_paint_options public.

	* app/tools/gimptoolinfo.[ch]: added a "tool_context" boolean to
	the constructor and create a private context for the tool
	initialized with global_paint_options' values.

	* app/tools/tool_manager.[ch]: changed tool_manager_register_tool()
	accordingly.

	* app/tools/gimpcolorpickertool.c
	* app/tools/measure.c
	* app/tools/move.c
	* app/tools/text_tool.c: changed accordingly.

	* app/tools/paint_options.[ch]: added the fade out and gradient
	options here so they can be used by all paint tools.

	* app/tools/gimppaintbrushtool.c: removed them here. Changed
	the non_gui stuff: removed the non_gui_paint_func and handle
	the non_gui stuff in the normal paint method. Allocate a
	non_gui_paintbrush instead of the old non_gui_paint_core.

	The non_gui stuff will change totally and will be handled
	by GimpPaintTool only.

	* app/tools/tool.c: removed the STUB()'s again.

2001-02-27  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am: build the measure tool again.

	* app/tools/gimpcolorpickertool.c: correct prototypes for some
	functions so we don't get warnings about incompatible assignments
	in "class_init", chain up in "control".

	* app/tools/gimpdrawtool.c: added an implementation of "control"
	which can be called from subclasses so we don't need to call
	GimpDrawTool's methods directly from there.

	* app/tools/gimppaintbrushtool.[ch]: create it's tool options so it
	doesn't crash. Commented out the non_gui stuff. We need a different
	interface for this.

	* app/tools/gimppainttool.[ch]: some cleanups: call the draw tool's
	"control" function, fixed "cursor_update", fixed indentation.

	* app/tools/measure.[ch]: made it work again (properly subclass
	GimpDrawTool).

	* app/tools/tool.c: re-added the non_gui paintbrush STUB()'s

	* app/tools/tools.c: don't allocate the non_gui stuff.
	GimpPaintTool is an abstract superclass, so we cannot create
	an instance of it. Moreover, the current non_gui stuff assumes
	that there is something like a "paint_core" and changes it's
	virtual function pointers, breaking the object system totally.

2001-02-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/header.c: applied patch from Chuck Mason 
	<chuckjr@unbounded.com> that fixes wrong output of header plug-in.

2001-02-27  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h
	* app/Makefile.am
	* app/gimpdrawablelistview.[ch]: new widget. The upcoming replacement
	for the layers and channels dialogs.

	* app/test_commands.[ch]: put the test dialogs here...

	* app/commands.[ch]: ... and made this one clean again.

	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpcontainerview.[ch]: some signal handling fine tuning.

	* app/gimpimage.[ch]: emits "active_layer_changed" and
	"active_channel_changed" signals now. The semantics of
	gimage->active_layer and gimage->active_channel have changed a bit.
	We now have either an active layer _or_ and active channel (there
	is no active layer any more if a channel is active).

	* app/channel_ops.c
	* app/floating_sel.c
	* app/gdisplay.c
	* app/layers_dialog.c
	* app/menus.c: changed accordingly.

	* app/tools/gimpcolorpickertool.c: actually assign the draw_class
	vraiable in the class_init function.

	* app/tools/gimpdrawtool.[ch]
	* app/tools/tool.c: removed the _new() functions because these
	objects are abstract superclasses. Did some cleanup.
	Nathan, please configure you editor to _not_ produce any tabs
	in the source code.

	* app/tools/gimppaintbrushtool.[ch]: "blurb" and "help" are tagged
	with _(), not N_(). Put the register function to the header.

	* po/POTFILES.in: made it compile again.

2001-02-26  Nathan Summers <rock@gimp.org>

	* app/tools/gimpdrawtool.c
        * app/tools/gimpdrawtool.h
        * app/tools/gimppainttool.c
        * app/tools/gimppainttool.h
        * app/tools/gimppainttool_kernels.h: Created GimpDrawTool and
        GimpPaintTool, real classes that replace the old DrawCore and
        PaintCore

        * app/Makefile.am
        * app/apptypes.h
        * app/context_manager.c
        * app/gdisplay.c
        * app/gimage_mask.c
        * app/gimpbrush.c
        * app/gimpbrush.h
        * app/gimpbrushgenerated.c
        * app/gimpbrushpipe.c
        * app/gimpcontext.c
        * app/info_window.c
        * app/path_transform.h
        * app/undo.c
        * app/pdb/tools_cmds.c
        * app/tools/Makefile.am
        * app/tools/bezier_selectP.h
        * app/tools/gimptoolinfo.c
        * app/tools/measure.c
        * app/tools/measure.h
        * app/tools/move.c
        * app/tools/paint_options.c
        * app/tools/tool.c
        * app/tools/tool.h
        * app/tools/tools.c
        * app/tools/transform_core.h
        * tools/pdbgen/Makefile.am: changed accordingly

        * libgimp/Makefile.am: fixed glitch in build

        * app/tools/gimpcolorpickertool.c
        * app/tools/gimpcolorpickertool.h
        * app/tools/gimppaintbrushtool.c
        * app/tools/gimppaintbrushtool.h:new names

        * app/draw_core.c
        * app/draw_core.h
        * app/tools/color_picker.c
        * app/tools/color_picker.h
        * app/tools/paint_core.c
        * app/tools/paint_core.h
        * app/tools/paint_core_kernels.h
        * app/tools/paintbrush.c
        * app/tools/paintbrush.h: removed

2001-02-25  Michael Natterer  <mitch@gimp.org>

	* app/channel_ops.c
	* app/channels_dialog.c
	* app/commands.c
	* app/floating_sel.c
	* app/gdisplay.c
	* app/gimpimage.[ch]
	* app/layer_select.c
	* app/layers_dialog.c
	* app/undo.c
	* app/xcf.c
	* app/tools/move.c: remove direct access of gimage->active_layer and
	gimage->active_channel. Reading access is of course harmless, but
	gimp_image_set_active_blah() will trigger a signal emission soon.

	It will probably be neccessary to change the functions to accept
	NULL layers and channels to acheive exactly what weird places like
	floating_sel.c did before by setting it directly.

	* gimptool-1.4.in
	* libgimp/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimpwidgets/Makefile.am
	* plug-ins/libgck/gck/Makefile.am: made linking against stable
	GIMP installed in the same prefix work again by renaming all our
	libraries explicitly to libgimp<foo>-1.3.* (not as part of the
	libtool release but as part of the library name). Removed the
	libtool release to avoid double versioning. This has to be
	hardcoded in the libraries' Makefile.am ...

	* app/Makefile.am
	* plug-ins/FractalExplorer/Makefile.am
	* plug-ins/Lighting/Makefile.am
	* plug-ins/MapObject/Makefile.am
	* plug-ins/bmp/Makefile.am
	* plug-ins/common/Makefile.am
	* plug-ins/common/mkgen.pl
	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/faxg3/Makefile.am
	* plug-ins/fits/Makefile.am
	* plug-ins/flame/Makefile.am
	* plug-ins/fp/Makefile.am
	* plug-ins/gap/Makefile.am
	* plug-ins/gdyntext/Makefile.am
	* plug-ins/gfig/Makefile.am
	* plug-ins/gflare/Makefile.am
	* plug-ins/gfli/Makefile.am
	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/ifscompose/Makefile.am
	* plug-ins/imagemap/Makefile.am
	* plug-ins/maze/Makefile.am
	* plug-ins/mosaic/Makefile.am
	* plug-ins/pagecurl/Makefile.am
	* plug-ins/plugin-helper/Makefile.am
	* plug-ins/print/Makefile.am
	* plug-ins/rcm/Makefile.am
	* plug-ins/script-fu/Makefile.am
	* plug-ins/sel2path/Makefile.am
	* plug-ins/sgi/Makefile.am
	* plug-ins/webbrowser/Makefile.am
	* plug-ins/xjt/Makefile.am: ... while all other Makefiles can simply
	link against "libgimp<foo>-$(LT_RELEASE).la"

2001-02-24  Michael Natterer  <mitch@gimp.org>

	* app/pixmaps2.h: commented out "text_width" and "text_height"

	* app/tools/Makefile.am
	* app/tools/text_tool.[ch]: "It was really dead, Jim!"

	* app/tools/tool.c: removed STUBs

	* app/tools/tools.c: register it.

2001-02-24  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: updated.

	* app/appenums.h
	* app/apptypes.h: prefixed the cursor stuff with "Gimp", added
	the new stock tool cursor enum. Removed the old ToolType enum.

	* app/cursorutil.[ch]
	* app/gdisplay.[ch]: removed the old ToolType enum and prefixed
	the functions with "gimp_". Also stripped all "toggle cursor"
	stuff from the cursor code, so the new API is easier and not
	depending on the tool system.

	All existing tool cursors can be used via the new stock tool
	cursor enum, so no tool has to fiddle around with bitmap cursors.
	There will be an cursorutil function for registering stock tool
	cursor types on the fly.

	* app/disp_callbacks.c
	* app/scroll.[ch]: moved the display scrollbar callbacks from
	scroll.[ch] to disp_callbacks.c. Removed some crap from scroll.h

	* app/tools/tool.[ch]: removed the BitmapCursor pointers from the
	tool class struct and add cursor and toggle cursor IDs to the
	GimpTool struct. Work in progress.

	* app/dialog_handler.c
	* app/tools/bezier_select.c
	* app/tools/blend.c
	* app/tools/bucket_fill.c
	* app/tools/by_color_select.c
	* app/tools/clone.c
	* app/tools/color_picker.c
	* app/tools/convolve.c
	* app/tools/crop.c
	* app/tools/dodgeburn.c
	* app/tools/edit_selection.c
	* app/tools/ellipse_select.c
	* app/tools/flip_tool.c
	* app/tools/free_select.c
	* app/tools/fuzzy_select.c
	* app/tools/ink.c
	* app/tools/iscissors.c
	* app/tools/magnify.c
	* app/tools/measure.c
	* app/tools/move.c
	* app/tools/paint_core.[ch]
	* app/tools/perspective_tool.c
	* app/tools/rect_select.c
	* app/tools/rotate_tool.c
	* app/tools/scale_tool.c
	* app/tools/shear_tool.c
	* app/tools/text_tool.c
	* app/tools/transform_core.[ch]: changed accordingly. Did this
	"blind" for most tools because they don't compile. The changes are
	minimal, so there should be no conflicts.

2001-02-24  Michael Natterer  <mitch@gimp.org>

	* app/commands.[ch]: added cmd_callbacks for the toolbox and
	the preferences dialog.

	* app/context_manager.c: cleanup.

	* app/gimppreview.[ch]: made gimp_preview_render() public.

	* app/gimptoolinfopreview.c
	* app/tools/gimptoolinfo.c: the tool previews look nice now but
	are still ugly implemented (it renders tons of temp_bufs on each
	state change).

	* app/indicator_area.[ch]: pass a context to the constructor.

	* app/menus.c: don't call the toolbox and the prefs dialog
	directly but dispatch via commands.[ch]

	* app/preferences_dialog.[ch]
	* app/toolbox.[ch]: renamed the constructor / raise function, cleanup.

	* app/tools/color_picker.c: tried to get the shortcut working again.

	* app/tools/paint_options.c: the brush dialog's paint options
	are shown/hidden from the context manager now.

2001-02-23  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c: removed crap from ancient times when tools
	used to be an enum.

	* app/brush_select.[ch]: cleaned up the gui and made global paint
	mode toggling much simpler by expanding vertically instead of
	reparenting.

	* app/context_manager.c: removed hack by using a tool manager
	accessor function.

	* app/gimpcontext.c: use the new standard tool info object. Tools
	also _behave_ like all other data types now (can e.g. be
	refreshed).

	* app/tools/tool.[ch]

	* app/tools/gimptoolinfo.[ch]: added an "identifier" which is an
	untranslated string with a meaningful prefix and name, e.g.
	"gimp:color_picker_tool". Renamed "tool_name" and "tool_desc"
	to "blurb" and "help", changed the constructor accordingly.
	Added gimp_tool_info_get_standard() to make the context work
	with tool refresh.

	* app/tools/tool_manager.[ch]
	* app/tools/tools.c: removed the global list of tool class
	structures because the tool info list is in place.
	Added tool_manager_register_tool_options() which calls
	tool_options_dialog_add() and registers the options in the
	global_tool_info_list.

	* app/tools/Makefile.am
	* app/tools/paint_options.[ch]
	* app/tools/selection_options.[ch]
	* app/tools/tool_options.[ch]
	* app/tools/tool_options_dialog.[ch]: build them all again. This
	is mostly the old tool options system with minor modifications to
	work with the new stuff. The tool options auto-update with the user
	context now, so there are no update functions any more.

	* app/gimpdnd.c
	* app/toolbox.c
	* app/tools/color_picker.c
	* app/tools/measure.c
	* app/tools/move.c: changed accordingly.

2001-02-23  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimptoolinfopreview.[ch]: new widget.

	* app/gimppreview.c
	* app/tools/gimptoolinfo.c
	* app/gimpdnd.c: changed for the tool info preview. Still buggy
	and looks a bit funny at the moment :-)

	* app/commands.[ch]
	* app/menus.c: small new feature: shift-X toggles the whole context.

2001-02-23  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/pixmaps.h
	* app/wilber.h: removed some data files from app/

	* pixmaps/Makefile.am
	* pixmaps/default.xpm
	* pixmaps/swap.xpm
	* pixmaps/wilber3.xpm: added them here.

	* app/pixmaps2.h: added the "dialog_bits" stuff here.

	* app/tips_dialog.c
	* app/toolbox.c: use the new XPMs and remove hacks which created
	the GdkPixmaps and GtkPreviews manually.

2001-02-22  Simon Budig  <simon@gimp.org>

	* app/interface.c
	* app/gdisplay.h
	* app/gdisplay.c: Icons now update every 7.5 seconds in the
	idle loop. Also the aspect ratio is correct now. Mitch promised
	to hack a preferences option to disable this stuff...  :-)

Thu Feb 22 18:23:10 GMT 2001  Adam D. Moss  <adam@gimp.org>

	* tools/pdbgen/pdb/channel.pdb: Save a bunch of slow-witted
	old people like myself from having to upgrade PERL for the sake
	of sugar.  Baby.

2001-02-21  Michael Natterer  <mitch@gimp.org>

	* configure.in: forgot one s/gimptool/gimptool-1.4/

	* app/appenums.h: removed "UPDATE_CURSOR" from the ToolAction enum.

	* app/context_manager.c: removed the toolbox toggle button updating
	code here...

	* app/toolbox.c: ...and handle it in the toolbox itself.

	* app/devices.c: removed some obsolete old tool suff.

	* app/tools/Makefile.am
	* app/tools/move.[ch]: reactivated. Disabled the edit_selection
	stuff for now. We need a way to temporary push tools to some stack
	of the tool manager.

	* app/tools/tool.[ch]: removed lot of stuff that is obsolete or
	handled by the GimpToolInfo object now.

	* app/tools/tool_manager.[ch]: stripped all tool options stuff
	because they will be able to follow tool changes themselves.
	Renamed some functions to be consistent.

	* app/tools/tools.c: register the move tool again.

	* app/cursorutil.c
	* app/disp_callbacks.c
	* app/gimage_mask.c
	* app/global_edit.c
	* app/tools/color_picker.c
	* app/tools/measure.[ch]
	* app/tools/tool_options.c: changed accordingly.

2001-02-21  Simon Budig   <simon@gimp.org>

	* app/disp_callbacks.c
	* app/gdisplay.c
	* app/gdisplay.h
	* app/interface.c: Moved the Icon preview stuff to the idle-loop.

2001-02-21  Simon Budig   <simon@gimp.org>
	
	* app/interface.c: Fixed stupid bug with the icon preview when
	creating the second preview. Please note that it still crashes
	on the second image, but this is hopefully not my fault...  :-)

2001-02-21  Michael Natterer  <mitch@gimp.org>

	Made the tool system work again and integrated it back with the
	GimpContext. It's a hack between old, new and freshly hacked
	stuff. There are still lots of warnings but at least we can switch
	tools again.

	* app/tools/Makefile.am
	* app/tools/gimptoolinfo.[ch]: resurrected as real object.
	The GimpToolInfo objects are derived from GimpData, which gives
	us the tool icon stuff for free. Also, we need a list of _objects_
	which is allocated all the time. All tools are required to have
	a "register" function which registers themselves with the list
	of GimpToolInfo objects which is maintained by the tool manager.

	* app/tools/tool.[ch]: made a real GtkObject with properly named
	functions out of it. The former "active_tool_control" is of
	course not the default implementation of the tool's "control"
	method but a hack _around_ it, so it went to the tool manager.

	* app/tools/color_picker.[ch]
	* app/tools/measure.[ch]: ditto. Added "register" functions and
	"destroy" implementations so the tools go away after use.

	* app/tools/tool_manager.[ch]: badly hacked at the moment to keep
	both the list of class structures _and_ the tool info list.

	* app/tools/tools.c: call the tools' register functions.

	* app/gimpcontext.[ch]: store a pointer to a GimpToolInfo object
	as "active_tool" in the context, so we're independent of tools
	being allocated or not. It's treated just like a brush or pattern
	now.

	* app/gimpdnd.[ch]: made tool DND work like all other DND types.

	* app/devices.[ch]: also here: the tool is just a normal data object
	now, resulting in removal of lots of code.

	* app/commands.c
	* app/context_manager.c: updated the tool select and context stuff
	to work again.

	* app/toolbox.c: removed the old pixmap buttons and put GimpPreviews
	inside the tool buttons. Still needs an own preview type to
	look nice.

	* app/disp_callbacks.c
	* app/about_dialog.c
	* app/app_procs.c
	* app/appenums.h
	* app/apptypes.h
	* app/gimage.c
	* app/gimppalette.c
	* app/gimppreview.c
	* app/gimprc.c
	* app/info_window.c
	* app/menus.c
	* app/palette_select.h
	* app/scale.c
	* app/scroll.c: lots of changes to make it work again.

2001-02-21  Daniel Egger  <egger@suse.de>

	* app/gimpchecks.h: New file containing the check types.
	
	* app/image_render.h: ... definitions taken from here.
	* app/temp_buf.c:
	* app/temp_buf.h: New function temp_buf_new_check to create
	a new checked temp_buf.

2001-02-20  Simon Budig  <simon@gimp.org>
	
	* app/gdisplay.[ch]
	* app/disp_callbacks.c
	* app/interface.c: Added preliminary support for Preview icons.

	This is not finished: We need a better way to get previews with
	a specific depth and probably a rendered Checkerboard for the
	alpha channel. Also the update function is now bound to a click
	in the top left menu-button and should go in some idle-stuff.
	Please test this on various window managers and give some
	feedback. The last point is the aspect ratio of the generated
	previews...

2001-02-20  Nick Lamb  <njl195@zepler.org.uk>

	* libgimpwidgets/gimpwidgets.c: include string.h

2001-02-20  Michael Natterer  <mitch@gimp.org>

	* app/gimpdnd.[ch]: removed all brush, pattern, gradient and palette
	DND functions because there are generic GimpViewable DND functions
	now.

	* app/disp_callbacks.[ch]
	* app/interface.c: changed accordingly.

2001-02-19  Michael Natterer  <mitch@gimp.org>

	* app/commands.[ch]
	* app/menus.c: first version of the new layers and channels dialogs.

	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c: allow creation with a NULL container.

	* app/gimpdnd.[ch]: added generic DND functions for all drawable
	types (not just setting the DND icon). Started to remove code
	duplication.

	* app/gimpdrawablepreview.c: with some magic calculations and ugly
	assumptions the drawable previews now look exactly like in the old
	L&C dialog.

	* app/gimpimagepreview.c: no need to say "return" at the end of a
	void function.

	* app/gimppreview.[ch]: added the "is_popup" boolean also to the
	default constructor. Call gimp_preview_set_viewable() before
	calculating the preview size.

2001-02-19  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimppalette-import.[ch]: new files. The import functions
	stripped from all UI crap.

	* app/palette_import.c: removed from here.

2001-02-19  Sven Neumann  <sven@gimp.org>

	* app/gimpimage.[ch]: converted gimage->layers and gimage->channels
	to GimpLists.
	
	* app/channel_ops.c
	* app/channels_dialog.c
	* app/commands.c
	* app/convert.c
	* app/floating_sel.c
	* app/gdisplay.c
	* app/gimpdrawable.c
	* app/layers_dialog.c
	* app/resize.c
	* app/undo.c
	* app/xcf.c
	* app/pdb/display_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/tools/crop.c
	* app/tools/edit_selection.c
	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb: changed accordingly

2001-02-19  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainer.[ch] (gimp_container_insert): new function.

2001-02-19  Michael Natterer  <mitch@gimp.org>

	* app/context_manager.c
	* app/gimpdatafactory.c
	* app/gimpdatalist.[ch]
	* app/gimplist.[ch]
	* app/module_db.c: return a GimpContainer from all container
	subclass constructors.

	* app/gimppalettepreview.c
	* app/palette.c: changed the preview a bit. Still ugly.

2001-02-19  Michael Natterer  <mitch@gimp.org>

	* gimp.m4
	* gimptool.in: removed.

	* gimp-1.4.m4
	* gimptool-1.4.in: added modified versions. gimp-1.4.m4 is untested.
	The m4 macro is now called AM_PATH_GIMP_1_4()

	* .cvsignore
	* Makefile.am
	* configure.in: changed accordingly.

	* libgimp/Makefile.am
	* libgimpcolor/Makefile.am
	* libgimpmath/Makefile.am
	* libgimpwidgets/Makefile.am: install the header files in
	$includedir/gimp-MAJOR.MINOR/<libname>

	* app/brush_edit.c: increased toplevel container border size to 4.

	* app/gimpdatafactoryview.c: don't generate multiple "copy"s when
	duplicating data objects.

	* app/gradient_editor.c: cleaned up the GUI.

	* app/lc_dialog.c: removed the "Close" button.

2001-02-18  Michael Natterer  <mitch@gimp.org>

	* app/gimpdnd.[ch]: added DND source functions which work by
	GtkType.

	* app/commands.c
	* app/brush_select.c
	* app/gradient_select.[ch]
	* app/pattern_select.c: removed the DND code here because it's all
	done by the GimpContainerView now.

	* app/gimpbrushpreview.c
	* app/gimpgradientpreview.c
	* app/gimppalettepreview.c
	* app/gimppatternpreview.c: use the DND by-type connect functions.

	* app/gimpbrushgenerated.c: implemented "duplicate", cleanup.

	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpcontainerview.[ch]: added a "activate_item" signal
	method which is emitted by the subclasses to indicate double click.

	* app/gimpdatafactoryview.c: connect to "activate_item" and show
	the editor.

	* app/convert.c
	* app/gimppalette.[ch]
	* app/palette.c
	* app/paletteP.h
	* app/palette_import.c
	* app/palette_select.[ch]: major cleanup: Behaves like the other
	datatypes now: DND, context stuff, GimpContainerListViews in
	the dialogs etc. Mostly just removal of code.

	* app/gradient_editor.c: fixed signal blocking/unblocking.

	* plug-ins/script-fu/scripts/Makefile.am: install the "Test Sphere"
	script again.

2001-02-17  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainer.[ch]
	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpcontainerview.[ch]
	* app/gimplist.c
	* app/gimpmarshal.[ch]: the GimpContainer has a new virtual "reorder"
	method which is much more eficient then the current remove/add
	braindeadness when renaming data objects.
	Changed the views to connect to "reorder" and call the
	GimpContainerView's new "reorder_item" method which then does
	the right thing in the view subclasses.

	* app/gimpdatafactory.c
	* app/gimpdatafactoryview.c
	* app/gimpdatalist.[ch]: removed the data list loading and saving
	stuff from GimpDataList because that's the job of the
	GimpDataFactory.

	* app/brush_edit.[ch]
	* app/brush_select.c: cleanup.

	* app/gradient_editor.[ch]: changed it to work like the brush
	editor: return a GradientEditor pointer in the constructor
	and statically store this pointer in the gradient selection file.
	Removed the global "g_editor" variable and added tons of
	GradientEditor* variables to function calls so they know their
	context without the global variable.

	* app/gradient_select.c: changed accordingly.

2001-02-17  Seth Burgess <sjburges@gimp.org>
	
	* app/tools/Makefile.am 
        * app/tools/measure.[ch]: added back in, changing as needed for basic 
	operation.  Probably pretty buggy still.

	* app/tools/tools.c: changed one of the tool initializations to be
	the measure tool.  Now only measure tools are availble (though it
	would appear both are visually).  I don't think the toolbox selection 
	stuff is operational yet.

	* app/tools/color_picker.[ch]: minor cleanup

2001-02-16  Stanislav Brabec  <utx@penguin.cz>

        On request of Martin Weber <martweb@gmx.net>.
        * plugins/common/despeckle.c: Fixed comparison *sort_ptr > black_level.
        Only adopting white_level had a visual effect. This fix causes
        that also adopting blck_level works also.

2001-02-14  Michael Natterer  <mitch@gimp.org>

	* HACKING: added a note about apptype.h and about not including
	headers in headers.

	* app/apptypes.h: added GimpTool and BitmapCursor.

	* app/cursorutil.h
	* app/devices.h
	* app/draw_core.h
	* app/tools/color_picker.h
	* app/tools/tool.h
	* app/tools/tool_options.h
	* app/gimpcontext.h: removed includes of "tools/tool.h"

	* app/gimprc.[ch]: indentadion cleanup, added
	"module_db_load_inhibit".

	* app/module_db.c: removed the above variable here.

	* app/gimpdata.[ch]: added a vitrual "duplicate" method.

	* app/gimpbrush.[ch]
	* app/gimpbrushgenerated.[ch]
	* app/gimpbrushpipe.[ch]
	* app/gimpgradient.[ch]
	* app/gimppalette.[ch]
	* app/gimppattern.[ch]: all "load", "new" and "get_standard"
	functions return a GimpData pointer now.

	* app/gimpdatafactory.[ch]: made some stuff const.

	* app/gimpdatafactoryview.c: activate the "duplicate" button and
	set the initial button sensitivity correctly.

	* app/brush_select.c
	* app/gradient_select.c
	* app/pattern_select.c: use the new GimpDataFactoryView.

	* libgimp/Makefile.am: grouped the file to sort out what _may_
	go to subdirs or separate libs.

	* libgimp/gimpenv.[ch]: added many "const".

	* app/app_procs.c
	* app/brush_edit.c
	* app/gimpcontext.c
	* app/gimpdnd.c
	* app/gradient_editor.c
	* app/palette.c
	* app/palette_import.c
	* app/user_install.c: many related changes.

	* libgimpmath/gimpmathtypes.h
	* libgimpmath/gimpvector.[ch]: minor cleanups.

	* plug-ins/script-fu/script-fu.c: gimp_data_directory() is const now.

2001-02-13 Nathan Summers <rock@gimp.org>

	* configure.in
	* plug-ins/plugin-helper/*: prototype for an extension that allows
	gmodules as plugins.  Known bug: crashes on gmodules with a static
	"query" function
        
	* app/tools/tool.c 
	* app/tools/tool.h: created new GimpTool object.  Did away with
	ToolInfo.  Most tools still need to be ported over to the new api.

        * app/tools/tools.c: now contains the initialization function to
	register the tools with the Gimp

        * app/tools/tools.h: renamed to tool.h

	* app/Makefile.am 
	* app/app_procs.c
        * app/apptypes.h 
	* app/commands.c 
	* app/context_manager.c
        * app/cursorutil.c 
	* app/devices.c 
	* app/devices.h
        * app/disp_callbacks.c 
	* app/draw_core.c 
	* app/draw_core.h
        * app/gdisplay.c 
	* app/gimage.c 
	* app/gimage_mask.c
        * app/gimpcontext.c 
	* app/gimpcontext.h 
        * app/global_edit.c 
	* app/info_window.c 
	* app/interface.c
        * app/libgimp_glue.c 
	* app/menus.c 
	* app/paint_core.h
        * app/paint_options.h 
	* app/scale.c 
	* app/scroll.c 
	* app/toolbox.c
	* app/undo.c 
	* app/tools/Makefile.am
        * app/tools/color_picker.c 
	* app/tools/color_picker.h
        * app/tools/paint_core.c 
	* app/tools/tool_options.c
        * app/tools/tool_options.h 
	* app/tools/tool_options_dialog.c
	* libgimp/gimp.c 
	* plug-ins/Makefile.am: changed acordingly

        * plug-ins/script-fu/script-fu-scripts.c: fixed typo in comment.
	Pathetic, huh?

2001-02-14  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* po/POTFILES.in
	* app/brushes.[ch]
	* app/gradients.[ch]
	* app/palettes.[ch]
	* app/patterns.[ch]: removed.

	* app/gimpdatafactory.[ch]: completely manage the data lists,
	including loading with different callbacks per extension.

	* app/gimpdatafactoryview.[ch]: enabled "new", "edit", "delete"
	and "refresh".

	* app/context_manager.c: initisalize the data factories.

	* app/gimpcontext.c: fixed some bad bugs introduced yesterday.

	* app/gradient_editor.[ch]: removed the public "create" function
	and create the editor implicitly on "set_gradient"

	* app/app_procs.c
	* app/apptypes.h
	* app/brush_edit.h
	* app/brush_select.c
	* app/commands.c
	* app/convert.c
	* app/devices.c
	* app/gimpbrushpipe.c
	* app/gimpcontainerview.h
	* app/gimpgradient.c
	* app/gimppattern.c
	* app/gradient_select.c
	* app/palette.c
	* app/pattern_select.c
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/palette_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb: um, much stuff, mostly "changed
	accordingly" ;-)

2001-02-13  Michael Natterer  <mitch@gimp.org>

	* gimprc.in
	* user_install
	* user_install.bat
	* app/gimprc.[ch]
	* app/preferences_dialog.c: removed the "brush_vbr_path" variable,
	because all data types will be editable and saveable soon.

	* app/Makefile.am
	* app/apptypes.h
	* app/gimpdatafactory.[ch]: new object which holds a data list and
	knows how to create, edit, duplicate etc. the items in it. Will
	completely replace the brushes.[ch], patterns.[ch], ... files soon.

	* po/POTFILES.in
	* app/gimpdatacontainerview.[ch]: removed.
	* app/gimpdatafactoryview.[ch]: added.

	A view on the GimpDataFactory with a GUI for creating, editing,
	deleting etc. items (mostly unimplemented).

	* app/context_manager.[ch]: replaced the global data lists by global
	data factories.

	* app/brush_select.c
	* app/brushes.[ch]
	* app/commands.c
	* app/convert.c
	* app/devices.c
	* app/gimpbrush.[ch]
	* app/gimpbrushgenerated.c
	* app/gimpcontext.c
	* app/gimpdata.[ch]
	* app/gimpdatalist.[ch]
	* app/gimpdnd.c
	* app/gimpgradient.[ch]
	* app/gimppalette.[ch]
	* app/gimppattern.[ch]
	* app/gradient_editor.c
	* app/gradient_select.c
	* app/gradients.[ch]
	* app/indicator_area.c
	* app/palette.c
	* app/palette_import.c
	* app/palette_select.c
	* app/palettes.[ch]
	* app/pattern_select.c
	* app/patterns.[ch]
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb: changed accordingly.

2001-02-13  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* po/POTFILES.in
	* app/gimpdatacontainerview.[ch]: new widget which will replace the
	current brush, pattern, ... selections. To really use it, there
	needs to be a GimpDataFactory object (coming soon...)

	* app/commands.[ch]
	* app/menus.c: added test data container views.

	* app/paint_funcs_simd.S: #include the implementation with "", not <>

2001-02-13  Seth Burgess  <sjburges@gimp.org>

	* plug-ins/perl/Gimp/Lib.xs : made perl compilable again.  Didn't
	change to turn back on by default.
	
2001-02-13  Sven Neumann  <sven@gimp.org>

	* Makefile.am
	* configure.in
	* cursors/Makefile.am
	* docs/Makefile.am
	* pixmaps/Makefile.am: added Makefiles to cursors, docs and pixmaps
	directories

2001-02-13  Sven Neumann  <sven@gimp.org>

	* Makefile.am
	* pixmaps/refresh.xpm: new icon

2001-02-13  Michael Natterer  <mitch@gimp.org>

	* app/gradient_editor.[ch]
	* app/gradient_select.[ch]: use GimpContainerListView instead of
	cooking an own list.

	* app/gimpgradient.[ch]: removed the GdkPixmap from the gradient.

	* app/gimpcontainerlistview.c: connect the viewable's "name_changed"
	signal to the label.

	* app/gimpmarshal.[ch]
	* app/gimppreview.[ch]: new virtual function "get_size",

	* app/gimpgradientpreview.c: implement "get_size" and return a 3:1
	aspect ratio.

	* app/gradients.c
	* app/palette_select.[ch]
	* app/palettes.c: removed the dialog freeze/thaw functions.

	* app/brush_select.c
	* app/pattern_select.c
	* app/plug_in.c: stuff.

2001-02-12  Michael Natterer  <mitch@gimp.org>

	* app/brush_select.[ch]
	* app/pattern_select.[ch]: removed almost all code by using
	the GimpContainerGridView.

	* app/brushes.c
	* app/patterns.c: brush|pattern_select_freeze|thaw_all() don't
	exist any more.

	* app/devices.c: made it work again.

	* app/gimpgradientpreview.c: the gradient popup is 128 x 32 again.

	* app/plug_in.c: follow the brush and pattern dialog function
	renaming.

	* app/gimppalette.[ch]
	* app/gimppalettepreview.c: added a "Columns" attribute and show
	the popups accordingly.

	The palette file format has changed again. It now can have an
	optional "Columns: <n>" line after the palette's name.

	* data/palettes/Bgold.gpl
	* data/palettes/Borders.gpl
	* data/palettes/Cascade.gpl
	* data/palettes/China.gpl
	* data/palettes/Coldfire.gpl
	* data/palettes/Dark_pastels.gpl
	* data/palettes/Ega.gpl
	* data/palettes/Gold.gpl
	* data/palettes/Grayblue.gpl
	* data/palettes/Hilite.gpl
	* data/palettes/Kahki.gpl
	* data/palettes/Named_Colors.gpl
	* data/palettes/News3.gpl
	* data/palettes/Op2.gpl
	* data/palettes/Plasma.gpl
	* data/palettes/Visibone.gpl
	* data/palettes/Visibone_2.gpl
	* data/palettes/Web.gpl: added the "Columns" parameter where it
	makes sense and removed those ugly black colors which were hanging
	around as first color of many palettes.

2001-02-12  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am: took gimpcontextpreview.[ch] out of the build
	but still left the sources there as reference.

	* app/app_procs.c: initialize the render stuff before creating the
	toolbox (needed for the previews).

	* app/devices.c
	* app/indicator_area.c: use GimpPreviews instead of
	GimpContextPreviews.

	* app/context_manager.[ch]: create the global data lists here
	because they now must exist before any context is created.

	* app/brushes.[ch]
	* app/gradients.[ch]
	* app/palettes.[ch]
	* app/patterns.[ch]: removed them here.

	* app/gimpcontainer.[ch]: added a "freeze_count" and emit the
	"freeze" and "thaw" signals accordingly.

	* app/gimpcontext.[ch]: greatly simplified the way how the
	contexts connect to the data lists (simply keep them connected all
	the time). Also removed all those ugly explicit update functions
	because "thaw" callbacks do this job now.

	* app/gimpdata.c: a GimpData object now becomes dirty on
	"name_changed"; "dirty" now triggers "invalidate_preview" because
	the context does not dispatch these signals any more soon.

	* app/brush_select.c
	* app/convert.c
	* app/gimpdnd.c
	* app/gradient_editor.c
	* app/gradient_select.c
	* app/pattern_select.c
	* app/gradient_editor.c
	* app/gradient_select.c
	* app/gradients.[ch]
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb: changed accordingly.

2001-02-11  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h: added the datafile loader_func typedefs.

	* app/datafiles.h: removed from here.

	* app/gimpcontainer.[ch]: emit "freeze" and "thaw" signals to get
	rid of those blah_select_[freeze|thaw]_all() stuff.

	* app/gimpdatalist.[ch]: new function gimp_data_list_load() which
	takes a va_list of GimpDataObjectLoaderFuncs and file extensions
	and is almost a replacement for the four files below.

	* app/brushes.c
	* app/gradients.c
	* app/palettes.c
	* app/patterns.c: very simple now. It may be worth thinking about
	making all GimpData subclasses managed by a descriptive array in
	the context_manager.

2001-02-11  Michael Natterer  <mitch@gimp.org>

	Made a GimpContainer out of the palette list:

	* app/Makefile.am
	* app/palettes.[ch]: new files for the global palette list.

	* app/gimpgradientpreview.[ch]
	* app/gimppalettepreview.[ch]: new widgets.

	* app/gimppalette.[ch]: derive it from GimpData to get all the
	preview etc. stuff.

	* app/datafiles.[ch]: new function datafiles_check_extension(),
	added a "loader_data" parameter to datafiles_read_directories()
	and pass it to the loader function.

	* app/gimpcontext.[ch]: added the palette (not really used yet
	except by the test dialogs).

	* app/gimpdatalist.[ch]: new function gimp_data_list_save_and_clear()
	which does everything needed for patterns_free(), brushes_free() ...

	* app/gimpdnd.c: added palette DND.

	* app/app_procs.c
	* app/brushes.c
	* app/color_notebook.h
	* app/commands.c
	* app/convert.c
	* app/gimpbrush.h
	* app/gimpbrushpipe.h
	* app/gimpgradient.c
	* app/gimppattern.h
	* app/gimppreview.c
	* app/gradients.c
	* app/module_db.c
	* app/palette.[ch]
	* app/paletteP.h
	* app/palette_import.c
	* app/palette_select.[ch]
	* app/patterns.c
	* app/plug_in.c
	* app/pdb/convert_cmds.c
	* app/pdb/palette_cmds.c
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/palette.pdb: lotsa stuff: changed due to the above
	API changes, #define the file extensions in the GimpData subclasses'
	header files instead of hardcoding them in several places, ...

	* data/palettes/*: The same file format change as for the gradient
	files:

	- Save the palette name in a parsable form (as part of the file
	  format, not in a comment.
	- Removed unserscores from the palette names.
	- Added an extension (Gimp PaLettes are ".gpl" files now ;-)

2001-02-11  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimpdata.[ch]: new abstract base class for everything
	(except images) which has a filename and can become dirty and must
	be saved.

	* app/gimpbrush.[ch]
	* app/gimpgradient.[ch]
	* app/gimppattern.[ch]: all derived from GimpData now.

	* app/gimpbrushgenerated.[ch]
	* app/brush_select.c
	* app/brushes.c
	* app/gimpbrushpipe.c
	* app/gradient_editor.c
	* app/gradients.c
	* app/patterns.c: removed lots of code duplication due to common
	file save magic.

	The gradient file format has changed: it now contains the
	gradient's name (no more ugly underscores). The files have the
	extension ".ggr".

	* app/gimpgradient.[ch]: save new gradients, load new and old
	gradients.

	* data/gradients/*: removed all old gradients and added the new
	ones.

2001-02-10  David Monniaux  <monniaux@genievre.ens.fr>

	MMX code for paint_funcs. Very partial so far.
	* acconfig.h
	* configure.in: detection of MMX-able assembler and compiler
	* app/Makefile.am
	* app/main.c: detects MMX and acts accordingly
	* app/paint_funcs.c
	* app/paint_funcs_simd.S: #include's appropriate file
	* app/arch/i386/mmx/paint_funcs_mmx.S
	* app/arch/i386/mmx/paint_funcs_mmx.S.m4

2001-02-10  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gradient.[ch]: renamed...

	* app/gradient_editor.[ch]: ...to this

	* app/gradient_select.c: changed #include

	* po/POTFILES.in: renamed the file here too

2001-02-10  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gradientP.h
	* app/gradient_header.h: removed.

	* app/gimpgradient.[ch]: new object -- bye bye "gradient_t"

	* app/gradients.[ch]: new files for managing the gradient list.

	* app/gradient.[ch]: contains only the gradient editor now (which
	still badly pokes around in the GimpGradient structure).

	* app/app_procs.c
	* app/apptypes.h
	* app/devices.c
	* app/gimpcontainerlistview.c
	* app/gimpcontext.[ch]
	* app/gimpcontextpreview.[ch]
	* app/gimpdnd.[ch]
	* app/gradient_select.[ch]
	* app/indicator_area.c
	* app/palette_import.c
	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/tools/airbrush.c
	* app/tools/blend.c
	* app/tools/paint_core.c
	* app/tools/paintbrush.c
	* app/tools/pencil.c
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb: changed accordingly, some
	changes to the preview and view stuff.

	* app/gimppreview.[ch]: removed the "context" attribute again
	because it was overkill (a simple gtk_signal_connect_object does
	the same as doing the autoconnection magic inside the GimpPreview
	object).

	* app/commands.[ch]
	* app/menus.c: example views on the gradient container.

2001-02-09  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainergridview.[ch]
	* app/gimpcontainerlistview.[ch]
	* app/gimpcontainerview.[ch]: follow the GimpPreview API change
	and take only "size" instead of "width" and "height" in the
	constructor.

	* app/gimpdnd.[ch]: first attempt to hack GtkType based DND which
	speaks in terms of GimpViewable instead of Brush, Pattern, ...
	Added functions to remove DND callbacks (used by the multi-views).

	* app/gimppreview.[ch]: new function gimp_preview_set_size_full().

	* app/commands.c: updated the example dialogs to be DND aware.

	* app/gimpimage.c: fixed preview size calculation by ensuring a
	minimal width/height of 1 pixel.
	Reported by Dave Neary <dneary@eircom.net>

2001-02-09  Michael Natterer  <mitch@gimp.org>

	* app/gimppreview.[ch]: moved the constructor-parameter-overkill
	to the new function gimp_preview_new_full() and made the
	gimp_preview_new() interface simple.

	* app/gimpbrushpreview.c
	* app/gimppatternpreview.c: added DND support.

	* app/gimpdnd.c: use the new preview system.

	* app/gimpconstrainedhwrapbox.c: implement "size_allocate". Ok,
	this is silly -- I will write an own widget which does the
	"scrollable grid of whatever" stuff in one place...

	* app/commands.c
	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpimagepreview.c: follow the GimpPreview constructor change.

2001-02-09  Michael Natterer  <mitch@gimp.org>

	* app/commands.c: changed the test dialogs a bit.

	* app/gimpconstrainedhwrapbox.[ch]: should be called
	GimpHackedWrapBoxForContainerView now ;-)

	* app/gimpcontainergridview.[ch]
	* app/gimpcontainerlistview.[ch]: fixed the minimal size setting
	by getting the magic values from the relevan gtk widgets.
	Scroll to the active item if it not visible.

2001-02-08  Michael Natterer  <mitch@gimp.org>

	* app/gimppreview.[ch]: added an (unused) "context" argument
	and a "set_viewable" function.

	* app/gimpconstrainedhwrapbox.c: even more evil than before.

	* app/gimpbrushpreview.c
	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpcontainerview.c
	* app/gimpimagepreview.c
	* app/gimppatternpreview.c: fixed lots of forgotten signal handlers

	* app/commands.[ch]
	* app/menus.c: added "Multi View" dialogs.

2001-02-08  Michael Natterer  <mitch@gimp.org>

	* app/gimppreview.[ch]: added a "border" attribute. The border can
	have any color (which has no sane API yet...). Added "width" and
	"height" attributes and provide a "set_size" function.

	* app/gimpbrushpreview.c
	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpimagepreview.c
	* app/gimppatternpreview.c: changed accordingly, enabled
	highlighting of the selected item in the grid views.

2001-02-07  Michael Natterer  <mitch@gimp.org>

	* app/gimppreview.[ch]: allocate less temp_bufs by removing the
	"create_preview" virtual function and adding a "render" one.

	Implementations have to call the new public function
	gimp_preview_render_and_flush() to render their temp_bufs.
	This way, e.g. the GimpPatternPreview can render the preview
	directly from the pattern's mask.

	* app/gimpdrawablepreview.c
	* app/gimpimagepreview.c
	* app/gimppatternpreview.c: changed accordingly.

	* app/gimpbrushpreview.[ch]: same as above and added BrushPipe
	popup animation.

2001-02-07  Michael Natterer  <mitch@gimp.org>

	* app/gimppreview.[ch]
	* app/gimpbrushpreview.c
	* app/gimpcontainergridview.c
	* app/gimpcontainerlistview.c
	* app/gimpimagepreview.c
	* app/gimppatternpreview.c: added an "is_popup" parameter to the
	preview constructor so the subclasses can decide if to do special
	stuff like pipe animation.

2001-02-07  Daniel Egger  <egger@suse.de>

	* configure.in: Changed link order in gtkxmhtml check
	to fix bug #12653.

2001-02-07  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontext.[ch]: added "set_by_type", "get_by_type" and
	"changed_by_type" methods which take a GtkType and decide from
	that if to manipulate the Brush, Pattern etc.

	* app/gimpcontainerview.[ch]
	* app/gimpcontainergridview.[ch]
	* app/gimpcontainerlistview.[ch]: added a GimpContext to the views
	which is used to manage the active item.

	* app/commands.c: pass the user_context to the test views.

	* app/gimpbrushpreview.c
	* app/gimppatternpreview.c
	* app/gimppreview.[ch]: added a virtual "needs_popup" method which
	returns a boolean indicating if the viewable is already fully
	visible.

	* app/gimage.[ch]: removed gimage_foreach() and some other
	functions which can easily be done by gimp_container_foreach().
	Removed gimage_delete().

	* app/fileops.c
	* app/gdisplay.c
	* app/lc_dialog.c
	* app/nav_window.c
	* app/palette_import.c
	* app/preferences_dialog.c
	* app/xcf.c
	* app/pdb/image_cmds.c
	* tools/pdbgen/pdb/image.pdb: changed accordingly. Switched from
	"disp_count" refcounting to real GtkObject refcounting for
	GimpImages.

2001-02-07  Michael Natterer  <mitch@gimp.org>

	* app/gimpbrush.[ch]
	* app/gimpbrushpreview.c: moved the scale and pipe indicator
	rendering code from GimpBrush to GimpBrushPreview.
	Removed the "dirty" signal from GimpBrush and use
	"invalidate_preview" of the GimpViewable class.

	* app/brush_edit.c
	* app/brush_select.c
	* app/gimpbrushgenerated.c
	* app/gimpcontext.c
	* app/gimpcontextpreview.c
	* app/tools/paint_core.c: changed accordingly.

2001-02-07  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpimagepreview.[ch]: new object with own implementations
	of "create_preview" and "create_popup".

	* app/gimpdrawablepreview.c: stuff... still unused.

	* app/gimppreview.c: fixed idle rendering crashes, don't
	forget popups on GDK_2BUTTON_PRESS.

	* app/app_procs.c: gimpbrushlist.h doesn't exist any more.

	* app/gimpobject.h: removed the GimpObject typedef because it
	is in apptypes.h

2001-02-07  Hans Breuer <Hans@Breuer.org>

	* */makefile.msc : Gimp 1.3 for win32 (msc) builds and runs at 
	this short moment, it's a fast moving target nowadays :-)

	* app/app_procs.c
	* app/gimpbrush.c
	* app/gimpbrushpipe.c
	* app/gimppattern.c : make sure G_OS_WIN32 is defined (by glib.h 
	inclusion) before actually using it

	* app/plug_in.h 
	* app/datafiles.h : <time.h> for time_t

	* app/tile_swap.c : include <stdio.h> for SEEK_SET

	* app/gimpcontainer.c : use G_GNUC_FUNCTION instead of 
	__FUNCTION__ to allow compiling without gcc

	* app/dialog_handler.h : don't use conditional prototypes
	for gmodule exported function but include <gmodule.h> and
	use G_MODULE_EXPORT in prototype, too.

	* app/gimpobject.h : added typedef for GimpObject

	* libgimp/gimp.def : more exported symbols

	* libgimp/gimpcolorselector.h : #include <gmodule.h> for
	G_MODULE_EXPORT,  sane prototypes.

	* libgimp/gimpui.def : symbol export update, splitted to
	gimpwidgets.def

	* libgimpcolor/gimpcolor.def
	* libgimpmath/gimpmath.def
	* libgimpwidgets/gimpwidgets.def : updated

	* libgimpwidgets/libgimp-glue.c : new file which supports
	real dynamic linking on win32, against exported symbols from
	the application or libgimp. This allows to resolve the
	double dependency for currently 11 functions

2001-02-07  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpdrawable-preview.[ch]: new files formerly known as
	gimpdrawablepreview.[ch].

	This a new naming scheme for methods of objects which live outside
	their object's file. The old name implied a derived object (and
	is in fact now taken by a GimpPreview subclass, see below).

	Further candidates for renaming are e.g. gimpdrawable-invert.[ch],
	gimpimage-convert.[ch] etc.  Finaly, the main objects (image,
	drawable) will go to their own directories together with their
	subclasses.

	* app/apptypes.h: added typedefs for the new objects:

	* app/gimpbrushpreview.[ch]
	* app/gimppatternpreview.[ch]: new subclasses of GimpPreview.

	* app/gimpdrawablepreview.[ch]: contains a subclass of GimpPreview
	now.

	* app/gimpviewable.[ch]: renamed the virtual functions to
	"get_preview" and "get_new_preview" to avoid confusion with the
	new GimpPreview subclasses.

	* app/gimppreview.[ch]: virtualized "create_preview" and
	"create_popup".

	* app/gimpmarshal.[ch]: new marsaller for GimpPreview.

	* app/channels_dialog.c
	* app/fileops.c
	* app/gimpbrush.c
	* app/gimpdnd.c
	* app/gimpdrawable.c
	* app/gimpimage.c
	* app/gimppattern.c
	* app/layer_select.c
	* app/layers_dialog.c
	* app/lc_dialog.c
	* app/nav_window.c
	* app/palette_import.c
	* app/undo_history.c
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/image.pdb: changed accordingly.

2001-02-06  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainergridview.[ch]
	* app/gimpcontainerlistview.[ch]: added "min_items_x" and
	"min_items_y" parameters to the constructors.

	* app/gimppreview.[ch]: added event handling for "click" and
	"popup", show a dummy popup for testing.

	* app/commands.c: changed accordingly.

	* app/menus.c: added a separator and removed N_() from the test stuff.

2001-02-06  Simon Budig  <simon@gimp.org>

        * libgimpwidgets/gimpdialog.c

	fixed the documentation.

2001-02-06  Simon Budig  <simon@gimp.org>

	* libgimpwidgets/gimpdialog.c
	* app/tools/tool_options_dialog.c

	Implemented a way to connect the delete-event of a gimpdialog
	without adding an extra button. If you pass "_delete_event_"
	as button text (untranslated) the button will not be created.
	
	Removed the tool-options "Close" button. Lots of other Close-Buttons
	wait for their removal.

2001-02-06  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpconstrainedhwrapbox.[ch]: A bad hack on top of another
	hack: The GtkHWrapBox "size_request" method _always_ wants a
	maximal requisition height, which it of course gets from a
	container like the scrolled window, yielding in wrong vscrollbar
	calculation.

	* app/gimpbrush.c: create a nice preview with scale and pipe
	indicators.

	* app/gimpcontainergridview.[ch]: use the GimpConstrainedHWrapBox.

	* app/commands.c
	* app/gimpcontainerlistview.c
	* app/gimppreview.c: cleanup, fixed a crash in the preview idle
	rendering function.

2001-02-06  Sven Neumann  <sven@gimp.org>

	* data/brushes/hsparks.gih
	* data/brushes/vine.gih: seems we had forgotten to convert these
	to the new format.

2001-02-05  Jay Cox  <jaycox@gimp.org>

	* app/gimphistogram.c: Applied patches by Roel Schroeven
	<rschroev@yahoo.com> that fix histogram with mask calculation bug and
	median calculation bug.

2001-02-06  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainergridview.[ch]: add the spacing between the
	previews here instead of expecting an already bordered preview.
	Set the widget background to white.

	* app/gimppattern.c: removed the white border hack.

2001-02-06  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainergridview.[ch]
	* app/gimpcontainerlistview.[ch]
	* app/gimpcontainerview.[ch]: implemented "set_preview_size".

	* app/commands.c: added a preview size slider to the test dialogs.

2001-02-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpcontainergridview.[ch]: new widget providing a grid view
	in the style of the current brush and pattern selections.

	* app/gimpcontainerlistview.[ch]
	* app/gimppreview.[ch]: the constructors take "width" and "height"
	parameters now.

	* app/gimpviewable.c: if the viewable is not able to generate
	a static (cached) preview, create a new one and cache it ourselves.

	* app/gimppattern.c: produce a nice preview.

	* app/temp_buf.[ch]: changed temp_buf_copy_area() to take a
	destination offset instead of a border parameter. This function
	was not used at all before.

	* app/commands.[ch]
	* app/menus.c: test dialogs for the grid view.

2001-02-05  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainerlistview.[ch]
	* app/gimpcontainerview.[ch]
	* app/gimpmarshal.[ch]: moved the signal connecting stuff to the
	GimpContainerViewClass which has virtual functions for insert,
	remove and clear now which are implemented by the
	GimpContainerListViewClass.

2001-02-05  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainer.[ch]
	* app/gimplist.[ch]: made the "get_by_name" and the "by_index"
	access functions methods of the GimpContainerClass. The semantic
	of this index is somewhat unclear if we have e.g. a hash table
	implementation but the container needs to have an order for the
	ContainerView. Finally, the ordering will be a feature of the
	ContainerView.

	* app/gimpmarshal.[ch]: marshallers needed for the new methods.

	* app/brushes.[ch]
	* app/patterns.[ch]: the public global brush and pattern lists
	are GimpContainers now (they are really GimpLists of course).

	* app/brush_select.c
	* app/devices.c
	* app/gimpcontainerlistview.c
	* app/gimpcontext.c
	* app/gimpdnd.c
	* app/pattern_select.c
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb: changed accordingly.

2001-02-05  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h: some new files and data types:

	* app/gimppreview.[ch]: new widgets which provides a view
	of a GimpViewable.

	* app/gimpcontainerview.[ch]: new abstract widget base class for
	views of GimpContainers of GimpViewables

	* app/gimpcontainerlistview.[ch]: (still) simple implementation of
	a list view of the container.

	* app/gimpbrush.[ch]
	* app/gimppattern.[ch]: provide dumb implementations of the
	GimpViewable's "preview" method.

	* app/image_render.c: quick bad hack to enable preview sizes which
	are != "preview_size": Always allocate data chunks for previews up
	to 256 pixels width.

	* app/drawable.c: emit the "incalidate_preview" signal from
	drawable_update(). This may cause useless updates at the moment
	but as we want to move from explicit updates to signal-driven
	model-view stuff it's the right thing (TM).

	* app/commands.[ch]
	* app/interface.c
	* app/menus.c: Added a "Test dialogs" menu to the Toolbox.

	* app/pdb/image_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: propagated the new alpha channel stuff
	to the autogenerated files.

2001-02-05  Nick Lamb  <njl195@zepler.org.uk>

	* app/channels_dialog.c
	* app/gimpimage.c
	* app/gimpimage.h: Initial commit of "Alpha" transparency channel

2001-02-04  Nick Lamb  <njl195@zepler.org.uk>

	* app/patterns.c: Missing <string.h> again

2001-02-04  Nick Lamb  <njl195@zepler.org.uk>

	* app/brushes.c: New file == new missing includes! <string.h>

2001-02-04  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h
	* app/gimpviewable.[ch]: new object. Everything that can have a
	preview will be a GimpViewable. The virtual functions are
	"invalidate_preview", "preview" and "preview_new".

	* app/gimpmarshal.[ch]: new marshaller needed for the viewable.

	* app/gimpdrawable.[ch]
	* app/gimpimage.[ch]: derived from GimpViewable. Removed the
	preview stuff from the public interface.

	Made a single boolean out of GimpImage's "comp_preview_valid"
	array because we have only one composite preview.

	* app/gimplayer.c: made the preview stuff private.

	* app/gimppreviewcache.[ch]: removed gimp_preview_scale()...

	* app/temp_buf.[ch]: ...and added it as temp_buf_scale() here.

	* app/gimpdrawablepreview.[ch]: is a private method of
	GimpDrawable now.

	* app/channels_dialog.c
	* app/convert.c
	* app/drawable.c
	* app/fileops.c
	* app/floating_sel.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimpchannel.c
	* app/gimpcontainer.c
	* app/gimpdnd.c
	* app/layer_select.c
	* app/layers_dialog.c
	* app/lc_dialog.c
	* app/nav_window.c
	* app/palette_import.c
	* app/undo.c
	* app/undo_history.c
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* app/tools/crop.c
	* app/tools/edit_selection.c
	* app/tools/ink.c
	* app/tools/paint_core.c
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/image.pdb
	* po/POTFILES.in: changed accordingly.

2001-02-04  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimppattern.[ch]: new object.

	* app/apptypes.h: added GimpPattern, removed GPattern.

	* app/patterns.[ch]: contains only the "patterns_()" functions for
	the global pattern list, s/pattern_list/global_pattern_list/g

	* app/brushes.[ch]: s/brush_list/global_brush_list/g

	* app/pattern_select.[ch]
	* app/gimpcontext.[ch]: connect to the Patterns' and the pattern
	list's signals.

	* app/brush_select.[ch]
	* app/devices.c
	* app/disp_callbacks.[ch]
	* app/gimpbrush.c
	* app/gimpbrushgenerated.[ch]
	* app/gimpcontextpreview.[ch]
	* app/gimpdnd.[ch]
	* app/indicator_area.c
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/pattern_select_cmds.c
	* app/pdb/patterns_cmds.c
	* app/tools/bucket_fill.c
	* app/tools/clone.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* po/POTFILES.in: changed accordingly.

2001-02-04  Michael Natterer  <mitch@gimp.org>

	* app/gimpcontainer.[ch]: renamed gimp_container_lookup() back
	to gimp_container_have(). Virtualized the "add", "remove",
	"have" and "foreach" methods and removed the "children" list.

	* app/gimplist.[ch]: derived from GimpContainer now.

	* app/Makefile.am
	* app/gimpdatalist.[ch]: new object: an alphabetically sorted
	GimpList with unique names.

	* app/gimpbrushlist.[ch]: removed. It's job is done by the
	GimpDataList now.

	* app/brushes.[ch]: new files. Contains the "brushes_()" functions
	for the global brush list.

	* app/app_procs.c
	* app/apptypes.h
	* app/brush_select.[ch]
	* app/colormap_dialog.[ch]
	* app/context_manager.c
	* app/devices.c
	* app/gimpbrush.c
	* app/gimpcontext.c
	* app/gimpdnd.c
	* app/info_window.c
	* app/lc_dialog.c
	* app/module_db.c
	* app/nav_window.c
	* app/pdb/brush_select_cmds.c
	* app/pdb/brushes_cmds.c
	* app/tools/by_color_select.c
	* app/tools/paintbrush.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* po/POTFILES.in: changed accordingly.

2001-02-04  Nick Lamb  <njl195@zepler.org.uk>

	* app/gimpdrawablepreview.c: add <stdlib.h> or <string.h> where needed
	* app/gimpobject.c
	* app/gimpui.c
	* app/image_new.c
	* app/layers_dialog.c
	* app/paint_funcs.c
	* app/palette.c
	* app/palette_import.c
	* app/palette_select.c
	* app/tile_manager.c
	* app/toolbox.c
	* app/user_install.c
	* app/tools/by_color_select.c
	* app/tools/curves.c
	* app/tools/measure.c
	* app/tools/shear_tool.c

2001-02-03  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpset.[ch]: removed.

	* app/gimpcontainer.[ch]: some minor fixes, cleanup.

	* app/context_manager.[ch]: made the "image_context" a GimpContainer
	and moved it here...

	* app/appenv.h
	* app/main.c: ...from here.

	* app/app_procs.c
	* app/colormap_dialog.[ch]
	* app/commands.c
	* app/gimage.c
	* app/gimpcontext.c
	* app/gimpimage.c
	* app/info_window.c
	* app/lc_dialog.c
	* app/lut_funcs.c
	* app/module_db.c
	* app/nav_window.c
	* app/palette_import.c
	* app/paths_dialog.c
	* app/pixel_region.c
	* app/scale.c
	* app/scroll.c
	* app/selection.c
	* app/temp_buf.c
	* app/undo.c
	* app/pdb/procedural_db.c
	* app/tools/by_color_select.c
	* app/tools/clone.c
	* app/tools/color_balance.c
	* app/tools/color_picker.c
	* app/tools/convolve.c
	* app/tools/crop.c
	* app/tools/curves.c
	* app/tools/paint_core.c
	* app/tools/transform_core.c: s/GimpSet/GimpContainer/g, removed
	many useless #include "appenv.h".

	* app/gimpdrawablepreview.c
	* app/gdisplay.c: found two badly crashing bugs i have introduced
	with my last changes here.

2001-02-03  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/apptypes.h

	* app/gimpcontainer.[ch]: new (yet unused and untested) object
	which will replace GimpSet, GimpList and GimpBrushList and be the
	container and signal proxy for all collections of GimpObjects.

2001-02-02  Michael Natterer  <mitch@gimp.org>

	* po/POTFILES.in: forgot to rename the files here.

2001-02-01  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpchannel.[ch]
	* app/gimplayer.[ch]: new files moved here by Yosh.

	* app/channel.[ch]
	* app/layer.[ch]: removed.

	* app/gdisplay.c: cleanup stuff.

	* app/[lotsa files].c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/floating_sel.pdb
	* tools/pdbgen/pdb/layer.pdb: changed includes accordingly.

2001-01-31  Seth Burgess <sjburges@gimp.org>
	
	* plug-ins/perl/po/POTFILES.in : removed bilb/lib/Gimp.pm from list,
	as this is a file generated during the build!!

2001-01-30  Michael Natterer  <mitch@gimp.org>

	* app/image_render.[ch]: prefixed all global variables with
	"render_" (we had a global variable named "temp_buf", brrrr),
	general cleanup.

	* app/colormap_dialog.c
	* app/layers_dialog.c: changed accordingly.

2001-01-29  Michael Natterer  <mitch@gimp.org>

	* app/dialog_types.h: removed because it was unused.

	* app/Makefile.am: removed dialog_types.h, reordered the file list
	to group together what may go to "pixmaps", "widgets" and
	"lowlevel" (???) directories.

2001-01-29  Michael Natterer  <mitch@gimp.org>

	* app/channel.[ch]: removed channel_update() because channel.c
	should not call gdisplays_update(). Use drawable_update() and
	a subsequent gdisplays_update() instead.

	* app/qmask.c: do as described above.

	* app/channel_ops.c
	* app/channels_dialog.c
	* app/commands.c
	* app/convert.c
	* app/disp_callbacks.c
	* app/equalize.c
	* app/fileops.c
	* app/floating_sel.c
	* app/gdisplay.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimpdnd.c
	* app/gimpdrawablepreview.c
	* app/gimphistogram.c
	* app/gimplayermask.c
	* app/global_edit.c
	* app/histogramwidget.c
	* app/histogramwidget.h
	* app/image_map.c
	* app/image_new.c
	* app/invert.c
	* app/layer.c
	* app/layer_select.c
	* app/paths_dialog.c
	* app/plug_in.c
	* app/scan_convert.c
	* app/undo_history.c
	* app/xcf.c: include gimpdrawable.h instead of drawable.h where
	possible, removed useless includes, minor other cleanups.

2001-01-29  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpdrawablepreview.[ch]: new file with one set of functions...

	* app/channel.[ch]
	* app/layer.[ch]: ...instead of having everything duplicated three
	times here.

	* app/channels_dialog.c
	* app/floating_sel.c
	* app/floating_sel.h
	* app/gimpdnd.c
	* app/gimpimage.c
	* app/layer_select.c
	* app/layers_dialog.c
	* app/selection.c
	* app/pdb/drawable_cmds.c
	* tools/pdbgen/pdb/drawable.pdb: changed accordingly, cleanup.

2001-01-29  Sven Neumann  <sven@gimp.org>

	* HACKING: defined The GIMP Hackordnung (ACHTUNG!)

2001-01-29  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/undo_history.h: new file.

	* app/apptypes.h: removed the "Channel" typedef.

	* app/channel.[ch]: renamed all functions to gimp_channel_*()

	* app/channel_ops.c
	* app/channels_dialog.c
	* app/commands.c
	* app/disp_callbacks.c
	* app/gdisplay.c
	* app/gimage_mask.[ch]
	* app/gimpdnd.c
	* app/gimphistogram.c
	* app/gimpimage.[ch]
	* app/global_edit.c
	* app/layer.c
	* app/layers_dialog.c
	* app/qmask.c
	* app/scan_convert.c
	* app/scan_convert.h
	* app/toolbox.c
	* app/undo.[ch]
	* app/undo_history.c
	* app/xcf.[ch]
	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/pdb_glue.h
	* app/pdb/selection_cmds.c
	* app/pdb/tools_cmds.c
	* app/tools/bezier_select.c
	* app/tools/bezier_selectP.h
	* app/tools/blend.c
	* app/tools/bucket_fill.c
	* app/tools/by_color_select.c
	* app/tools/crop.c
	* app/tools/ellipse_select.c
	* app/tools/free_select.c
	* app/tools/fuzzy_select.c
	* app/tools/fuzzy_select.h
	* app/tools/iscissors.c
	* app/tools/rect_select.c
	* app/tools/text_tool.c
	* app/tools/transform_core.c
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/tools.pdb: changed accordingly.

2001-01-29  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/pdb_glue.h: new file which contains the stuff that makes
	PDB code generation easier but is ugly when used in the app
	(see my comment in the log below).

	Contains:
	gimp_drawable_[layer|layer_mask|channel]()
	[channel|gimp_layer]_[set|get]_[name|tattoo]()

	* app/channel.[ch]
	* app/channels_dialog.c
	* app/gimpdrawable.h
	* app/gimpimage.c
	* app/gimplayermask.h
	* app/layer.c
	* app/layer.h
	* app/toolbox.c
	* app/undo.c
	* app/xcf.c
	* app/pdb/channel_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/selection_cmds.c
	* app/tools/bezier_select.c
	* app/tools/bucket_fill.c
	* app/tools/by_color_select.c
	* app/tools/ellipse_select.c
	* app/tools/free_select.c
	* app/tools/fuzzy_select.c
	* app/tools/iscissors.c
	* app/tools/rect_select.c
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/selection.pdb: changed accordingly.

2001-01-29  Sven Neumann  <sven@gimp.org>

	* AUTHORS
	* app/authors.h
	* app/pdb/channel_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/selection_cmds.c
	* libgimp/gimpchannel_pdb.c
	* libgimp/gimpchannel_pdb.h
	* libgimp/gimpselection_pdb.c
	* libgimp/gimpselection_pdb.h
	* tools/authorsgen/contributors
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/selection.pdb: applied a patch from Adam Spiers 
	<adam@spiers.net> which adds two new PDB functions: selection_combine 
	and channel_combine_masks.

2001-01-29  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h: removed the "Layer" typedef.

	* app/layer.[ch]: removed the defines of the old function names.

	Don't implement methods of the parent class (get_name, get_tattoo, ...)
	but define them as macros. They will go to a separate "pdb_glue.h"
	header because they are used only by the PDB to simplify code
	generation (no application file should say gimp_layer_get_tattoo()
	but always gimp_drawable_get_tatoo()).

	* app/channel.h
	* app/channel_ops.c
	* app/channels_dialog.c
	* app/commands.c
	* app/convert.c
	* app/disp_callbacks.c
	* app/floating_sel.[ch]
	* app/gdisplay.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimage_mask.h
	* app/gimpdnd.c
	* app/gimpdrawable.h
	* app/gimpimage.[ch]
	* app/gimplayermask.h
	* app/global_edit.c
	* app/image_new.c
	* app/layer_select.c
	* app/layers_dialog.c
	* app/resize.c
	* app/undo.c
	* app/xcf.[ch]
	* app/pdb/drawable_cmds.c
	* app/pdb/floating_sel_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/tools/bucket_fill.c
	* app/tools/by_color_select.c
	* app/tools/clone.c
	* app/tools/crop.c
	* app/tools/edit_selection.c
	* app/tools/ink.c
	* app/tools/move.c
	* app/tools/paint_core.c
	* app/tools/rect_select.c
	* app/tools/text_tool.c
	* app/tools/transform_core.c
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/floating_sel.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb: changed accordingly, cleanup.

2001-01-28  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimplayermask.[ch]: new files cut out of layer.[ch]. Renamed
	all functions to gimp_layes_mask_*(). removed artefacts like
	the ref/unref functions.

	* app/apptypes.h: removed the "LayerMask" typedef.

	* app/layer.[ch]: removed the layer mask stuff and renamed all
	functions to gimp_layer_*(). Added temporary typedefs for the old
	function names. The layer mask preview stuff is still there (should
	probably go to new layer_preview.{ch] files).

	* app/gimpimage.[ch]: added
	gimp_image_invalidate_[layer|channel]_previews() formerly known as
	[layer|channel]_invalidate_previews().

	* app/channel.[ch]: moved channel_layer_alpha() and 
	channel_layer_mask() here because they are methods of the Channel.

	* app/channel_ops.c
	* app/convert.c
	* app/disp_callbacks.c
	* app/fileops.c
	* app/floating_sel.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimpdnd.c
	* app/global_edit.c
	* app/layers_dialog.c
	* app/preferences_dialog.c
	* app/toolbox.c
	* app/undo.c
	* app/xcf.c
	* app/pdb/drawable_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/tools/crop.c
	* app/tools/text_tool.c
	* app/tools/transform_core.c
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/drawable.pdb: changed accordingly, cleanup.

2001-01-26  Daniel Egger  <egger@suse.de>

	* plug-ins/common/iwarp.c: Cleaned up code and
	implemented 2 small optimisations.

2001-01-26  Daniel Egger  <egger@suse.de>

	* libgimpmath/gimpvector.c:
	* libgimpmath/gimpvector.h: Added pass-by-value functions
	to allow code simplifications and functionchaining.

Thu Jan 25 10:22:39 PST 2001 Manish Singh <yosh@gimp.org>

	* tools/pdbgen/pdb/channel.pdb: resurrected channel_set_color

2001-01-25  Michael Natterer  <mitch@gimp.org>

	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimpcompat.h: removed.

	The GIMP 1.0 API is not supported any more !!!

	* plug-ins/print/print-image-gimp.c
	* plug-ins/print/print.c
	* plug-ins/print/print_gimp.h: a quick fix for old compat cruft.
	This is temporary and will be replaced by Gimp-Print's development
	version.

	* plug-ins/xjt/xjpeg.c: use GimpRGB.

2001-01-25  Sven Neumann  <sven@gimp.org>

	* app/libgimp_glue.[ch]: cleanup

	* app/pdb/channel_cmds.c
	* app/pdb/palette_cmds.c
	* app/pdb/tools_cmds.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/lib.pl
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/tools.pdb: fixed pdbgen code for color type. Seems
	to actually work now.

	* TODO.xml: updated

	* plug-ins/Makefile.am: disabled build of gimp-perl until it has 
	catched up with the API changes in libgimp 

2001-01-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.c (gimp_mem_size_entry_new): merged fix 
	from gimp-1-2 branch 

2001-01-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/lib.pl
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/tools.pdb: changed these with the help of Yosh. 
	PDB functions take GimpRGB as color type now.

	* app/plug_in.c
	* app/pdb/channel_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* app/pdb/procedural_db.[ch]
	* app/pdb/tools_cmds.c
	* libgimp/gimp.[ch]
	* libgimp/gimpchannel.[ch]
	* libgimp/gimpchannel_pdb.[ch]
	* libgimp/gimppalette_pdb.[ch]
	* libgimp/gimpprotocol.[ch]
	* libgimp/gimptools_pdb.[ch]: incremented Gimp protocol version
	and changed color type from array of chars to GimpRGB.

	* libgimp/Makefile.am
	* libgimp/gimppalette.[ch]: removed these files again 

	* app/libgimp_glue.[ch]
	* libgimpwidgets/gimpcolorbutton.c
	* plug-ins/Lighting/lighting_main.c
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/MapObject/mapobject_image.c
	* plug-ins/MapObject/mapobject_main.c
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/checkerboard.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/cubism.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/gif.c
	* plug-ins/common/grid.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/mblur.c
	* plug-ins/common/nova.c
	* plug-ins/common/papertile.c
	* plug-ins/common/png.c
	* plug-ins/common/polar.c
	* plug-ins/common/psd.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/sinus.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/tiff.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/warp.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/gap/gap_filter_iterators.c
	* plug-ins/gap/gap_mov_dialog.c
	* plug-ins/gdyntext/gdyntext.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gfli/gfli.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/maze/handy.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu.c
	* plug-ins/xjt/xjt.c: changed accordingly. A few plug-ins need
	to be looked at more closely after this change. I tried to put 
	FIXME comments into those.

2001-01-24  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* configure.in
	* gimptool.in: added the new library below.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpchainbutton.[ch]
	* libgimpwidgets/gimpcolorarea.[ch]
	* libgimpwidgets/gimpcolorbutton.[ch]
	* libgimpwidgets/gimpdialog.[ch]
	* libgimpwidgets/gimpfileselection.[ch]
	* libgimpwidgets/gimphelpui.[ch]
	* libgimpwidgets/gimppatheditor.[ch]
	* libgimpwidgets/gimppixmap.[ch]
	* libgimpwidgets/gimpquerybox.[ch]
	* libgimpwidgets/gimpsizeentry.[ch]
	* libgimpwidgets/gimpunitmenu.[ch]
	* libgimpwidgets/gimpwidgets.[ch]
	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpwidgetstypes.h: new shared library.

	Currently there are some ugly dependencies into libgimp. These
	will be removed and go to a "libgimpglue" library which will be
	a library for functions which share a common interface between
	plug-ins and the app but have different implementations.

	Include "libgimp/gimpunit.h" from "libgimpwidgets/gimpwidgetstypes.h"
	to simulate this upcoming separation.

	* libgimp/Makefile.am
	* libgimp/gimpchainbutton.[ch]
	* libgimp/gimpcolorarea.[ch]
	* libgimp/gimpcolorbutton.[ch]
	* libgimp/gimpdialog.[ch]
	* libgimp/gimpfileselection.[ch]
	* libgimp/gimphelpui.[ch]
	* libgimp/gimppatheditor.[ch]
	* libgimp/gimppixmap.[ch]
	* libgimp/gimpquerybox.[ch]
	* libgimp/gimpsizeentry.[ch]
	* libgimp/gimpunitmenu.[ch]
	* libgimp/gimpwidgets.[ch]: removed from here.

	* libgimp/gimpui.h
	* libgimp/gimpuitypes.h
	* libgimp/makefile.mingw.in
	* libgimp/makefile.msc: changed accordingly.

	* app/[all ui files]
	* app/pdb/palette_cmds.c
	* app/pdb/tools_cmds.c
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/tools.pdb: #include "libgimpwidgets/gimpwidgets.h"
	and removed useless includes.

	* app/apptypes.h: #include "libgimpwidgets/gimpwidgetstypes.h"

	* app/Makefile.am
	* plug-ins/[all makefiles which link against libgimpui]:
	link against libgimpwidgets.la

	* po-libgimp/POTFILES.in: changed file locations.

2001-01-24  Simon Budig  <simon@gimp.org>

	* plug-ins/common/colortoalpha.c: wrapped some actions in a
	gimp_undo_push_group_start/end, so you dont have to undo
	two steps when the plugin adds an alpha channel.

2001-01-24  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/.cvsignore
	* libgimpwidgets/Makefile.am
	* libgimpwidgets/makefile.mingw.in
	* libgimpwidgets/makefile.msc: library stub. Please ignore for now :)

2001-01-24  Sven Neumann  <sven@gimp.org>

	* app/paint_funcs.c: brought the array used for optimization back in
	sync with the LayerModeEffects enum. This was causing really strange
	rendering errors. Started to clean up the file up and removed the 
	unused layer_mode names.
	
	* app/tile.[ch]
	* plug-ins/common/colortoalpha.c: small cleanups

	* po/POTFILES.in: removed app/paint_funcs.c

2001-01-24  Sven Neumann  <sven@gimp.org>

	* app/tools/airbrush.c
	* app/tools/by_color_select.c
	* app/tools/color_picker.c: include gimpcolor/gimpcolor.h

	* libgimpcolor/gimprgb.c: optimized compositing functions.
	
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/MapObject/mapobject_preview.c: use gimp_rgb_composite 
	functions instead of doing the blending manually

	* plug-ins/MapObject/map_object_shade.c: fixed a rendering bug when
	transparent_background == FALSE
	
2001-01-24  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* configure.in
	* gimptool.in: added stuff for the new library below.

	* libgimpmath/.cvsignore
	* libgimpmath/Makefile.am
	* libgimpmath/gimpmath.def
	* libgimpmath/gimpmath.h
	* libgimpmath/gimpmathtypes.h
	* libgimpmath/gimpmatrix.c
	* libgimpmath/gimpmatrix.h
	* libgimpmath/gimpvector.c
	* libgimpmath/gimpvector.h
	* libgimpmath/makefile.mingw.in
	* libgimpmath/makefile.msc: new shared library. Depends on glib only.

	* libgimp/Makefile.am
	* libgimp/gimp.def
	* libgimp/gimp.h: removed the math stuff.

	* libgimp/gimpmath.h
	* libgimp/gimpmatrix.[ch]
	* libgimp/gimpvector.[ch]: removed.

	* app/Makefile.am
	* plug-ins/Lighting/Makefile.am
	* plug-ins/MapObject/Makefile.am
	* plug-ins/pagecurl/Makefile.am: link against libgimpmath.la

	* app/[many files]
	* libgimpcolor/gimpcolorspace.c
	* libgimpcolor/gimprgb.c
	* libgimp/gimpadaptivesupersample.c
	* libgimp/gimpbilinear.c
	* libgimp/gimpwidgets.c
	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c
	* plug-ins/libgck/gck/gckcolor.c
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/image.pdb: include "libgimpmath/gimpmath.h",
	removed the remaining includes of the old color stuff.

2001-01-23  Michael Natterer  <mitch@gimp.org>

	* Makefile.am
	* configure.in
	* gimptool.in: added stuff for the new library below.

	* libgimpcolor/.cvsignore
	* libgimpcolor/Makefile.am
	* libgimpcolor/gimpcolor.h
	* libgimpcolor/gimpcolorspace.c
	* libgimpcolor/gimpcolorspace.h
	* libgimpcolor/gimpcolortypes.h
	* libgimpcolor/gimphsv.c
	* libgimpcolor/gimphsv.h
	* libgimpcolor/gimprgb.c
	* libgimpcolor/gimprgb.h: new shared library which both the app
	and plug-ins link against. The library depends only on glib.

	* libgimpcolor/gimpcolor.def
	* libgimpcolor/makefile.mingw.in
	* libgimpcolor/makefile.msc: added Win32 build files which
	definitely don't work.

	* libgimp/Makefile.am
	* libgimp/gimpcolor.[ch]
	* libgimp/gimpcolorspace.[ch]: removed.

	* libgimp/gimp.h
	* libgimp/gimpadaptivesupersample.c
	* libgimp/gimpbilinear.c
	* libgimp/gimppalette.c
	* libgimp/gimptypes.h: include the stuff from libgimpcolor.

	Plug-Ins don't need to include <libgimpcolor/gimpcolor.h>
	explicitely. LibGimp depends on libgimpcolor and thus also includes
	it's headers.

	* libgimp/gimp.def
	* libgimp/makefile.mingw.in: fiddled around with Win32 stuff...

	* app/Makefile.am: link against libgimpcolor.la

	* app/apptypes.h: include "libgimpcolor/gimpcolortypes.h"

	* app/asupsample.c
	* app/channels_dialog.c
	* app/colormap_dialog.c
	* app/commands.c
	* app/convert.c
	* app/devices.c
	* app/disp_callbacks.c
	* app/drawable.c
	* app/gimpcontext.c
	* app/gimpdnd.c
	* app/gimpimage.c
	* app/gimppalette.c
	* app/gimprc.c
	* app/gradient.c
	* app/libgimp_glue.c
	* app/palette.c
	* app/palette_import.c
	* app/qmask.c
	* app/xcf.c
	* app/tools/paint_core.c
	* app/tools/paintbrush.c
	* app/tools/pencil.c: include "libgimpcolor/gimpcolor.h" before all
	gimp includes because it's a standalone library.

	* plug-ins/FractalExplorer/Makefile.am
	* plug-ins/Lighting/Makefile.am
	* plug-ins/MapObject/Makefile.am
	* plug-ins/bmp/Makefile.am
	* plug-ins/common/Makefile.am
	* plug-ins/common/mkgen.pl
	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/faxg3/Makefile.am
	* plug-ins/fits/Makefile.am
	* plug-ins/flame/Makefile.am
	* plug-ins/fp/Makefile.am
	* plug-ins/gap/Makefile.am
	* plug-ins/gdyntext/Makefile.am
	* plug-ins/gfig/Makefile.am
	* plug-ins/gflare/Makefile.am
	* plug-ins/gfli/Makefile.am
	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/ifscompose/Makefile.am
	* plug-ins/imagemap/Makefile.am
	* plug-ins/maze/Makefile.am
	* plug-ins/mosaic/Makefile.am
	* plug-ins/pagecurl/Makefile.am
	* plug-ins/print/Makefile.am
	* plug-ins/rcm/Makefile.am
	* plug-ins/script-fu/Makefile.am
	* plug-ins/sel2path/Makefile.am
	* plug-ins/sgi/Makefile.am
	* plug-ins/webbrowser/Makefile.am
	* plug-ins/xjt/Makefile.am: add libgimpcolor.la to LDADD.

	* INSTALL: don't recommend to --disable-shared for development.

	* TODO.xml: increased some percentages, added plug-in help stuff.

2001-01-23  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/libgimp_glue.[ch]: new files containing stuff needed for
	linking libgimp stuff against the app. This file is not needed
	at all for the app itself and should never be included.

	* app/gimpcontext.[ch]: removed from here.

	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimppalette.[ch]: new files for the PDB wrapping
	gimp_palette_*_rgb() stuff.

	* libgimp/gimpcolor.[ch]: removed the PDB dependency from here.

2001-01-23  Sven Neumann  <sven@gimp.org>

	* app/paint_funcs.c
	* app/pixel_processor.c
	* app/tile.c
	* app/tile_cache.c
	* app/tile_manager.c
	* app/tile_pvt.h
	* app/tile_swap.[ch]: cleanups, indentation

2001-01-23  Sven Neumann  <sven@gimp.org>

	* app/convert.c
	* app/floating_sel.c
	* app/gimage_mask.c
	* app/gimpimage.c
	* app/global_edit.c
	* app/image_map.c
	* app/image_new.c
	* app/layer.c
	* app/paint_funcs.c
	* app/pixel_region.c
	* app/tile_manager.c
	* app/tile_manager.h
	* app/tile_manager_pvt.h
	* app/undo.c
	* app/xcf.c
	* app/pdb/tools_cmds.c
	* app/tools/flip_tool.c
	* app/tools/perspective_tool.c
	* app/tools/rotate_tool.c
	* app/tools/scale_tool.c
	* app/tools/shear_tool.c
	* app/tools/text_tool.c
	* app/tools/transform_core.c
	* tools/pdbgen/pdb/tools.pdb: made all files execpt xcf.c use the
	TileManager accessor functions instead of accessing the TileManager
	struct directly.

2001-01-23  Sven Neumann  <sven@gimp.org>

	* TODO.xml: updated, added sections about libgck and script-fu

2001-01-23  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/edit_selection.[ch]: removed.

	* app/tools/Makefile.am
	* app/tools/edit_selection.[ch]: added.

	* po/POTFILES.in: changed.

2001-01-23  Michael Natterer  <mitch@gimp.org>

	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimpadaptivesupersample.[ch]
	* libgimp/gimpbilinear.[ch]: new files cut out of LibGCK.

	* plug-ins/libgck/gck/gck.h
	* plug-ins/libgck/gck/gckcolor.c: removed the bilinear and
	supersample code.

	* app/apptypes.h
	* app/asupsample.[ch]
	* app/tools/blend.c: made the adaptive_supersample interface the
	same as in libgimp but don't use the libgimp function yet.

	The libgimp function takes total transparancy into account when
	weighting the 4 resulting RGBA values, the app function always
	weights them equally. Please have a look at the code.

	* plug-ins/Lighting/lighting_image.c
	* plug-ins/MapObject/mapobject_apply.c
	* plug-ins/MapObject/mapobject_image.[ch]: changed accordingly.

	* app/disp_callbacks.c: paranoia cleanups.

2001-01-22  Sven Neumann  <sven@gimp.org>

	* app/gdisplay.c
	* app/gdisplay_ops.c
	* app/info_window.c
	* app/layer.c
	* app/menus.c
	* app/nav_window.c
	* app/path.c
	* app/scroll.[ch]: removed inclusion of superfluous headers and
	cleaned up the source a little.

2001-01-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/Makefile.am
	* app/tools/tool_options_dialog.[ch]: new files for the tool
	options dialog.

	* app/tools/tools.[ch]: removed from here.

	* app/app_procs.c
	* app/commands.c
	* app/toolbox.c
	* po/POTFILES.in: adjusted.

2001-01-22  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/selection_options.h: removed.

	* app/tools/Makefile.am
	* app/tools/selection_options.h: added.

	* app/tools/selection_options.c
	* app/tools/paint_options.c: new files cut out of tool_options.c

	* app/tools/tool_options.c: removed the paint & selection
	options code.

	* app/tools/tool_options.h
	* app/tools/paint_options.h: cleanup.

	* po/POTFILES.in: added selection_options.c and paint_options.c

2001-01-22  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/toolbox.[ch]: new files containing most of the code
	from app/interface.[ch]

	* app/interface.[ch]: only contains create_display_shell() now.
	Needs to be somehow merged with other arbitrarily named display
	files around.

	* app/app_procs.c
	* app/menus.c
	* po/POTFILES.in: changed accordingly.

	* app/asupsample.c
	* app/gradient.c
	* app/tile.c: cleanup.

2001-01-22  Sven Neumann  <sven@gimp.org>

	* configure.in
	* app/Makefile.am
	* app/tools/Makefile.am: moved all tool sources to app/tools

	* app/app_procs.c
	* app/brush_select.c
	* app/commands.c
	* app/context_manager.c
	* app/convert.c
	* app/cursorutil.c
	* app/devices.c
	* app/disp_callbacks.c
	* app/edit_selection.c
	* app/gdisplay.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimpbrush.c
	* app/gimpbrushgenerated.c
	* app/gimpbrushpipe.c
	* app/gimpdnd.c
	* app/gimprc.c
	* app/global_edit.c
	* app/info_window.c
	* app/interface.c
	* app/menus.c
	* app/path.c
	* app/paths_dialog.c
	* app/paths_dialogP.h
	* app/scale.c
	* app/scroll.c
	* app/undo.c
	* app/pdb/color_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/tools_cmds.c
	* po/POTFILES.in
	* tools/kernelgen.c
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enums.pl
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/tools.pdb: changed accordingly	

2001-01-22  Daniel Egger  <egger@suse.de>

	* libgimp/gimpcolor.c: #include "gimppalette_pdb.h"
	to shut up the compiler.

Sun Jan 21 15:23:27 PST 2001 Manish Singh <yosh@gimp.org>

	* tools/pdbgen/enumgen.pl: handle subdirs

2001-01-21  Simon Budig  <simon@gimp.org>

	* app/pdb/README: Added another warning about autogenerated files

2001-01-21  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/app.pl: changed destdir for app-side PDB wrappers to
	app/pdb

	* app/Makefile.am: don't create libgimpim.a in app.

	* configure.in
	* app/pdb/Makefile.am
	* app/pdb/internal_procs.[ch]
	* app/pdb/procedural_db.[ch]
	* app/pdb/*_cmds.c: moved PDB functions into their own subdirectory.

	* app/internal_procs.[ch]
	* app/procedural_db.[ch]
	* app/*_cmds.c: removed here

	* app/app_procs.c
	* app/batch.c
	* app/bezier_select.c
	* app/brush_select.c
	* app/bucket_fill.c
	* app/colormap_dialog.c
	* app/fileops.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimphelp.c
	* app/gradient_select.c
	* app/info_window.c
	* app/invert.c
	* app/lc_dialog.c
	* app/menus.c
	* app/nav_window.c
	* app/palette_import.c
	* app/paths_dialog.c
	* app/pattern_select.c
	* app/plug_in.h
	* app/text_tool.c
	* app/xcf.c
	* po/POTFILES.in: changed accordingly
	
2001-01-21  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/palette_import.[ch]: moved the palette_import dialog to
	it's own file.

	* app/gimage.c
	* app/palette.[ch]
	* app/paletteP.h: changed accordingly.

2001-01-21  Simon Budig  <simon@gimp.org>

	* modules/colorsel_triangle.c: Fixed the "disappearing
	triangle" bug. The triangle happens to be more triangular
	now too...   :-)

2001-01-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/Makefile.am: removed interp_md5.[ch] from
	the build because it was not used at all.

	* plug-ins/script-fu/script-fu-console.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-server.c
	* plug-ins/script-fu/script-fu.c: even more pedantic indentation

2001-01-21  Michael Natterer  <mitch@gimp.org>

	* app/palette_entries.h: removed.
	* app/gimppalette.[ch]: new object derived from GimpObject. Just
	used as a container at the moment (no signals or stuff used).

	* app/palette.[ch]: changed almost every line except in the
	import_dialog part.

	* app/Makefile.am
	* app/apptypes.h
	* app/convert.[ch]
	* app/gimpdnd.h
	* app/paletteP.h
	* app/palette_select.[ch]
	* app/convert_cmds.c
	* tools/pdbgen/pdb/convert.pdb: changed accordingly.

	* app/gimpdrawable.c: set klass->removed to NULL.

2001-01-21  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.[ch]: added a "title" parameter to the
	constructor. Pass a pointer to the ColorNotebook to the callback.
	Added a _get_color() function.

	* app/color_panel.[ch]: added a "title" parameter which is used
	for the notebook.

	* app/channels_dialog.c
	* app/color_area.c
	* app/colormap_dialog.c
	* app/convert.c
	* app/palette_select.c
	* app/qmask.c: changed the calls to color_notebook_new(),
	color_panel_new() and the ColorNotebook callbacks.

	* app/gradient.c: use a ColorNotebook instead of GtkColorSelection.

	* app/palette.c
	* app/palette_entries.h: use GimpRGB to store the color in the
	PaletteEntry.

	* po/POTFILES.in: added app/color_area.c

2001-01-20  Michael Natterer  <mitch@gimp.org>

	* app/gradient.[ch]: made gradient_get_color_at() use GimpRGB.

	* app/airbrush.c
	* app/blend.c
	* app/gimpcontextpreview.c
	* app/gradient_select.c
	* app/paint_core.[ch]
	* app/paintbrush.c
	* app/palette.c
	* app/pencil.c

	* app/gradients_cmds.c
	* app/gradient_select_cmds.c
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb: changed accordingly.

2001-01-20  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.[ch]
	* app/gimpcontext.[ch]
	* app/gimpdnd.h: made the _set_color() and _drop_color() functions
	take a "const GimpRGB *" parameter.

	* app/by_color_select.c
	* app/channels_dialog.c
	* app/color_area.c
	* app/color_panel.c
	* app/color_picker.c
	* app/color_select.c
	* app/colormap_dialog.c
	* app/disp_callbacks.[ch]
	* app/gimpimage.h
	* app/palette.c: changed accordingly.

	* app/gradient.c
	* app/gradientP.h
	* app/gradient_header.h: use GimpRGB internally.

2001-01-20  Michael Natterer  <mitch@gimp.org>

	* app/gimpdrawable.[ch]: made gimp_drawable_fill() use GimpRGB,
	added some "const", delete unused function, reordered some
	functions.

	* app/drawable.c
	* app/qmask.c: follow the change.

2001-01-19  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/appenums.h
	* app/apptypes.h: moved all enums from apptypes.h to the new file
	appenums.h

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/app.pl
	* tools/pdbgen/enums.pl: changed accordingly. Removed some files
	from the list of files to scan for enums.

	* TODO.xml: added two minor UI issues.

2001-01-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gqbist.c: fixed typo, adjusted coding style

2001-01-17  Daniel Egger  <egger@suse.de>

	* PLUGIN_MAINTAINERS: Entered Jens Christian Restemeier as maintainer
	as wished.

	* plug-ins/common/gqbist.c: Applied a patch by Jens Christian 
	Restemeier <jrestemeier@currantbun.com> which fixes a calculus bug, 
	adds antialiasing and beautifies the code quite a bit.

2001-01-17  Sven Neumann  <sven@gimp.org>

	* INSTALL: adjusted version numbers, updated, added warning
	
	* configure.in: changed .gimp to .gimp-1.3

2001-01-17  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.c: factored the color parsing code out to the new
	function parse_color() and made it parse RGB, RGBA, HSV and HSVA
	colors.

	* app/color_notebook.c
	* app/devices.c
	* app/session.c: changed accordingly.

2001-01-16  Sven Neumann  <sven@gimp.org>

	* app/color_notebook.c: fixed my last change

	* libgimp/gimpcolorarea.c: swapped opaque and transparent areas
	
2001-01-16  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolorspace.c: fixed RGB to HSV routine

	* app/color_notebook.c: tweaked dialog layout a little, disabled
	toggle_buttons if the colorselector does not implement the set_channel
	method.

	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: removed empty set_channel methods

2001-01-16  Sven Neumann  <sven@gimp.org>

	* app/devices.c: don't show the alpha value of fore/background colors

2001-01-16  Michael Natterer  <mitch@gimp.org>

	* app/color_area.c
	* app/color_notebook.[ch]
	* app/color_panel.c
	* app/gimprc.c
	* app/session.c: store the color history in sessionrc.

	* app/channels_dialog.c: tweaked the "new channel" and "channel
	atributes" dialogs a bit.

Mon Jan 15 17:22:30 PST 2001 Manish Singh <yosh@gimp.org>

	* app/fileops.c: correct spelling of "lose" in revert dialog

2001-01-16  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.c: added a global color history of 16 colors.
	The "Add" button uses neither LRU nor pure right-shift order but
	something in between. The history is scheduled to go to sessionrc.

2001-01-15  Sven Neumann  <sven@gimp.org>

	* app/devices.c: use a GimpColorArea for the foreground color in
	the Device Status dialog and added a background color

2001-01-15  Sven Neumann  <sven@gimp.org>

	* app/color_picker.c: enable drags from and disable drops to
	the ColorArea in the color_info dialog. Changed the cursor_update
	function so it only displays the bad cursor when outside the image.

2001-01-15  Michael Natterer  <mitch@gimp.org>

	* app/devices.c
	* app/gimprc.c: save the foreground and background color as array
	of RGBA doubles in "devicerc".

2001-01-15  Sven Neumann  <sven@gimp.org>

	* app/color_notebook.c: make use of GimpColorAreas. Added two
	buttons to set the color to black or white.

2001-01-15  Michael Natterer  <mitch@gimp.org>

	* modules/colorsel_water.c: the bottom position of the scale
	represents the minimal pressure now. Also removed the pressure
	value display because it's rather a matter of "more" or "less"
	than of an exact value.

2001-01-15  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.c
	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c: tweaked dialog layout a bit.

	* modules/colorsel_water.c: removed all widgets except the color
	selector itself (the history and the "Reset" button will go
	to the ColorNotebook).

2001-01-15  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.[ch]
	* app/color_select.c
	* libgimp/gimpcolorselector.h
	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: use GimpRGB and GimpHSV.

	* libgimp/gimpcolor.c
	* libgimp/gimpcolorspace.[ch]: All rgb_to_hsv functions:

	if r == g == b the difference between the max and min value
	is 0 and we should avoid to divide by it ;-)

2001-01-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/gdyntext/gdyntext.[ch]
	* plug-ins/gdyntext/gdyntext_ui.c
	* plug-ins/gdyntext/gdyntextcompat.[ch]: use GimpRGB

2001-01-15  Sven Neumann  <sven@gimp.org>

	* app/color_panel.c
	* libgimp/gimpcolorbutton.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/grid.c
	* plug-ins/common/polar.c
	* plug-ins/common/whirlpinch.c: cleaned up after myself

2001-01-15  Sven Neumann  <sven@gimp.org>

	* app/color_panel.[ch]: rewritten as proper widget derived from 
	GimpColorButton

	* app/channels_dialog.c
	* app/color_picker.c
	* app/qmask.c: use new GimpColorPanel widget

	* libgimp/gimpcolorarea.[ch]
	* libgimp/gimpcolorbutton.[ch]: some changes needed to derive from
	GimpColorButton

	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/grid.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/nova.c
	* plug-ins/common/papertile.c
	* plug-ins/common/sinus.c
	* plug-ins/gdyntext/gdyntext_ui.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/script-fu/script-fu-scripts.c: follow API changes of
	GimpColorButton and GimpColorArea

2001-01-15  Michael Natterer  <mitch@gimp.org>

	* app/channel.[ch]
	* app/gimpimage.[ch]
	* app/layer.[ch]: use GimpRGB for the Channel's, the QuickMask's
	and the LayerMask's color.

	* app/channel_cmds.c
	* app/channel_ops.c
	* app/channels_dialog.c
	* app/qmask.c
	* app/xcf.c
	* tools/pdbgen/pdb/channel.pdb: changed accordingly.

2001-01-15  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.[ch]
	* app/color_panel.[ch]
	* app/gimpcontext.[ch]
	* app/gimpdnd.[ch]: use GimpRGB instead of a random selection out of
	guchar, gint, guchar[], blah...

	* app/blend.c
	* app/by_color_select.c
	* app/channel_ops.c
	* app/channels_dialog.c
	* app/color_area.c
	* app/color_picker.c
	* app/color_select.c
	* app/colormap_dialog.c
	* app/commands.c
	* app/devices.[ch]
	* app/disp_callbacks.[ch]
	* app/drawable.c
	* app/gimpimage.c
	* app/gimprc.c
	* app/gradient.c
	* app/paint_core.c
	* app/palette.c
	* app/palette_cmds.c
	* app/qmask.c
	* tools/pdbgen/pdb/palette.pdb: changed accordingly.

2001-01-15  Simon Budig  <simon@gimp.org>

	* app/apptypes.h
	I broke the Toolbox. Now it works again. The ToolType-enum *must*
	match the order in the tool_info-Array.

2001-01-15  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolor.[ch]: added function gimp_rgb_intensity_uchar()

	* libgimp/gimpcolorbutton.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/checkerboard.c
	* plug-ins/common/cubism.c
	* plug-ins/common/gif.c
	* plug-ins/common/grid.c
	* plug-ins/common/mblur.c
	* plug-ins/common/papertile.c
	* plug-ins/common/png.c
	* plug-ins/common/polar.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/warp.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/gap/gap_mov_dialog.c
	* plug-ins/gdyntext/gdyntext.c
	* plug-ins/gfig/gfig.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/maze/handy.c
	* plug-ins/mosaic/mosaic.c
	* plug-ins/pagecurl/pagecurl.c: replaced all occurences of 
	gimp_palette_[get|set]_[back|fore]ground() with the respective
	gimp_palette_[get|set]_[back|fore]ground_rgb() functions.

2001-01-14  Simon Budig  <simon@gimp.org>

	* app/tools.c:
	Reordered some tools. It is IMHO more logical to group the
	"paint-style" and the "blur/smudge"-Tools together.
	The Ordering up to now was a "historical" ordering: Not good...

	I am thinking about grouping the "Non-image modifying"-tools
	(Magnify, Colorpicker, Measure tool) together...
	
2001-01-14  Michael Natterer  <mitch@gimp.org>

	* app/channel.[ch]
	* app/drawable.[ch]
	* app/gdisplay.[ch]
	* app/gimpdrawable.[ch]
	* app/layer.[ch]:

	- Removed all "typedef drawable_function gimp_drawable_function".
	- Renamed all *_get_ID() functions to *_get_by_ID().
	- For symmetry reasons, renamed drawable_ID() to gimp_drawable_get_ID().
	- Removed the *_get_ID() functions of GimpLayer, GimpLayerMask
	  and GimpChannel.

	* app/airbrush.c
	* app/bezier_select.c
	* app/blend.c
	* app/brightness_contrast.c
	* app/bucket_fill.c
	* app/by_color_select.c
	* app/clone.c
	* app/color_balance.c
	* app/color_picker.c
	* app/convert.c
	* app/convolve.c
	* app/crop.c
	* app/curves.c
	* app/desaturate.c
	* app/dodgeburn.c
	* app/edit_selection.c
	* app/eraser.c
	* app/fileops.c
	* app/flip_tool.c
	* app/floating_sel.c
	* app/fuzzy_select.c
	* app/gimage.c
	* app/gimage_mask.c
	* app/gimphistogram.c
	* app/gimpimage.c
	* app/global_edit.c
	* app/histogram_tool.c
	* app/hue_saturation.c
	* app/image_map.c
	* app/ink.c
	* app/invert.c
	* app/layer_select.c
	* app/layers_dialog.c
	* app/levels.c
	* app/paint_core.c
	* app/paintbrush.c
	* app/pencil.c
	* app/plug_in.c
	* app/posterize.c
	* app/scan_convert.c
	* app/smudge.c
	* app/text_tool.c
	* app/threshold.c
	* app/transform_core.c
	* app/undo.c
	* app/undo_history.c

	* app/channel_cmds.c
	* app/channel_ops_cmds.c
	* app/color_cmds.c
	* app/display_cmds.c
	* app/drawable_cmds.c
	* app/edit_cmds.c
	* app/floating_sel_cmds.c
	* app/image_cmds.c
	* app/layer_cmds.c
	* app/parasite_cmds.c
	* app/selection_cmds.c
	* app/text_tool_cmds.c
	* app/tools_cmds.c
	* libgimp/gimpdrawable_pdb.c
	* tools/pdbgen/pdb.pl
	* tools/pdbgen/pdb/channel_ops.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/tools.pdb: changed accordingly.

2001-01-14  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolor.[ch]: added GimpHSV type and functions and
	gimp_rgb_composite functions

	* libgimp/gimpcolorbutton.c: indentation

	* libgimp/gimpcolorspace.[ch]: added GimpRGB <-> GimpHSV conversion 
	routines

	* libgimp/gimpwidgets.[ch]: removed gimp_color_update_uchar function

	* plug-ins/Lighting/lighting_main.[ch]
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/Lighting/lighting_shade.c
	* plug-ins/MapObject/mapobject_image.c
	* plug-ins/MapObject/mapobject_main.[ch]
	* plug-ins/MapObject/mapobject_shade.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/nova.c
	* plug-ins/common/papertile.c
	* plug-ins/common/sinus.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/script-fu/script-fu-scripts.c: use GimpRGB and GimpHSV 

2001-01-14  Michael Natterer  <mitch@gimp.org>

	* app/channel.[ch]
	* app/gimpdrawable.[ch]
	* app/layer.[ch]: moved the "removed" signal from GimpChannel and
	GimpLayer to GimpDrawable.

	* app/gimpimage.[ch]: changed accordingly.

2001-01-14  Michael Natterer  <mitch@gimp.org>

	* app/docindex.c
	* app/fileops.c
	* app/gdisplay.c
	* app/gimpimage.[ch]:

	Removed the "has_filename" boolean from GimpImage:

	- to get the filename, ask for GimpObjects's name.
	- gimp_image_filename() returns the *display* filename (and will be
	  renamed to gimp_image_display_name() soon), i.e. returns
	  "Unnamed" if object->name == NULL.
	- no need any more to check if the filename is the "" string because
	  GimpImage overrides GimpObject's "name_changed" method and
	  sets the name to NULL if it was "".

2001-01-14  Sven Neumann  <sven@gimp.org>

	Merged fixes from gimp-1-2:

	* app/menus.c
	* app/plug-in.c: added some sanity checks for passed string pointers
	to various public functions in an attempt to fix bug #37622.

	* plug-ins/common/sharpen.c: applied a patch from Jerome Zago 
        <jzago@ifhamy.insa-lyon.fr> that fixes a longstanding bug in the
        sharpen filter which sometimes got the last line wrong. 
	Fixes bug #34155.
	
2001-01-14  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h
	* app/brush_edit.c
	* app/brush_select.c
	* app/brushes_cmds.c
	* app/channel.h
	* app/colormap_dialog.c
	* app/datafiles.[ch]
	* app/devices.c
	* app/docindex.c
	* app/fileops.c
	* app/gdisplay.c
	* app/gimage.c
	* app/gimpbrush.[ch]
	* app/gimpbrushgenerated.[ch]
	* app/gimpbrushlist.[ch]
	* app/gimpbrushpipe.[ch]
	* app/gimpcontext.[ch]
	* app/gimpcontextpreview.c
	* app/gimpdnd.c
	* app/gimpdrawable.h
	* app/gimpimage.[ch]
	* app/gimplist.h
	* app/gimpobject.h
	* app/gimpset.[ch]
	* app/gradient.c
	* app/info_window.c
	* app/layer.[ch]
	* app/module_db.c
	* app/palette.[ch]
	* app/patterns.[ch]
	* app/plug_in.[ch]
	* app/undo_history.c
	* app/xcf.c
	* tools/pdbgen/pdb/brushes.pdb

	- Removed the "name" argument from all objects and use
	  GimpObject's name.
	- Use the same code in all "uniquefy name" functions (this
	  functionality will be a method of the "GimpContainer" class).
	- Renamed the parent instances of all objects to "parent instance".
	- Added missing instance and class cast macros.
	- Changed some "gchar *" to "const gchar *" parameters.

2001-01-12  Sven Neumann  <sven@gimp.org>

	* TODO.xml: updated status

	* app/gimpcontext.c: added temporary functions to make it compile

	* app/pixel_processor.c: include tile.h when ENABLE_MP is defined

	* libgimp/gimpcolor.[ch]: added more GimpRGB functions

	* plug-ins/common/aa.c: merged fix from gimp-1-2
	
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/grid.c: use GimpRGB whereever possible. 
	Still work in progress.

2001-01-11  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolorarea.c: added antialiasing

2001-01-11  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolorbutton.[ch]: allow width/height of the color_area
	to be set to negative values so the GimpColorButton can be set up
	resizeable.
	
2001-01-11  Sven Neumann  <sven@gimp.org>

	* README: changed for gimp-1.3

2001-01-11  Valek Filippov  <frob@df.ru>

	* plug-ins/script-fu.c: changed INIT_I18N() to INIT_I18N_UI().

2001-01-10  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolorarea.[ch]: finished new GimpColorArea widget which
	uses GimpRGB and handles DND and alpha channel.

	* libgimp/gimpcolorbutton.[ch]: use GimpColorArea. The API of the 
	GimpColorButton has changed!

	* libgimp/gimpwidgets.[ch]: added temporary function 
	gimp_color_update_uchar() to ease migration of plug-ins to GimpRGB. 
	This function will go away.
	
	* plug-ins/Lighting/lighting_main.h
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_main.h
	* plug-ins/MapObject/mapobject_ui.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/grid.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/nova.c
	* plug-ins/common/papertile.c
	* plug-ins/common/sinus.c
	* plug-ins/gdyntext/gdyntext_ui.c
	* plug-ins/ifscompose/ifscompose.[ch]
	* plug-ins/ifscompose/ifscompose_storage.c
	* plug-ins/ifscompose/ifscompose_utils.c
	* plug-ins/script-fu/script-fu-scripts.c: use new GimpColorArea and
	GimpColorButton. Started to introduce GimpRGB color type. This change
	might have broken some of these plug-ins. This is work in progress.

	* libgimp/Makefile.am: added GimpColorArea and GimpColorButton to 
	libgimpi.
	
	* app/gimpcontext.[ch]: added gimp_palette_get_[fore|back]ground() 
	functions so the app can link against libgimp/gimpcolorbutton.o.
	These functions will go away.

	* app/gimpdnd.c: use a GimpColorArea for DND
	
2001-01-10  Michael Natterer  <mitch@gimp.org>

	* app/gimpdrawable.[ch]: removed the "name" parameter and use
	GimpObject's name instead.

	* app/channel.c
	* app/channel_ops.c
	* app/channels_dialog.c
	* app/drawable.h
	* app/gimpimage.c
	* app/interface.c
	* app/layer.c
	* app/layer_select.c
	* app/layers_dialog.c
	* app/qmask.c
	* app/undo.c
	* app/xcf.c: changed accordingly, cleanup.

2001-01-10  Michael Natterer  <mitch@gimp.org>

	* app/gimpbrushlist.c
	* app/gimpdrawable.c: forgot to remove #include "gimpsignal.h"

	* app/gimpobject.[ch]: added a "name" argument (not used yet).

2001-01-10  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/gimpsignal.[ch]: removed.
	* app/gimpmarshal.[ch]: added.

	* app/channel.[ch]
	* app/gimpbrush.[ch]
	* app/gimpbrushgenerated.c
	* app/gimpbrushlist.[ch]
	* app/gimpbrushpipe.[ch]
	* app/gimpcontext.c
	* app/gimpdrawable.c
	* app/gimpimage.c
	* app/gimplist.[ch]
	* app/gimpobject.[ch]
	* app/gimpset.[ch]
	* app/layer.c
	* app/layers_dialog.c
	* app/module_db.c
	* app/parasitelist.[ch]: removed gimp_signal_new() and
	GIMP_TYPE_INIT(). Fixed lots of object related uglyness.

2001-01-09  Sven Neumann  <sven@gimp.org>

	Merged fix from gimp-1-2:
	
	* app/gimpbrushlist.c
	* app/gradient.c
	* app/palette.c
	* app/patterns.c: check for NULL pointers before doing strcmp on
	default names. The default names for brushes, patterns, ... can 
	be NULL if they were not set in a readable gimprc file.

	* app/gimprc.c: warn the user if the systemwide gimprc couldn't be
	read.

2001-01-09  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.c: Show the "Alpha" scale only when needed.

	* libgimp/gimpcolorarea.[ch]: fixed typos.

2001-01-09  Sven Neumann  <sven@gimp.org>

	* TODO.xml: add more stuff

2001-01-09  Sven Neumann  <sven@gimp.org>

	* app/apptypes.h
	* app/brush_select_cmds.c
	* app/brushes_cmds.c
	* app/layer_cmds.c
	* app/layers_dialog.c
	* app/paint_funcs.c
	* app/tool_options.c
	* app/tools_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/script-fu/script-fu-constants.c
	* tools/pdbgen/enums.pl: applied patch from Oliver Lavery 
	<oliver@zeroknowledge.com> that adds new blending modes 
	(Dodge/Burn/Hardlight). Please play with these new modes 
	and check if they are useful and well-implemented.

2001-01-09  Sven Neumann  <sven@gimp.org>

	* HACKING: added notice about autogenerated files.

2001-01-09  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpcolorarea.[ch]: added a new simple widget which
	provides a color preview area capable of DND. It will be used 
	in the GimpColorButton and in the color_selectors.

	* libgimp/Makefile.am
	* libgimp/gimpui.h
	* libgimp/gimpuitypes.h: include the new files

	* libgimp/gimpcolor.[ch]: use proper names instead of abbreviations

	* app/asupsample.c
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/Lighting/lighting_shade.c
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_shade.c
	* plug-ins/libgck/gck/gckcolor.c: changed accordingly

2001-01-09  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.[ch]
	* app/color_select.c: moved the scales and the toggle butttons out
	of the notebook. Added an "Aplha" scale (the opacity is not yet
	shown in the color area). Removed the ColorNotebook structure from
	the header.

	* app/color_area.c: the ColorNotebook struct is no longer public.

	* libgimp/gimpcolorselector.h
	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: changed the ColorSelector module
	interface again: Pass H, S, V, R, G, B and A in all functions
	and callbacks. Added a "set_channel" method because the channel
	toggles are outside the notebook now. This needs more work...

2001-01-08  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.[ch]
	* app/color_select.c: moved the "old" and "new" color areas from the
	notebook to the action_area.

	* TODO.xml: updated.

	* app/color_area.c
	* app/color_panel.c
	* app/colormap_dialog.c
	* app/palette.c
	* libgimp/gimpcolorselector.h
	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: removed the "set_current" parameter all
	over the place because it was always TRUE and not used in the modules
	at all.

2001-01-08  Michael Natterer  <mitch@gimp.org>

	* app/color_notebook.c
	* app/color_select.c
	* libgimp/gimpcolorselector.h: more cleanup before chopping it up.

2001-01-08  Michael Natterer  <mitch@gimp.org>

	Removed GCG:

	* app/colormap_dialog.gc
	* app/colormap_dialog.i.[ch]
	* app/colormap_dialog.p.h
	* app/colormap_dialog.t.h
	* app/gimp.gh
	* tools/gcg/*: removed.

	* app/colormap_dialog.[ch]: moved all the colormap_dialog stuff
	here and cleaned up the autogenerated code.

	* autogen.sh
	* configure.in
	* app/Makefile.am
	* app/app_procs.c
	* app/apptypes.h
	* app/color_notebook.h
	* app/commands.c
	* app/gimpset.h
	* app/interface.c
	* po/POTFILES.in
	* tools/Makefile.am: changed accordingly, cleanup.

	* libgimp/gimpunitmenu.c: s/class/klass/

2001-01-07  Michael Natterer  <mitch@gimp.org>

	* app/by_color_select.c
	* app/channels_dialog.c
	* app/color_area.c
	* app/color_notebook.[ch]
	* app/color_panel.[ch]
	* app/color_picker.c
	* app/color_select.c
	* app/colormap_dialog.i.c
	* app/devices.c
	* app/disp_callbacks.[ch]
	* app/gimpdnd.[ch]
	* app/palette.c
	* app/qmask.c

	* libgimp/gimpcolorselector.h

	* modules/colorsel_gtk.c
	* modules/colorsel_triangle.c
	* modules/colorsel_water.c: made the color_notebook, the color_area
	and DND speak in terms of RGBA instead of RGB. The alpha value is
	not used yet, only the API changed. Everything should work exactly
	as before.

2001-01-07  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: add "Cleanup GIMP's color selectors".

2001-01-07  Michael Natterer  <mitch@gimp.org>

	* app/bezier_select.c
	* app/bezier_selectP.h: removed the obscure unused "extend" variable
	from the Bezier Tool structure.

2001-01-07  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: added an item to optionally change the image window's
	background.

	* app/preferences_dialog.c: "Disable Tearoff Menus" was not saved
	to disk.

2001-01-04  Asbjorn Pettersen  <asbjornP@dualog.no>

	* modules/gimpmodregister.h: add #include <libgimp/gimptypes.h>
	* plug-ins/common/bz2.c (load_image): fix bug loading bz2 files (OS/2)

2001-01-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/title-header.scm: merged fix from 1.2

2001-01-03  Michael Natterer  <mitch@gimp.org>

	* app/levels.c: reverted the behaviour of the "Reset" button back
	to resetting the current channel only. Resetting all channels was
	broken and IMHO cannot work the way it was implemented.

2001-01-03  Michael Natterer  <mitch@gimp.org>

	* app/plug_in_cmds.c
	* app/procedural_db_cmds.c
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/app.pl: conditionally include <regex.h> or
	"regexrepl.h", depending on HAVE_GLIBC_REGEX.

2001-01-03  Daniel Egger  <egger@suse.de>

	* app/plug_in_cmds.c:
	* app/procedural_db_cmds.c:
	* plug-ins/script-fu/Makefile.am:
	* plug-ins/script-fu/interp_regex.c:
	* plug-ins/script-fu/regexrepl.c: Conditionally compile
	regex if not available in glibc.
	
	* plug-ins/script-fu/regex.c:
	* plug-ins/script-fu/regex.h: Renamed files to regexrepl.[ch].

2001-01-03  Daniel Egger  <egger@suse.de>

	* configure.in: Extended the glibc regexp check and enabled
	substitution for Makefiles.
	
	* app/Makefile.am: Compile regexp only if not in glibc.
	
	* app/plug_in_cmds.c: 
	* app/procedural_db_cmds.c:
	* app/regexrepl.c: Include the correct local headerfile 
	if no new glibc with regexp is available.
	
	* app/regex.c:
	* app/regex.h: Moved into regexprepl.[ch] to avoid nameclashes. 

2001-01-02  Daniel Egger  <egger@suse.de>

	* acconfig.h:
	* configure.in: Added a check for a glibc compliant
	regex implementation.

2001-01-02  Simon Budig  <simon@gimp.org>

	* app/paint_core.c: use floor() before casting to gint when 
	calculating the current brush coordinates. Fixes the jagged brush 
	stroke when stroking a path that leaves the image at the top or left
	edge (bug #6043).
	
2001-01-02  Daniel Egger  <egger@suse.de>

	* app/clone.c:
	* app/gimpimage.c:
	* app/temp_buf.c: Use the new _clear function and more cleanups.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/temp_buf.[ch]: temp_buf_data_clear(): the temp_buf's size is
	(width * height * bytes). Cleanups.

	* app/fileops.c: removed a debugging g_print().

2001-01-02  Daniel Egger  <egger@suse.de>

	* app/temp_buf.c:
	* app/temp_buf.h: Add a new function "temp_buf_data_clear" to
	get a nulled chunk of memory.
	
	* app/iscissors.c: Use it here instead of two expensive for
	loops. Clean up the source a little.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/bezier_select.c
	* app/bezier_selectP.h
	* app/selection_options.h: moved the integer "extend" variable from
	SelectionOptions to the BezierSelect structure because it does not
	have a UI widget. Also initialize it with "0" (was used
	uninitialized before). I have no idea what it does.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/selection_options.h
	* app/tool_options.c: made a correct tool toption out of
	"Interactive" (added a default value and the "Reset" function,
	set unused pointers to NULL).

	* app/iscissors.c: fixed indentation and spacing.

2001-01-02  Daniel Egger  <egger@suse.de>

	* app/iscissors.c:
	* app/selection_options.h:
	* app/tool_options.c: Applied patch by laramieleavitt@onetel.net.uk
	to add an interactive update to the iscissors tool.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/gimphelp.c (gimp_idle_help): s/welcome.html/introduction.html/.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/gimprc.[ch]
	* app/menus.[ch]
	* app/preferences_dialog.c: added a preferences option to disable
	tearoff menus. Cleanup in preferences.

	* TODO.xml: done.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/commands.c: some nicer prototypes.

	* app/fileops.c: oops, forgot to gtk_widget_show() the open_options.

2001-01-02  Michael Natterer  <mitch@gimp.org>

	* app/commands.[ch]
	* app/fileops.[ch]
	* app/gdisplay.c
	* app/menus.c: Implemented "Save a Copy as..." which saves the image
	without changing it's filename.

	* app/layers_dialogP.h: export layers_dialog_layer_merge_query()
	here instead of defining it in commands.c

	* TODO.xml: mark this entry as done :)

2001-01-01  Michael Natterer  <mitch@gimp.org>

	* TODO.xml: added a TODO item for "Save a Copy..."

2001-01-01  Michael Natterer  <mitch@gimp.org>

	* plug-ins/libgck/gck/gck.h
	* plug-ins/libgck/gck/gckcolor.c: removed the GckRGB color type
	and all it's functions.

	* libgimp/Makefile.am
	* libgimp/gimpcolor.[ch]: new files containing the new GimpRGB color
	type and assorted functions.

	* libgimp/gimpcolorspace.[ch]: colorspace conversion routines for
	the new GimpRGB type. Also taken from LibGCK.

	* libgimp/gimp.h
	* libgimp/gimptypes.h: #include "gimpcolor.h". It's ugly to include
	it in both files but unavoidable to follow our new "*.c" file include
	policy. This will go away as libgimp will be chopped up into pieces
	anyway.

	* app/apptypes.h
	* app/asupsample.[ch]
	* app/blend.c
	* app/color_transfer.h
	* app/gradient_header.h: removed "color_t" and use GimpRGB instead.

	* plug-ins/Lighting/lighting_apply.c
	* plug-ins/Lighting/lighting_image.c
	* plug-ins/Lighting/lighting_image.h
	* plug-ins/Lighting/lighting_main.c
	* plug-ins/Lighting/lighting_main.h
	* plug-ins/Lighting/lighting_preview.c
	* plug-ins/Lighting/lighting_shade.c
	* plug-ins/Lighting/lighting_shade.h
	* plug-ins/MapObject/mapobject_apply.c
	* plug-ins/MapObject/mapobject_image.c
	* plug-ins/MapObject/mapobject_image.h
	* plug-ins/MapObject/mapobject_main.c
	* plug-ins/MapObject/mapobject_main.h
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_shade.c
	* plug-ins/MapObject/mapobject_shade.h
	* modules/colorsel_triangle.c: s/GckRGB/GimpRGB/g

	* plug-ins/gdyntext/gdyntextcompat.h: check also for GIMP's minor
	version when deciding if to add a missing PDB wrapper.
	(All this compat cruft including libgimp/gimpcompat.h should go
	away ASAP)

2000-12-31  Michael Natterer  <mitch@gimp.org>

	More preparation for LibGCK removal:

	* libgimp/gimpcolorspace.[ch]: added a "_int" suffix to all functions
	operating on 3 gint pointers, just like the gdouble functions have
	a "_double" suffix.

	* app/color_balance.c
	* app/hue_saturation.c
	* app/paint_funcs.c
	* modules/colorsel_triangle.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/vinvert.c
	* plug-ins/gflare/gflare.c: changed accordingly.

2000-12-31  Sven Neumann  <sven@gimp.org>
            Simon Budig <simon@gimp.org>
	
	* app/gimpbrush.c
	* plug-ins/common/gih.c: explicitely cast offset to (off_t) when 
	seeking back. Should fix the problems reading grayscale BrushPipes 
	on IRIX.

2000-12-31  Michael Natterer  <mitch@gimp.org>

	* app/apptypes.h: cleaned up a bit.

	* app/asupsample.[ch]
	* app/blend.[ch]
	* app/channel.h
	* app/gimpprogress.[ch]
	* app/layer.h
	* app/perspective_tool.c
	* app/plug_in.h
	* app/rotate_tool.c
	* app/scale_tool.c
	* app/shear_tool.c
	* app/transform_core.[ch]: s/gimp_progress/GimpProgress/g and some
	changes related to the apptypes.h cleanup.

2000-12-31  Michael Natterer  <mitch@gimp.org>

	* app/airbrush.[ch]
	* app/bezier_select.c
	* app/bezier_selectP.h
	* app/blend.[ch]
	* app/boundary.h
	* app/brightness_contrast.[ch]
	* app/bucket_fill.c
	* app/by_color_select.c
	* app/clone.[ch]
	* app/color_balance.c
	* app/color_picker.c
	* app/commands.c
	* app/convolve.[ch]
	* app/crop.c
	* app/crop.h
	* app/curves.c
	* app/dodgeburn.[ch]
	* app/edit_selection.[ch]
	* app/ellipse_select.c
	* app/eraser.[ch]
	* app/flip_tool.[ch]
	* app/free_select.[ch]
	* app/fuzzy_select.[ch]
	* app/gdisplay.c
	* app/gimage.c
	* app/histogram_tool.[ch]
	* app/hue_saturation.[ch]
	* app/image_map.[ch]
	* app/ink.[ch]
	* app/iscissors.c
	* app/levels.c
	* app/magnify.[ch]
	* app/move.c
	* app/nav_window.[ch]
	* app/paint_core.[ch]
	* app/paintbrush.[ch]
	* app/path_bezier.[ch]
	* app/path_tool.c
	* app/pencil.[ch]
	* app/perspective_tool.[ch]
	* app/posterize.c
	* app/rect_select.[ch]
	* app/rotate_tool.[ch]
	* app/scale_tool.[ch]
	* app/selection.[ch]
	* app/shear_tool.[ch]
	* app/smudge.[ch]
	* app/text_tool.[ch]
	* app/threshold.c
	* app/tools.[ch]
	* app/transform_core.[ch]: removed the "gdisp_ptr" madness and
	useless casts all over the place. Introduced a "PaintState" enum
	instead of #define's. Various cleanups.

2000-12-30  Michael Natterer  <mitch@gimp.org>

	One more 17C3 commit ...

	* plug-ins/libgck/gck/gck.h
	* plug-ins/libgck/gck/gckcolor.c: removed unused stuff.

	* plug-ins/Lighting/lighting_apply.c
	* plug-ins/Lighting/lighting_image.[ch]
	* plug-ins/Lighting/lighting_main.c
	* plug-ins/Lighting/lighting_preview.[ch]
	* plug-ins/Lighting/lighting_shade.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/MapObject/mapobject_apply.c
	* plug-ins/MapObject/mapobject_image.[ch]
	* plug-ins/MapObject/mapobject_main.c
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_shade.[ch]
	* plug-ins/MapObject/mapobject_ui.c: cleanups in preparation for
	removal of LibGCK.

2000-12-30  Michael Natterer  <mitch@gimp.org>

	* app/gimage.[ch]: removed all the
	"typedef gimage_function gimp_image_function" stuff so we can clearly
	see what is really a GImage function.
	Removed gimage_get_ID(). Use pdb_id_to_image() instead.

	* app/airbrush.c
	* app/desaturate.c
	* app/disp_callbacks.c
	* app/equalize.c
	* app/fileops.c
	* app/floating_sel.c
	* app/gdisplay_ops.c
	* app/gimpdrawable.c
	* app/global_edit.c
	* app/image_map.c
	* app/invert.c
	* app/lc_dialog.c
	* app/paths_dialog.c
	* app/plug_in.c
	* app/xcf.c

	* app/color_cmds.c
	* app/convert_cmds.c
	* app/image_cmds.c
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/image.pdb: changed accordingly.

2000-12-29  Sven Neumann  <sven@gimp.org>

	* TODO.xml: more things to do

2000-12-29  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am
	* app/channel_pvt.h
	* app/drawable_pvt.h
	* app/gdisplayF.h
	* app/gimpdrawableP.h
	* app/gimpimageP.h
	* app/layer_pvt.h
	* app/toolsF.h: removed these files.

	* app/apptypes.h
	* tools/pdbgen/enums.pl: added tons of opaque typedefs and enums.

	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/tools.pdb
	* app/*: chainsaw #include cleanup:

	- Never (never!!) include stuff in header files except where we
	  need access to structures' contents (like derived objects).
	- Added prototypes and proper formating in many files.
	- The #include order in *all* *.c files is as follows:

	#include "config.h"

	#include <system stuff>

	#include <gtk/gtk.h>

	#include "apptypes.h"

	#include "gimp stuff"

	#include "libgimp stuff"

	#include "libgimp/gimpintl.h"

	By following this scheme we can easily see a file's dependencies
	from it's #include's and can grep for the inclusion to find out
	where a file is used.

	* tools/pdbgen/app.pl: changed to follow the include scheme above.

	* libgimp/Makefile.am
	* libgimp/gimpuitypes.h: new file, included from libgimp/gimpui.h
	and from app/apptypes.h.

	* libgimp/gimpcolorbutton.[ch]
	* libgimp/gimpdialog.[ch]
	* libgimp/gimphelpui.[ch]
	* libgimp/gimpparasite.[ch]
	* libgimp/gimppatheditor.[ch]
	* libgimp/gimpprotocol.c
	* libgimp/gimpquerybox.[ch]
	* libgimp/gimpsizeentry.[ch]
	* libgimp/gimptypes.h
	* libgimp/gimpui.h
	* libgimp/gimpunit.h
	* libgimp/gimpunitmenu.[ch]
	* libgimp/gimpwidgets.[ch]: changed accordingly.

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/gdyntext/message_window.c
	* plug-ins/imagemap/imap_default_dialog.c
	* plug-ins/imagemap/imap_file.c: these files used to include
	"libgimp/gimpui.h" without including "libgimp/gimp.h". This is
	no longer possible because the libgimpui headers don't include
	"libgimp/gimpunit.h" any more.

2000-12-29  Asbjorn Pettersen  <asbjornP@dualog.no>

	* app/module_db.c: OS/2 fix. remove gimp_color_display_register(),,

2000-12-29  Simon Budig  <simon@gimp.org>

	* modules/colorsel_triangle.c   Fixed the same 16->8bit conversion
	bug as in gimp-1-2 and removed duplicated code.

2000-12-28  Simon Budig  <simon@gimp.org>

	* gimp_splash.ppm     A new splash...
	* gimp1_2_splash.ppm  A new file for the old splash

	* modules/colorsel_triangle.c   Fixed a warning.
	
2000-12-28  Simon Budig  <simon@gimp.org>

	* modules/colorsel_triangle.c
	Cleanup, indentation madness, first steps towards a one-click
	color-selector.
	
2000-12-28  Sven Neumann  <sven@gimp.org>

	* app/channel.c
	* app/layer.c: use gtk_object_sink() instead of gtk_object_unref()
	when deleting a layer or channel since only floating objects should
	be destroyed this way. A layer or channel that has been attached
	to an image shall never be deleted.
	
	* app/layer_cmds.c
	* libgimp/gimplayer_pdb.c
	* tools/pdbgen/pdb/layer.pdb: reenabled the gimp_layer_delete() PDB
	function since it might be useful under rare circumstances.
	
2000-12-28  Sven Neumann  <sven@gimp.org>

	* app/commands.c
	* app/layer_select.[ch]: small new feature: display a layer preview
	popup when switching the active layer using PageUp/PageDown. Could
	need a little tweaking...
	
2000-12-28  Michael Natterer  <mitch@gimp.org>

	* app/channel.[ch]
	* app/drawable.h
	* app/gimpdrawable.[ch]
	* app/gimpdrawableP.h
	* app/gimpimage.[ch]
	* app/gimpimageP.h
	* app/layer.[ch]
	* app/layer_pvt.h: started a major cleanup of all image/drawable
	files. Added tons of "const GimpImage *" declarations and properly
	formated the headers.

	* app/bezier_select.c
	* app/channels_dialog.c
	* app/crop.c
	* app/fileops.[ch]
	* app/fuzzy_select.c
	* app/gdisplay.c
	* app/layers_dialog.c
	* app/move.c
	* app/paint_funcs.[ch]
	* app/qmask.c
	* app/undo.c: changed accordingly plus the usual portion of coding
	style paranoia. This is not finished but Sven promised to buy me
	a beer if I commit now ;)

2000-12-28  Sven Neumann  <sven@gimp.org>

	* app/boundaryF.h
	* app/gdisplayP.h
	* app/gimplistP.h
	* app/gimplutP.h
	* app/gimpsetP.h
	* app/parasitelistP.h
	* app/pixel_regionP.h: removed these files

	* app/Makefile.am
	* app/apptypes.h
	* app/boundary.[ch]
	* app/floating_sel.h
	* app/gdisplay.c
	* app/gimplist.h
	* app/gimplut.[ch]
	* app/gimpset.[ch]
	* app/parasitelist.[ch]
	* app/pixel_processor.c
	* app/pixel_region.[ch]: moved structure definitions into the
	normal headers, various cleanups

2000-12-28  Sven Neumann  <sven@gimp.org>

	* app/channel_cmds.c
	* app/layer_cmds.c
	* libgimp/gimpchannel_pdb.c
	* libgimp/gimplayer_pdb.c
	* plug-ins/common/warp.c
	* plug-ins/gap/gap_exchange_image.c
	* plug-ins/gap/gap_range_ops.c
	* plug-ins/perl/examples/bricks
	* plug-ins/perl/examples/glowing_steel
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/layer.pdb:

	Two of the gimp-perl scripts used to call gimp_layer_delete() after
	gimp_image_remove_layer(). This will fail since the layer is already 
	scheduled for destruction by removing it from the associated image or
	by deleting that image. It is thus dangerous and superfluous to export
	this feature through the PDB. The gimp_layer_delete() is hereby
	obsolete and does nothing any longer. I have removed the code calling
	it from all over the place (it was commented out in almost all places).

	The PDB help for gimp_channel_delete() now explicetly tells the user 
	about the proper usage of the procedure.
	
2000-12-28  Michael Natterer  <mitch@gimp.org>

	* app/bezier_select.[ch]
	* app/bezier_selectP.h: massive cleanup (prototypes, indentation, ...)

2000-12-28  Michael Natterer  <mitch@gimp.org>

	* app/measure.c: cleanup, proper prototypes, ...

2000-12-27  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/csource.c: the size of the string holding the
	image data was one byte too short (we forgot the trailing '\0').
	Reported by <goswin.brederlow@student.uni-tuebingen.de>

2000-12-27  Sven Neumann  <sven@gimp.org>

	* TODO.xml
	* docs/make-todo: new files. TODO.xml is a first start on a roadmap
	towards gimp-1.4. All new features and major changes need to be 
	defined here to be accepted into the gimp-1.3 branch.

2000-12-27  Michael Natterer  <mitch@gimp.org>

	* app/gimpimage.c: gimp_image_merge_layers(): apply the layer mask
	only if layer->apply_mask is TRUE, cleanup.

2000-12-27  Simon Budig  <simon@gimp.org>

	* plug-ins/mosaic/mosaic.c
	* plug-ins/script-fu/scripts/textured-logo.scm
	Implemented a toggle to ask the user, if he wants to allow some
	tiles to be split in two pieces. This enables perfect hexagonal/
	squared/octagonal tiles. Changed the PDB-Interface and changed the
	script using this plug-in.

2000-12-27  Michael Natterer  <mitch@gimp.org>

	* app/gimage.h
	* app/gimpimage.[ch]: implemented gimp_image_get_layer_by_index(),
	small cleanups.

	* app/commands.c
	* app/layers_dialog.c: use the new function instead of accessing
	the layer list directly.

2000-12-27  Michael Natterer  <mitch@gimp.org>

	* app/layers_dialog.c: layers_dialog_scroll_index(): don't fiddle
	around with magic numbers when calculating the layer widget's
	height but simply ask one of them for it's allocation.  Fixes
	positioning when the preview is smaller than the layer widget list
	item.

2000-12-27  Tomas Ogren  <stric@ing.umu.se>

	* plug-ins/ifscompose/ifscompose_storage.c: Remove the last comma in
	  an enum, xlc barfs

Tue Dec 26 11:10:23 PST 2000 Manish Singh <yosh@gimp.org>

	* app/patterns.c: fix fd leak on loading

Sun Dec 24 23:18:32 PST 2000 Manish Singh <yosh@gimp.org>

	* Made 1.2.0 release

From d8ac5f01a5328fa13edd06b9e3b109b926b284e2 Mon Sep 17 00:00:00 2001
From: Bruno Lopes <brunvonlope@outlook.com>
Date: Sun, 7 Dec 2025 19:37:27 -0300
Subject: [PATCH] meson: Do not build ctx on MSVC

ctx is Unix-centric
---
 meson.build                     | 3 +--
 operations/external/meson.build | 1 -
 2 files changed, 1 insertion(+), 3 deletions(-)

diff --git a/meson.build b/meson.build
index 8bbd942..f4f8a8a 100644
--- a/meson.build
+++ b/meson.build
@@ -618,7 +618,6 @@ subdir('libs/rgbe')
 subdir('opencl')
 subdir('gegl')
 subdir('libs/npd')
-subdir('libs/ctx')
 
 # pkg-config file
 gegl_pub_deps = [
@@ -644,7 +643,7 @@ pkgconfig.generate(gegl_lib,
   subdirs: api_name,
 )
 
-gegl_dep = declare_dependency(link_with: [gegl_lib, gegl_ctx_lib],
+gegl_dep = declare_dependency(link_with: [gegl_lib],
   include_directories: geglInclude,
   dependencies: [gegl_pub_deps, libnpd],
   sources: g_ir.found() ? gegl_gir : [],
diff --git a/operations/external/meson.build b/operations/external/meson.build
index 64c84e4..6b13f8d 100644
--- a/operations/external/meson.build
+++ b/operations/external/meson.build
@@ -3,7 +3,6 @@ operations = [
   { 'name': 'ppm-load' },
   { 'name': 'ppm-save' },
   { 'name': 'npy-save' },
-  { 'name': 'vector-fill', 'deps': libgegl_ctx },
   { 'name': 'rgbe-load', 'deps': librgbe },
   { 'name': 'rgbe-save', 'deps': librgbe },
   { 'name': 'gif-load',  'deps': libnsgif },
-- 
2.49.0.windows.1

